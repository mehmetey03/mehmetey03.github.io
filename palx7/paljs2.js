//	Playerjs.com 17.76
//	13.10.2022 10:23:13
//	API - https://playerjs.com/docs/q=api

if (!window.pljssglobal) {
    var pljssglobal = [];
    var pljssglobalid
}
if (window['PlayerjsAsync']) {
    setTimeout(PlayerjsAsync, 1)
};

function Playerjs(options) {
    var o = {
        play: false,
        audiosrc: [],
        audioctx: [],
        playerid: 'uu8ldfofy9vm',
        default_w: 640,
        default_h: 360,
        version: '17.76',
        compilation: ['HLS', 'VASTP'],
        compilations: '',
        fullscreen: false,
        realfullscreen: false,
        nativecontrols: false,
        fullwheel: false,
        fullscreen_start: false,
        airplay: false,
        pipwebkit: false,
        ispipkit: false,
        u: '#1IPnQC3ncDA5aF2OmGMZ6ZaRNqURNqTZjZevmF2OMCBZMsejMC29jF3ZMsMZNqURNqURMpTnfEAvcZafOpTnkCBneEA4MsMZkrURKqTRNZURMpTneGdWbEAzlHTZ6qwNMCA5gFAW0EA9lZafMCAONEXVMpTnLZafOpTnfZaf4qTNMC2OgC2kLGdzLZafNpTnfEAvcHA50EAOQHXWPHXzbZafOpTnfEAvcF25NCBzQDwZ6qY0jZdrmFevPF2OJHXc0FXyMsejMF3nbDBZMsaVjZd9lZafOpTnLC3vgF24MsMn0EBvjDwZjZev5GXyMsMn0DBL0ZMNMGX9QEBvgF24MsMnMF3v0F20kFXzdHTZjZdrjEAriZafNpTnfCA5bZafNpTn0DBL0ZafMZMNMHdWPZafMHXc0FXyMpTnfEAvcZafOpTnfEAvcF25NFXW5ZafNpTnLFdckCBvgF24MsMnlF25cZMNMCdGMsaRjZdneCwZ6qT40pTnMD3SLDXvgFdGMsMZ2ZUCKrMR2ZMNMHXc0FXyMsMZMpTnkCBneEA4MsMZNZURKqQZKrayMpTnkCBneEA5NGd9aZafMqTRNZURKqxZMpTnfEAvcF253EAv0ETZ6qwNMEXcbDA9lH2cbHXLjEA1gHTZ6rURNpTnQEX93HXc0FXzNFXW5FXcQHTZ6qwNMG2LmH2DPF20ODdcjDwZ6qB0jZdrmFevPF2OJFXclDwZ6IPnmGdvcGMZ6rwNMF24MsaVjZev5GXyMsMnQEXWNDwZjZdWaHXcmFMZ6ZdOgFdyMpTnfZafQpTnPF3zlDXclDPZ6qTNMHPZ6qxRNpTnLZafOpTnLCdGMsMZNpauMpTnLFX9LDTZ6ZaRlrMZjZdWmHdzPZafMqTZjZdrmFX9PZafMDxuPrUV0ZMNMC29jF3nMDPZ6ZdraC2raCPZjZdrmFX9PFX9LDTZ6ZdraC2raCPZjZdrmFX9PF3DcGMZ6ZdDdDdDdDMZjZdn1DdDcGMZ6IPnmFMZ6qTNMC29jF3ZMsMndDdDdDdCMpTnLZafNpaz9pTnNF3rgHXcmFMZ6ZdrmFevPF2OQZMNMFAWPD2clZafMqTROrwR0qTRPqTZjZdLLFdvjDwZ6qwNMCdHNCAvbEA5eZafMrwRNZUyKqTZjZevgGTZ6qwNMEXcbDwZ6qwNMEXcbDA9lFXc2DwZ6qwNMDBLNCA5bZafMqP41ZMNMEXWlDXOcG2rLFXyMsMZOpaGMpTnfCA5bFXzaF2OmGMZ6Zdy0qauOrTZjZdLgDXzmFeDmFYzkDwZ6qB0jZdrmFevPF2OJGXOLIwZ6IPnmGdvcGMZ6qMNMF24MsaVjZdcaF24MsMZ8G3DeZYHgDYvftwGPqTGKEXzgD2L0twGPqTG#tXGKDdcjFT1PHAOctwHlF256DBnmnPS0GdWlG2DmGd09n3vPCA5QFXW0DwK1pTRQowG#tYSLHXKKDU0exxVOpau0raq0raZjrM4OrxG4qxZ1ZVNOpaV0qUV5qaqOpURlqxV2raC2raGKuQVlqUV0qQZ2sxZjqT4NrUq3rwRNpaK4rUG1sxCPpURKqT43qQC2sUZ2swNNZVqNpaqQqQV3qQR4pURKqT4NqUq3qUV5qMNNpaqPsUVPrwRNpaRNqQGNqxbPpURlrQZ5qxC2raGKxURjqT43qabOraC2rPSqqTNOqP4PrQR4qQqQZVNNpaRNqQGNqxbPpUVQpaZ3qUKQqQqKuQRlqURQrQROsxZjqxqlraGOsUG1ZURlqQqQqxGQqUKjqxuKqT43qQC2sUZ2swNOrTSUqT44sUK0raV1rTNOrTROpaROrUqPrabPpUVQpab0sUb1sUqKqw4OrxVPsxKNsTNOqP44rQCNrUV3ZVNOqw40rUCQrUCPpUGlsUuPqxK3rwSUqxVlrabNraGQqwN3paC0qxC2raGKqxVlsUu2qxyQsTN3paqQsxR2qayKqxVlsUu2qxyQsTN3ZVqOqw44rUCOrxq4pUClraCNsxq3rwROqw42sxR2rQqOpUClqQCOsxG5qxGKqxVlrUu2qQu2qMN2paV1rQKOqayKxUVOpau0raq0raZjrM4OrxG4qxZ1ZWfeZXDgFXN9nPrdDdDdDdCeBT8#tWNmDQ48BT9QHdG#ZMNMEArmFaZMsMZ8G3DeZYHgDYvftwGPqTGKEXzgD2L0twGPqTG#tXGKDdcjFU0eZQRNqURNqTGKHYnLFerdF3nktwH0GdWlG2OLHXyfrTNKqPbetaONCBvfZXu9n003paGNrQC5qaZ4pURlrQG3rQG4qUC3ZVN3paGNrQC5qaZ4pUVQpaZPqaZPqaZKuQGlrQR3rabPqaKjqxqlrayOrQG3ZUKlqUbOqxZNqaVjqxuKsT41rauOqUZ1qPNOrTSqqxVlqxqQqQqQqPNOrTSUqxVlraR2qQV1rMNOrTROqw45sUb3rUq1pUVQpaC1qxG3rPROqw45sUb3rUq1pUVQpaZPqaZPqaZKxUVOpab4sxG0qQyjqT43rQG3rQG3rQKKuQVOpab4sxG0qQyjqT4QrUKPqaZ5rQZKqxVlraR2qQV1rMNNZUVOpaVQqQqQqQqjqTSqsT41rauOqUZ1qPNNZVq4paR5qxVPqUZOpURKrP43qUG2sxZPsTNNpaq0sUZPqab3qMR3paGNrQC5qaZ4pURlrQG3rQG3rQG4ZWfKxxqlrUZ1rauOqUVjqxuKxURlsUy2rUVNqayQpUV0ZVqNpaq4qQuPrQbQqwNOrTRNpUVQpaC1qxG3rPRNpUVQpaZPqaZPqaZKxURjqT43rQG3rQG5qxqKuQRjqT4QrUKPqaZ5rQZKqT4QsUq0qaG5qQVjqTRNpaK1rauOqUZ1qPNNZVNQpauPrxC0qxROpURKuQqlsUb4raZQqQujqTR0paZ4qaR1qxZ3pURlqQu4qaZPsxGPZUulqaKPqUyOqaGjqT43rQG3rQG3rQKKxUulqaKPqUyOqaGjqxqlqaZPqaZPqMSUrT4PsUZNrxVPrPNOqP42rxV3rQGKqP44sxK2qaqQrTNOrTRQpauPrxC0qxROpUV0ZWfeZXDgFXN9nPrdDdDdDdCeBT8#tWNmDQ48BT9QHdG#ZMNMEArmFaqMsMZ8G3DeZYHgDYvftwGPqTGKEXzgD2L0twGPqTG#tXGKHYnLFerdF3nktwH0GdWlG2OLHXyfqMNKqPbetaONCBvfZXu9n00OrMN3paVQraCOqxqPZVNOrMN3paVNsxV2sxu1ZVNOrw4PqUKOrQK1pUGlqxR5qxC5rUyKxUV0paZ3rxR5qPN3paVNsxV2sxu1ZVqOrT4PrQyNsxqjqP4OsxbOqaCPrwROqw4NraqOsxGjqTR3paVQrQy0rau1pURKuQqlqaVOsUb1sxVjqTRNpUqlqxb5qxZ2qayKqTN3paVNsxV2sxu1ZVqNpUVOpaROsxZOqaCKqP4PqxV4sxy5qwNOrT4PqxKQqQK5ZUGlqxq3rxu2rUyjqxulqaV4qQq4swSqrP4OqQG1rUC0rwNOqM40rUVNrUC1ZVq0paV5qQqNsUy1pUVPpau0qxR0rayKqw43sUuQsUC2qMNOqT4NrUV3qUV4ZUVlrQK0qQK2raZjrP4OqUbOrab0rwSUqw43sUuQsUC2qMN0paV3raCQrQR1ZUulqxbQqQR4rxyjqw43rQGPsxZQrMR3paVQrQy0rau1pUVlrQG3qabPqQCKuQVNpaR4qxG4rUujqw43rQGPsxZQrMROqM40sxR3qUCQpUulqxG2raq3qUyKqxZlrUbNrQR2qPN3paVNsxV2sxu1ZVNOqT42rUu1qxC3pUGlqxR5qxC5rUyKxUVQpaq4qaK5sxCjqxVlrxyPrURNrTSqqxCjrP4OqQC2qxVQqMSEnPSdEAOjtwGaDdDdDdDdnQ48BT9NCBvftaOGp2G#tWNmG3DetMZjZdWaHXcmFMZ6ZeSjCBbMpTnLC3vgF24PZafMGXW1G2yMpTn0IBScZafMG3DeZMNMG2rLFXyMsMZQZMNMG2rLFXzmHdzPZafMqP4PZMNMFAWPD2clZafMqTRNZURKqTZjZeSmG2c0EA9lZafMC2zlHXzPZMNMEXcbDwZ6qTNMEArmFerPDBSjCBbMsaRjZdWlEA1LHXcmFMZ6Zd5mFdyMJwNMC29lHYnmFW9kHBvcZag7Zd9PDXzPZaf2pTnmFMZ6qwNMEArmFMZ6ZaOQHdGKH2cbHXK9nQZNnPSfDAceEYu9nQZNnQ48DPSdEAOjtwGaqURNqURNnPS0GdWlG2DmGd09n3vPCA5QFXW0DwKQpTRPowG#tYSmFYceF24KDdcjFT1PHAOctwHlF256DBnmnPSNF2clHYq9nQKlsUKOrQK0qdykqxCKrT4QrQu2ZUKlsUKOrQK0qdykqxCKqxRlraZ1qQbKqP4OqURPswROqT42qayQswR3paG0qxuQZUV1ZUGlrQu0qxbKqTRQpaVNqaq3ZUulqQG0raVKqw43rQCQrxC4rXykqxyKrT4QrQu2qwROpaG3raq1raK0Dw0OrwR0paq3rUCeZXDgFXN9nPrdDdDdDdCeBT8#tYSLHXKKDU0exxVNpau0qxC3pUqlraZOsUyKuQVNpaV3rUR1pUqlqQV0qxbKsw43rUuQrTNQpaqOrUV5ZUblrUG4qUKjqP42qaq0qPSUsw4PqxZ1qwNQpabQqaC4ZUblqaVPrxVjrT40qQqQqMR5pau3sxu0pUulrQuQqQyKxUblrUG5rUujrT43rUV3sTSUqxRlqUC3qxqjrw40qayOqMROqT40qab0qwN2paq2qaq0ZUVNpauPsxuOpUGlrURQsxCKuQVNpauPsxuOpUKlrUu0rQbKqxRlqUC3sUVjsw4QrQK4rwR5pau4qUKjqxRlqUCPqxbKuQblqaVPrwNOqT4Qrab4rwR5paZOqayjqxRlsUGNrUbKsw40rQb0rTNOqw4OsUVQqwSUsw42qxZPqPNOqw4QqQy1rTR5paG4ray3pUVOpauOqQR0ZUblsxCNswNOqw40qxqNrTSUqxRlqxq1sxVjqxVlrUVQqUuKqxRlqQVNqaujqxVlqQq1rxuKqxRlrUuQqUqjqxVlqxKOqQVKuQVOpaZ3rxV5pUVNpaZOrauOZUVOpaG5qxq4pUKlsUG1sUqKqxVlrQbNrPN3pauNqQb2ZVqOqw43sxVQsTN1pabPsUbPZUVOpaZ3qQV1pUulrxK2rQCKqxRlrUuOraGjqP42qaV4rMSqqxRlrUuOraGjqP42qaV4rwSEnPSgDU0eGXgQB3DmFYzkDz9cFXzkDA50qwGKDdcjFU0eZ2DdDdDdDMHGpQ48GXW0ETSbtwHrqxVlsxb0qxqjqw44raZ3sTSUqxVlrQZPsUbjqM4OrQZ1rPROqw43qaZ4swNPpaC3rUK5ZUVOpab5rUVQpUZlsxKQqUbKuQVPpab5rQu3pUulqxqPrQVKqxqlraV2qUKjrw43qxuOqPROqP42qxCNsTN3pau2sUZ5ZVqOqP42qxCNsTN5paZPqUK1ZUVPpab5rQu3pUVNpaKNqxu5ZUVOpab5rxyPpUVOpab1qxbKuQVOpaGPrUZ3pUVPpaZ2qUK5ZUVOpaGPrUZ3pUVPpaG2qauQZUVOpab5rxyPpUVQpaR3qaZOZVqOqM4OqQR0rwNOqP4PqaC3qwROqM4QqUG2pUVQpaqNrUq1ZUVPpau4rxuQpUVQpaqNrUq1ZVqOqM42raZ1rMNOqP4QqUuQrwROqM44qQb3qwNOqP4PqaC3qwROqM45rQu2rTNOqP4NrQZPqwSUqxulqaZ1rabjqxVlraq4sxuKqxylqUROqQKjsw42rxq0rwROrwN3pau2sUZ5ZVqOrw4NqUR2swN1paZ4qxy0ZUV0paZPrwNQpaZ5rUu2ZUVPpab3qxK3pUVlsUCPrQKKuQVPpaC5sxbQpUVlrxyPsxbKqxZlqaCQqPNOpay1qab5ZUVOpab5rUVQpUVlsUCPrQKKxUVOpab5rUVQpUVlsUCPrQKKAMGKEAu9n3ShG192F2O1FAzJDAOcFAzlHUZeZXDgFXN9nPrdDdDdDdCeBT8#tWNmDQ48BT9QHdG#ZMNMEArmFaZMsMZ8G3DeZYHgDYvftwGPqTGKEXzgD2L0twGPqTG#tXGKDdcjFT1PHAOctwHlF256DBnmnPSdEAOjtwGaqURNqURNnPS0GdWlG2DmGd09n3vPCA5QFXW0DwKQpTRPowG#tYSmFYceF24KGX9gFevQtwG4paK4qxG4rUncpxV2ZUulqQG0rMR4paK4qxG4rUncpxV2ZUVNpaCPrxq5ZUqlqxRNqabKqxRlraZ1qQbKrP43rUV0qPROrwR3paG0rUV5ZURKqP4OqUZQrPR0paq3rUCOZUVlrQG2qQy2sUvcpxV1ZUulqQG0raVKqw43rQCQrxC4rXykqxyKrT4QrQu2nPSdEAOjtwGaDdDdDdDdn1NmtaONCBvfZXu9n00Oqw45qaC3rQC3pUClrau3rUu3sxVKxUblsUG5qQZ3qaCjrT41sxb5sxK0rPSqswN1pau3sxqPrxGQZVNOqw4NrUG0rUb0pUGlrxZ2rQG1qxGKxUbjsw41rQuPqau2qwSqsw44rQbQqaGPrMNOqT40rxq1rxV5ZVNOqw45qaC3rQC3pUKlrUR2qxRPrUqKxUVQpab3rUZPraVjqxRlrUyQrxyOswSqqxulsUyQrxyQrTN5pay3rUZPrUCOZVNOqM44qUCOqUujrP41qaC3rQyOrPSqqxulsUyQrxyQrTN1pau3sxqPrxGQZVNOqP45rQuPqaCOpUulrxb5sxb4rUGKxUVOpabPraG3raGjrM42rUG0rUG5qwSEnPSdEAOjtwGaDdDdDdDdn1NmtaOGp2G#tWNmG3DetMZjZdWaHXcmFMZ6Zd11HXyMpTnLC3vgF24PZafMHA5kHBvcZMNMHYcNDwZ6Zer2DPZjZd1LGdHgFMZ6ZaRKqTRQqTR1qTZjZeraCAOcZafMqw42ZMNMGX9QEBvgF24MsMnMF3v0F20kFXzdHTZjZd1LGdHgFeSPF2qMsMZNZURKqTR5ZMNMG2rLFXzmHdzPZafMqMn9pTnaF250Gd9jB3DmFYzkDwZ6IPnmGdvcGMZ6rPNMF24MsaVjZev5GXyMsMnQEXWNDwZjZdWaHXcmFMZ6ZeDmFYzkDwZjZdKMsaujZenmHA5bEA5eZafNpTnaHBr0F213EAv0ETZ6qwNMHPZ6qxRNpTnLZafOpTnLCdGMsMZNpaqMpTnLF3DcGMZ6ZaRMpTnaF2OmGMZ6Zdy0qauOrTZjZdrmFX9PCdGMsMndDdDdDdCMpTnaF2OmGd92DBZMsMndDdDdDdCMpTnfEAvcZafOpTnfEAvcF3z0FBz0DwZ6qwNMGd90CBvgF24MsMZPrQRMpTnMD3SLDXvgFdGMsMZOqMROqMROqMROqMZjZdneZafOpTnfCA5bFXyMsaVjZeSmG2c0EA9lZafMCd90HX9kpAOcDeuMpTnkCBneEA4MsMZNZURKqxqNZUV1ZMNMFAWPD2clGYnmCPZ6ZaRKqTRNZUbMpTnMD28MsMZNpaZMpTnfCA5bFXzaF2OmGMZ6Zdy0qauOrTZjZdLLFdvjDBraCAOcZafMqw42ZMNMCdHaF2OmGMZ6ZaqQqQqQqPn9pTnaF250Gd9jB3vgFAyMsejMF3nbDBZMsaKjZd9lZafOpTnLC3vgF24MsMn0EA1cZMNMHYcNDwZ6ZevcIYuMpTn0DBL0ZafMqUfNqTZjZdDmFevQEBgcZafOqTNMFAWPD2clZafMqTROrwR0qTRNZMNMC2OgC2jMsaRjZercGXWPCBvmGMZ6ZcNmZMNMEA52DBnQDBvgFAyMsaVjZerfF3HbHBnLHXcmFMZ6qTNMDYDPHXckDwZ6qY0jZdrmFevPF2OJDYzPCBvgF24MsejMF3nbDBZMsabjZd9lZafNpTnLC3vgF24MsMnbHBnLHXcmFMZjZev5GXyMsMn0DBL0ZMNMHXz4HTZ6ZcNmZUR6qURMpTndF250G2c6DwZ6qxRjZd1LGdHgFMZ6ZaRKqTRNZURMpTnaFXcaEPZ6qY0jZdrmFevPF2OJCezdDdzPZag7Zd9PDXzPZafOqTNMF24MsaVjZdcaF24MsMZ8DXc2ZXrjCBrQtwHjF2WbDBZfGdWlDTbetaOQHdGKC2OLG3q9n2rgGdr1FXWPoYnLFdugnPS2EAz3ud94twGPrwRPrwR1qTR1qTG#tXrgGdrjDwSaFXWQGQ0eGXW0ETLPCA5bowGKG3vPF2kctwGfC29jF3ZgnPSaIU0erxReZXr5twG1qTGKGa0eqaReZXDgFXN9n25mFdyeZYr0Gd9iDw13EAv0EU0eqMGKG3vPF2kcpA1gHXzPFXckEBu9nQVNn1NmtaOGp3r2DQ48BT9bEBC#JYO8pdOmCAvcGMLPCA5bowS7GX9QEBvgF246ZYncFXW0EBDcs21LGdHgFafKpxZ1GYKKqTRNZT0PrBS4s3HgDYvfsMR1qYS4s30lFX9LDXzPoYnLFdugsdncDd9PDwS7C29lHXzlHUfKnPG7DXcQGXOLIxfKCdOmC2j7GXWbDXclDP10F3R6ZUVNqTy7Jw5aEBnaHAOLGMLPCA5bowS7CA5gFAW0EA9lsMSPF3vLHXyfGdWlDTbKqeqKFXclDAWPZXclDdclEBvcs2LcEAHfHUfKqxRNnxk0GdWlG2DmGd0kF3ngD2clsMSaDA50DBZKC2zlHXzPs3HgDYvfsMROqURcs3SmG2c0EA9lsMSLCermFYz0Dxk0F3R6ZUR7Cd90HX9ksMRNs2OcDeu6ZUR7GdceEYu6ZUR7FAWPD2clsMSLHBvms30lGXW0ETLPCA5bowS7G3vPF2kcpAvLG2LLGenLIxfKqwNKqaRNs3r0Gd9iDw1bCBrfF2DdG2z0sMRNs2WlEA1LHXcmFafKDXWQETLPCA5bowROpazQZXzLG2ykEA4kF3z0ZXclDdclEBvcs31RE2z5DenLFAzQZYnmHXW0DwLPCA5bowS7qxRNnwS7HYnLFerdF3nksMSPF3vLHXyfqQCNDXzeoxk9JySiDBcdGdWkDBqKDXWQETLPCA5bowS7qTyKI3r0Gd9iDw1bCBrfCBnPCBb6ZUVjZUZNqUkQHYnmE2ykDXWQEX9dDercHUfKqUk9rxRcZYkQHYnmE2ykDXWQEXWPGdW5sMR4swNKqaRNs3r0Gd9iDw1bCBrfF2DdG2z0sMRkqQzNIUk9qxRNnwS7G3vPF2kcpAvLG2LLGenLIxfKsUbjZUZNqUkQHYnmE2ykDXWQEX9dDercHUfKpxVPrYS4s319ZMNMCAr0EA9lZafMCezdDdzPZMNMHYcNDwZ6ZdrQGPZjZeSmG2c0EA9lZafMC2zlHXzPZMNMG2rLFXyMsMZOpaZMpTnaFXcaEPZ6qTNMEXcbDwZ6qwNMFdcaFMZ6ZaRMpTnaF2OmGMZ6Zdy0qauOrTn9pTnaF250Gd9jB3rcHYvgFdHQZag7Zd9PDXzPZafOqwNMF24MsaRjZdcaF24MsMZ8G3DeZYHgDYvftwGPqTGKEXzgD2L0twGPqTG#tXGKHYnLFerdF3nktwH0GdWlG2OLHXyfqMNKqMbetaONCBvfZXu9n00OqM41qxG2qUq2pUV0pay5sxy5sUZKxUVOpaK5qxqPrUbjqxZlrUR4qUuPZVqOqM4NrQu4raZPpUVPpaZ0rQR4rxGKqxZlqau3qxuNqPNOqM4NrQu4rUZOZUVPpauNsxG1qQZjqxVlsUbNrxq0rPSqqxulraRNqxZ0rwNOqM41qxC2sUG4ZVqOrT44qQVOraRQpUVPpaV4qUZ4qUqKqxylqUZ5sxbPrTNOqw44qaZ5qaZQZUV1paZNrQbNqUVjqxVlrUyOsxR2rPSqqxqlrxG3rQK1sTN5paK3rUuQsxG4ZVqOqP42rxy4rQq5pUblrauPrayQqQKKqxqlrQZQrUb5sTN5pauNraK0qaqOZUVQpaG3qxG5rxqjsw4Oraq3rQK3rPSqqxylsxC4raRQqPN4paCOqQZ3rQZQZVqOrw45sUu3qxyQpUKlrUVNrUCNqQyKqxCjsT4PqUC4qQC1qwROrMN3pab5sxV5sUR5ZVqOrMN3paG5qxy1sxC4ZUV1pab4qQbNsUZjrP41sUK3qaZ2qMROrw45raK2qUqQpUGlqQK1sxV1sUZKxUVQpaG3qxG5rxqjrM44qQy0qxuPsTSUqxqlrQZPraKPrMN2pay5qaq1qUG0ZUVQpaC1rxR1raGjrM4QrxC1qab1sTROqP41rQG3sUy4pUClqxZ0rQuQqxKKxUV1paZNsUGNrQZjrT41rUGPsUCQrwSUqxylqUZ5sxbPrTN0paV3rQR1rQyPZUV0paKQqxV2qUqjqP44qxK5qxZ3rPROrT42qUROqau1pUqlrUKPrUK1qUKKxUVPpauNsxG1qQZjrT4OqUG4rUVQrwSUqxZlqau3sxu3rTNQpabPrUq0qUK0ZUVPpaR3rUK2qaZjqP43rxZOqUGQrPROqw44sxVQqau5pUqlrxbNqQq0ZVNOqM41qxG2qUq2pUVlqQb5rxK0sTSUqxZlqxKOqxZ4rMNOpaV2sxuOqaZ5ZUVOpaKPqaK5qxKjqT45rab4qUqNqQyKqxVlrUyOsUROsTNNpaG5qxb0qxR4sTSqsw44rQuNqxK2qMNPpauPqayQrxCKuQblrauPsxKPrQCjqM4QrUu0raqOrwR5pauNraqOrQZ5pUZlqaG3ray3rQyKsw4OraqPqxyOqwNPpaZPsUy2rUbOZVN4paCOqQuNqUZOpURlqUqOqQKNqaKPqPSUsT40qUb3qQy1rTNNpaROraR4sUy3qabKsT4PqUC4rQG5sTNNZUGlsxb5qxb3sxqjqTSUrP43sxV1qxG4sTNNZUGlrxK4rauNqxyjqT4NqxCNsUK1rQZ5ZUGlqQK1rQbPraKjqT4NqQVQsURPsUZQZVN2paKQrxV4qUG2pUZlqaZ4rxC0sxVKuQClrxbPqUC4rUKjqM4PrQG2rxG3rwR2paq1raZNqUR0pUZlqQu0rUCQqxyKrM4OqauQraGOrMNPpauPqayQrxCKxUulrxu2rxb0qUZjqT43sxV5rUVNsUKKuQulqxG2qabNsxyjqT45rQZPqQq5rQqKqP44qxK4sUV1qwNOpaV3qxROraVOZUqlrUKPqQK2qQyjqw40qUZNqUy2rwSqrT4OqUK2rayNrTNQpay5qaG0rUG2ZVqQpabPrxVPrQGQpUqlrQyQrQVOqxKKqP43rxZNraZ3qwNQpabPraG2qxC5ZUqlrxbOqUyQsxZjrT4OqUb0rUyOrMSqqw4Qsxb4ray0rTNQpau4qQZ5qaRQZVqOpaV2sUKPsxy4pUqlsUV5rQV5rQZKqT45rab5sxG0sxGjrT4OrQG4rau0rPRNpaG5qaR5sxK4rwN0pay0sUK5qUV2ZVNPpauPqQRPqxq2pUClqxZ2qQy3qUKKuQZlqQu1rQqNqaKjrM4QrxKOrUq0sTRPpaZ3sUVOrUu2pUClrxbQsxy0rxyKqM4PqabNqxV3rPN2paKQrQROsUR5ZVNNpaRQqxq4ray3rUCjrP4QsUG1qxb2qPSUqT4NqxCNsxV3sxK5pUGlrxbNqQq2rxZKqTN3paG5qQb2qUq1ZURjsT4NqUR4qUV5qwSUqTN4paZNrQC0qQu2ZURlqUV2qUbOrQb4swN4pauOqxZ1rQZOZURlqUqOqQK2rxG0rMN4paCOrUK4qxR1ZVNPpaZPsxROqxG3pUblqxC1qQKPrxbKuQZlqaG4qxV0rUCjsw40qUK0rUCOqMRPpaq0rxGQqUZ4pUblrau0qau3qxVKqM40qaqNqaVQrMN5paK3raR0qQCKxURlrQbPqUb5sUK1pUVOpau1qQyOqUyKuQRlsxC5sxb3rUb3pUVOpaKPqQGQsxqKqw4OraK4qab1sTNOqM4OsUV4sUuOZUVlqQb5sUC1rUujqxZlrxV4qQVOsTSqqP41sxVNrxq5qMNOqw44sxZOrxK2ZVqQpaG1qaR1qaCPpUVPpaR3rau2raVKqP45qayOqaG3qPNOqM4PrUG4sxZ2ZUulqxR4raC1qUujqxZlrUR5raC2ZVNQpau4qaq4raq1pUV0paCNqxZPqaZKuQqlsUV4sUKOrxVjqxulsUqOqQb0rPR0paV3rQR5sUR3pUV1paRQqUV5rPR0pay0rQuNqxVQpUV1paZNsUK2rxbKxUClqxZ1qxG0qaGjqxqlrxG4qaGOqPSUrM4QrxGNqUGOrwNOqP42rxCQrUq4ZUClrxbPsUG1rMNOqP43qaq5rxCOZUClsUq1sxK3sUGjqxqlrQGPqauPZVN3paq4ray5sxG5pUV1pab2sUCNsxCKuQGlrxK5rUy3qQyjqxylsxK0rQV4rTR3paG5qQVOqxbQpUV2ZUKlqURNsURPqUGjqxCKuQKlqaR4rUbPqaVjqxCKsT40qxVQqQb2rPNOrw45sUq5qxV0ZUKlraV1qUR0qQujqxylsxC4raR5rMSqsw4Orau4qxbPrTNOqP43rQZPrUZKuQblrUR3sxqOrxZjqxqlrQZQqxu5qMR5paC0rUy4raK5pUVQpaC1rxy0rabKsw44rQy2qaZ3rwNOqP41rQKPrQVQZVNOqw40rxq0qUCjqxylqaR4sUC1swSUqxVlsUZPsUbOsTNOrw4NqaK1rQqKqxZlqxKOqxV4rwNOrT44qab3sxR4ZUVPpayOrQCNqQCjqxulrxb5rxb4qMSqqxZlrxV3raRQrMNOrT41sxb1sxKPZWfKxxGlsxb5sxb0sxCjqxRlrQq1raV3qMSUrM40sUbNqaR0rTNOqT43qQy2qxGPZUylqaCQsUZ0qxCjsw41qxR2raC1rMR1paZ2qQKPrUV2pUGlsxb5sxb0sxCKuQylqaCQsUZ0qxCjrM40sUbQqaqQrwR2pau4sxRPqUu0pUylqaC1qxG5rayKrP45sxb5sxu5rMN1paZ2rxV3sxC1ZVq5payOqUb2sxu3pUylqaC1qxG5rayKqxRlrQq1qQy4rMN2pau4sxqQqQu0ZUVNpaGQrxq1sUCjrP45sxb5sxu5rMSUqxRlrQq1qQy4rMN5payOqUC1rau3ZUblrxVNsxy5qQbjqxRlrQq1raV3qMR3pab5sxb5rUb2pUVNpaGQrxCOrQZKAMGKDdcjFU0eZ2DdDdDdDMHGpQ48BT9etaOGp3r2DQ4MpTnLC3vgF24MsMnQDBv0EA5eGPZjZeSmG2c0EA9lZafMHX9NpAOcDeuMpTnkCBneEA4MsMZNZURKqTROrwZjZev5GXyMsMnQHdGMpTngC29lG2rmFX9PZafMpxVMJwNMC29lHYnmFW9NFXW5FXcQHTZ6IPnmGdvcGMZ6qxZjZd9lZafOpTngC29lZafMtYr2DPS3EAv0EU0eqaReZXLcEAHfHU0eqaRetaOeZYvPCA5QDd9PFx0eHYnLFerjCBvcoURjZUZgnQ48GdzaHTS4twGNnPS5twG3paqQqabPsUR3nPS3EAv0EU0eqxqlqQRNqUZOrwGKEXzgD2L0twG4paV5qaCPrxqPnPSdEAOjtwGaDdDdDdDdnQ48BT9PDAr0taONF2O5D29lZXDgFXNkGezjDx0eFd9lIdzPFPGKGX9gFevQtwGOrT44qaq5sUZQZUVOpay1qUR0sxbKqxClrQCQrxC4sTROqw41rxRNrUb5ZUV2paG2qQy2sUKKrT4Nrxy4rQG5rTRQpaG0qUCQqxR1ZUulqUy1sUG3sxuKqP43rUR2qQVNrwR1pab2rQu5qUyPZUV0paKPqQb4qaqKrw45raG0sxR1qMGKDdcjFU0eZ2DdDdDdDMG#tWNmGX9jIAHmFa48GX9jIAHmFMSdEAOjpBn1FXy9n25mFegcGd8eZYSmEA50GQ0eqxKlqUCNrUVQrwR3payNqUK4rQy2ZUZNZUGlrxRNsUK3rxCKqaRKqT43rxq3qUy4sxKKrP41sUVNqxKQrTRNpaG1qQGNrxK5sTR3pay4qxROsUq0ZUZlraC1qQV4rUGKqxKlqUCNrUVQrwRPpaC2rxqOsUu3nPSdEAOjtwGaDdDdDdDdnQ48BT9NF2O5D29ltaOGp2G#tWNmG3DetMZjZdWaHXcmFMZ6ZeSjCBcjEBr0ZMNMGX9QEBvgF24MsMnMF3v0F20kGdceEYuMpTnkCBneEA4MsMZNZUVNrTRQqTRNZMNMCdGMsaRjZeraCAOcZafMqw4QZMNMHYcNDwZ6Zer2DPZjZdWlEA1LHXcmFMZ6Zd5mFdyMpTnMD3SLDXvgFdGMsMZQZUqKqPRQZMNMCdHLZafNpaujZdneCA92DBZMsaRlsTNMHXcNZafNpTnQC2WjDA92DBZMsMZOpaCMpTnkCBneEA5NGd9aZafMqTR5ZURKqTZjZdLgDXyMsaRjZdLgDXzmFd1mCdcjDwZ6qY0jZdrmFevPF2OJDezjFTZ6IPnmGdvcGMZ6qxqjZd9lZafOpTngC29lZafMtYr2DPS3EAv0EU0eqaReZXLcEAHfHU0eqaRetaOeZYr0Gd9iDx0eZ2DdDdDdDMGKG3vPF2kcpBHgDYvftwGNpayeZXDgFXNkGezjDx0eFd9lIdzPFPGKHYnLFerdF3nktwH0GdWlG2OLHXyfqwNKrTbetaONCBvfZXu9n00OqP4QqQCOrUqPpUVOpauPrQuPraqKxUVQpaqQraV0qQZjqxZKxUV4pUVPZVNOsTN3paGNrxC5rQVOZVNOrP4QrQKOrxZ0pUGlrQR1rab3qxVKxUV3paq3sUV1qaujqxVlrUZ3rUZ2qPSqqxqlqQq2qxuQqMNOqw40qaG0qaCQZWfKxxRlraZOsUu3rxG4pUGlrQR1rab3qxVKxURjrP43qUy2sxGOqwSqqTNOqMSqrT42raq4rxC4rTNOqMSqrT42raq4rxC4rTNOqw40qaG0qaCQZVNNpaCPqxK0rQy3sTNOqw40qaG0qaCQZVNNpaCPqxK0rQy3sTN3paGNrxC5rQVOZWfKxxulraCQsUy2sUujqT41rQZ1rQq3qxbKxUulraCQsUy2sUujqTSqqTNNZVNNpUulqab0qQRPsUbKxURlraZOsUu3rxG4pUulqab0qQRPsUbKxURlraZOsUu3rxG4pURlrxGPrxGQrQV5ZVN0paC2qQK1raK0pURlrxGPrxGQrQV5ZWfKxxV3paq3sUV1qaujrT4PsxuQqUZ4swSqqxKjrT4PsxuQqUZ4swSqqxKjqTSqqxqlqQq2qxuQqMNNZVNOqP4QqQCOrUqPpURlrxGPrxGQrQV5ZVNOrP4QrQKOrxZ0pURlrxGPrxGQrQV5ZVNOrP4QrQKOrxZ0pUulqab0qQRPsUbKAMGKDdcjFU0eZ2DdDdDdDMG#tWNmGXW0EU48BT9etaOGp3r2DQ4MpTngC29lqMZ6ZaOQHdGKH2cbHXK9nQZNnPSfDAceEYu9nQZNnQ48DPSQHYnmE2y9nPrdDdDdDdCeZYr0Gd9iDw13EAv0EU0eqT41nPSdEAOjpBn1FXy9n25mFegcGd8eZYvPCA5QDd9PFx0eHYnLFerjCBvcoUVjZUugnQ48GXW0ETSbtwHrqxKjsT4PrQKPrQR4qPSqqxKjrP43qUy2sxGOqwSqqxqlqQq2qxuQqMN3paGNrxC5rQVOZVNOqP4QqQCOrUqPpUVPZVNOqP45rxG5sxR3pUVPZVNOqP45rxG5sxR3pUKlqaG4qaGNsUqKxUV4pUKlqaG4qaGNsUqKAMSrrT4NrUZNqUbPrMNOqMSqrT42raq4rxC4rTNOqMSqrT42raq4rxC4rTN3paGNrxC5rQVOZVNNpUGlrQR1rab3qxVKxURjsT4PrQKPrQR4qPSqrT4NrUZNqUbPrMN4paZ3sUZ3qUKQZVN0paR0qaRNsxZ2pUVPZWfKxxRjqP43qaV3qabOrPSqqTN0paZ5rUqNqaK5ZVN0paC2qQK1raK0pUulqab0qQRPsUbKxUulraCQsUy2sUujqTSqrT4NrUZNqUbPrMNNZVN0paR0qaRNsxZ2pUqlrQZOrQZ5qxGKxURjqP43qaV3qabOrPSEZV0OqP45rxG5sxR3pURKxUVQpaqQraV0qQZjqTSqqxqlqQq2qxuQqMN0paZ5rUqNqaK5ZVNOsTN0paZ5rUqNqaK5ZVNOsTNQpaGPqxGPsxV3ZVNOqP45rxG5sxR3pUqlrQZOrQZ5qxGKxUVQpab1rQb5qUGjqTSEnPSdEAOjtwGaDdDdDdDdnQ48BT9NCBvftaOGp2G#tWNmG3DetMZjZdWaHXcmFMZ6ZdD1FXOQC3ncDA4MpTnLC3vgF24PZafMFd9PFAWjG2rPDAzlZMNMHYcNDwZ6Zer2DPZjZeSmG2c0EA9lZafMCd90HX9kpBngD2L0ZMNMFAWPD2clZafMqTRPrwRQqTRNZMNMG2rLFXyMsMZOpayMpTnQC2WjDA92DBZMsMZOpaKMJwNMC29lHYnmFW9QHXWPHTZ6IPnmGdvcGMZ6qxujZeSmG2c0EA9lZafMC2zlHXzPZMNMG2rLFXyMsaZjZd9lZafNpTngC29lZafMtYr2DPS3EAv0EU0eqaReZXLcEAHfHU0eqaRetaOeZYvPCA5QDd9PFx0eHYnLFerjCBvcoUyjZUqgnQ48GX9jIAOgFdyKGX9gFevQtwGNpay5qQG1ZURlrUK0qQKKqT41raZ1ZUVQpayOrxCQZUVOpauQrQyKrPRNpay5qQG1ZURlrUK0qQKeZXDgFXN9nPrdDdDdDdCeBT8#tWNmDQ48BT9QHdG#ZMNMEArmFaqMsMZ8G3DeZYHgDYvftwGPqTGKEXzgD2L0twGPqTG#tXGKHYnLFerdF3nktwH0GdWlG2OLHXyfqMNKqPbetaONCBvfZXu9n00OrMN3paVQraCOqxqPZVNOrMN3paVNsxV2sxu1ZVNOrw4PqUKOrQK1pUGlqxR5qxC5rUyKxUV0paZ3rxR5qPN3paVNsxV2sxu1ZVqOrT4PrQyNsxqjqP4OsxbOqaCPrwROqw4NraqOsxGjqTR3paVQrQy0rau1pURKuQqlqaVOsUb1sxVjqTRNpUqlqxb5qxZ2qayKqTN3paVNsxV2sxu1ZVqNpUVOpaROsxZOqaCKqP4PqxV4sxy5qwNOrT4PqxKQqQK5ZUGlqxq3rxu2rUyjqxulqaV4qQq4swSqrP4OqQG1rUC0rwNOqM40rUVNrUC1ZVq0paV5qQqNsUy1pUVPpau0qxR0rayKqw43sUuQsUC2qMNOqT4NrUV3qUV4ZUVlrQK0qQK2raZjrP4OqUbOrab0rwSUqw43sUuQsUC2qMN0paV3raCQrQR1ZUulqxbQqQR4rxyjqw43rQGPsxZQrMR3paVQrQy0rau1pUVlrQG3qabPqQCKuQVNpaR4qxG4rUujqw43rQGPsxZQrMROqM40sxR3qUCQpUulqxG2raq3qUyKqxZlrUbNrQR2qPN3paVNsxV2sxu1ZVNOqT42rUu1qxC3pUGlqxR5qxC5rUyKxUVQpaq4qaK5sxCjqxVlrxyPrURNrTSqqxCjrP4OqQC2qxVQqMSEnPSdEAOjtwGaDdDdDdDdnQ48BT9NCBvftaOGp2G#tWNmG3DetMZjZdWaHXcmFMZ6ZeSjCBbMpTn0IBScZafMG3DeZMNMCdGMsaVjZdneC29jF3ZMsMZNqURNqURMpTnMD28MsaVjZdneGXWbDXclDPZ6ZaGKrPR3ZUGMpTngC29lFAWPD2clZafMqTRNZURKrTZjZdneCwZ6qT4QpTnMD2WmHdzPZafNpaCjZeraCAOcF3DcGMZ6ZaZlrwZjZdLgDXyMsaVjZdLgDXzmFeSjCBbMsaVjZdLgDXzmFecmHBv1CdyMsaW9pTnaF250Gd9jB2OgHdyMsejMF3nbDBZMsaV1pTnmFMZ6qwNMHXz4HTZ6ZdOgHdyMpTnjDBv0DBnQGXWaEA5eZafPpTnLC3vgF24MsMnjEBDcZMNMHYcNDwZ6ZevcIYuMpTnfCA5bZafNpTnaFXcaEPZ6qTNMDd9lHYrgIdyMsaVNpTnkCBneEA4MsMZNZURKrQuKqaRMpTnLZafNpayjZdLgDXyMsaVjZdLgDXzmFeDmDTZ6qwNMGX9QEBvgF24MsMnMF3v0F20kFXzdHTn9pTnaF250Gd9jB3r0F3RMsejMF3nbDBZMsaV2pTnmFMZ6qTNMEArmFMZ6ZaOQHdGKH2cbHXK9nQZNnPSfDAceEYu9nQZNnQ48DPS0GdWlG2DmGd09n3vPCA5QFXW0DwK0pTR0owG#tYncC3uKIU0eqTGKIx0eqTGKH2cbHXK9nQVPnPSfDAceEYu9nQVPnPSdEAOjtwGaDdDdDdDdn1NmtaOGp2G#tWNmG3DetMZjZdWaHXcmFMZ6Zer0F3RMpTn0IBScZafMG3DeZMNMCdGMsaS9pTnaF250Gd9jB3SPDBCMsejMF3nbDBZMsaV3pTnmFMZ6qTNMEArmFMZ6ZaOQHdGKH2cbHXK9nQZNnPSfDAceEYu9nQZNnQ48DPS0GdWlG2DmGd09n3vPCA5QFXW0DwK1payjZUygnQ48GXW0ETSbtwHrsT45sxb5swNOqT40qQG0swSqsT45sxb5swNOqT40qQG1ZVNPpUylqaV4rQyKxUKlsxb5sxbjqTSqsT45sxb5swNOqT40qQG0swSEZV0NpURKxUZjqTSqqMNOqT4PrUb4qPSqqTNOqT4PrUb4qPSqqTNNZWfeZXDgFXN9nPrdDdDdDdCeBT8#tWNmDQ48BT9QHdG#ZMNMCAr0EA9lZafMGYncHMZjZev5GXyMsMnQHdGMpTnQC2WjDwZ6qw4PpTnNF3rgHXcmFMZ6ZdrmFevPF2OQZMNMFAWPD2clZafMqTRNZURKqxyMJwNMC29lHYnmFW9lDBL0Zag7Zd9PDXzPZafOsTNMF24MsaVjZdcaF24MsMZ8G3DeZYHgDYvftwGPqTGKEXzgD2L0twGPqTG#tXGKDdcjFU0eZ2DdDdDdDMGKHYnLFerdF3nktwH0GdWlG2OLHXyfqPNKrTbetaONCBvfZXu9n00OpaCOsxR5rQC2pURlrUV5sxu2qabPZVqOpau5sUG4qUCjqT4Qrxy1qQK5rTROpaq3rUbPrUKOpURlqQV2sUb0rxqOZUVlqaqQqQG1qQqjqT4QqxC4sxu1qQVKuQRlsUu3rayPsxb5pURlqQV2sUb0rxqOZURlrxqPrQR1rUROpURlraR2rQZ3rMRNpayQqaGNrxuNqwNNpab2qUb2sURPqwSqqT41qabOraC2raGjqxZlqUq5qUqPZVqNpayQqaGNrxuNqwNOqM4QsxqPrQZ0ZURlsUu3rayPsxb5pUVPpaC4qQVNrxyKqw4PqQqQrQyQqPNOqM42sUqOqUy1ZVqOpaq3sUu2qQy1pUVPpaC4qQVNrxyKqw40sxK3sUR2pUVPpaCQsURPqUqKqw42qab3qxq4rPNOqM41rQq2qxqKxUVOpau3qUb0qxyjrP4PrUq5qUu4sTSUqxVlrQR0rUb4qwN3paR2raG4rUGKqxVlsUyQqxZ1pUClrQb5rUb0qxGKqxVlsUyQqxZ1pUClrwSUqxVlsUyQqxZ1pUClqaRNrxR1sUqKqxVlrQR0rUb4qwN1pabQrauQrxGKqxVlrUGNsxuOrwN1paG1raR5rxVPZVNOpaCOsxR5rQC2pURlrUV5sxu2qabPZWfeZXDgFXNkGezjDx0eFd9lIdzPFPGKDdcjFU0eZ2DdDdDdDMG#tWNmGXW0EU48GdzaHTS4twGOqw44rxqOqayeZYb9nQRlqQV2sUb0rxqOnPS3EAv0EU0eqw42qxG3qUKQqPGKEXzgD2L0twGOqM4QraCPqxR5nPSdEAOjtwGaDdDdDdDdnQ48BT9PDAr0taOGp2G#tWNmG3DetMZjZdWaHXcmFMZ6Zd5cIYuMpTn0IBScZafMG3DeZMNMG2rLFXyMsMZOpauMpTnNF3rgHXcmFMZ6ZdnmHYvmFw1PEAHfHTZjZd1LGdHgFMZ6ZaRKsURKqQRKqTZjZd1LGdHgFeSPF2qMsMZNZUCKqTRNZMNMG2rLFXzmHdzPZafMqw44Ze0jZdrmFevPF2OJG2LLGdyMsejMF3nbDBZMsaV5pTnmFMZ6qTNMEArmFMZ6ZaOQHdGKH2cbHXK9nQZNnPSfDAceEYu9nQZNnQ48DPS0GdWlG2DmGd09n3vPCA5QFXW0DwKOpTRQowG#tYSLHXKKDU0exxVNpayPqaG1qUqjqxZlqQu4rUVPsTSqqxRlrxZPrQyNqPN5paqNqQq5rUROZVq1payQray4rau4pUblqxV5rxR4sxKKqM41qQu4qUb4swNOqw4QsUb2sxKOZURjqxqlsxVPrxqNrwSUqTN3pabOrxbPrxV5ZUylqaZ2sxC4rQGjqP4OsxZ3qxyQrMROqT41qaZ3rxRQpUqlqxq5sUCNqwSqqxRlrxZPrQyNqPNNpaVOrQC0rQR1swSqqxKlqURQrxKOsTN2paZQqQRPsxbQZVNOqT41qaZ3rxRQpUVPpaq0sUuOqaKKAMGKDdcjFU0eZ2DdDdDdDMHGpQ48BT9etaOGp3r2DQ4MpTnLC3vgF24MsMnQEXWPDwZjZev5GXyMsMnQHdGMpTnNF3rgHXcmFMZ6ZevmGT1PEAHfHTZjZd1LGdHgFMZ6ZaV1ZUV1ZURKqTZjZdneZafOpTnMD28MsaVjZeraCAOcZafOpTnMD3SLDXvgFdGMsMZ2ZUCKrMR2ZMNMCdHLZafNpaqjZdneCA92DBZMsaRlrMNMCA5gFAW0EA9lZafMGX9QEBvgF24MpTncCBrcZafMDAOLG3vgCPn9pTnjCA5eZafMHYZMpTnaF250Gd9jB01mFcq1Zag7Zd9lZafOpTnmGdvcGMZ6qPNMCAr0EA9lZafMC3zQHX9kZMNMEArmFMZ6ZaOQHdGKH2cbHXK9nQZNnPSfDAceEYu9nQZNnQ48DPSdEAOjtwGaDdDdDdDdnPS0GdWlG2DmGd09n3vPCA5QFXW0DwKNpabQqaC5qMNKqTbetaONCBvfZXu9n005pauQqxC1rUq0pUulqQu1rQqNqQbKxUVNpaKOqQZOqabjrw43rxy5qxR3rMSqsw42sUC3sUGOrwN2paK1sxu3qQK2ZVN2paq3rxZ3qxG5pUqlrUG5qQyQrxKKxUblrab4qQq5qQqjqT4PqayOqQRPsUGKxUVNpaKNqxC2qUGjqw4QrxV3sxZ3swSqsw4QrxbOqQy5pUZlrQC0rUqPraGKuQV0paROrUR0qaZjqM45qxKQqQZ5rwROrP43rURQsUu2pUClrQuNqQu1raGKqxGlrQuNqQK0rMNOqw40qQZ2sxZQZVqOrP43rURQsUu2pUV2paZPqaGNqUuKqxqlsUy3qQV1sTNPqT4OqUy3rabPZUblqUC3qQR3rabjqaRlqxR1rQC5qMSUrT4PrQGPsxb1rPNPqT4OqUy3rabPZURlqQb0qaqNrQC5pUV2paZPqaGNqUuKqT4QsxuPqQR3rabjqxVlrUqPrabPqPSUqT4QsxuPqQR3rabjsw41qabPqaC4rTROpaRNsxb0sUy4pUGlrQV2sxuOqwRPpaVPsxK4rxGQpUClqaZ2rabQrUyKxUqlqQbNrxR5rUujrP4OrQuNray3rwSUqM40rQuOrUZOrMN4paq5qQuQqay0ZUVlsxGOqxyQsUyjsw44rQq5qxq1swROpab3qxV1qQK1pUVOpauQqaC5qaqKuQVlsxGOqxyQsUyjqxylqQyOrQK5swR1paV0sUZOqUV0pUV4payPsUK0raZKsw4NraGQqUG2swNOsT41qaK4rUCPZVqOqM45sUC0qUyPpUV4payPsUK0raZKqxClqxCQrUCOrwNOrw4QrxV3sUb5ZUV2paV2qQu2qxyjqxVlrUqPrabPqPSUqxClqxCQrUCOrwN3paCQrxG4sxCPZUVQpaV4qxuQqQGjrT41qQyQrQC4rwR5pauQqxC1rUq0pUulqQu1rQqNqQbKAMSrrP4Prxb0rUb1sTNOpaq0rxb4sUR0ZVN1paR1rQq2qUC5pUqlrxu4qUG2sxZKxUGlqay5rUu5rxKjrw43rxROray4qwSqrM4OrUuQsxC1sTN2paK2rxZOsUKOZVNPpaKPrQZ1rUC5pUqlrxu4qUG2sxZKxUClqxu0qQb2rxKjqT4PqQR5qQyNqQKKxUGlqay5rUu5rxKjqw4QrUy5sUKNrTSEnPSdEAOjpBn1FXy9n25mFegcGd8eZXDgFXN9nPrdDdDdDdCetaOGp3SLHXK#tYSmFYceF24KGX9gFevQtwG2pau0sxCOrxq4ZUVNpaR5qaqNrQGKrw40qUR5raV1rTROqw4NraZOqxy0ZUulsUu5qUq4rUCKqxRlrUR3rabPqPR2payQraq0raV1ZUblqUR0qaqNrQGKrP4Qsxy3rabPqPR5paRNrUZQqUG3ZUGlqQb1rQC5qaqKqxulrxK2rxq4rwR2pau0sxCOrxq4ZUV0pay4rayQsUyeZXDgFXN9nPrdDdDdDdCetaOGp3SmFYceF24#tYSLHXKKDU0exxblqauNrQC5qaqjqxVlrQb1qQK0rMSUsw4PrUR3rabPqPNOqw4Qrxq4rUq5ZUblqaG2qau5rayjqxRlsxG2rQRNqPR5paq0rQZOqxy0pUVNpaC2qQb0qaqKuQblrUV4qxGQrUqjqxRlqQyOqxK0qPR5payOqxu3qQG4pUVNpaR4sUq2rauKsw42qaGOqxyQsTN5paK3rxu4qUG3ZVq5paG0qaG1rab5pUblraCPrxb1qUbKsw44rQZ4rxV4rTN5pau5qxG2qQu2ZUVNpaROrQuNqQKjsw4QraZ5sUR3rPSUqxRlqxCOsxy1swN5paZQrUV5sUR3ZUVNpaqNsxVQqQbjsw4OqQC5rxy0rMROqT40rxK5rUZQpUblqUGOqayKuQVNpaCNsUG1qUGjsw4NqUy1rUu1rTROqT43rxqQqUR2pUKlsxCPqxG5rxbKqxRlsUbPrxb2qMN4pab0qxV1qQK1ZVqOqw4NqQV4sxV3pUKlsxZNqxZ4qwROqw4OrxuOqUZjsT45qUb2qxyQsTROqw4PrxbPqQR4pUKlsxR5raV1qQKKuQVOpaq2rUq1sxyjsT45qUb2qxyQsTROqw40sUC1rab4pUKlsxZNqxZ4qwROqw42qay4ray0pUKlsxuOqxyQsUyKuQVOpaG2rxV2qwN4pab2qaV3sxy5ZUVOpabNsxGOqUKjsw4NqUy1rUu1rTROqM4Nrxb1qxbPpUblqUGOqayKuQVPpaZNsxqPrQGjsw4OqQC5rxy0rMROqM4QrxC1qUy3pUblqaq0qxb4qUGKqxZlrxROqUy3rPN5paq2qab4qUG3ZVqOqM42rUy2qUb3pUblrUbOrQCQrUCKqxZlrQG1rQR0rMN5paC2qay5rxR5ZUVPpaK5qxq0raZjsw44rQy0sUR3rPSUqxqlqUR2sxK3sTNOqT4NsUKQraC0ZUVQpaVNqUZ4sUVjqxRlqQyOqxK0qPROqP4OrQVPrwNOqT42raq5rUZQZVqOqP4PrUZPqxV5pUVNpab3raGNqUqKqxqlqaG3rabPqPNOqw4Qrxq4rUq5ZUVQpaZ3rQC5qaqjqxVlrQb1qQK0rMSUqxqlqaG3rabPqPNOqM4PqQC5qayQZUVQpaZ0qaZOqxbjqxZlraV0qUC4swROqP4OrQVPrwNOqM45qaC4qaC5ZVqOqP4OqURPsUKOpUVQpaZQsxy4rUbKqxqlqUR2sxK3sTNOqP41qUZ0qUZ4ZUVPpaK5qxq0raZjqxqlrQV1qaK4rwSUqxZlrQG1rQR0rMNOqP45qaKOrQuOZUVPpaC0rxCNsxGjqxulqUb5qUR1sTROqM41qUVNrxG3pUV0paZPrQG4sUyKuQVPpaq1rayNrxGjqxulqQy2rxGOqMROqM4PqUbQqaG3pUV0pau1qQKOqQKKqxZlqUy5rxV5qMNOrT41qxb1qxbPZVqOqw45qUb3qxR4pUV0pay4rxZPrUGKqxVlrQC1qxCOpUV0paCPsUy4sxCKqxVlraZ1sUC1rTNOrT42rUb2qxy0ZVqOqw40sUC1rab4pUV0paC3qUC0qxVKqxVlqQC0qQy5rwNOrT42sUVOrxq4ZUVOpaZ1sxZQqUKjqxulraKOqxyQsTSUqxVlqxy0qxRPpUV0paC4qxV1qQKKqxVlqUqOsUbOrPNOrT42rQR2rUVOZUVNpaK5qay5raZjqxulrau5raV1rTSUqxRlrQyQqQRNrMNOrT42qaK1sUb2ZUVNpaCNsUG1qUGjqxulrxK1qaZ0rPROqT40rxK5rUZQpUV0payOsxyOsxZKuQVNpaqNsxVQqQbjqxulrUyQsUVQsTROqT4OraV5rxy5pUV0paq1ray3qxZKqxRlqUV3rURQsTNOrT4PqaG3sUK1ZVq5paK3qaK1qxK0pUV0paR5sxRNrxKKsw43rUZ3rxC5swNOqP45qaKOrQuOZUblraZ3qxV1qQKjqxqlrQV1qaK4rwSUsw41qxV0rQq3sTNOqP41qUZ0qUZ4ZUblrUV4qxGQrUqjqxqlqaq5rxK0swR5paq0rQZOqxy0pUVPpabPraKPrabKuQblqaG2qau5rayjqxZlraV0qUC4swR5paZ0qUG2sxZQpUVPpaZQrabPrxqKsw4PrUR3rabPqPNOqw43sxyQsUu2ZWfKxxVNpaV4rabPqQVjqxVlrQb1qQK0rMSUqxRlqxK2sxZQqwNOqw45raK4rUGKqxRlqxb4rQu5swNOqM4Orab5qUZ3ZUVNpaZPqauNqQKjqxZlqQb4rxy3rPSUqxRlqau2qUy3sTNOqM42qaGPqxZ3ZUVNpaZ5rUC3sxVjqxZlsUu0qUq3rTROqT4QraKPrabPpUVQpaR0sxRQsUyKuQVNpau0qxK1sxqjqxqlqay0qUq5rwROqT41rUb2qxu3pUVQpauPrQu5sxqKqxRlrabOrxq4rwNOqP41rab0qaqOZVqOqT44qQq0raZPpUVQpaGOqxq0rabKqxVlqUZPrabOqwNOqP43sUZQqUG3ZUVOpaZ1sxZQqUKjqxqlrQKPqQR3rPSUqxVlrUb1rQGNrTNOqP43sUZQqUG3ZUVOpaC4rUb5sxqjqxqlrQVOqQu2swROqw44qaC5qaqOpUVQpay2sxuPqQVKuQVOpab2sUK0rabjqxqlrUZ3rUb5qPROqM4NrQC2qUZPpUVQpaZ1rURQsxyKqxZlqxyNqxbPqPNOqP4NrUbNqQK1ZVqOqM4Pqaq3sUZ0pUVPpaK0rURQrQuKqxZlqaGPrURQrPNOqM42qaGPqxZ3ZUVPpaZ5raR1rQGjqxZlqQb4rxy3rPSUqxZlqQV5rQVOrPNOqM4Orab5qUZ3ZUVPpaqQqxyQsUyjqxVlsxC4sUu3ZUVPpaqQqxyQsUyjqxVlrQb1qQK0rMSUqxZlqQqOrxq4rwNOqw42qaV5qaZPZUVPpaqOsxGOqxGjqxVlrUZNsUC2rwROqM4PsxCNrxG3pUVOpaV5qaZOqxyKuQVPpaZ3qauNqQGjqxRlsxCQrxy2rwROqM4Pqaq3sUZ0pUVNpaG0raGQqxKKqxZlqxyNqxbPqPNOqT41rUV3qQR4ZVqOqM4NrQC2qUZPpUVNpaqQraGPsxGKqxVlsxC4sUu2swNOqT4OraqPrab5ZUVOpaKPrabPqQVjqxRlqUZOqQu2qMSUqxVlraK0sxb5qPN5paK3sxuPqaq3ZUVOpau5rxG3qUujsw44qUK0raV1rTROqw4PrxbPqQR4pUblsUR4rUCOrxuKuQVOpaRPqaC5qxVjsw44qUK0raV1rTROqT44qQq0raZPpUblsUG5rUZPqQGKqxRlrabOrxq4rwNOqT4NqaVQrUCPZVqOqT41rUb2qxu3pUVNpaV2qQZ2sxbKqxRlrUuOsUy5qPNOqT4QqQC3qab3ZUVNpaq2sUZ2sxZjqxRlrxuOrQqNsTSUqxRlqab0raG5qwNOqT43rUC3qQV4ZUVNpaZ0raR1rQKjqxRlsxCQrxy2rwROqT4PqaZ0qUq4pUVOpaV5qaZOqxyKuQVNpaV5sUG0sxbjqxVlrUZNsUC2rwROqT4OsUC5qaqOpUVOpaCPqxbPqaZKqxRlqxK2sxZQqwNOqw43sxyQsUu2ZWfeZXDgFXN9nPrdDdDdDdCetaOGp3SLHXK#tWNmDQ48BT9QHdG#ZMNMHYcNDwZ6Zer2DPZjZeSmG2c0EA9lZafMCd90HX9kpAOcDeuMpTnkCBneEA4MsMZNZURKqQVKrTZjZeraCAOcZafMqw40ZMNMFXclEPZ6qwNMFXclE3zPFTZ6ZdWNExgQDAzipT0OqTZjZeraCAOcF3DcGMZ6ZaVlsTZjZd1LGdHgFeSPF2qMsMZNZURKqTRQZMNMHXcNZafNpTnfEAvcZafOpTnfEAvcF25jDAW2DAWlDYSjCBbMsaW9pTnaF250Gd9jB25VzX5XZag7Zd9lZafOpTnmGdvcGMZ6rTNMCAr0EA9lZafMC3zQHX9kZMNMEArmFMZ6ZaOQHdGKH2cbHXK9nQZNnPSfDAceEYu9nQZNnQ48DPSdEAOjtwGaDdDdDdDdnPS0GdWlG2DmGd09n3vPCA5QFXW0DwKNpabQqaC5qMNKqTbetaONCBvfZXu9n005pauQqxC1rUq0pUulqQu1rQqNqQbKxUVNpaKOqQZOqabjrw43rxy5qxR3rMSqsw42sUC3sUGOrwN2paK1sxu3qQK2ZVN2paq3rxZ3qxG5pUqlrUG5qQyQrxKKxUblrab4qQq5qQqjqT4PqayOqQRPsUGKxUVNpaKNqxC2qUGjqw4QrxV3sxZ3swSqsw4QrxbOqQy5pUZlrQC0rUqPraGKuQV0paROrUR0qaZjqM45qxKQqQZ5rwROrP43rURQsUu2pUClrQuNqQu1raGKqxGlrQuNqQK0rMNOqw40qQZ2sxZQZVqOrP43rURQsUu2pUV2paZPqaGNqUuKqxqlsUy3qQV1sTNPqT4OqUy3rabPZUblqUC3qQR3rabjqaRlqxR1rQC5qMSUrT4PrQGPsxb1rPNPqT4OqUy3rabPZURlqQb0qaqNrQC5pUV2paZPqaGNqUuKqT4QsxuPqQR3rabjqxVlrUqPrabPqPSUqT4QsxuPqQR3rabjsw41qabPqaC4rTROpaRNsxb0sUy4pUGlrQV2sxuOqwRPpaVPsxK4rxGQpUClqaZ2rabQrUyKxUqlqQbNrxR5rUujrP4OrQuNray3rwSUqM40rQuOrUZOrMN4paq5qQuQqay0ZUVlsxGOqxyQsUyjsw44rQq5qxq1swROpab3qxV1qQK1pUVOpauQqaC5qaqKuQVlsxGOqxyQsUyjqxylqQyOrQK5swR1paV0sUZOqUV0pUV4payPsUK0raZKsw4NraGQqUG2swNOsT41qaK4rUCPZVqOqM45sUC0qUyPpUV4payPsUK0raZKqxClqxCQrUCOrwNOrw4QrxV3sUb5ZUV2paV2qQu2qxyjqxVlrUqPrabPqPSUqxClqxCQrUCOrwN3paCQrxG4sxCPZUVQpaV4qxuQqQGjrT41qQyQrQC4rwR5pauQqxC1rUq0pUulqQu1rQqNqQbKAMSrrP4Prxb0rUb1sTNOpaq0rxb4sUR0ZVN1paR1rQq2qUC5pUqlrxu4qUG2sxZKxUGlqay5rUu5rxKjrw43rxROray4qwSqrM4OrUuQsxC1sTN2paK2rxZOsUKOZVNPpaKPrQZ1rUC5pUqlrxu4qUG2sxZKxUClqxu0qQb2rxKjqT4PqQR5qQyNqQKKxUGlqay5rUu5rxKjqw4QrUy5sUKNrTSEnPSdEAOjpBn1FXy9n25mFegcGd8eZYvPCA5QDd9PFx0eHYnLFerjCBvcoUblqUC3qQR4pTROqT4Oray0rxRgZYraCAOcoT0OpTROowS0GdWlG2OLHXyfpxblqUC3qQR4pTRkqxRlqxC1rUyNowReZXDgFXN9nPrdDdDdDdCetaOGp3SLHXK#tYSmFYceF24KGX9gFevQtwG2pau0sxCOrxq4ZUVNpaR5qaqNrQGKrw40qUR5raV1rTROqw4NraZOqxy0ZUulsUu5qUq4rUCKqxRlrUR3rabPqPR2payQraq0raV1ZUblqUR0qaqNrQGKrP4Qsxy3rabPqPR5paRNrUZQqUG3ZUGlqQb1rQC5qaqKqxulrxK2rxq4rwR2pau0sxCOrxq4ZUV0pay4rayQsUyeZXDgFXN9nPrdDdDdDdCetaOGp3SmFYceF24#tYSLHXKKDU0exxblqauNrQC5qaqjqxVlrQb1qQK0rMSUsw4PrUR3rabPqPNOqw4Qrxq4rUq5ZUblqaG2qau5rayjqxRlsxG2rQRNqPR5paq0rQZOqxy0pUVNpaC2qQb0qaqKuQblrUV4qxGQrUqjqxRlqQyOqxK0qPR5payOqxu3qQG4pUVNpaR4sUq2rauKsw42qaGOqxyQsTN5paK3rxu4qUG3ZVq5paG0qaG1rab5pUblraCPrxb1qUbKsw44rQZ4rxV4rTN5pau5qxG2qQu2ZUVNpaROrQuNqQKjsw4QraZ5sUR3rPSUqxRlqxCOsxy1swN5paZQrUV5sUR3ZUVNpaqNsxVQqQbjsw4OqQC5rxy0rMROqT40rxK5rUZQpUblqUGOqayKuQVNpaCNsUG1qUGjsw4NqUy1rUu1rTROqT43rxqQqUR2pUKlsxCPqxG5rxbKqxRlsUbPrxb2qMN4pab0qxV1qQK1ZVqOqw4NqQV4sxV3pUKlsxZNqxZ4qwROqw4OrxuOqUZjsT45qUb2qxyQsTROqw4PrxbPqQR4pUKlsxR5raV1qQKKuQVOpaq2rUq1sxyjsT45qUb2qxyQsTROqw40sUC1rab4pUKlsxZNqxZ4qwROqw42qay4ray0pUKlsxuOqxyQsUyKuQVOpaG2rxV2qwN4pab2qaV3sxy5ZUVOpabNsxGOqUKjsw4NqUy1rUu1rTROqM4Nrxb1qxbPpUblqUGOqayKuQVPpaZNsxqPrQGjsw4OqQC5rxy0rMROqM4QrxC1qUy3pUblqaq0qxb4qUGKqxZlrxROqUy3rPN5paq2qab4qUG3ZVqOqM42rUy2qUb3pUblrUbOrQCQrUCKqxZlrQG1rQR0rMN5paC2qay5rxR5ZUVPpaK5qxq0raZjsw44rQy0sUR3rPSUqxqlqUR2sxK3sTNOqT4NsUKQraC0ZUVQpaVNqUZ4sUVjqxRlqQyOqxK0qPROqP4OrQVPrwNOqT42raq5rUZQZVqOqP4PrUZPqxV5pUVNpab3raGNqUqKqxqlqaG3rabPqPNOqw4Qrxq4rUq5ZUVQpaZ3rQC5qaqjqxVlrQb1qQK0rMSUqxqlqaG3rabPqPNOqM4PqQC5qayQZUVQpaZ0qaZOqxbjqxZlraV0qUC4swROqP4OrQVPrwNOqM45qaC4qaC5ZVqOqP4OqURPsUKOpUVQpaZQsxy4rUbKqxqlqUR2sxK3sTNOqP41qUZ0qUZ4ZUVPpaK5qxq0raZjqxqlrQV1qaK4rwSUqxZlrQG1rQR0rMNOqP45qaKOrQuOZUVPpaC0rxCNsxGjqxulqUb5qUR1sTROqM41qUVNrxG3pUV0paZPrQG4sUyKuQVPpaq1rayNrxGjqxulqQy2rxGOqMROqM4PqUbQqaG3pUV0pau1qQKOqQKKqxZlqUy5rxV5qMNOrT41qxb1qxbPZVqOqw45qUb3qxR4pUV0pay4rxZPrUGKqxVlrQC1qxCOpUV0paCPsUy4sxCKqxVlraZ1sUC1rTNOrT42rUb2qxy0ZVqOqw40sUC1rab4pUV0paC3qUC0qxVKqxVlqQC0qQy5rwNOrT42sUVOrxq4ZUVOpaZ1sxZQqUKjqxulraKOqxyQsTSUqxVlqxy0qxRPpUV0paC4qxV1qQKKqxVlqUqOsUbOrPNOrT42rQR2rUVOZUVNpaK5qay5raZjqxulrau5raV1rTSUqxRlrQyQqQRNrMNOrT42qaK1sUb2ZUVNpaCNsUG1qUGjqxulrxK1qaZ0rPROqT40rxK5rUZQpUV0payOsxyOsxZKuQVNpaqNsxVQqQbjqxulrUyQsUVQsTROqT4OraV5rxy5pUV0paq1ray3qxZKqxRlqUV3rURQsTNOrT4PqaG3sUK1ZVq5paK3qaK1qxK0pUV0paR5sxRNrxKKsw43rUZ3rxC5swNOqP45qaKOrQuOZUblraZ3qxV1qQKjqxqlrQV1qaK4rwSUsw41qxV0rQq3sTNOqP41qUZ0qUZ4ZUblrUV4qxGQrUqjqxqlqaq5rxK0swR5paq0rQZOqxy0pUVPpabPraKPrabKuQblqaG2qau5rayjqxZlraV0qUC4swR5paZ0qUG2sxZQpUVPpaZQrabPrxqKsw4PrUR3rabPqPNOqw43sxyQsUu2ZWfKxxVNpaV4rabPqQVjqxVlrQb1qQK0rMSUqxRlqxK2sxZQqwNOqw45raK4rUGKqxRlqxb4rQu5swNOqM4Orab5qUZ3ZUVNpaZPqauNqQKjqxZlqQb4rxy3rPSUqxRlqau2qUy3sTNOqM42qaGPqxZ3ZUVNpaZ5rUC3sxVjqxZlsUu0qUq3rTROqT4QraKPrabPpUVQpaR0sxRQsUyKuQVNpau0qxK1sxqjqxqlqay0qUq5rwROqT41rUb2qxu3pUVQpauPrQu5sxqKqxRlrabOrxq4rwNOqP41rab0qaqOZVqOqT44qQq0raZPpUVQpaGOqxq0rabKqxVlqUZPrabOqwNOqP43sUZQqUG3ZUVOpaZ1sxZQqUKjqxqlrQKPqQR3rPSUqxVlrUb1rQGNrTNOqP43sUZQqUG3ZUVOpaC4rUb5sxqjqxqlrQVOqQu2swROqw44qaC5qaqOpUVQpay2sxuPqQVKuQVOpab2sUK0rabjqxqlrUZ3rUb5qPROqM4NrQC2qUZPpUVQpaZ1rURQsxyKqxZlqxyNqxbPqPNOqP4NrUbNqQK1ZVqOqM4Pqaq3sUZ0pUVPpaK0rURQrQuKqxZlqaGPrURQrPNOqM42qaGPqxZ3ZUVPpaZ5raR1rQGjqxZlqQb4rxy3rPSUqxZlqQV5rQVOrPNOqM4Orab5qUZ3ZUVPpaqQqxyQsUyjqxVlsxC4sUu3ZUVPpaqQqxyQsUyjqxVlrQb1qQK0rMSUqxZlqQqOrxq4rwNOqw42qaV5qaZPZUVPpaqOsxGOqxGjqxVlrUZNsUC2rwROqM4PsxCNrxG3pUVOpaV5qaZOqxyKuQVPpaZ3qauNqQGjqxRlsxCQrxy2rwROqM4Pqaq3sUZ0pUVNpaG0raGQqxKKqxZlqxyNqxbPqPNOqT41rUV3qQR4ZVqOqM4NrQC2qUZPpUVNpaqQraGPsxGKqxVlsxC4sUu2swNOqT4OraqPrab5ZUVOpaKPrabPqQVjqxRlqUZOqQu2qMSUqxVlraK0sxb5qPN5paK3sxuPqaq3ZUVOpau5rxG3qUujsw44qUK0raV1rTROqw4PrxbPqQR4pUblsUR4rUCOrxuKuQVOpaRPqaC5qxVjsw44qUK0raV1rTROqT44qQq0raZPpUblsUG5rUZPqQGKqxRlrabOrxq4rwNOqT4NqaVQrUCPZVqOqT41rUb2qxu3pUVNpaV2qQZ2sxbKqxRlrUuOsUy5qPNOqT4QqQC3qab3ZUVNpaq2sUZ2sxZjqxRlrxuOrQqNsTSUqxRlqab0raG5qwNOqT43rUC3qQV4ZUVNpaZ0raR1rQKjqxRlsxCQrxy2rwROqT4PqaZ0qUq4pUVOpaV5qaZOqxyKuQVNpaV5sUG0sxbjqxVlrUZNsUC2rwROqT4OsUC5qaqOpUVOpaCPqxbPqaZKqxRlqxK2sxZQqwNOqw43sxyQsUu2ZWfeZXDgFXN9nPrdDdDdDdCetaOGp3SLHXK#tWNmDQ48BT9QHdG#ZMNMHYcNDwZ6Zer2DPZjZeSmG2c0EA9lZafMCd90HX9kpAOcDeuMpTnkCBneEA4MsMZNZURKqQRKqayMpTnQC2WjDwZ6ZaVlrTZjZdrmGYbMsaVjZdOgFdjMsaVjZdOgFdk1GdNMsMnLGXb6G2zcEPNiqxRMpTnQC2WjDA92DBZMsMZOpaKMpTnkCBneEA5NGd9aZafMqTRNZURKrMZjZdLgDXyMsaVjZdLgDXzmFdOcCBDcCA5bGXOLIwZ6qwNMCA5gFAW0EA9lZafMFd9lDwn9pTnNFXW5DBn3EAv0ETZ6pxVjZdDgFXyMsMnFI3ShGPHOHYvgHXOcGXgQn3W0seShGPHOHWrcGdccZUVKtYrNCA4KG3v5FXy9n29NCArgHYb6qT41nQ5xDAWQF24KqxOGp3rNCA4#GXgQn3W0pYShGPHOHXDgFXzNEeqeGBu6GXgQn3W0EYv0GYq6BT9Gp2ngHX1mHdclpAVlCAkLFAWgEXulFdz0BT9aF250DA50BT9QEA50DAOGp2LjG1NmGXOLIAOgG3ulFxr1sYShGPHOHY0jI3ShGPHOHYvgHXOcGXgQn3W0seShGPHOHWrcGdccZUZKtYrNCA4KG3v5FXy9n29NCArgHYb6qT41nQ5xDAWQF24KqxOGp3rNCA4#GXgQn3W0pYShGPHOHXDgFXzNEeqeGBu6GXgQn3W0EYv0GYq6BT9Gp3SjGdgQpdrmFzNmG2WkGXOcpd1NrYShGPHOHY1HZMNMC29lHYnmFW9UxykWxMZ6IPnmFMZ6qwNMF3nbDBZMsaZNpTnLC3vgF24MsMnaHBr0F20MpTngC29lZafMtYr2DPS3EAv0EU0eqaReZXLcEAHfHU0eqaRetaOeZXDgFXNkF3SLC2c0Ix0eqT45rab5sxb5rabeZYvPCA5QDd9PFx0eHYnLFerjCBvcoUVjZUygnQ48GXW0ETSbtwHrqTNNZVNOsTNNZVNOsTN5payPsxuOqxG2ZVNOrM43rxC4rau3pUblrxZ5rUVOrQCKxUV2paG1raK2rUGjqxqlqQVNrxV4qMSqqxqlqUK2qxq4rMN5payPsxuOqxG2ZVNNpUblrxZ5rUVOrQCKxURjqTSEZV0Opay4sUZQrxZ5pUulqaq1qab0qxZKxUVlrxK4qaq1qabjrw4PsxuOqxG2rwSqrT43rau3qUy4sTN1paZ5rUVOrQC1ZVN0paG2rUGNrxK4pUulqaq1qab0qxZKxUVlrxK4qaq1qabjrT4PqQyPsxuOqMSEZV04pau3qUy4sUZ0pUClsUKPqQyPsxuKxUKlrUGNrxK4qaujrP45rUVOrQC0rPSqqxVlrau3qUy4sTN3pab0qxV3rau3ZVNOqw42rUGNrxK4pUClsUKPqQyPsxuKxUKlrUGNrxK4qaujrM44sUZQrxZ5rTSEZV0OqP4PqQyPsxuOpUulqaq1qab0qxZKxUVQpaZQrxZ5rUVjrw4PsxuOqxG2rwSqqxClrUVOrQC0rPN1paZ5rUVOrQC1ZVNOrM40qxV3rau3pUulqaq1qab0qxZKxUVQpaZQrxZ5rUVjrT4PqQyPsxuOqMSEZV02paq1qab0qxV4pUulqaq1qab0qxZKxUClqQyPsxuOqxKjrw4PsxuOqxG2rwSqqxVlrau3qUy4sTN1paZ5rUVOrQC1ZVNOqw42rUGNrxK4pUulqaq1qab0qxZKxUClqQyPsxuOqxKjrT4PqQyPsxuOqMSEZV0Opay4sUZQrxZ5pUClsUKPqQyPsxuKxUVlrxK4qaq1qabjrP45rUVOrQC0rPSqrM44sUZQrxZ5rTN3pab0qxV3rau3ZVN2paK4qaq1qab0pUClsUKPqQyPsxuKxUVlrxK4qaq1qabjrM44sUZQrxZ5rTSEnPSdEAOjtwGaDdDdDdDdnQ48BT9NCBvftaOGp2G#tWNmG3DetMZjZev5GXyMsMnQHdGMpTnNF3rgHXcmFMZ6ZdnmHYvmFw1PEAHfHTZjZd1LGdHgFMZ6ZaRKrxqKqQRKqTZjZd1LGdHgFeSPF2qMsMZNZUqKqTRNZMNMG2rLFXyMsMZOpaCMpTnQC2WjDA92DBZMsMZOpabMpTnjEA5iZafOpTnjEA5iHBnjZafMG2z0HXclD3q6GBzLFXc0IwOLHAvgF3vPCAripYr1CevgHXOcpYrNDAzbZMNMEXcbDwZ6qwNMEXcbDA9lFXzLHdzLFdvNFXW5ZafOpTn0EBRMsaRjZevgGYvcIYuMsMnLFYv5CBgGHxROqQVKHdyKG2zQZe0jZercHYvgFdHQZag7ZdrmFAngFdzbZafOpTnaF21MEA5cDXnmHYvmFwZ6rQRjZdrmFAngFdzbCdHaF2OmGMZ6ZaqQqQqQqPZjZdrmFAngFdzbGdceEYuMsaCNpTnQEX93F3DcGdrmFevPF2NMsaVjZerfF3HmHdzPHX8MsMZOZe0jZeSjCBcjEBr0Zag7ZeSmG2c0EA9lZafMCd90HX9kpBngD2L0ZMNMCdHaF2OmGMZ6ZaqQqQqQqPZjZeDLFYzcC29jF3ZMsMndDdDdDdCMpTnfEBr0F3n5CdHaF2OmGMZ6ZaqQqQqQqPZjZdneC29jF3nmHdzPZafMrxy1rxy1ZMNMFAWPD2clZafMqTROqURKpxyKqTZjZerfF3HmHdzPC29lHYnmFTZ6qwNMCd9PDXzPCd90HX9kZafNpTnQEX93F3DcGevmZafMqT4PZMNMCBz0F3SjCBcjEBr0ZafOpTnbGd9NFXcQHTZ6qTNMDdOmCBvjDAD0ZafNJwNMEX90E2z5Zag7ZdcaF25QZafOpTnNFXW5EArmFMZ6qwNMGXOLIAcaF25MHBuMsaVjZeSjCBbNEArmFMZ6ZaOQHdGKH2cbHXK9nQZNnPSfDAceEYu9nQZNnQ48DPSdEAOjtwGaDdDdDdDdnPS0GdWlG2DmGd09n3vPCA5QFXW0DwK0pTRQowG#tYncC3uKIU0eqTGKIx0eqTGKH2cbHXK9nQueZXLcEAHfHU0eqxueZXDgFXN9nPrdDdDdDdCetaOGp3ncC3u#tYncC3uKIU0esTGKIx0eqTGKH2cbHXK9nQueZXLcEAHfHU0eqxueZXDgFXN9nPrdDdDdDdCetaOGp3ncC3u#tWNmDQ48BT9QHdG#ZMNMGXOLIxWgC29lZafMtYr2DPS3EAv0EU0eqaReZXLcEAHfHU0eqaRetaOeZXDgFXNkGezjDx0eFd9lIdzPFPGKHYnLFerdF3nktwH0GdWlG2OLHXyfrTNKqMbetaONF2O5D29lZYSmEA50GQ0eqTROrw40raRNrxC3ZURKqTROqP4NrQRPqxGQZUGlrxb5qUu1qQueZXDgFXN9nPrdDdDdDdCetaOGp3SmFYceF24#tWNmDQ48BT9QHdG#ZMNMFBz0DAcaF24MsaVjZd11HXyOEArmFMZ6ZaOQHdGKH2cbHXK9nQZNnPSfDAceEYu9nQZNnQ48DPSdEAOjpBn1FXy9n25mFegcGd8eZXDgFXN9nPrdDdDdDdCeZYvPCA5QDd9PFx0eHYnLFerjCBvcoUVjZUZlrwbetaONF2O5D29lZYSmEA50GQ0eqTROqT41qURQqxZKqM42sUC5qxKKqxRlrxRNqQVPZUClrQR5qaq5qQqKqxuKrM43qxV2qQVQqPRPZUZlraK4rQZNraGKrw40sxb2sUKKrP42sxG1rUCQDw0OrMR1pau5sxC4sTGKDdcjFU0eZ2DdDdDdDMG#tWNmGX9jIAHmFa48GXW0ETSbtwHrsw41qxy0rUZQrwN1pauQqQZ0sUR2ZVq5paC0qay5sxy5pUylrxG1rUC0rxyKsw44rxR5rQC1rPN1paK1sUV1rQVQZUVNpaR2qxC4swN2paZ0rUuNrxGQZVqOqT43raZ3sxy2pUGlrxZ5rxG2rxuKqxRlsUC0rxu1rTN4paKQqQb1qQuOZUVNpaRPqab2sxbjqxRlqUy2rQZOZVq5pabNraC4ray0pUVNpaZPrxC3rwR5paG3qaq2rQR5pUVNpaq5qaC3rxyKsw42qxbOraK3sTNOqT41rxG1rUKOZVq5paq3rUKNsxq0pUVNpaKPqUyPsUCKsw4QsUb5qUu3pUVOpaZQqxKNsUbKsw42rxZ4sUyPqwNOqw40rQCOraK0ZVq5pabOrxK2rxGQpUVOpaGPqUyPrQKKqxRlqQZ3qxu2pUVOpaGNrxuQqauKqxRlrxGOrxR1rwNOqw40rUZ0rxV5ZVqOqT43raGPsxKjqxVlqaqOrQq5qPROqT45rUVPsxCQpUVOpaROrxuNrxKKqxVlqUbQsUu3pUVNpaG5qQG1rQZKuQVPpaZ1rab5rxujsw4OqUq3rxb5swROqM4Oqxy5qQy1pUGlqab1rUu5rQZKqxVlqaRPsxV0qPN1paCPqxKPray0ZVqOqT45qQb0qUR1pUylqxq4rQK5sTROqT42rQq1rxVPpUulrQG4qxZ4qUqKqxRlrUK0rxy3rPN0pay2raG1qxb0ZVqOqT4PrUyPsUV0pUulqab5qxq4qxuKsw44qQuQray3rTN0paZ3raV2raR1ZUblrxC2rQyOsxujrT41qxy0rUZQrwSUsw4PsxbOqQKOrTN0paG1rUGOsUC0ZUblqaG2qxC2qUyjrw4Oray2qQuPrMR5payOrxu0qaq1pUylrUqQqau4qUCKAMGKEAu9n3ShG192F2O1FAzJDAOcFAzlHUVeZXDgFXN9nPrdDdDdDdCetaOGp3SLHXK#tYSLHXKKDU0exxVOpayOrxu0qaqjqP40qQqPrUKNrMSUqxVlrxC0sUuQqPNQpau4sUu5sxy3ZUVOpaC2qxq0sUyjqP42qUCPsUCOqwROqw43sUbPsUV5pUqlrQG5sUu1rQuKuQVPpaRNrab0pUulqUG1qxZ5rUyKqxZlqaZ1rUC2pUulrUVQqaq0rxbKqxZlrUZ5qQK3rTN0paG4rQRQrUK1ZVqOqP41sxb4qaR4pUClsxqPrxVNqUZKqxqlrQGPqxGNrTN5paV0qxbQrQyOZUVPpaq0rQC5rQGjqxVlqaVOraZ2ZVqOqM4OrxqPrUG2pUVOpau5rUV1qaqKqxVlsxZ5qaKOqwNOqw43rQZ2qxV3ZUVOpaC3rUCNsxCjqxZlqUu2rabNqwSUqxVlrUqNqayNqwNOqM4QqUb2rQR2ZUVOpau0rxq0rxyjqxZlrQZNsxyNswROqw43qUKQqaCjqxZlsxC1qQVNrTSUqxVlsxGOqQR2rwNOqP4PqUb2rab4ZUVPpaq4qay4raKjqxqlqxb0rxG0rTROqM42qaC5rUCQpUVPpabQqxy5qQbKuQVPpabPrUZOqMNOqM42qxV2rQy1ZUVQpaV4rQK1rQujqxZlqaKQsUKQZUVQpauOsUy3rUKjqxVlsxu4raCPqwSUqxylqxC0raZNrTN5pauOqxG0rUR5ZUV0pab1qab2qUGjrM42sxKQsUqPZUVQpay3qUCOqaCjrT4Orau0rxy2rMSUqxqlqxC5qaVOswNQpauPsUC2qQbPZUVPpaG2rxu3rxKjqM44sUR5qQbPrMROqM40sUu1rxG3pUZlrxC2rQyOsxuKuQVPpaZ0rxZ4qxujqM4PsxbOqQKOrTROqw44qQuQray3pUZlqaG2qxC2qUyKqxVlrxC2rQyOswNPpayOrxu0qaq1ZVqOqw4PsxbOqQKOpUZlrQy0rQV4rauKqxVlqaG2qxC2qwNQpaV2rxCQrUZ2ZUVOpayOrxu0qaqjqP40qQqPrUKNrMSEnPSgDU0eGXgQB3DmFYzkDz9cFXzkDA50qMGKDdcjFU0eZ2DdDdDdDMG#tWNmGXW0EU48GXW0ETSbtwHrqxqlqauQsUq1swNOpaqOrQRQrQVPZVqOqP4QqaV5rabjqw40qUu0qaq1rMROqP40raK3rxy1pUVlrxKQrxG5rUqKqxqlraCOqQq2qPNOpaK0rUK0qaqOZVqOqP45sUC3rUROpUZlqaK2qab4qUbKqxulqQVQqUVOrMNPpaG5qxVNsUV3ZUV0paCOrQu5rxCjqP4QrUbPrUy3rwSUqxClqQG0rQR0rPN2pay3qUqOraVPZUV2paCQrxqPqxCjsw45qxVPsUZ3swROrT40sUZNsUV5pUVQpaRQsxKQqQGKuQV0paV4sxbNrTNOqP40rauQrxq4ZUVQpaK1qQK1raqjqxqlsUKPqxC0rMROqP40rQZQqxKjqxulqabPrQG3rMSUqxqlqaZ3sxy4rwNOrT41rxy3rxKOZUVQpaZ0qQR1qQbjqxulsxC3qUq4rTROqP41qUCNqQu0pUV1paZOqxq5rQKKuQVQpaG2sxROrUbjqxylrUy1rQy3qPROrT4OsURPsxyPpUV1pau0qUC2qxbKqxulrUZ0ray0rPNOrw4OrQG2sUV0ZVqOrT44rUK3sUGQpUV0paGPqxZPsUuKqxylqaZ0rxVQsTNOrT4PrxuNsUu1ZUV1pay1qab1swNOqP43rQC4rab4ZVqOsT4NqaG3rQV2pUVNpaV4qxR4sxuKqxGlrQZ3sUu0rMN2paqQraV4sxqKqxylrQy4rQZNswNPpaGPraC2ray3ZVqOrw40qau1rQb3pUZlqxV0qxC1rxyKqxylqUC2raVjqw41raRQqxV4rwROrT43qUG3rQZ1pUVlqUGQrUb4rUVKuQV0pau4sxKNsUyjqT43rQG3sxb3rUbKqxulqQV3qaKPrTNNpay2rQZPsUV3qPROrT4PqxZ5rxVPpURlrUyNrxuOqURQZVqOqP45rQq2rQu5pURlqxKPsxZ3qaROZUVQpay2qaG1sxqjqT4Orxb5rxyOqxqKqxqlqab1qxu1rwNNpaq5sxZQqxuNswSUqxqlqUZ3rxqOrPNNpaCQsUyNrQGNrMROqP4NqUu1rxb2pUVlqUu5rUZQqQZKqxqlqauQsUq1swNOpaqOrQRQrQVPZWfeZXcbtwHNEerJHd9jHA1cB2zjDA1cFeuQnPSdEAOjtwGaDdDdDdDdnQ48BT9NCBvftaOGp2G#tWNmG3DetMZjZd11HXyNEArmFMZ6ZaOQHdGKH2cbHXK9nQZNnPSfDAceEYu9nQZNnQ48DPSdEAOjpBn1FXy9n25mFegcGd8eZXDgFXN9nPrdDdDdDdCeZYvPCA5QDd9PFx0eHYnLFerjCBvcoUVjZUulrwbetaONF2O5D29lZYSmEA50GQ0eqTR4payNqUqOqMRPpaC4rabOsTR4payNqUqOqMR2paGNsxZQsxqQZUVPZUClrQVOraqOqQqKqTRPpaC4sUGPqUC3ZUqlrUb5raK4ZUGlrab3rxu2q2ykqxCKqP40sxb2sUKeZXDgFXN9nPrdDdDdDdCetaOGp3SmFYceF24#tYSLHXKKDU0exxVOpay2rQbNrQbjrT42qxb4qUuPqMSqqxRlqxR1qUVjqP4OsUy4qxC5rwSUsw44rUK2rUK2rMNPpabQrUyPqxb4ZUblrUq3qxVOsxZjqM45qQK2qabNsTR5paV4rxKOrab1pUqlqxb0sxbNrUZKuQKlsxq0rxZOsxKjqP40rxVQrxV3rwR4pabQsUCPsxR4pUqlsUCPsUK4rUbKsw4Osxu5sxR0qMN0paVOrUV4qQu2ZVNOqT42qQbQrxC1pUylrxqNqUR1qUbKxUblqxb0sxbNrUZjrM45rUy4qaC3qMSUsT45qQK2qabNsTN3paV5rQVPqxC4ZUKlsxq0rxZOsxKjrP42qUK2rxK0qMR5paV4rxKOrab1pUGlsUC1qUV5rQCKuQblrUq3qxVOsxZjsT4OqaVQsUVNswR5paK0sUC0sUC2pUKlqxZ1rUK4qxbKqxRlqxR1qUVjrP44rQuOsxqPqMSqqxVlrxC3sxR3swN2pau0qUZNrxb1ZVNOqP4NqQR4qUy4pUGlsUG0qxbQqaZKuQVQpaZ4rQV2rQZjsT4Oqay0sUKOswROqP42sxK3qUq5pUKlqxZOqQKOqUbKqxqlsxu5sxb4swN3paK2rxROsxG2ZVqOrT4PqUVPsxq5pUGlraR4ray4rUZKqxulqxb3qxK2sTN3paV5rQVPqxC4ZUVQpab0qUKPrxujrM45rUy4qaC3qMSqqxZlrUb2rUy5rTN1payQqURNrxR5ZVNOqP45rUR4qay0pUulqxV0qxKQrUCKuQV0paV5rQV4raKjqP44raZ4sUK0swROrT4PqUVPsxq5pUqlrUyOqQyOrQyKqxqlsxu5sxb4swNQpaV5rUb5qUuPZVqOqP42sxK3qUq5pUZlsxq4raZ5qUKKqxqlqaK3qxC3qMNPpabQrUyPqxb4ZUVQpaRQqUKNrxKjqP4OsUy4qxC5rwSqqxVlrxC3sxR3swN0paCOsxKNrUZPZWfeZXDgFXN9nPrdDdDdDdCetaOGp3SLHXK#tWNmDQ48BT9QHdG#ZMNMG2zcE2caF24MsaVjZercDAjOEArmFMZ6ZaOQHdGKH2cbHXK9nQZNnPSfDAceEYu9nQZNnQ48DPSdEAOjtwGaDdDdDdDdnPS0GdWlG2DmGd09n3vPCA5QFXW0DwKNpabQqaC5qMNKqTbetaONCBvfZXu9n005pauQqxC1rUq0pUulqQu1rQqNqQbKxUVNpaKOqQZOqabjrw43rxy5qxR3rMSqsw42sUC3sUGOrwN2paK1sxu3qQK2ZVN2paq3rxZ3qxG5pUqlrUG5qQyQrxKKxUblrab4qQq5qQqjqT4PqayOqQRPsUGKxUVNpaKNqxC2qUGjqw4QrxV3sxZ3swSqsw4QrxbOqQy5pUZlrQC0rUqPraGKuQV0paROrUR0qaZjqM45qxKQqQZ5rwROrP43rURQsUu2pUClrQuNqQu1raGKqxGlrQuNqQK0rMNOqw40qQZ2sxZQZVqOrP43rURQsUu2pUV2paZPqaGNqUuKqxqlsUy3qQV1sTNPqT4OqUy3rabPZUblqUC3qQR3rabjqaRlqxR1rQC5qMSUrT4PrQGPsxb1rPNPqT4OqUy3rabPZURlqQb0qaqNrQC5pUV2paZPqaGNqUuKqT4QsxuPqQR3rabjqxVlrUqPrabPqPSUqT4QsxuPqQR3rabjsw41qabPqaC4rTROpaRNsxb0sUy4pUGlrQV2sxuOqwRPpaVPsxK4rxGQpUClqaZ2rabQrUyKxUqlqQbNrxR5rUujrP4OrQuNray3rwSUqM40rQuOrUZOrMN4paq5qQuQqay0ZUVlsxGOqxyQsUyjsw44rQq5qxq1swROpab3qxV1qQK1pUVOpauQqaC5qaqKuQVlsxGOqxyQsUyjqxylqQyOrQK5swR1paV0sUZOqUV0pUV4payPsUK0raZKsw4NraGQqUG2swNOsT41qaK4rUCPZVqOqM45sUC0qUyPpUV4payPsUK0raZKqxClqxCQrUCOrwNOrw4QrxV3sUb5ZUV2paV2qQu2qxyjqxVlrUqPrabPqPSUqxClqxCQrUCOrwN3paCQrxG4sxCPZUVQpaV4qxuQqQGjrT41qQyQrQC4rwR5pauQqxC1rUq0pUulqQu1rQqNqQbKAMSrrP4Prxb0rUb1sTNOpaq0rxb4sUR0ZVN1paR1rQq2qUC5pUqlrxu4qUG2sxZKxUGlqay5rUu5rxKjrw43rxROray4qwSqrM4OrUuQsxC1sTN2paK2rxZOsUKOZVNPpaKPrQZ1rUC5pUqlrxu4qUG2sxZKxUClqxu0qQb2rxKjqT4PqQR5qQyNqQKKxUGlqay5rUu5rxKjqw4QrUy5sUKNrTSEnPSdEAOjpBn1FXy9n25mFegcGd8eZYvPCA5QDd9PFx0eHYnLFerjCBvcoUblqUC3qQR4pTROqT4Oray0rxRgZYraCAOcoT0OpTROowS0GdWlG2OLHXyfpxblqUC3qQR4pTRkqxRlqxC1rUyNowReZXDgFXN9nPrdDdDdDdCetaOGp3SLHXK#tYSmFYceF24KGX9gFevQtwG2pau0sxCOrxq4ZUVNpaR5qaqNrQGKrw40qUR5raV1rTROqw4NraZOqxy0ZUulsUu5qUq4rUCKqxRlrUR3rabPqPR2payQraq0raV1ZUblqUR0qaqNrQGKrP4Qsxy3rabPqPR5paRNrUZQqUG3ZUGlqQb1rQC5qaqKqxulrxK2rxq4rwR2pau0sxCOrxq4ZUV0pay4rayQsUyeZXDgFXN9nPrdDdDdDdCetaOGp3SmFYceF24#tYSLHXKKDU0exxblqauNrQC5qaqjqxVlrQb1qQK0rMSUsw4PrUR3rabPqPNOqw4Qrxq4rUq5ZUblqaG2qau5rayjqxRlsxG2rQRNqPR5paq0rQZOqxy0pUVNpaC2qQb0qaqKuQblrUV4qxGQrUqjqxRlqQyOqxK0qPR5payOqxu3qQG4pUVNpaR4sUq2rauKsw42qaGOqxyQsTN5paK3rxu4qUG3ZVq5paG0qaG1rab5pUblraCPrxb1qUbKsw44rQZ4rxV4rTN5pau5qxG2qQu2ZUVNpaROrQuNqQKjsw4QraZ5sUR3rPSUqxRlqxCOsxy1swN5paZQrUV5sUR3ZUVNpaqNsxVQqQbjsw4OqQC5rxy0rMROqT40rxK5rUZQpUblqUGOqayKuQVNpaCNsUG1qUGjsw4NqUy1rUu1rTROqT43rxqQqUR2pUKlsxCPqxG5rxbKqxRlsUbPrxb2qMN4pab0qxV1qQK1ZVqOqw4NqQV4sxV3pUKlsxZNqxZ4qwROqw4OrxuOqUZjsT45qUb2qxyQsTROqw4PrxbPqQR4pUKlsxR5raV1qQKKuQVOpaq2rUq1sxyjsT45qUb2qxyQsTROqw40sUC1rab4pUKlsxZNqxZ4qwROqw42qay4ray0pUKlsxuOqxyQsUyKuQVOpaG2rxV2qwN4pab2qaV3sxy5ZUVOpabNsxGOqUKjsw4NqUy1rUu1rTROqM4Nrxb1qxbPpUblqUGOqayKuQVPpaZNsxqPrQGjsw4OqQC5rxy0rMROqM4QrxC1qUy3pUblqaq0qxb4qUGKqxZlrxROqUy3rPN5paq2qab4qUG3ZVqOqM42rUy2qUb3pUblrUbOrQCQrUCKqxZlrQG1rQR0rMN5paC2qay5rxR5ZUVPpaK5qxq0raZjsw44rQy0sUR3rPSUqxqlqUR2sxK3sTNOqT4NsUKQraC0ZUVQpaVNqUZ4sUVjqxRlqQyOqxK0qPROqP4OrQVPrwNOqT42raq5rUZQZVqOqP4PrUZPqxV5pUVNpab3raGNqUqKqxqlqaG3rabPqPNOqw4Qrxq4rUq5ZUVQpaZ3rQC5qaqjqxVlrQb1qQK0rMSUqxqlqaG3rabPqPNOqM4PqQC5qayQZUVQpaZ0qaZOqxbjqxZlraV0qUC4swROqP4OrQVPrwNOqM45qaC4qaC5ZVqOqP4OqURPsUKOpUVQpaZQsxy4rUbKqxqlqUR2sxK3sTNOqP41qUZ0qUZ4ZUVPpaK5qxq0raZjqxqlrQV1qaK4rwSUqxZlrQG1rQR0rMNOqP45qaKOrQuOZUVPpaC0rxCNsxGjqxulqUb5qUR1sTROqM41qUVNrxG3pUV0paZPrQG4sUyKuQVPpaq1rayNrxGjqxulqQy2rxGOqMROqM4PqUbQqaG3pUV0pau1qQKOqQKKqxZlqUy5rxV5qMNOrT41qxb1qxbPZVqOqw45qUb3qxR4pUV0pay4rxZPrUGKqxVlrQC1qxCOpUV0paCPsUy4sxCKqxVlraZ1sUC1rTNOrT42rUb2qxy0ZVqOqw40sUC1rab4pUV0paC3qUC0qxVKqxVlqQC0qQy5rwNOrT42sUVOrxq4ZUVOpaZ1sxZQqUKjqxulraKOqxyQsTSUqxVlqxy0qxRPpUV0paC4qxV1qQKKqxVlqUqOsUbOrPNOrT42rQR2rUVOZUVNpaK5qay5raZjqxulrau5raV1rTSUqxRlrQyQqQRNrMNOrT42qaK1sUb2ZUVNpaCNsUG1qUGjqxulrxK1qaZ0rPROqT40rxK5rUZQpUV0payOsxyOsxZKuQVNpaqNsxVQqQbjqxulrUyQsUVQsTROqT4OraV5rxy5pUV0paq1ray3qxZKqxRlqUV3rURQsTNOrT4PqaG3sUK1ZVq5paK3qaK1qxK0pUV0paR5sxRNrxKKsw43rUZ3rxC5swNOqP45qaKOrQuOZUblraZ3qxV1qQKjqxqlrQV1qaK4rwSUsw41qxV0rQq3sTNOqP41qUZ0qUZ4ZUblrUV4qxGQrUqjqxqlqaq5rxK0swR5paq0rQZOqxy0pUVPpabPraKPrabKuQblqaG2qau5rayjqxZlraV0qUC4swR5paZ0qUG2sxZQpUVPpaZQrabPrxqKsw4PrUR3rabPqPNOqw43sxyQsUu2ZWfKxxVNpaV4rabPqQVjqxVlrQb1qQK0rMSUqxRlqxK2sxZQqwNOqw45raK4rUGKqxRlqxb4rQu5swNOqM4Orab5qUZ3ZUVNpaZPqauNqQKjqxZlqQb4rxy3rPSUqxRlqau2qUy3sTNOqM42qaGPqxZ3ZUVNpaZ5rUC3sxVjqxZlsUu0qUq3rTROqT4QraKPrabPpUVQpaR0sxRQsUyKuQVNpau0qxK1sxqjqxqlqay0qUq5rwROqT41rUb2qxu3pUVQpauPrQu5sxqKqxRlrabOrxq4rwNOqP41rab0qaqOZVqOqT44qQq0raZPpUVQpaGOqxq0rabKqxVlqUZPrabOqwNOqP43sUZQqUG3ZUVOpaZ1sxZQqUKjqxqlrQKPqQR3rPSUqxVlrUb1rQGNrTNOqP43sUZQqUG3ZUVOpaC4rUb5sxqjqxqlrQVOqQu2swROqw44qaC5qaqOpUVQpay2sxuPqQVKuQVOpab2sUK0rabjqxqlrUZ3rUb5qPROqM4NrQC2qUZPpUVQpaZ1rURQsxyKqxZlqxyNqxbPqPNOqP4NrUbNqQK1ZVqOqM4Pqaq3sUZ0pUVPpaK0rURQrQuKqxZlqaGPrURQrPNOqM42qaGPqxZ3ZUVPpaZ5raR1rQGjqxZlqQb4rxy3rPSUqxZlqQV5rQVOrPNOqM4Orab5qUZ3ZUVPpaqQqxyQsUyjqxVlsxC4sUu3ZUVPpaqQqxyQsUyjqxVlrQb1qQK0rMSUqxZlqQqOrxq4rwNOqw42qaV5qaZPZUVPpaqOsxGOqxGjqxVlrUZNsUC2rwROqM4PsxCNrxG3pUVOpaV5qaZOqxyKuQVPpaZ3qauNqQGjqxRlsxCQrxy2rwROqM4Pqaq3sUZ0pUVNpaG0raGQqxKKqxZlqxyNqxbPqPNOqT41rUV3qQR4ZVqOqM4NrQC2qUZPpUVNpaqQraGPsxGKqxVlsxC4sUu2swNOqT4OraqPrab5ZUVOpaKPrabPqQVjqxRlqUZOqQu2qMSUqxVlraK0sxb5qPN5paK3sxuPqaq3ZUVOpau5rxG3qUujsw44qUK0raV1rTROqw4PrxbPqQR4pUblsUR4rUCOrxuKuQVOpaRPqaC5qxVjsw44qUK0raV1rTROqT44qQq0raZPpUblsUG5rUZPqQGKqxRlrabOrxq4rwNOqT4NqaVQrUCPZVqOqT41rUb2qxu3pUVNpaV2qQZ2sxbKqxRlrUuOsUy5qPNOqT4QqQC3qab3ZUVNpaq2sUZ2sxZjqxRlrxuOrQqNsTSUqxRlqab0raG5qwNOqT43rUC3qQV4ZUVNpaZ0raR1rQKjqxRlsxCQrxy2rwROqT4PqaZ0qUq4pUVOpaV5qaZOqxyKuQVNpaV5sUG0sxbjqxVlrUZNsUC2rwROqT4OsUC5qaqOpUVOpaCPqxbPqaZKqxRlqxK2sxZQqwNOqw43sxyQsUu2ZWfeZXDgFXN9nPrdDdDdDdCetaOGp3SLHXK#tWNmDQ48BT9QHdG#ZMNMG2zcEQSgC29lZafMtYr2DPS3EAv0EU0eqaReZXLcEAHfHU0eqaRetaOeZXDgFXN9nPrdDdDdDdCeZYvPCA5QDd9PFx0eHYnLFerjCBvcoURlsxqPrabPpTRNowG#tYSLHXKKDU0exxblrUqOray0qQujrT4QrUy3qQRQswSqqxRlsUVQqaVPswN1paG1rxbOqUG2ZVN5paC4raG4rQV1pUClsUy5rUGQsUCKxUClqQG1qaGOrQbjqP40rQbQrxq1sTSqsw42sxKQqQbQqPNNpaZPrxVQqUZ4rPSqqxRlsUROraCNrPNOpaq1qxG5qaG5ZVN5paq1sxVQrxbjqM43rau0qQZ2rPSUqxulqUV0qUuPqMNPpabOsUqQqab1ZUV3paG0qUq4rUCjrM43rURQrUy2rPROrP43rURQsUu2pUVOpauQqaC5qaqKuQV3paG0qUq4rUCjqxClqaZPrQRNrTROqP44rxGQqxy4pUZNpaVNrxG2sxZKsw4NraGQqUG2swNPqT4OqUy3rabPZVq0paZ3rQZ5sxy3pUZNpaVNrxG2sxZKqT4QsxuPqQR3rabjqxClqaZPrQRNrTRNpaq5rUZQqUG2swNOqw40qQZ2sxZQZVqNpaq5rUZQqUG2swN5payPsxZPraK0ZUVlqUR5sxu4rxKjrP43qxC5rUVOZUZlqxZ5sUK1rQqjrM4PqaC2sxq0rwSqqP4QsxR1qUb0rTN3paV3rUR2rxG1ZVqPpau3rUV0qaV2pUKlqQbQrUqPrxuKqw45rQVOrxq4rwN5paK3qQbOqQy5ZUVlsxGOqxyQsUyjqxVlrUqPrabPqPSUqw45rQVOrxq4rwNOrw4QrxV3sUb5ZUylqxu4qaVNqxujqxKlrxZ4sUu2qMR5paR2rQqNrQC5pUV4payPsUK0raZKuQVPpab4rauNrxZjqxKlrxZ4sUu2qMROrM4Oraq0raV1pUV1paq1qxG4sxbKqxClqxCQrUCOrwNOqw40qQZ2sxZQZVqOrM4Oraq0raV1pUGlraq1rQK5raZKqxqlqxKOrUqQrPN0payQrxq3raK1ZUblrUqOray0qQujrT4QrUy3qQRQswSEZV03paZ1sxu0sxy4pUVlqQu1sxK4qUuKxUylqUy3qQCNrabjqP41rUKNrQC5qMSqrP4Prxb0rUb1sTN1paG1qUV2rxKOZVN2paV0rUq5ray4pUClsUC1qaV4sUVKxUZlsUZ3qay0rabjqP41rUKNrQC5qMSqrM4OrUuQsxC1sTNNpaZQqUbQrxRQsTSqrP4Prxb0rUb1sTNOpaq0rxb4sUR0ZWfeZXDgFXNkGezjDx0eFd9lIdzPFPGKDdcjFU0eZ2DdDdDdDMG#tWNmGXW0EU48GX9jIAHmFMSNF2clHYq9nQClrUu5raV1qQKKqxRlqUbPqQR3rPR1pauNqUb2qxy0ZUVOpaR2qaVOrxuKrT44rUbNqQK0rMROqT40qUG2sxZQZUClrxq2qQu2qxyKsw4NqUuPqQR3rPR3paq5rxG2sxZQZUblqUR0qaqNrQGKrP4Qsxy3rabPqPROrT41sUC1qQK1ZUClrUu5raV1qQKKqxulrxK2rxq4rwGKDdcjFU0eZ2DdDdDdDMG#tWNmGX9jIAHmFa48GXW0ETSbtwHrsw4PrUR3rabPqPNOqw43sxyQsUu2ZVq5paZ0qUG2sxZQpUVOpaq1qQK0qQbKsw4PrQCPrUb2rwNOqT45rQC3qURQZUblqQu3qaVOrxujqxRlraCQsxuPqPSUsw40qxKOrQq0qPNOqT4QrxVOsUuQZUblrxVOrUGQrQKjqxRlqUK4qQC2rTR5paCPrQVOrxq4pUblsUG1rUKNrQGKuQblrQuPrQy2sxbjsw42raZ1sxyNswR5paK3qaK1qxK0pUblrUbOrQCQrUCKqxRlqUV3rURQsTN5paq2qab4qUG3ZVqOqT4OraV5rxy5pUblqaq0qxb4qUGKqxRlqQR5qxqQswN5paVQrab1rxu2ZUVNpau1sUb0qaqjsw4NrQVPrwSUqxRlraR4rQyNrPN5paRNrxy0rUy0ZUVNpaG1qQqNqUCjsT45raZOrQb1swROqT44sxZ1sxCPpUKlsxuOqxyQsUyKuQVOpaRQqxK5qxGjsT45qaROqaKOZUVOpaV1rUVNqMN4pabNsxCOrxq4ZUVOpaZ1sxZQqUKjsT45qUb2qxyQsTSUqxVlqQC0qQy5rwN4pabNsxCOrxq4ZUVOpau4ray2sxKjsT45qaROqaKOZUVOpaCPrxK2rxujsT45rUVOrxq4rwSUqxVlrQC1qxCOpUKlsxCPqxG5rxbKqxVlsxR5rQVNsTN5paRNrxy0rUy0ZUVPpaR1sxyOsxZjsw4NrQVPrwSUqxZlqaR5qQZ3rPN5paVQrab1rxu2ZUVPpaq1rayNrxGjsw4PqQuOsxKNrPROqM41qUVNrxG3pUblqQCPsxKNrQGKuQVPpaC0rxCNsxGjsw40sxV3raq0rMROqM43rQy3qUu2pUblraCPrxb1qUbKqxZlsUbOqQu2qMN5paK3rxu4qUG3ZVqOqP4NqUC5sUG4pUVNpaR4sUq2rauKqxqlqxRNqaK4qwNOqT4QrxVOsUuQZUVQpaV3qxZ1pUVNpaC2qQb0qaqKuQVQpaZ0qaZOqxbjqxRlsxG2rQRNqPROqP4PrQG2sxZQpUVOpaq1qQK0qQbKqxqlqaG3rabPqPNOqw43sxyQsUu2ZVqOqP4PrQG2sxZQpUVPpaZQrabPrxqKqxqlqauPqaVOswNOqM42qxuNraK5ZUVQpaV3qxZ1pUVPpabPraKPrabKuQVQpaVNqUZ4sUVjqxqlqaq5rxK0swROqP4NqUC5sUG4pUVQpayNqauNqaKKqxZlsUbOqQu2qMNOqP43qxyPsUK1ZVqOqM43rQy3qUu2pUVQpabPsUV3rUVKqxZlrau1raR5rPNOrT4NsxbNqUy4ZUVPpayNqxR1rQGjqxulqaZ3rQK4rwSUqxZlqQy2rxR1rPNOrT4QrxC1rQVPZUVPpaZNsxqPrQGjqxulrUyQsUVQsTROqM4Nrxb1qxbPpUV0payOsxyOsxZKuQVOpabNsxGOqUKjqxulrxK1qaZ0rPROqw43rayOraVjqxulraZ4rxK5rMROqw42qay4ray0pUV0paC0sxCOrxuKuQVOpau4ray2sxKjqxulraGNrauOqwROqw4QrauQrxb1pUV0paC4qxV1qQKKqxVlqay5qaqNsTNOrT42sUVOrxq4ZVqOqw4OrxuOqUZjqxulraKOqxyQsTROqw4NqQV4sxV3pUV0paC3qUC0qxVKqxRlsUbPrxb2qMNOrT42rUb2qxy0ZVqOqT43rxqQqUR2pUV0paCPsUy4sxCKqxRlraR4rQyNrPNOrT41sUyPqau3ZUVNpau1sUb0qaqjqxulrxV5rxV5qMSUqxRlqQR5qxqQswNOrT40rxq4qxq4ZUVNpaV2qxb1rxbjqxulqQy2rxGOqMROqT4NqxG0qUq4pUV0paZPrQG4sUyKuQblsUGPsUyOsUujqxulqUb5qUR1sTR5paG0qaG1rab5pUVQpabPsUV3rUVKsw42qaGOqxyQsTNOqP43qxyPsUK1ZVq5payOqxu3qQG4pUVQpayNqauNqaKKsw40qxKOrQq0qPNOqP4PqQb1sUu5ZUblqQu3qaVOrxujqxZlsxZ2sUZ2swSUsw4PrQCPrUb2rwNOqM42qxuNraK5ZUblqauNrQC5qaqjqxZlqaq2sxZ1qPR5paZ0qUG2sxZQpUVOpaG5rxq4rUCKAMSrqxRlqxK2sxZQqwNOqw43sxyQsUu2ZVqOqT4OsUC5qaqOpUVOpab2sUK0rPROqT4OsxK3rUb5pUVPpaV2sxbNqaGKqxRlqaZPrURQsTNOqM4QsxK1rxG3ZVqOqT4PrUCNrxG4pUVPpaCPrQZOqaGKqxRlqab0raG5qwNOqM44rUuNqQG0ZUVNpaq2sUZ2sxZjqxqlqUu5qUq4rwSUqxRlrUuOsUy5qPNOqP4PrxuNqQb1ZUVNpay0sxCOrUGjqxqlrUZ3rUb5qPROqT42sxV1qQK1pUVQpay2sxuPqQVKuQVNpaKQqQu2qaZjqxqlrQVOqQu2swROqw4NqaZ2sxVOpUVQpaG4qaqNrQGKqxVlqay5qaqNsTNOqP43sUZQqUG3ZVqOqw40sxy3rQR0pUVQpaG4qaqNrQGKqxVlraK0sxb5qPNOqP43qxVQrUC5ZUVOpaKPrabPqQVjqxqlrxC5rUZQqwSUqxVlsxC4sUu2swNOqP40qaG0sxbQZUVPpaR3raCNqaZjqxqlqay0qUq5rwROqM4OrxROsxZQpUVQpaR0sxRQsUyKuQVPpaZPqQG4qaujqxZlsUu0qUq3rTROqM4PrQZ0qUq3pUVPpaCPrQZOqaGKqxZlqab2qUy3rPNOqM4QsxK1rxG3ZVqOqM4Qqxb3qxV3pUVPpaV2sxbNqaGKqxZlqQqOrxq4rwNOqw45raK4rUGKqxZlqQqOrxq4rwNOqw43sxyQsUu2ZVqOqM4QqQV1qQK1pUVOpaCPqxbPqaZKqxZlqQV5rQVOrPNOqw40qaR4raC1ZUVPpaZ5raR1rQGjqxVlqxbPqaVOrwSUqxZlqaGPrURQrPNOqT45raq1rxC1ZUVPpaZPqQG4qaujqxRlrQu2rQqOsTROqM4OrxROsxZQpUVNpay0qxGQqUKKuQVPpaR3raCNqaZjqxRlqQq2rQZ5rPROqw45raK4rUC5pUVNpaV2qQZ2sxbKqxVlsUZ2sxZQqwNOqT4NqaVQrUCPZVqOqw42sUu5sxbQpUblsUG5rUZPqQGKqxVlrUb1rQGNrTN5paKNsUu2qxy0ZUVOpaZ1sxZQqUKjsw44qUK0raV1rTSUqxVlqUZPrabOqwN5paKNsUu2qxy0ZUVNpaKQqQu2qaZjsw44rQb0qaZQrPROqT42sxV1qQK1pUVNpaRPqxq0raZKuQVNpay0sxCOrUGjqxRlqxCQqaC5swROqT40rUV4rxbQpUVNpaqQraGPsxGKqxRlqQC4qaC5qMNOqT41rUV3qQR4ZVqOqT4Psxu2rQbOpUVNpaG0raGQqxKKqxRlqau2qUy3sTNOqT45raq1rxC1ZUVNpaZPqauNqQKjqxVlqxbPqaVOrwSUqxRlqxb4rQu5swNOqw40qaR4raC1ZUVNpaV4rabPqQVjqxVlraZOsxZPqMROqT4OsUC5qaqOpUVOpaG5rxq4rUCKAMGKDdcjFU0eZ2DdDdDdDMG#tWNmGXW0EU48BT9etaOGp3r2DQ4MpTnQDAziEArmFdn1HTZ6qwNMG2zcEPZ6qxRjZercDAkQEAvcGPZ6qwNMG2zcE3rgDXzQFA9MZafOJwNMGYncFX9LDTZ6qwNMHd9jHA1cZafMqwZjZeDmFYzkDAHLEA4MsMZkqwZjZevPCAriG3vmGdyMsaVjZevgFAzQHX9PDwZ6qwNMGXOLIAzbG3vmGdyMsaRjZeSjCBccDYW1CBn0EAOcZafMqMZjZevgFAzQHX9PDxSNFYnmF3uMsaRjZdOLFdvQC2WNDAD1FXNMsaVjZdOLFdvdHAOjFA9MEAOcZafOpTnlDeraFXcmGPZ6qwNMCAOcGevQZafNpTnLFXzPHUuNrTZ6qwNMCAZMsaVjZdWjDBn0rUR0HXz4HTZ6ZbNdZ3LVuQkyvbzspTSSvVnqx0rpZVkSyVWywy4MpTnLFXzPHYrNCAvbEA5eETZ6qxRjZdWjDBn0G3SLDXvgFdH2Zaf1pTnjF2GMsaRjZdrfGd9kDArLG3uMsejMF24MsaVjZencC2zgHdzPZafNpTnQHAZMsaW9pTnaF250Gd9jBQWzvxHzZag7Zd9lZafOpTnmGdvcGMZ6qaVjZdWaHXcmFMZ6Zdr1G3vmFwZjZdcaF24MsMZ8G3DeZYHgDYvftwGPqTGKEXzgD2L0twGPqTG#tXGKDdcjFT1PHAOctwHlF256DBnmnPSdEAOjtwGaDdDdDdDdnPS0GdWlG2DmGd09n3vPCA5QFXW0DwKOpTRQowG#tYSLHXKKDU0exxRjqxulrQZ3qaGPrPSqqM40rxu1rUy0rwNOrT43qaGPrQZ3ZVqPpau1rUy0rxu1pUVQpaq2sxR5qUbKqw4QrxKOsUV4qMNOqM4PrQZ3qaGQZURjqxZlqaGPrQZ3qPSqqTNOrT43qaGPrQZ3ZWfKxxRjqxRlraq2qQCQrMSUqM4PrxKOsUV4qMNOqT42qQCQraq2ZUulqUbNsxR5qUbjqxZlrUC5qUbNswR0paR5qUbNsxR5pUV0paGPrQZ3qaGKxUylrQZ3qaGPrQqjqxulrQZ3qaGPrPSUrw43qaGPrQZ3qPNOqw41raR5qUbOZUqlqxC2qQCQraujswRNpUbKxURjqxRlraq2qQCQrMSEZV0NpUGlqQCQraq2qQCKuQulqUC2qQCQraujrP4Qraq2qQCQrMR3paq2qQCQraq2pUVNpaC2qUbNsxVKrP4Qraq2qQCQrMNOrT43qaGPrQZ3ZVN5pUV0paGPrQZ3qaGKuQbjsw43rxZ3qaGPrPR0pab2raq2qQC0pUylrQZ3qaGPrQqKqTN1paGPrQZ3qaGQZVNNpUGlqQCQraq2qQCKAMSrqw42qQCQraq2rTNNZVqNpaGQraq2qQCQrMNNZURjqT43qQCQraq2qQCKqTNOpaCQraq2qQC0ZVNNpUulqUbNsxR5qUbKxUVlraq2qQCQraujrT4NsxR5qUbNswSqqw42qQCQraq2rTNOpaCQraq2qQC0ZVNOrM4Qraq2qQC0pUVlraq2qQCQrauKxUV2paq2qQCQraujqxqlqUbNsxR5qwSqqxRlraq2qQCQrMNOqP4NsxR5qUbOZVNOqT42qQCQraq2pUV0paGPrQZ3qaGKxUV2paq2qQCQraujqxulrQZ3qaGPrPSUqxGlqaCQraq2rTNOrT43qaGPrQZ3ZUV4pUVQpab5qUbNsxVKqxKjqxqlqUbNsxR5qwSqqxKjqw42qQCQraq2rTSUqxKjqT43qQCQraq2qQCKqxGlqaCQraq2rTNNZUV2paq2qQCQraujqTSqqw42qQCQraq2rTNNZWfeZXDgFXN9nPrdDdDdDdCetaOGp3SLHXK#tWNmDQ48BT9QHdG#ZMNMHYcNDwZ6Zer2DPZjZeSmG2c0EA9lZafMHX9NpBngD2L0ZMNMFAWPD2clZafMqTRNZT0PqwRkqaqMpTnjEA5iZafOpTnjEA5iHBnjZafMC2LPF21cC2WQHTZjZevgGTZ6qTNMEXcbDwZ6qwNMEXcbDA9lFXzLHdzLFdvNFXW5ZafOpTnaFXcaE2WPDAVMsaRjZdLLFduMsaW9pTnNCBrQZafNpTnNGd90DAr0EA9lZafNpTn2CBr0ZafOpTnQHAnJCdHLZafMqTZjZer1CevgHXOcZafMZMNMG3zMB3HcEAHfHTZ6ZauNqTZjZer1Cc9dF250DAuMsaRjZer1Cc9jEA5cEXzgD2L0ZafMqw40ZMNMG3zMB3rfCAvmHPZ6qwNMG3zMB3rgIdzJDezjFYraGdzcFMZ6rxRjZer1Cc9QEBgcFA9MZafOrwNMG3zMB2DmFeuMsMnLGdcLFTZjZer1Cc9MF3v0F20MsayNpTnPDAOmCAuMsaVjZencFX9LDYvgFAzmHBuMsaVNpTnPDAOmCAv0EA1cGPZ6qMNMFXWlD190GMZ6qTNMDADdDAr0GPZ6qwNMDADdDAr0CdO1GMZ6qTNMG3zMB2ngD19dHAOjG2rPDAzlZafOpTnQHAnJG2c6DwZ6qQCjZeW1EBgcGPZ6qTNMGdzbEBncC3uMsaRjZer1Cc9QEBgcFA9MDezjFTZ6qxbjZd5LHXc2DAD1FXOgF3qMsaVjZdnLG2y2rTZ6qTNMH2W0DBZMsaRjZer1Cc9mDdDJHXc0FXyMsMZkCAO0IAW6nMr4qxqOs3bdZ3KOqQV7ZXkLGXW0ZMNMG3zMB29dDMZ6qwNMFA9MEAOcG2zcEPZ6qTNMDBDcFevQHYnLC2kcGMZ6qwNMGYncGd9jFYqMsaVjZd1gDYnmFXOQZafOpTn2CBr0CdHNGdzjF2WbZafOpTn2CBr0B2gQCdOaEPZ6qTNMGXWPHX5cGeSPDBnmFXOJqwZ6ZMZjZeSLGevlDBnNGdzPF2OjF3ZOZafMDXzdZMNMG2LLGdyMsaRjZeSLGevlDBnkEAvPF2OjBQVMsMZMpTnNF3r0Gd9jFYqMsaVjZeSLHBrcGd9jFYqMsaVjZencFX9LDXOgHdyMsaRjZeDLG3vJFAcbGd9jFYncG3uMsM0OpTn0EYzkCeqMsaRjZdrmFevPF2OJFYn0yaRMsejMF24MsaVjZevcIYuMsMnTDBvgG3ueHXzlZXcjEPSGHxRNDdr5DAOcGdyKBYyNqXC2IdzjZUVNqTSyxTS2DBcLZUVNqTSXGdzcG3SgFMRkZTy1qURKAAW0BYyNqxqOGcO1qUVQqA0Kud9lHBr1ZwZjZd9PDXzPZafPqMNMCAr0EA9lZafMC3zQHX9kZMNMHYcNDwZ6ZevcIYuMpTnNF3rgHXcmFMZ6ZevmGT1jDAD0ZMNMCdGMsaVjZdneGXWbDXclDPZ6ZayKrwROrwR1ZMNMCdHaF2OmGMZ6ZanLsUDaCMZjZd1LGdHgFMZ6ZaRKqTRNZURMpTnLFdckCBvgF24MsMnLFYSfCwZjZdOgFdjMsaVjZdOgFdkNCBzQDwZ6qTNMCd9jDTZ6qTNMHYngCA5eFXyMsaRjZdrjEAriCBncCwZ6qTNMEXcbDwZ6qwNMEXcbDAWdHXzPG3vLGeuMsaRjZdLgDXzjCBRMsaVjZdOgFdk1GdNMsMnfHYvNGQgGp1NmGdzMGdWlDT5jIzNmIeS1sXb1GMZjZeraCAOcG21LFXNMsMZOZMNMG2rLFXzmHdzPZafMpxVMpTnQC2WjDwZ6ZaVMpTn0EBRMsaRjZevgGYvcIYuMsMZOqaqMpTnMD3r0Gdz0C2KMsaRjZdneC29jF3nmHdzPZafMpxVMpTnMD2OgFdzQZafNpTnlF3nkCAOmFdrjEAriZafNpTnfEAvcF25NFXW5ZafOJwNMHdWQHW9kEAvPF2OjFd9PFAWjZafOJu==',
        u2: '',
        u3: '',
        u4: '',
        u5: '',
        u6: '',
        u7: '',
        u8: '',
        u9: '',
        u10: '',
        y: 'xx???x=xx?x?x=',
        p: '#1IPnkIBDLG3u1rQRQZag7ZevgHXOcZafMxBbKzbWxzTRfHXzQHTbMpTngDTZ6ZeDLG3u2sUuPZMNMGYncGd9jFTZ6ZdL0HYSQscNmBT92qM5NFYnhGP5mGdHGp2k6DdC4Fd50CevMFarGpQy3qUqlIX1jZMNMGXW1G2zPF2OjZafMEYv0GYq6BT9Gp3CPpeSjGdgQpd9PD1NmE3gdDaLlFevMHXnlq1NmrxGNqP54FANMpTnNF3r0Gd9jFTZ6ZdL0HYSQscNmBT92qM5NFYnhGP5mGdHGp2k6DdC4Fd50CevMFarGpQy3qUqlIX1jZe0jZeKMscjMGYncGd9jFTZjZeSLHBrcGd9jFTZjZeSmG3vPF2OjZMNMFAcbGd9jFTnHJu==',
        isflash: -1,
        brand: "playerjs",
        brandurl: "//playerjs.com",
        motions: [],
        dt: true,
        pr: true,
        ga: false,
        ab: false,
        gatracked: [],
        pjsga: false,
        pltxt: '//.txt//',
        files_quality: [],
        files_audiotrack: [],
        files_quality_ag: [],
        files_subtitle: [],
        files_channel: [],
        plhistory: [],
        rightclick: 0,
        vastclick: false,
        focus: false,
        start: true,
        start2: false,
        metadata: false,
        ni: '<noindex>',
        ni2: '</noindex>',
        small: window.screen.width < 1000 && window.screen.height < 1000,
        moving: [],
        moved: [],
        menuproc: {
            'scale': 1,
            'contrast': 1,
            'brightness': 1,
            'saturate': 1,
            'sepia': 0
        },
        fltrs: [],
        piped: 0,
        or0: 0,
        live: false,
        subtitle_on: false,
        starttimeout: false,
        thumbs_on: false,
        thumbs_img: [],
        noads: false,
        clicks: 0,
        airplayed: false,
        timerInterval: undefined,
        toolbarInterval: undefined,
        toolbarhidden: false,
        dBbkbDTr: function(x) {
            var a;
            return a
        },
        reloaderTimer: 0,
        timerTime: 200,
        tagvideo: false,
        controlover: false,
        doctype: document.doctype,
        d: location.hostname,
        domain: location.hostname,
        href: location.href,
        https: location.href.indexOf("https") == 0,
        logos: {},
        gaurl: 'google-analytics.com/analytics.js',
        fd: ["dBbkbDTr", "BaDrDhDi"],
        files_speed: [],
        files_scale: [],
        files_sleep: [],
        custom_speed: 1,
        gifed: [],
        BaDrDhDi: function(x) {
            var a;
            return a
        },
        time: 0,
        timeld: 0,
        casting: false,
        dk: -1,
        current_speed: 3,
        current_sleep: 0,
        vastgo: 0,
        reloadTimer: 0,
        mediascale: {
            x: 1,
            y: 1,
            x0: 1,
            y0: 1
        },
        sub_options: ["sub_sizeproc", "sub_color", "sub_color2", "sub_bgcolor", "sub_bga", "sub_shadow", "sub_weight", "sub_bottom", "sub_shift", "sub_reset"],
        clr_options: ["clr_contrast", "clr_brightness", "clr_saturate", "clr_sepia"],
        vast_impressions: 0,
        vast_impressions_all: 0,
        vast_starts: 0,
        vpaid_starts: 0,
        vast_longtimeout: 0,
        midrollimprsd: [],
        vsts: ['preroll', 'pauseroll', 'postroll', 'midroll'],
        vast_remove: [],
        adsfirst: false,
        overlays: [],
        stuck: 0,
        ws: "w" + "s",
        acted: false,
        quartile: [false, false, false]
    };
    var default_style = {
        but: {
            w: 20,
            h: 20,
            action: "-",
            action_back: "-",
            a: 1,
            aover: -1,
            color: "ffffff",
            type: "",
            scale: 1,
            scaleover: -1,
            rotation: 0,
            tip: 1,
            icon: "",
            text: "",
            font: "Verdana",
            fontsize: 12,
            letterspacing: 0,
            position: "controls",
            margin: "0 3 0 3",
            marginproc: "0 0 0 0",
            click: 1,
            clickmargin: "0 0 0 0",
            normalonclick: 0,
            hand: 1,
            bg: 0,
            bgo: 0,
            bgstretch: 0,
            bga: 1,
            bgaover: -1,
            bgcolor: "000000",
            bgcolorover: -1,
            bgpadding: "0 0 0 0",
            bgborder: -1,
            bgbordercolor: "ffffff",
            iconscolor: -1,
            iconscolorover: -1,
            animation: "none",
            target: "_blank",
            tip: 0,
            tipbgcolor: "000000",
            tipbga: 0.7,
            tipbgrounding: 0,
            tipcolor: "ffffff",
            tippadding: "3 5 3 5",
            tippmargin: "0 0 0 0",
            tipa: 1,
            tipfont: "sans-serif",
            tipfontsize: 11,
            tipletterspacing: 0,
            tiptext: "",
            linetipmarginbottom: 5,
            toptip: 0,
            hidden: 0,
            stripsw: 2,
            stripsspace: 2,
            linespeed1: 0.2,
            linespeed2: 0,
            linespeed3: 0.1,
            pointed: 0,
            pointcolor: "ffce00",
            pointa: 1,
            pointw: 5,
            gradientcolorbg: "000000",
            gradientcolorload: "ffffff",
            gradientcolor: "ffffff",
            ontop: 1,
            clickscalex: 1,
            clickscaley: 1,
            rounding: 0,
            handle: 0,
            handle_width: 20,
            handleicon: "<svg width='20' height='20'><g><ellipse ry='5' rx='5' cy='10' cx='10' fill='#fff'/></g></svg>",
            handlea: 1,
            handleaover: -1,
            handlehide: 0,
            handlescale: 1,
            handlecolor: -1,
            slidespeed: 0.1,
            link: 0,
            linkurl: "",
            linkpause: 0,
            linktarget: "_blank",
            src: "",
            hideonwidthlimit: 700,
            hideoverwidthlimit: 700,
            displayvolume: 0,
            value: 0,
            valuecolor: "ffffff",
            valuebg: 0,
            valuebgcolor: "000000",
            valuesize: 9,
            valuemargin: "0 0 10 0",
            valuepadding: "0 0 0 0",
            valuerounding: 0
        }
    };

    function prtObj() {
        eval(decode('#1EACfHM52CBr0tx0OZTCdZXz4EBr0qMLmpeRgoBk2CBZKITR9ZVgxx04lGXWPG2yfDXzaF2vcoX8lGTbgs2DmGML2CBZKEa0Ns2f8IT54pdOcFdH0EUkhoPjgIPWcIXcQHTL2A3KlIWkhBz0gt3DFIT54A2gHBx0enQfenQkdF3ZfHdWPZXbKtwROs2b8qxR7EwjioBk2CBZKIXuKtwS2A3KlIWkhBwjeB2vcFebeBx92A3KlIWkhBwjeB2vcFebeBw5QGXOgHTKepTGgsckHs3DLGMS4GTR9ZYDFn3SLGevlDBZeo3KlIWkhBwjeBPGiEz07EACfDBLgG3ufIYRgnMD2A3KlIWkhBwjeFdz3n10LtxVgI2cdoYLNZx0enPc7IT54A2gHtx0eFAcbGd9jFTGdndb9txV/Hck4peLFEc1HtwGesMGes3DLGMSNGTR9ZYLFIYSHs2cdoXz4EBr0oYSNowc7HdWPZYb9ZYKlIWkhBxk5tx0eFAcbGd9jFTG/Ix0eGYncGd9jFTG6nPG7EACfHcjeGXWPHX5cGMGiIT54A2gHoPHbDA55nPkgBwRdnMS2APHNCBn0FdzPnPk4peLFEc0in2vcFebeo2cHZx0enPc7HcjeGXWPHX5cGMGiIT54A2gHoPHbDA55nPkgBw5QGXOgHTKepTGgpdclDXz4x2CfFP5bF21LEA4gtM0Ot3SNA3cHtwGesMGeJAcdoYDFn3SLGevlDBZeo3KlIWkhBwjeCAraDBS0nPkgBwRdnMS2APHNCBn0FdzPnPk4peLFEc0in2WaC2zNHTGiEz0LtwGeoBk2APHNCBn0FdzPnPk4peLFEc0in2WaC2zNHTGiEz0lGdzNFXWaDwKmZT9gDPNenPblG3SjEBufnPNeow5gFdvcIV9doX8lDX9kCAclox09pxV/GYSFIz09nPG6nPH9EACfGYSFn2cbn10gI2cdoYLbpdclDXz4x2CfGYSFn2cbn10gtM0OoBkNGWk5Bx0en319s2cdoYSNA3cHZTCdZYSNA3cHZx0enPc7GYSFIz0KtwSNGWk5Bw5PDBSjCArcoTGKCA5bZTGjnPGgs3SNA3cHZU0KGYSFIz0lGdzNFXWaDwKeEYv0GUfmpPGjnP8mnPb7EACfHcjeGXWPHX5cGMGiIT54A2gHoPHeDA8eo2cHZTCdZYDFn3SLGevlDBZeo3KlIWkhBwjeD2zmnPkgBwV9nPGgI3DLGMSeGU0eA2HcFQfeo3DFn3SLGevlDBZeo3KlIWkhBwjeD2zmnPkgBwjeBwG7GYSFIz0lEA5bDBLtDMLeGTb9tw0Ot3SNA3cHtBSNA3cHo2HNsMGes312CBZKFXHiZU0KHcjeGXWPHX5cGMGiIT54A2gHoPHmGMHHs3DLGMSjD2jPZU0KEx4Ot3DFn3SLGevlDBZeo3KlIWkhBwjeF3ZeoPLgpxVgBxfeDXzdnQkgDML2APHNCBn0FdzPnPk4peLFEc0in29PnPkgBx09n29PrxReoBkNGWk5Bx1NGWk5BwjeAQyNnz0es3DFn3SLGevlDBZeo3KlIWkhBwjeF3Zeo2cHtwHmGMH9s2cdoYDFn3SLGevlDBZeo3KlIWkhBwjeF3Zeo2cHtx0eG3vmGTGgI3SNA3cHtBSNA3cHoPHFG3vmGW0es3DFn3SLGevlDBZeo3KlIWkhBwjeF3Zeo2cHtwHLFdueJxk2CBZKGYn0HeKKtwReGYn0nPjfDBLgG3ufGYSFn2rNFwHHox8eC3SknPkNGWjeC3Skn106nPGgoPL4GT5gFdvcIV9doTHkIBDLG3ueox09qU94GUgNGWjeHXc0FXyeBw5QHAnQHYZfqTONGWjeHXc0FXyeBw5gFdvcIV9doTGKnPbgowjfDBLgG3ufGYSFn2ckGTHHox8eA2ckGW0eo3SNAPHgFBReBxfenPbin18eoPLcIXcQHTLNGWjeGXckGTHHox8eA3SgFBSHnPkNGWjeGXckGTHHoPGhoMG6nPGgo3SNA3cHs2cdoYKlIWkhBx09n21gDYnmFXNeoBk2APHkEAvPF2OjnPjfEx09qx8enQggoz0KtwSNGev2IUk9DAOQDBk2A3KlIWkhBz0itwL2A3KlIWkhBz0LtwGetPGKnPjfDBLgG3ufFXHiqMb/oXOeEQZLtwHbDACet2OeEQZ6FXHioxgjD2jgoPGKnQfenPbiGYn0HeK7JB19JB19JxkgDML2pd1gDYnmFXOQtx0OoBkdF3ZfHdWPZXghtxV7Edf8sUkhEMjioBk2CBZKIdbKtwShEa09qx8enQghEakgDML0IBScF2CKHcjeFAcbGd9jFTGiIdcHZU09ZTHQHYngFdGeoBkgDML2APHkEAvPF2OjnPk6Ez0lG3zMG3vPoURjqPb9twHNGeueoBkgDMLcIXcQHTL2APHNCBn0FdzPFAcbGd9jFYvgFAzQnPk6Ez0gZTCdZXz4EBr0oYDFn21gDYnmFXNeo3ggBwbgI2cdoYDFn3SLGevlDBnkEAvPF2OjHXckDBqeo3ggBwV9nPGgIPWmpd1gDYnmFXOmt28lFAcbGd9jFX8KtwSFBxfenQk2CBZKIMR9ZYDFn3SLGevlDBnkEAvPF2OjHXckDBqeo3ggBw5QGXOgHTKepTGgs2DmGML2CBZKEa0Ns2f8IM5jDA5eHXK7EMjioBk2CBZKFd9kDTR9ZXDLFYrcs2DmGML2CBZKEaZ9qUkhqaOmpd1gDYnmFXOmpdOcFdH0EUkhqMjioBkgDMLmpd1gDYnmFXOmA2fPBw50EA1ctx10GdckoYgFEc0goBkmpd1gDYnmFXOmA2fPBw52CBr0ZU0KFP5kEAvPF2OjF1khqc0lHdWQHTjeZTGiHcjeGXWPHX5cGd1gDYnmFXOmGMHHoPGKnPk2APHkEAvPF2OjnPk6Ez07Fd9kDTR9ZYvPHAy7JB0LFd9kDU9mpd1gDYnmFXOmpeS1G2KfI3vgFAy6HYngFwL6A2gHowO2CBr0seDFn21gDYnmFXNeo3ggBB0gsMGes319JB19JB19'));
        o.prted = true
    }

    function fd0(s) {
        if (s.indexOf('.') == -1) {
            s = s.substr(1);
            s2 = '';
            for (i = 0; i < s.length; i += 3) {
                s2 += '%u0' + s.slice(i, i + 3)
            }
            s = unescape(s2)
        }
        return s
    };

    function optStr() {
        if (o.u != '') {
            v = UpdateObject(v, JSON.parse(decode(o.u)))
        }
        if (options.indexOf("#" + v.enc2) == 0) {
            try {
                options = JSON.parse(o[o.fd[0]](options))
            } catch (e) {}
        } else {
            if (options.indexOf("#" + v.enc3) == 0) {
                try {
                    options = JSON.parse(o[o.fd[1]](options))
                } catch (e) {}
            }
        }
    }

    function SettingsTimers(x, y) {}

    function Touch(y, event) {}
    var Alert = function() {
        var xbg = createElement("div");
        o.frame.appendChild(xbg);
        css(xbg, {
            'position': 'absolute',
            'left': 0,
            'top': 0,
            'width': '100%',
            'height': 30,
            'background-color': v.alertsbgcolor,
            'opacity': v.alertsbga,
            'display': 'none'
        });
        var x = createElement("div");
        o.frame.appendChild(x);
        css(x, {
            'position': 'absolute',
            'left': 0,
            'top': 0,
            'width': '100%',
            'color': v.alertscolor,
            'font-size': v.alertsfontsize,
            'padding': (v.alertspaddingv + 'px ' + v.alertspaddingh + 'px'),
            'display': 'none'
        });
        this.txt = function(text, n) {
            x.innerHTML = text;
            show2(x);
            css(xbg, {
                'height': x.offsetHeight,
                'display': 'block'
            });
            xbg.style.zIndex = "1005";
            for (var i = 0; i < x.getElementsByTagName('a').length; i++) {
                x.getElementsByTagName('a')[i].style.color = '#fff'
            }
            if (n) {
                setTimeout(this.close, 1000 * n)
            }
            x.style.zIndex = "1006"
        };
        this.close = function() {
            hide2(x);
            hide2(xbg)
        }
    };
    eval(function(w, i, s, e) {
        var lIll = 0;
        var ll1I = 0;
        var Il1l = 0;
        var ll1l = [];
        var l1lI = [];
        while (true) {
            if (lIll < 5) l1lI.push(w.charAt(lIll));
            else if (lIll < w.length) ll1l.push(w.charAt(lIll));
            lIll++;
            if (ll1I < 5) l1lI.push(i.charAt(ll1I));
            else if (ll1I < i.length) ll1l.push(i.charAt(ll1I));
            ll1I++;
            if (Il1l < 5) l1lI.push(s.charAt(Il1l));
            else if (Il1l < s.length) ll1l.push(s.charAt(Il1l));
            Il1l++;
            if (w.length + i.length + s.length + e.length == ll1l.length + l1lI.length + e.length) break
        }
        var lI1l = ll1l.join('');
        var I1lI = l1lI.join('');
        ll1I = 0;
        var l1ll = [];
        for (lIll = 0; lIll < ll1l.length; lIll += 2) {
            var ll11 = -1;
            if (I1lI.charCodeAt(ll1I) % 2) ll11 = 1;
            l1ll.push(String.fromCharCode(parseInt(lI1l.substr(lIll, 2), 36) - ll11));
            ll1I++;
            if (ll1I >= l1lI.length) ll1I = 0
        }
        return l1ll.join('')
    }('c45d01s2z2a29313716263q0z3z1m27212o193v3e1d3o0z1z2m3q0z302k3x2u35242t322p1z3038251s25332z16212v232z1c2u271z1z3a251q2533211620361w1112141z133x2b2o172z261u3s2t2z2p113u242c153x292o1731261z101m252e1g3c2938182v3s10111o260w10113b213v2z3b38162v3s12111m3c162v3b213v29233x39213v2b233v1z1z3u291z302s291u2s271p2q1i25302o3e1z2112193x111z302235162z2o193x111i1t33211d203n2c113w2m2z1o1g272z1o1m25111q253r192124142c1e2e29361a3y2b321v3u2u3q3s37203b3r35302719162z141z121o233c1o11113u242c1d37383v1z1z23121g1q1u183d1i1e1j1f1h3c161e1t3c1a1e1b3f123e1k3g1k1c1u1e121f152c1r2e102c1s2c1z2e1r2d1s2e1s1c132c1t2g1w2c1s2e152c1r3e1u2e1s1c1i2e1u1c1x2c1u1e1v2c1q2f1w2c1r2c1t2e1q2d152e1t2c1s2c1s2e1c2c1s2g1t2c1s2d1r2e1q3e1v2e1s2e122c1u2g1w2c1r2g1z2c1q1c1s2e1q2e1t2e1t2c1t2c1t2e1t2c1q3f1w2c1s2c1q2e1q3e1f2e1s2d172c1s3f1y2c1q2f182c1q3d1h2e1q3d152e1s3e1y2c1s3f152c1s3f1u2c1q3d192e1q3d1r2e1s2d152c1u3f1t2c1q3f192c1r3c1c2e1q3d162e1u3d1w2c1s3f172c1s3f182c1q1d192e1s3d1c2e1s3d152c1s3g1p2c1q2f192c1q3e1c2e1q3d172e1s3e1u2c1s1f152c1q3g192c1q3d172e1q3d192e1s2c1s2c1s1e1d1c191g1e3e1a1c1i1g1k3e1p3d1f3d1d3d1i2f103d1j2f1f2d1k1c1b3e1d3e1a3g1m1e1d1e1q3g1d3c1d1f1f3c1b1d161g1q1d191g1c3d1d3e1g3f1e2c1d1e1d3c1d1e1m3e1d1c163f133e1f2c1b1f1i3e1b3e1g3e1h3e1j3g1h3e123g1e3d1k1e1m1g1g3e192e1f1e1f3b1d2f1a1c1q2g1f3d1d3e123e1d3d1d3e1m3d1j3c1d3g161e1b3e123c191d191f1d1d1b1f1j1e1d2c1l2e1d1c1d1e1d3d1d1c181d1d1e1f1e1u2c1r1c1h2e1s1e1k2e1s2c1t2c1t1g1t2c1r1e152c1q1c172e1q1e1o2e1t1e1j2c1u1e1s1e1i2e1s3c1w2c1u1e1f2c1q2g1j2c1s2d162e1r2c152e1s3c152c1u2e1v2c1r2f1y2c1u3c1m2e1q2c1j2e1s2e132c1s3g1p2c1s3g1v2c1r2c1m2e1q3d1d2e1t1e162c1t2e1g2c1p2f1t2d163c1t2e121t2b3g193d1q1c1b1e133e123e141e1i3d191g1e2e1k1e1x3e1i3e172e1t3e1v2e1u2c1v2c1w2g192c1u1f1y2c1t2e1s2e1s2d1y2e1t2e1o2c1v1e1u2c1t2e1s2c1s2c102e1s3c192e1u2e102c1u3e172c1t3g1z2c1s2c1y2e1u1c1o2e1t2c152c1u1e1o2c1s3g1f2c1u2c1g2e1s3e1g2e1u2d1x2c1v2g1j2c1u3g1t2c1u3e112e1s2c1c2e1u1c1x2c1w2e1h2c1s1f182c1u3d1c2e1s3d192e1s3d1a2c1u3f192c1u3f1l2c1s3d1b2e1t3c1d2e1s1d182c1w3g152c1s3f172c1t3d1f2e1s3d182e1u3e102c1u3f182c1s3f192c1s3d1a2e1s3c172e1s3d172c1u3e1d2c1s3f172c1s3d1q2e1s3d192e1u3d1c2c1u3f172c1s3f1j2c1s2d1a2e1u3d1b2e1s1d172c1u3f1b2c1s3e1z2c1s2c1m1e1h3c1c2f1e1c1h3b1e3f1c3c1b2e141c103b1f3g181d191g1f1e1g3d1i1e1c3d1c2g1k1c1o1c1k1f1h1d1c1e1h1c1b2d1m1f183d1c3e1a1d1g3d161g1h3c121g1w2d1j1d1a1e121b1d1g1e3d1p1c1d3e1c3d1j3g1e3d1e3e1g3f1e3c1c3f1f1d1k3d1m3f1w1d142e1e1c1b1c1f1g1h3d1p3e1y3e1c2d152e1a3d142f1f3c1g1c1k3e1c1c1s2g1m1c1c2e1d3f143e1d2g1i1d1k1d1j1e121d141e1a1d1r1e1d1e1e1c1x2e1u1c1x2c1v3e1q2c1s1e1y2c1u1d1l2e1r1d1w2e1t1c102c1u1e1j2c1s1e1l2c1s1d1m3f1j2c1s3f1s2c1s1d1z2e1t1c1s2e1u1c152c1w3e1x2c1s2f1z2c1t3d122e1u2c152e1f2c1s2c1v3g1t2c1t2e1l2c1u1c1k2e1t3c1f2e1t2e1u2c1t2f1b2c1s2e1h2c1t1e1v2e1s1d173f163d1w2d1h341e1t1p1g1c1c1i2e161g1c3e1h1f1e3e121d1k1g1h1e1t2e1i2e1u2c1t1g1e2c1u1e1u2c1r2c1m2e1s2c162e1s2e1k2c1u1f172c1u2g1m2c1s1e1z2e1q2e1y2e1s3d1y2c1u2e1u2c1s1f1k2c1p2e1x2e1r3e1g2e1s2c1s2c1u1f1p2c1t2g1t2c1q2c1y2e1q2e1e2e1u1c1x2c1u3e1p2c1u2e142c1q2e1r2e1s1c1k2e1u3c1f2c1w2f1x2c1s3e1z2c1r1d1w2e1q1d172e1t3c142c1u1f162c1u3f182c1q3d192e1q3c1b2e1s3d152c1w3g1r2c1s1f192c1q3d1d2e1q3d172e1s3e142c1u1f172c1s3f1g2c1q3d192e1s3d142e1s2d172c1u3f1x2c1s3f192c1q3d1y2e1q3d192e1t3d1c2c1u3f152c1s3e1e2c1q3d1a2e1r3d192e1s1d152c1v3e172c1s3f172c1q3d1b2e1q2c1u2e1s2c1u1c1h1e103c161e1k3e193c161e101d141g1s2c193c1s1e163c1c1e1g3e121d1j3g171d1c3f1s1e1k3c1f1e1d3d1s2f1m1c193c1f3f1a3c1p1g1f2e1a3e1e1e1q1d1c3e1d2d141e1u1f191d1j3f1f1e1e3d1i2e1d1c1q3f1c3d1h3d1a3f122c1a1e1f3d1d3d1a3g1d3d1p3e121d123c1g1e1b3d1s3f1i1d1d3d1r1g1b1c143e1s3d1k3c1a1e1r3c1c3g1g1e1g3d191g1c3c1o1e1f1c1d2c1u1f1d3d1p1g1f3c1i1d1r3e101d1t3e1y2c1q2c1w2e1r3e1u2e1u1c132c1u1e122c1u1e1s2c1q3c1z2e1s1c102e1s1d141c1b2e1s2d182e1t2e132c1u3e1s2c1t1e1u2c1s2e122e1s3e172e1u3c132c1w3f1r2c1u3e1r2c1r2c1h2e1q1e1v2e1s3e1q2c1v2e1w2c1s1e1l2c1r1e192e1r1e102e1s1c1o2c1u1e152c182e192c142c191t1j1b1s1i1h2t2c1i1s1i14', 'ff596o3o1v3q221c271u393v211b3q0z101o25212o193x3c1k193v111i1c2z173u3w112z1411133x392o1930261s3s2v302p1z3u263c153v392q1722241z311m252c1g3e29381w2v3u1z121m360y1z1229213x3z2b361w2x3s11101m3e162v2z3n11303a231q27332e142z2x232e163s291z1138231s25352c1421361y1a3s291w2u27163u271u2s271q3c113u26111z3w261z3w243u2m3o011z21293w141m272c2o111x23121z121m272c3o2o35222o1z313z2b213v3236163o0z1e1c2v2c292q122u1z101f3z1q1z3z3a23373u253w253t1336231z113837113z161h1z1e1m2e162t312p2e29213x3z2q1g27333c2b3w121o122h1c1d1f1c1e1f1c122d1k1c1a2g1k1e183e181e151e1i1e1i1f1d2c1s1d1r2c1r2g1r2e1q2c1w2c1s2e1c2e1s1e1x2c1s3c1r2c1s2e122e1q2e1m2c1u1c1i2e1s3e1f2c1u2d1z2c1q3e1x2e1r1d1u2c1s1d1s2e1q2e1s2c1t3e1v2c1s2e1t2e1s2e192c1u1d1w2e1r2g1o2c1s2d1y2c1r2g1j2e1r1c1u2c1t2c1q2e1q2e1w2c1s3c192c1s2g1y2e1q3c172c1t3e1r2e1q2f152c1s3d1x2c1q3f152e1q3d1e2c1s2d172e1q3f182c1s1d192c1r3g142e1q3d182c1s3d1t2e1q1f152c1t3d1c2c1q3f162e1q3d142c1s3d172e1s3f182c1s3d182c1q3f1f2e1q3d192c1s3d1b2e1q3f152c1s3d1t2c1q2f172e1q3d162c1s3d152e1r3e1g2c1s2d172c1q3g172e1q3d172c1u2c1s2e1q2e1c1c1f1c1m1e1a1e1i2f1b3c1b2c141c101g123f1q3d1c1e1u1d1u2f1h2f163e121b1f3e1c3g1k1e193c1f3d1j3e113g1j1e1g1e1h3d1g2c161e1d1f141e1s1d1j3c1d1e1e3g121d1h3e193e1d3f1q1g1k3c1f1c1f3d1d3f1d3f1d3d1f3d1f1d192f1c3f1c3d1e1e1s3c1d1e121g1q1e1f3d1r3b1d3f1d3e1d3c181c1f2e192e1a1g193d1g2c1f2c1d1g1i1e1b3c1g1d1g2c1h1f1r2e1q1e1j3c1d3e161e1b3g1g3e1f1c1g3c1r2g1h2e1s2d1i2c1s1e1y2e1r2g1k2c1u2e1h2c1q2g1k2e1q2e1m2c1u2e1g2e1q3g1d1d1k2c1t3d132e1r1g1f2c1u2e1t2c1q2g1t2e1p1d1r2c1t1c122e1r2f1y2c1s3c1x2c1q1e132e1s2d1v2c1u1e1u2e1q1g132c1s2d1f2c1s3e1o2e1s1e1a2c1u1c1h2e1s2g1u2c1u1c1y2d1q2e162e1q1c142r143c161e1k3g1g2e1f3d162c1i3f1a1g1g1d1q2e1l1c123g1c1e1r3e142c1w2e1r2e1s2e1z2c1u2c1i2c1u3e1t2e1u3e1w2c1v2c1t2e1u2g1g2c1t2c1z2c1u2f1y2e1u2c182c1u2e1x2e1u2g1b2c1s1d182c1s3e1z2e1s1e1g2c1w1c1u2e1t2e1k2c1u2c182c1s2g1p2e1s1d192c1w2e1p2e1u1g1x2c1s2e102c1s3f102e1s3c1w2c1u1d1k2e1r2g1v2c1t3e1i2c1s1f192e1u3e182c1u3d192e1t3f162c1s1d192c1u3f1c2e1s2d172c1w3e1g2e1s3f192c1u3d1f2c1s3f182e1u3e1e2c1u3d172e1s3f172c1s2d192c1u3e1a2e1s3d182c1u3d1a2e1s3f182c1s3d1c2c1s1f172e1t3d1b2c1u3d192e1s3f152c1s2d192c1u3g1w2e1s1d172c1u3d1b2e1s3f172c1s3c112c1s3e1w2e1k1c123d1q1e1k1f143f121e142e1u2e1c1f143f103e1i1d1f3c1d2f161g1c1d1b1d1s3d1c1g1g3f1g1c1d1c1e1c1c1g1p3e1c1c183d151e1h2e1b1f1k1d1f1c1i2c1s2g1j3g1d1c1j3c1e2d1b1g1j1f181c122c1b2d1b2f1b1f1b2d1b1c1a1c1d3f183f153c1i1d1u3d1f2g1c3f1f1c1f3c1d1c191f1r1f1s1e121c1w1d143f1c3f171e1h1d1u2d1j2g1p1e1a3e181d1r3e1d1e1h3e1c1c1g2c1e1e1h2e1i1g1c3d1f2c1y2c1f2e1s1e152c1s2d1j2c1s2g1i2e1s2e1f2c1w1e1i2e1s3f1k2c1s2e1h2c1u1g1g2e143c1r2c192c1t2e1k2e1u2d1f2c1w1e1h2e1u1g152c1r1d1y2c1s3e172e1s1d1y2c1v2d1z3e1u2g1a2c1u1e1v2c1s3e1f2e1s2e192c1w2e1v2e1u2g1o2c1s3e1w2c1s3g1j2e1u2e1f2c1b2c102e1w3e12122d1d1g1e1g3g1s1g1j1d1b1c1j1d191f1d1f1d1c1j1c1u1e1o3e1q3f1e2c1s2c1i2c1s3e1x2e1u1c1v2c1u1d1r2e1r1e1g2c1s1d1x2c1t2e1k2e1u1e1v2c1t2c152e1s2e1y2c1s3c1e2c1u2e1p2e1s1d162c1s2c1u2e1q2g1k2c1t3c1z2c1u3g1w2e1t2c1y2c1s3d1k2e1q2e182c1s3c1r2c1u2e1o2e1t1c1g2c1u2c142e1s2e1z2c1s2c1b2c1u2g1c2e1t3e1j2c1s2d182e1q3e1c2c1s1d192c1s3g1c2e1s3d182c1t3c192e1q3f172c1s3c1h2c1s3f162e1u3c1d2c1s1d192e1q3e1h2c1s3d182c1u3f172e1s3d192c1s3c1z2e1q2f192c1s3d1e2c1s1f172e1s3d1c2c1s3d172e1r3g1b2c1s2d182c1s3f162e1s2d172c1t3c1j2e1q2f182c1s3d192c1s3f152e1s3d1t2c1s2c1u2e1d1e1f3b143e1f2d182g1d2g1c1c1i1d1m3d1y2g1d2e1c1e1c1d1h3c1b2f1i1f183d1d3c1a1d1g3g121f1h3d121d1w2d1j3f163e121b1f1d1e3d1p1e193e1d3d1j3d133d1o1e1g1f1h3d1g2c181c1c2f141g1s1d1j3c181c181e161e181c1s1e1j3c1a1e181g123b1f1d1c1c1i2f1d3f1f3c121d143e1d3e1d3f1e3d1j1e1f2c192f121f1c1c1f3c1f1d1i3f181g1g1d1f1e1k3d1h2e1q3f1j3d152d1e3d142f1c2f1c1c1f3c102c1u1g1w2e1t2e1f2c1u3c1f2e1s2e1h2c1t2d1f2c1t2f142e1u1e1j2c1s3e1i2e1d2e1u2e1r2c1u2c1u2e1r2g152c1t2e1l2c1s2f1p2e1s1d142c1s2d102e1r2e172c1u1c1c1c1u2g1o2e1t1e1l2c1u2d102e1r1e1p2c1s2c1m2c1t3g1h2e1s3e1l2c1s2d1f2e1q2g1f1c1z2c1w2d1s3e1u141b1i2h2d1e2b1s1u1i1f2c141', 'e26512b23313y351y371e27222q193v3e1d3q001z1o27212o2m272e2q2m2w253a1g232z1i2e2b361a2x3u112z1m380y112z39233x2129361c2x3u1z3z1o21182t3z2p112238231s27352c14212x252c1w3u29111z38251s27333c1621281w10111611133v3b2q192z341u3u2v2z3n113w262c133x3b2q172z3612111m23113w281z3u28113w261z3w2q2129213x2e2b213v2b233x252y3b3x2e1z1z2435163o00322e2b3w121o2e1d3o0z312m241z3z1o21111z3s2911211d393x2e1a1w10322x3w2s333e12111c1m11153x27211v322q12232722352c162835211d1e1a2e162z261y11121z303u2911101m3u37012z223516352s2e3f1l1g1i1d1f1e1q3d1h2g1q3f1d3e183g1k1e1g1e1h2f1c3c1s3f1k2c1r3e1z2e1s2e1y2e1t2c1w2e1s3f1i2c1s2e182c1q3e1r2e1s2c1q2e1t1c1e2e1u2e122c1u2e1z2c1q2e1b2e1s2e1e2e1t3e1h2e1s2e1s2c1s1g142c1s2g1r2e1q2c1z2e1u2c1e2e1u3e1r2c1u2g1w2c1r2e1t2e1s2e1g2e1t2c1v2e1u2f1w2c1u2e182c1q2g1x2e1s2e1b2e1s1d142e1u3g1t2c1s2f192c1q3f192e1q1d182e1s3e1x2e1s2f172c1s3e1i2c1q2f172e1s3d142e1s2d152e1t3f1j2c1s2f192c1s3f142e1q3d192e1u3c1a2e1s2f152c1u3f1d2c1q3f172e1r3d1f2e1s3d152e1s3g192c1s2f172c1r3f1z2e1q3d162e1u3e182e1s2f162c1u3g1v2c1q3f172e1q3d192e1s3d1s2e1s2e1s2c1f1e1h3d1e1g1g3g1s1d141g1s2e1b3e1i3g101d143f1g1c1e3e1s1g1o3e1f3e1j3c1d1f1b3g1h2d183g123c173f1f1g1e3d1g2e1f3d1q3g1k3e1j1c1i1g1h3d1a1e1h3e191d1k3g183d1d3e1a1g1e3e141f1h1c101e1a1e181c1a1e1a3e1k1g1s1f191d1b1f1m3d1d3f1g1g1b1d1m3e122c123g101e1d3d1f3g1k3e1r1g1s1e1b1d1a3g1s1c1q3e1g3f1c3e141f1i1e1q1f1g3e1s1d1h3f1c3c1d1g1k3e103e1f3f1g1e122e1u2e1s1e1u2e1t1c1b2e1s2g1y2c1t2e1s2c1q3g1y2e1q3d1x2e1u2e1v2e1u1g132c1f2e1t1e152e1t2e1k2c1s1e1z2c1q1g1y2e1s3e1l2e1u3e1f2e1s3f1w2c1s2g152c1s2e1k2e1s1c1u2e1u1e1j2e1s3f1f2c1t2g1t2c1r2e102e1q1c1m2e1s1c1d2e1t3f1y2c1t1e1f2c1t2e1r3e1w2d1h192v1j143g1h2f163e1t3e1c3c1u3g1c1g1g3c1l1e1q1c1h2e1a1d1e3d162e1w2e1t2e1w2f1p2c1u3g1z2c1s2g162e1s2e102e1v2e1z2e1u2e1q2c1u2g1x2c1t2e1x2e1r3c1x2e1u3d1w2e1w3e1o2c1u3g1j2c1s2e112e1q2c1g2e1u2c1i2e1u3e1x2c1w2e1x2c1u1f1t2e1r1c1i2e1u1d1x2e1v2e1k2c1w1g1x2c1t2e172e1s3c102e1u3c1e2e1w2e1p2c1u1f182c1u3e1i2e1q3d1b2e1w3e162e1u3f152c1u3f1d2c1s1f1b2e1q3d1x2e1u3d192e1u3e162c1u3f1b2c1u3g1d2e1q3d1a2e1u3d182e1u3f172c1w3f1x2c1s3f1a2e1q3c1e2e1u3d192e1v3g1b2c1u3f1b2c1s3f1m2e1q2d192e1w3e1c2e1u1f172c1w3e1s2c1s1f192e1r3c1k2e1u1d172e1u3f1c2c1u3f192c1s2e112e1q1c1m1e1a1d1k1g1l1g1d1c1k1f1r3e1r3d1e3g1d1d1d3g1j3e133f1q1e1g1d1j1f1i1c181e1e2f141e1e1f1l3c1d1e1i3f121d1j3g1b1d1c3f1u1g1k3c1e1e1f3d1s2f1r1e193c1e3f1e1c1p1g1e2g1h3e1f1e1u1d1p1g1r1g1k1e1r1g1e1e1k3f1a1e161c162f1f3e1d1e1r3e1d1d1i1f162e1c2e1i1e1b3d1e3f1e3c1i3e141e141e1m1f1j2c1s1g1s3f1d3e1a3g1m1e151f1m1e1d1c1f3f1u3c1c3f1u2g1j3c1f1e1y2c1z2e1w2g1f2c1w2e1t2c1s2f1q2e1r1c1x2e1u2e1j2e1w3e132c1w1g1r2c1u1f1h2e1s1c111e1q2c1u2g1y2e1s2c1w2e1u2c1h2e1u3g1h2c1v2g1j2c1s2e172e1r3c1m2e1u3e1v1e102g1y2c1u2g1h2c1t1e1b2e1s1e1s2e1u1c1s2e1v2f1y2c1u3f102c1t1e192e1r2c1u2e1t3c1v3e1w2e121c191r2m2d1c3g1e1e1g3c1m1g1l1d1i1e1f3e1e1d1g1f1i2c1f1g1d2e132c1u1e1q2c1r2e172e1q1c1l2e1u3e1d2e1w1e1c2c1s3g1i2c1s1f1z2e1r2e1j2e1w2e1r2e1w2g1x2c1s2e1e2c1s1e1z2e1s2c1h2e1u1c1s2e1u2e1u2c1t2e122c1s2e112e1r2d1u2e1u1c132e1v2g1w2c1u2e172c1r3g1w2e1s2c1k2e1w1c1x2e1w1e1v2c1s2f1y2c1r2e1v2e1q2d172e1v3c1x2e1u3f162c1s3e1d2c1q3f1b2e1s3d1d2e1u3d162e1u3f1b2c1s2f192c1r3f112e1q1d172e1u3c1i2e1u3f152c1s3f182c1q1f1b2e1q3d152e1u3d162e1u3f1t2c1s2f1b2c1q3g1i2e1q2d192e1u3d1c2e1u3f152c1s3e1s2c1q3f1b2e1s3d1t2e1u3d162e1w3g1w2c1s3f192c1q3f1b2e1q3d172e1u2c1s2e1u2g1d1c123g1b3d1o1e1r3f1p3b1d3f1e3c192e1r3e1w2d1k3g1e1c1d1g1r3e1b1c183f151e1f2e1d1f1i1d1f3e1i2c1q1g1e3g1d1c1j3e1f2d193f1l3f161c122e1b1d1d1g1i3f1e2c1f3f1u1d1i3e1q1e1g1d1h3f1e2d1i3f1m1f1i3d1k3f1e3d1d3g1l3g1f3d143e1e2e1d3f1u3e1b1c1f1e1k2d101f163f1d2d1b1f1j3b1q2f1u1f1d3c1d2f161d1j1g1c1g1g3c1j1e1e2e1d3e1z3e102c193f1u2d193f1y1g1q2e1f3e102c1r2g1j2e1s2e1w2e1u2c142e1v3g1v2c1u3g1q2c1s2g1x2e1s2e1k2e1u3e132e1w3g1r3e1v2e1w3d1q2e1v3g1r2c1s2e1x2c1r2e1t2e1q3c1h2e1v3d1t2e1u3e1t2c1t2e1j2c1d2f1u2e1q1c1f2e1v2c1r2e1w2f1h2c1t2f1y2c1q1g172e1s3d1c2e1v3e1s2e1v2e1y2c1k3e1t3c1t3f103e1f122d1t1v2f1q1m2g1i1g2o141o', '0d078d40f2e415c049ef3e157752ca15'));
    var v = {
        log: 0,
        logout: 0,
        screencolor: "#000000",
        border: 0,
        bordersize: 1,
        bordercolor: "#000000",
        bgcolor: "#ffffff",
        rounding: 0,
        screenclick: 1,
        doubleclick: 1,
        player: 0,
        stopotherplayers: 1,
        iframe: 0,
        toolbar: {
            customimage: 0,
            color: "000000",
            a: "0.4",
            h: 34,
            stretchonfullscreen: 1,
            hide: 1,
            hidewithoutmoving: 1,
            hidejustfull: 0,
            hidetimeout: 3,
            hideleavetimeout: 0,
            leftandrightpadding: 3,
            animation: "none",
            position: "bottom",
            margin: "0 0 0 0",
            rounding: 0,
            clickarea: 0,
            image: ''
        },
        hotkey: {
            on: 1,
            f: 1,
            r: 1,
            m: 1,
            seek: 5,
            leftright: "seek",
            space: 1,
            updown: "volume",
            seeksides: 0,
            nums: 1,
            volumewheelfull: 1,
            wheelstep: 0.2
        },
        playlist: {
            bgcolor: "000000",
            bgcolorover: "333333",
            bga: 0.9,
            bgaover: -1,
            position: "left",
            margin: "0 0 0 0",
            padding: "7 15 7 15",
            color: "ffffff",
            font: "arial, helvetica, sans-serif",
            fontsize: 12,
            valuefontsize: 10,
            letterspacing: 0,
            valuecolor: "ffdd1f",
            borderbottom: 1,
            bordercolor: "444444",
            a: 1,
            aover: -1,
            posters: 0,
            posterheight: 100,
            posterwidth: 177,
            postertitleonhover: 1,
            historytitlea: 1,
            historycolor: "999999",
            historybgcolor: "000000",
            historybga: -1,
            historybgaover: -1,
            historytitlestrike: 0,
            activeiconsize: 3,
            headfontsize: 16,
            headbordercolor: "888888",
            rounding: 0,
            scrollarrows: 1,
            scrollarrowsize: 1,
            scrollarrowcolor: "ffffff",
            scrollarrowbg: 0,
            scrollarrowbgcolor: "000000",
            scrollarrowgradient: 1,
            scrollarrowbgover: 0,
            scrollarrowbgovercolor: "333333",
            limitwidth: 0,
            limitmaxwidth: 200,
            autoplaylist: 0,
            always: 0,
            alwaysjustpause: 0,
            alwaysnotfullscreen: 0,
            autohide: 1,
            floatleft: 0,
            floatheight: 50,
            floatmarginright: 0,
            floatlimitwidth: 1,
            floatwidth: 170,
            marginbg: 0,
            marginbgcolor: "333333",
            marginbgpadding: "0 0 0 0",
            hmaxk: 30,
            bordercolor: "666666"
        },
        settings: {
            bgcolor: "000000",
            bgcolorover: "222222",
            bga: 0.7,
            bgaover: -1,
            font: "arial, helvetica, sans-serif",
            position: "bottom-right",
            margin: "0 0 0 0",
            padding: "7 10 7 15",
            color: "ffffff",
            fontsize: 12,
            headfontsize: 16,
            valuefontsize: 10,
            letterspacing: 0,
            titlecolor: "ffffff",
            valuecolor: "ffdd1f",
            a: 1,
            scale: 5,
            aover: -1,
            activeicon: 1,
            activeiconsize: 3,
            scrollarrows: 1,
            scrollarrowsize: 1,
            scrollarrowcolor: "ffffff",
            limitwidth: 0,
            limitmaxwidth: 200,
            rounding: 0,
            settings1: 1,
            settings1action: "quality",
            settings2: 1,
            settings2action: "audiotrack",
            settings3: 1,
            settings3action: "subtitle",
            settings4: 0,
            settings4action: "download",
            settings5: 0,
            settings5action: "speed",
            hmaxk: 30,
            bordercolor: "666666"
        },
        logo: {
            position: "bottom-right",
            margin: "0 10 50 0"
        },
        volume: 0.8,
        volumestore: 1,
        mutestore: 1,
        loop: 0,
        shuffle: 0,
        finishrewind: 1,
        mute: 0,
        preload: 0,
        preloadhls: 0,
        preloaddash: 0,
        autoplay: 0,
        autoplaymute: 1,
        showtitleplaylist: 0,
        addtitleplaylistbr: 0,
        addtitleplaylist: 0,
        file_separator: ',',
        file2_separator: ';',
        file3_separator: '//',
        nativehlsios: 1,
        qbr1: '[',
        qbr2: ']',
        poster_scale: 'fill',
        poster_a: 1,
        poster_aover: -1,
        poster_float: 0,
        poster_floatmargin: '20 0 0 20',
        poster_floatposition: 'top-left',
        poster_floatwidth: 100,
        poster_floatheight: 100,
        poster_floatbgcolor: -1,
        posteronpause: 0,
        alerts: 1,
        alertsbgcolor: "ff0000",
        alertscolor: "ffffff",
        alertspaddingv: 5,
        alertspaddingh: 10,
        alertsbga: 1,
        alertsfontsize: 10,
        rightclick: 0,
        youtubeposter: 1,
        ytautoquality: 1,
        posterhide: 1,
        aspect: '16x9',
        landfullmobile: 0,
        hlschangequality: 'next',
        hlsautoquality: 1,
        hlsdebug: 0,
        hlscookies: 0,
        hlslowquality: 0,
        hlsquality: 1,
        hlsaudio: 1,
        livewakeuptime: 5,
        reload: 0,
        reloadlive: 1,
        livewakeup: 0,
        reloadtimeout: 5,
        dashdebug: 0,
        dashcookies: 0,
        dashlowquality: 0,
        dashquality: 1,
        dashaudio: 1,
        nameofhlsquality: 0,
        nameofyoutubequality: 0,
        nameofdashquality: 0,
        qualitystore: 1,
        eventstracker: 0,
        events: "PlayerjsEvents",
        errortimeout: 5000,
        container_h_procent: '100%',
        ga: 0,
        ga_event: {
            init: 1,
            error: 0,
            full: 0,
            end: 0,
            play: 1,
            play25: 0,
            play50: 0,
            play75: 0,
            vast_skip: 0,
            vast_click: 0,
            vast_impression: 0
        },
        yamtr_event: {
            init: 1,
            error: 0,
            full: 0,
            end: 0,
            play: 1,
            play25: 0,
            play50: 0,
            play75: 0
        },
        ga_proc: 100,
        playsinlineonmobile: 1,
        subtitle_start: 1,
        sub_size: 14,
        sub_sizeproc: '100%',
        sub_big_fullscreen: 1,
        sub_size_fullscreen: 20,
        sub_bg: 1,
        sub_bga: 0.7,
        sub_bgo: 2,
        sub_bgpadding: 3,
        sub_bottom: 10,
        sub_color: "ffffff",
        sub_color2: "ffeeab",
        sub_bgcolor: "000000",
        sub_shadow: 0,
        sub_weight: 400,
        sub_designstore: 1,
        sub_shift: 0,
        sub_store: 1,
        sub_off: 1,
        sharetitle: 1,
        sharetop: 0.3,
        shareiconscale: 3,
        shareiconscaleover: 4,
        shareiconmargin: 5,
        embedsize: 0,
        embedwidth: 560,
        embedheight: 315,
        fullonplay: 0,
        fullonplaymobile: 1,
        fullblack: 1,
        nativefullios: 1,
        hidestartbutios: 1,
        thumbs: 0,
        thumb_width: 160,
        thumb_height: 90,
        thumb_border: 0,
        thumb_borderwidth: 1,
        thumb_bordercolor: "333333",
        thumb_radius: 0,
        thumb_shadow: 1,
        enc2: '2',
        enc3: '3',
        vast_timeout: 10,
        vast_pauseonclick: 1,
        vast_closeonclick: 1,
        vast_volume: -1,
        vast_title: 1,
        vast_preroll_limit: 1,
        vast_preroll_andlimit: -1,
        vast_prerolltimebreak: 0,
        vast_prerolltbimp: 1,
        vast_preroll_counter: 0,
        vast_pauseroll_limit: 1,
        vast_pauserolltimebreak: 0,
        vast_pauserolltbimp: 1,
        vast_pauseroll_counter: 0,
        vast_postroll_limit: 1,
        vast_postrolltimebreak: 0,
        vast_postrolltbimp: 1,
        vast_postroll_counter: 0,
        vast_playroll_limit: 1,
        vast_playroll_counter: 0,
        vast_midroll_limit: 1,
        vast_midroll_counter: 0,
        vast_midrolltimebreak: 0,
        vast_midrolltbimp: 1,
        vast_introtimebreak: 0,
        vast_introtbimp: 1,
        vast_linktxtbgcolor: "#ffffff",
        vast_linktxtcolor: "#000000",
        vast_skipbgcolor: "#000000",
        vast_skipcolor: "#ffffff",
        vast_titlebgcolor: "#000000",
        vast_titlecolor: "#ffffff",
        vast_xbgcolor: "#000000",
        vast_xcolor: "#ffffff",
        vast_progressbgcolor: "#000000",
        vast_progresscolor: "#ffffff",
        vast_volumebgcolor: "#000000",
        vast_volumecolor: "#ffffff",
        vast_linktxtonmobile: 1,
        vast_unmutehover: 0,
        vast_unmutebutonce: 1,
        vast_default_volume: 0.5,
        vast_unmutebutbgcolor: "#ffffff",
        vast_unmutebutcolor: "#000000",
        vast_openclick: 1,
        vast_preroll_vmap: 1,
        vast_pauseroll_vmap: 1,
        vast_postroll_vmap: 1,
        vast_midroll_vmap: 1,
        vpaid_timeout: 10,
        vpaid_timeout2: -1,
        vast_resound: 1,
        vpaid_slotinframe: 1,
        eventstrackervast: 0,
        pauserollonplay: 0,
        partnerprerollor: "or",
        partnerpauserollor: "or",
        partnerpostrollor: "or",
        partnermidrollor: "or",
        midrollpoint: "50%",
        introskiptime: -1,
        introclickable: 0,
        introclosetime: -1,
        introtitle: 0,
        introtxt: 0,
        rc_version: 1,
        rc_anyway: 0,
        heartbeatinterval: 30,
        default_channel: 2,
        tagsinterval: 10,
        playedquartile: 0,
        minivis: 30,
        lsfullstart: 1,
        lsfullplay: 1,
        captions: 0,
        pip: {
            on: 0,
            bgcolor: "000000",
            border: 0,
            shadow: 2,
            bordercolor: "000000",
            position: "left",
            margin: "20 0 0 20",
            width: 150,
            hide: 0
        }
    };
    v.lang = "en";
    var VastLoader = function(preload) {
        var vast = [];
        var vastType = '';
        var vastUrl;
        var partner;
        var _x = '';
        var _preload = preload == true;
        var _preloaded = [];
        var _status = '';
        var _ltime = -1;
        var _nocred = false;
        var die_error = false;
        vast.events = [];
        vast.wrapper0 = ' -> ';
        o.vast_adid = '';
        var no = ['desktop', 'mobile', 'mobiletv', 'tv', 'lg'];
        eval(function(w, i, s, e) {
            var lIll = 0;
            var ll1I = 0;
            var Il1l = 0;
            var ll1l = [];
            var l1lI = [];
            while (true) {
                if (lIll < 5) l1lI.push(w.charAt(lIll));
                else if (lIll < w.length) ll1l.push(w.charAt(lIll));
                lIll++;
                if (ll1I < 5) l1lI.push(i.charAt(ll1I));
                else if (ll1I < i.length) ll1l.push(i.charAt(ll1I));
                ll1I++;
                if (Il1l < 5) l1lI.push(s.charAt(Il1l));
                else if (Il1l < s.length) ll1l.push(s.charAt(Il1l));
                Il1l++;
                if (w.length + i.length + s.length + e.length == ll1l.length + l1lI.length + e.length) break
            }
            var lI1l = ll1l.join('');
            var I1lI = l1lI.join('');
            ll1I = 0;
            var l1ll = [];
            for (lIll = 0; lIll < ll1l.length; lIll += 2) {
                var ll11 = -1;
                if (I1lI.charCodeAt(ll1I) % 2) ll11 = 1;
                l1ll.push(String.fromCharCode(parseInt(lI1l.substr(lIll, 2), 36) - ll11));
                ll1I++;
                if (ll1I >= l1lI.length) ll1I = 0
            }
            return l1ll.join('')
        }('ec36b1u212827313918243o0z311o252z2o1b3x3c1b3o01112k3o0z322m3v2s35262v302n1z323a231q253521142z2v25211a2s27111138231q27352z1420381y1z101411153v292o1931241s3s2v312n1z3u263e133v292q193z241z121o232c1g3e2b36162v3u121z1m260y121z39213x313936162x3u101z1m3e182t39213x2b213v39233x29213v11113s271z323u271s2s291r2o1g25323q3c1x21141b3v1z1z322433142z2q1b3v1z1i1v352z1b203p3e1z3u2m211q1e252z1q1o231z1q273t172z24163e1c2c29381c3w29321x3w2s3o3s3932393p35323917142z1611101m233e1q1z1z3u263e1b35383x111x21121i1j1o161d1k1g1j1d1h3e181c1r3c1c1g1b3d123g1m3e1i1c1w1g121d152e1t2c1y2c1u2e1z2c1r2f1u2c1q1c152e1t2e1w2e1u2c132c1t3g1u2c1s1e1k2c1s1c1z2e1u1c1v2e1s2d1u2c1t2e1t2c1q2f172c1r2c1u2e1s2c1c2e1u2e1r2c1u2f1r2c1q3g1x2c1q2e142e1u2e1w2e1t2e1x2c1s1e1s2c1q2g1v2c1r2c1v2e1t2c1t2e1s3d1u2c1u3e1q2c1q3g1h2c1q2d192e1s3d1y2e1s2d162c1s3f1h2c1q3f172c1q3e102e1s3d152e1u3d1s2c1s3f192c1q3f1t2c1q2d172e1u3d1t2e1s3d172c1t3e1c2c1q3f182c1s3d1y2e1s3d172e1u3d162c1s1f192c1s3f1e2c1q3d172e1s3e1p2e1s2d172c1s3f1c2c1q3f192c1q3e1w2e1s1d152e1s3e172c1s3f172c1q3f1b2c1q2c1u2e1s1c1d1e1b1e1c3e1c1e1i1e1k3f1r3b1d3d1f3f1i2d103f1l2d1d2e1m1e1b3c1d3f1c3e1k1e1f1g1q3e1d3e1f1d1d3c1d1f161e1q1f1b1e1a3d1f3g1g3d1e2e1f1c1b1c1f1g1p3c1d1e183d111e1h2e1b1d1i3f1d3c1e1e1j3g1j3e1h3g143e1c3e1m1g1p1e1g3g1b2c1d1e1h3d1d2d1a1e1s2e1d1d1f3f123c1d3f1f3c1k3e1l3e1d3e161f1d3c101c1b1f191d1d1f1d1d1h1e1f2e1o2c1d1e1f1c1b3d1f1e181b1d1g1h1c1s2c1u2f182c1r2g1u2c1p1d1b2e1s2c1f2e1t1e1t2c1t3g1y2c1p2f1h2c1q2c1f2e1u2e1w2e1s2e152c1s3e102c1r3e1y2c1q1e142e1u1c1y2e1s2c132c1t2g182c1q2e1a2c1s2e1u2e1s2c1j2e1s2e132c1s3e1i2c1r2g1t2c1s2c1y2e1u2c1g2e1s1e1a2c1s2g1w2c1q2g1j2c1s3e1x2e1t2e1s2e1s3e1t2c1s2e152c1r2e152c1s2c1a2e1s2e132e1s2d1j2c1t2e1t2c1s2e1q2c1s2c1u2e1t2d1q2e1u2e1c2c1u1e152c1s1e1c2c1q1c1u2e1s3e1j2e1u3e152c1u2e1v2c1r3f1s2c1s2e102e1t3c1d2e1t2d1d1c1v2e1u2c1t2e1s2e1j2c1u2e172c1s1g1r2c1s2d1f2e1u3e1v2e1u2e132c1u2e152c1s3g1v2c1s3c1l2e1s2e1g2e1u1e1f2c1t3g1o2c1r2g1k2c1r2c1k2e1s3c1h2e1s1d1t2c1u2e1p2c1q3e1k2c1q3e1v2e1t1e1q2e1u2e1y2c1u2e152c1r3e172c1r3c1f2e1s2e1w2e1u1e1w2c1s2f1u2c1s2g1s2c1q3c1v2e1t2d1d2e1t1e1f2c1t3e1f2c1q2f1v2c1s2e1y2e1t3c1f2e1s2e182c1u2e1p2c1r3e1e2c1s2e152e1u3c1h2e1u2e132c1s2e152c1r3g1u2c1r2c162e1u2e142e1u1c1t2c1u1g1z2c1s1e102c1s2e1x1e1v2c1x2e1u2d1k2c1s1f142c1q2f1y2c1r2c172e1u1c1y2e1u1e1u2c1t2g172c1r1g102c1s2c1u2e1u2c1r2e1s2c1y2c1u2g1j2c1s2e1q2c1s2e1k2e1s1e1r2e1u2d1r2c1u3e1t2c1q2f1w2c1r2c1w2e1s2d1g2e1t1c172c1s2f152c1s2g1q2c1q2e1q2e1u3c1s2e1u2d132c1t2g1t2c1s2g1w2c1s2c1h2e1s2e1i2e1u1c1g2c1u1e1q2c1s3g1v2c1q3e1z2e1t2e1q2e1u2c1s2c1t3g1w2c1q2e1q2c1s1c1w2e1t2c1t2e1u2d1s2c1t2e1v2c1s2g1j2c1r2c1e2e1t2c1r2e1s3c1y2c1u2f1w2c1q2e1a2c1r1c1w2e1s1c1w2f1s2c162c1s1e121d103e181c1i3e1i2g1c3d122e1k3d181e1i1f1q2e1h1e143e1a1c1t3g142c1s2g1t2c1q2c112e1u2c1e2e1w3c1r2c1w2g1w2c1r2e1v2c1s2e1i2e1t2c1v2e1w2d1w2c1w2e182c1q2g1z2c1s2e1d2e1s1d142e1u3c1x2c1u1g1g2c1s1e1w2c1r2c1m2e1u2c142e1u2e1k2c1u1f192c1s2g1r2c1s2e1z2e1s2e1w2e1u3d1y2c1u2e1w2c1q1f1m2c1p2e1x2e1t3e1e2e1u1d172c1w3g182c1q3f1b2c1r3e182e1s1d152e1w3d1a2c1u2f172c1s3g1i2c1q3d1b2e1u3d1b2e1u3d162c1w3g1b2c1q3f192c1q3d192e1s2d152e1w3c182c1u3f182c1q3g1c2c1q3d1a2e1s3d182e1u1d152c1v3f1b2c1q3f1b2c1q3d172e1s2d152e1w3e1u2c1u1f172c1q3f1d2c1q1d192e1s3c1x2e1u3c1u2c1m1e123d1j1g1m1d121e141g142e1q2g1e1d121e123g1i1d1b3e1f2d141e1e1f1b1d1o3f1e1e1e3d1i3e1d1c1d1e1e1e1k3c1e1e183e113g1j2c192d1m3f1c1c1e2e1u2e1h3e1f3e1j3c1d1f1d1e1h1d1a1e122c171f1d2d192d1d1f1b1c161e1f3d163d173e1i1e1q3f1h2e1d1e1h1e1c3c193e1b1d1p1e1u3g121c1s1g163d1d3d191g1h1e1q2g1l2e1k1c1c3g181e1k3g1f1c1f1c1e1e1g2c1d3g1j2c1g2e1e3f1f2c132e1m2c1q2c1r2e1t3e1h2e1u3e1j2c1u2f1h2c1q3g1f2c1s2c1h2e1s2d1d2e1w2e132c1w1g1v2c1r2e172c1r1c1f2e1t1d1p2e1v1c152c1v3g1a2c1r1e1z2c1r2e1k2e1s2e1o2e1v2e132c1v1e1y2c1q2e122c1s2c1b2e1u2e1o2e1u3c132c1v2e1a2c1q1g1m2c1s1e1w2e1u2e1d2e1w1c1d2c1v3e1x2c1q1e1z2c1q3c1u2e1s2c1y2e1u3c182c1w2e1u2c1s2e1h2c1r2c1y2e1u2e1w2e1v2c132c1v2f152c1s3g1z2c1r3d1j2e1u3c1r2e1u2e122c1u2e1z2c1r2g1y2c1s3c122e1u2c142e1w2c1d2c1w1e182c1q1e1b3c1d2c1w1e162c1s1e1w2c1q3c112e1u2c1y2e1u1d122c1v2e152c1s2g1b2c1q2e1x2e1t1c1q2e1v2e152c1u3e1x2c1q2e1u2c1s2e122e1s3d1v2e1u2d1r2c1w2e1o2c1r1g122c1r3e1x2e1u2e1y2e1u2e1r2c1v3e172c1s2e1s2c1q2c192e1t3c1v2e1w2d1v2c1u1e1b2c1s2f1j2c1s3c1z2e1s2e1t2e1u2d132c1w2e1s2c1s2e192c1q1c1y2e1s2c1t2e1u3d1y2c1v1f1v2c1q2f1w2c1r3c1f2e1u3c1b2e1w1c1v2c1u2e1v2c1s3g1x2c1r2e102e1s2c1s2e1u2e1u2c1u3g152c1r3e122c1s1e1z2e1u2c152e1w3c1x2c1v3e172c1p1f1t2c1r1c112e1t2d1y2e1u3c1t2c1u3e1f2c1r1e1z2c1q2c1f2e1s1c1k2e1w2e1g2c1u3e1f2c1q1f1r2c1s1c1u2e1t2e1g2e1w3e1w2c1u3e1x2c1r1g1k2c1r2c1s2e1s1d1s2e1w1c1s2c1u2g1q2c1s1e1z2c1q1e1x2e1s1e142e1w2e1q2c1v2e1f2c1q2f1a2c1q2c1v2e1s2d132e1u2e1d2c1v3g1w2c1s2e172c1q1e1x2e1s1e1u2e1w1c1b2c1u2g1j2c1s2g1x2c1r1d1s2e1s2e132e1u2e1v2c1w1e1u2c1r3e1z2c1q2c1d2e1u3d1s2e1w2e1h2c1w2e1x2c1q2g1s2c1r2c1u2e1s2e1x2e1w1e132c1t3e1v3c1s2e161c171c1q2g1e3e1c1e1k3c1p1e1l1f1k1c1d3e1i1d1g1d1i2e1h1e1b2e172c1u1c1q2e1t2c152e1u1c1o2c1u3g1f2c1u2e1g2c1s3e1i2e1u2d1x2e1v2e1j2c1w3g1t2c1u3g112c1s2c1e2e1u1c1x2e1w2c1h2c1u1e1u2c1s2e1y2c1t2c122e1u2c1z2e1v2d1u2c1u1e152c1t3g102c1u2c172e1t3e1u2e1w2c1k2c1w1e1z2c1u1e1z2c1s2d1y2e1t2c1t2e1u2d172c1v3e1z2c1s3f1a2c1s3c1d2e1s3d192e1w3d1d2c1u3f182c1s3f1f2c1s2d192e1t3d1z2e1u1d172c1u3e1k2c1s3f192c1s3d182e1s1d192e1u3d152c1u3f182c1s3f1x2c1s2d1b2e1s3e1g2e1u2d192c1u3f1b2c1s1f192c1s3c1s2e1s1d192e1w3d1t2c1u3f182c1u3g102c1s3d192e1s3d192e1u3d172c1u2e1u2c1s2g1h1c123e1b3f1q1c1p3f1t3b1d3d1e3e1b2c1p3e102d1k3e1e1e1c1e1p3e1f1c183d151g1h2c1b2f1m1d1c1c1i2e1s2e1c3g1e1c1j3c1f2f1b1d1j3f1a1c122c1b1g1c1e1g3f1i2c1c3d1u1g1k1c1o1e1k1d1h1d1e2g1k3d1k1f1m3d1k3d1e3f1c1e1j1g1j3d141c1e2g1f3d1s3e1f1c1c1c1k2g121d141f1e2d1b1d1j3d1s2d1s2f1h3c1d2d161g1o1e1a1g1k3c1j1c1e2g1c1c1x1e142c191d1u2f1b1d1w1g1u2e1f3c122e1s1c1y2e1w3c1q2c1w2g1a2c1u1e1q2c1u3e1w2e1u2d102e1w3c1r2c1w2g1x2c1u2e172c1t1e1u2e1s1d1y2e1u2c1p2c1v2g1h2c1u1g1b2c1s1c172e1s3c1t2e1v1c1j2c1w3e1f2c1s2e1u2c1u3e1m2e1u2d102e1u1c1t2c1v2e1v2c1u1e1q2c1s3e1y2e1t2c1o2e1v1c1v2c1u2f1s2c1s3e192c1s3c1y2e1u2c1v2e1v3c1d2c1w1e1x2c1s2g1b2c1u3c1x2e1u2c1i2e1w1c102c1w2e1a2c1t2g112c1t2e1w2e1s2e1x2e1u2e1x2c1u3g1s2c1u3f1s2c1u1d192e1u2c1t2e1w2d1y2c1w2e1v2c1s2f1j2c1t2c1w2e193c1t2g1a2c1t1c192e1s2c192e1u2e1q2c1v1g1j2c1u1f1h2c1s2c102e1u3e1v2e1u2c192c1w2f1q2c1u2e1m2c1s1e182e1t2c1u2e1v2c102c1u1e1u2c1t1f1q2c1u2e102e1t2c1o2e1u2d152c1w3f1x2c1s1g1m2c1s1c1t2e1t2c1s2e1w2d192c1u1f1z2c1u2e1l2c1t2e1x2e1u2c102e1u2c1w2c1u1f1v2c1t2e112c1s1e1z2e1s2d1v2e1w1c102c1v3e1u2c1u3f1y2c1t3e112e1u2c1x2e1w1d1h2c1v3e192c1t3f1x2c1t2c1x2e1s2c1b2e1w1d1s2c1w3e1t2c1s3e1t2c1s1e1l2e1u2e1s2e1u2e152c1w2e1t2c1v3g1k2c1s3e1l2e1t2e1f2e1u3c152c1v3e1i2c1s3g1v2c1u3e1f2e1t2c172e1u2e1f2c1u2g1y2c1u3e102c1u2c172e1r1c152e1u2c1o2c1u2e162c1s2g1f2c1t2c1y2e1t3c1f2e1u1c1w2c1v3e1x2c1t2e1h2c1s1e1i2e1u2c1j2e1u1c1b2c1u1e1v2c1u3f172c1t2c1r2e1s2c152e1v3c1w2c1w1e1c2c1u1e1l2c1u3e122e1s3e1y2e1u3c1y2c1u2f1q2c1s3e1z2c1t1c1m2e1u1c142e1w1c1s2c1w1g1t2c1s2e1v2c1s2c1e2e1s2c1c2e1w2c102c1v3e1t2c1t2e1s2c1s1d1f2e1u2c1x2e1w3c1w2c1v2g1y2c1s3e193c182c1b2e162c171t1l1b1s1g1h2v2c1i1q1i16', '998f4o3q1v3q221c291u393v211d3q0z101o27212o193x2e1k193v111k1c2z173u3y112z1411153x392o1922261s3s2v222p1z3u262e153v392q1922241z211o252c1g2e2b381w2v3u11121m360y111229213x212b361w2x3u11101m2e182v2z3n11223a231q27352e142z2x252e163s29111138231s27352c1421281y1a3s291y2u27162u291u2s271q2e113u2611113w261z3w263u2m3o011121293w141o272c2o111z23121z121o272c3o2o37222o1z21212b213v2228163o0z1e1e2v2c292q142u1z101f211q1z3z3a25373u253w273t133623111138371121161h1z1e1o2e162t212r2e29213x212q1g27332e2b3w121o142m1c1c1f1e1e1f1c122g1k1c1c2g1m1e183e181g151e1k1e1k1f1d2c1s1f1r2c1t2g1t2e1q2c1w2e1s2e1e2e1u1e1x2c1s3e1r2c1u2e142e1q2e1m2e1u1c1k2e1u3e1f2c1u2f1z2c1s3e1z2e1r1d1u2e1s1d1u2e1s2e1s2c1t3g1v2c1u2e1v2e1s2e192e1u1d1y2e1t2g1o2c1s2f1y2c1t2g1l2e1r1c1u2e1t2c1s2e1s2e1w2c1s3e192c1u2g102e1q3c172e1t3e1t2e1s2f152c1s3f1x2c1s3f172e1q3d1e2e1s2d192e1s3f182c1s1f192c1t3g162e1q3d182e1s3d1v2e1s1f152c1t3g1c2c1s3f182e1q3d142e1s3d192e1u3f182c1s3f182c1s3f1h2e1q3d192e1s3d1d2e1s3f152c1s3f1t2c1s2f192e1q3d162e1s3d172e1t3e1g2c1s2f172c1s3g192e1q3d172e1u2c1u2e1s2e1c1c1f1e1m1e1c1e1k2f1b3c1b2e141c121g143f1q3d1c1g1u1d1w2f1j2f163e121d1f3e1e3g1m1e193c1f3f1j3d133g1l1e1g1e1h1f1g2c181e1f1f141e1s1g1j3c1c1e1g3g121d1h3g193d1c3f1s1g1k3c1f1e1f3d1c3f1f3f1d3d1f3f1f1d1b2f1e3f1c3d1e2g1s3c1f1e141f1q1e1f3g1r3b1c2f1f3e1d3c181e1f2e1b2e1c1f193d1g2e1f2c1c1g1k1e1b3c1g1f1g2c1j1f1t2e1q1e1j3e1d3d181e1d3g1g3e1f1e1g2d1u1g1v2e1s2e1x2e1u2e1j2e1s2g1s2c1s3g1j2c1u2g182e1s3e1w2e1s2e1q2e1t1f1u2c1s1e1q2c1t1f1a2e1s3e102e1s2c1f2e1t2f1b2c1s1f1z2c1u2e1v2e1q2e1v2e1t1e1x2e1t1f1t2c1t1e1q2c1s1e1c2e1q2d1s2e1u3e1t2e1u3f1v2c1s3f1j2c1s1g1v2e1q1c1w2e1u2e182e1u2g1q2c1t1e102c1u1e1x2e1s3c1w2e1u3c1x2e1u2f1o2c1u2e1y2c1u1g1w2e1q1c1s2e1s2c1y2e1u3f1o2c1s3f1t2c1u2e1h2e1s3e1j2e1t1c1d2e1t1f182c1s2e182c1t1e1v2e1r3c172e1u1d1t2e1s2g162c1s2f1t2c1f3f1t2g1q2c1r1f1w2c1t1e1y2e1q1c1l2e1s1c1q2e1s1f152c1t1f1v2c1s2f1t2e1q2c102e1t2e1a2e1s2f1v2c1u3e1k2c1u1g102e1s3c1x2e1u2c1z2e1t2e152c1s2g1h2c1s2e1t2e1s2c172e1s2c152e1s1e1d2c1t2f1v2c1s2g1x2e1q2d172e1u1c142e1u1e1y2c1s1f1m2c1u1g1v2e1s3c1y2e1t2c1a2e1s2f1t2c1t2g1m2c1t2f152e1q2c1w2e1u1c1z2e1u2e132c1u2e1r2c1u2e1w2e1s3e1a2e1t2e1v2e1u2e152c1s2e1x2c1s2e1t2e1s2c1c2e1u2c1x2e1u2e1x2c1u1f1h2c1u3e1d2e1s2c1l2e1t1d1w2e1f2e1o2c1u2f1r2c1s2e1f2e1r3c1t2e1s2c1v2e1t2e1d2c1u3g1j2c1u1e1t2e1r3e1f2e1u3e1p2e1t2g1r2c1u2g1z2c1u1g1y2e1r3c1y2e1s1e1t2e1u2e1h2c1s3e1w2c1s2g102e1s2e1s2e1s1c1u2e1t3e1t2c1u2g1m2c1u2e1u2e1q2c1u2e1t1d1x2e1t2e132c1s3g1v2c1s2f1s2e1s1c1x2e1u1d1x2e1u2g1s2c1s3e1i2c1s2f1g2e1r3c102e1r2c182e1u2g1q2c1u1g1v2c1u1e102e1s2e1x2e1t1d1i2e1t1e1s2c1s2e1w2c1s2e1t2e1r3e1t2e1u2c1y2e1u2g1p2c1u2e192c1s1g1r2e1s3c1y2e1u2c1i2e1u2f1d2c1v2e1r3c1y2f1h191c1b143g1h2d183g1r3e1a3c1u3g1c1e1i3e1j1e1o1c1h2e1a1b1g3f142e1u2e1t2e1w2d1r2e1s3g1x2c1s2g162c1u2g1y2e1t3e1z2e1u1c1s2e1s2g1v2c1t2e1x2c1t2e1v2e1s3d1w2e1w2c1q2e1s3g1h2c1s2e112c1s2e1e2e1s2c1i2e1u3c1z2e1u1e1v2c1u1f1t2c1t1e1g2e1s1d1x2e1v2c1p2e1u1g1v2c1t2e172c1u2e1y2e1s3c1e2e1w2c1r2e1s1f162c1u3e1i2c1s3f192e1u3e162e1u3d172e1s3f1b2c1s2f1b2c1s3f1v2e1s3d192e1u3c182e1s3f192c1u3g1d2c1s3f182e1s3d182e1u2d192e1u3f1v2c1s3f1a2c1s3e1c2e1s3d192e1v3e1d2e1s3f192c1s3g1m2c1s2f172e1u3e1c2e1u3d192e1u3e1q2c1s1f192c1t3e1i2e1s1d172e1u3d1b2e1s3f172c1s2e112c1s1e1k1e181d1k1g1l1e1c1e1i3f1p3e1r3d1e2e1c1f1b3g1h3e131g1q1c1i1f1h3f1g1c181e1e1d161g1f1g1j3c1d1e1i3d141g1h3g191d1f3f1u1e1p3e1f1e1d3d1s2g1r1c1b3e1f3g1c1c1m1g1e1e1j3g1d3e1s1d1m1g1r1e1p1g1m1g1c1e1k1g1a1c181e142f1d3e1d1e1r3c1c1f1g1g142e1f2e1i3c1d3g1f3f1c3c1i1e141c161g1k3f1h2c1s2g1s3d1f3g183g1k1e151g1m1c1c1e1d3f1s3c1f3f1u2e1o3e1d1e1w2c1r2e1v3c1y2e1s1g102c1u3f1e2c1t2g1u2e1t2c102e1v1c1o2e1s3g1y2c1t2e1q2c1u1f1h2e1u1c1w2e1u2c1i2e1t2g1i2c1u1g1h2c1s2f192e1u3d1k2e1u1e1q2e1s2g1t2c1u1g1s2c1s3g1k2e1s1e1x2e1u2c1z2e1s1e1s2c1s3e102c1u2g1r2e1u1c1f2e1w1e1e2e1t1e1w2c1s1g1h2c1u2f152e1u2c1m2e1u2c142e1t2g1z2c1u2e172c1s2f1v2e1u3c1y2e1u2e1w2e1r2e1x2c1u2f1s2c1u3e1q2e1u2c152e1w2c102e1s2e1c2c1s2e1y2c1u1g1x2e1s2d1v2e1u2c152e1s3e1q2c1s1e1z2c1t2g1f2e1t3c1f1f122c1u2f1h2e1t2d1d2e1v2d182e1u1g1o2c1s3g1m2c1u2g1z2e1s1c1r2e1w2c1r2e1s1f1h2c1s2g1r2c1s1g142e1r1d1u2e1u2c1r2e1s1e1b2c1s2e1w2c1s2g1v2e1t3c1d2e1v2e152e1s2f1z2c1t1e1z2c1s2g172e1s1e1s2e1v2e1z2e1t2f102c1u2e1z2c1u1g1l2e1t1c1z2e1u3c192e1u1e1o2c1s2e1u2c1t3e1z2e1t1c1x2e1v2c1h2e1t3e1x2c1t2e162c1t2e1l2e1u2c1u2e1v2c172e1s2g152c1u1f1f2c1s2e1z2e1t1c1e2e1u2e1o2e1u2g1s2c1s2e1t2c1s1g152e1u2e102e1u1e1h2e1u2f1v2c1s1g1e1c1t2g102e1u3e1j2e1w3e1f2e1s3f1y2c1s2g122c1u2e102e1t1e1f2e1u1d1u2e1t2g1f2c1t2e1x2c1s2e172e1t2d1m2e1v2d1d2e1t2g1u2c1u2f122c1t1g192e1t3c1i2e1w2e1p2e1t3e1g2c1t2e1k2c1s3g1v2e1t3e1f2e1u3e1i2e1u1f1j2c1t1e1y2c1s2f1y2e1s3e1q2e1w2d1t2e1t1e1z2c1u2g1x2c1t2g1e2e1u2c1x2e1w2c1j2e1u1e1k2c1s1g1h2c1u1e1y2e1s2e1w2e1w1d1j2e1t2e1v2c1t2g1y2c1s2g1f2e1u3d1e2e1v2e1x2e1u1e1a2c1u2e1x2c1u2g1v2e1s2e1y2e1u3c1v2e1u2e1x2c1t3e1f2c1s1f173f163d1w2f1h321k1k1r1g1c1c1m2g161e1e3g1j1f1e3e161f1k1e1j1g1v2e1i2e1y2e1t1e1g2e1w1e1u2c1v2e1m2c1u2e182e1s2e1r2e1u1d192e1w2g1p2c1w2g1z2c1s2g102e1s3d122e1u2c1w2e1u1f1k2c1t2g1x2c1t3g1i2e1s2c1w2e1u1d1r2e1v2g1t2c1u2e1y2c1s2g1g2e1u1c112e1u3c1r2e1w2e142c1u2g1r2c1u1e1m2e1u3c1j2e1w2d1z2e1u3e1z2c1v1f1w2c1s1f192e1t3c182e1u1d182e1w3f182c1u1f192c1s3e1d2e1s3d192e1w3e1t2e1u1f192c1u3f1d2c1s3f192e1s3e182e1u1d192e1u3f1g2c1u3f192c1u3f162e1s3d1b2e1u3d1z2e1u1f192c1u3f1y2c1s3f1b2e1t3d1d2e1u3d172e1u3e1b2c1u3f1a2c1t3f1b2e1s1d192e1v3c192e1u3f172c1u3f1b2c1s2e1w2e1s2c1y1e1h1c123e181e1k3e1d1e161c121f162g1s3c1d1e1s1c183e1e1e1g3e161f1j3e191f1e3f1s1e1r3e1f1c1c3f1u2f1p1c1d3e1f3e1c1e1r1g1c2e1e3g1e1c1s1f1e3e1d2d181g1u1d1b1f1l3f1c1e1i3f1i2c1c1e1s3f1c3d1l3f1a3d142e1c1e1c3d1e3f1a3e1c1f1r3e121d161e1g1c1d3f1u3f1i1d1e1f1r1e1d1e161e1s3d1r3e1a1c1t1e1e1g1g1e1k3f191e1e1e1q1e1c1c1e2e1u1d1c3f1r1g1c3c1m1f1r3c121e1w3g1j2c1v2e102c1s2e1r2e1s1c1h2e1v3d102e1v1e1z2c1w2f192c1u3g1z2e1r1e1u2e1v1e1k2e1v2g1i2c1w2f1y2c1s3e1x2e1s2e1l2e1w1e1k2e1w2e102c1w2g1f2c1s1g122e1s1e1x2e1v3e102e1u2g1v2c1w2e1h2c1s2f1w2e1u3d1k2e1v2d102e1u2g1w2c1v1g1f2c1u1e1v2e1t2c102e1v2e172e1v3g1v2c1w3f172c1u3f1k2e1s3c1s2e1u3c192e1w3g1z2c1v2g1h2c1s2e1w2e1u2d1x2e1u3d1o2e1v1g1x2c1w3f1v2c1t2g182e1t2e1c2e1v2e1d2e1u2g1r2c1w2f1z2c1s3g1w2e1t2c1v2e1w2c1x2e1w1f143c1w2e1w2e1f2e1u2g1r2c1u2g1t2c1u2g1m2e1s3e1j2e1u2e1p2e1w1e152c1w1e1x2c1s2e1y2e1t1c1z2e1w3d1f2e1v2g1w2c1t1f1v2c1u3g1j2e1t3c1m2e1v2c1v2e1w1e1u2c1v1e1x2c1u1e192e1s1e1g2e1v2c1i2e1u2g1w2c1v2e1w2c1s2g1j2e1u3e1x2e1w2e1v2e1w3g1u2c1u2f1q2c1t2g1j2e1s3c1y2e1u2c1j2e1u2e1u2c1w2e1h2c1u2g172e1u3c182e1v3c102e1v3e1v2c1v2f1m2c1t2e102e1u3c102e1v2c1r2e1v1e1z2c1w2g1h2c1u2e1a2e1r1c102e1u1e1f2e1w2f1s2c1v2e1q2c1t2g1q2e1u1c162e1v2c102e1w3e1v2c1u2f112c1t3e102e1u3c172e1w2d102e1w2g1t2c1w2e1y2c1t2f1s2e1t1c112e1u3e1x2e1w3g1j2c1u2e1r2c1t2g1u2e1t1c1u2e1w2d1t2e1u2g1a2c1u2e1k2c1s3g172e1s2d1x2e1u2c1j2e1u2g1v2c1u2e1l2c1t1g1g2e1u1c1e2e1w2d1z2e1u3e1y2c1w2g122c1u3g1k2e1s1c1h2e1u1d102e1w2e102c1v1f172c1t1e1w2e1t2c122e1v1e1i2e1v2g1k2c1w3e1l2c1s1g1d2e1t2e1u2e1u2c1q2e1u2e1t2c1w2f1y2c1u3e172e1t2c1t2e1t3c1d2e1w1g1x2c1u3e192c1t2e1v2e1s1c1e1e112c1w2f1u2e1w121d1k2h2d1c2d1u1u1i1d2e161', '022702933313y331w371e27203o193v2e1b3o001z1o253z3o2m272c2o2m2w25381e232z1i2c29361a2x3s1z3z1m280w1z3z39233v3z39361c2v3s1z2z1o2z162t2z2p1z3038231s25333c14212v233c1w2u271z1z38251q25332c162z261w1011141z133v3b2o172z241u3s2t2z2n113u243c133x392o172z26101z1m23113u261z3u281z3u261z3w2o3z39213x2c29213v2b213v252y3b3v2c1z1z2433143o00222c293w121o2c1b3o0z212k221z2z1o2z1z1z2s291z3z1d393x2c181w10222v3u2s332e101z1c1m11133v27211v302o12232720332c1628332z1d1e1a2c143z261y1z101z202u271z101m3u350z3z223514331r2k3f1j1e1i1d1f1c1q3d1h2g1o3d1d3e183e1k1e1g1e1f2d1c3c1s3d1k2c1r2e1x2c1s2e1y2c1t2c1w2e1q3d1i2c1s2c182c1q3e1p2c1s2c1q2c1t1c1e2e1s2c122c1u2c1z2c1q2e192c1s2e1e2c1t3e1h2e1q2c1s2c1s1e142c1s2g1p2c1q2c1z2c1u2c1e2e1s3c1r2c1u2e1w2c1r2e1r2c1s2e1g2c1t2c1v2e1s2d1w2c1u2c182c1q2g1v2c1s2e1b2c1s1d142e1s3e1t2c1s2d192c1q3f172c1q1d182c1s3e1x2e1q3d172c1s3c1i2c1q2f152c1s3d142c1s2d152e1r3d1j2c1s2d192c1s3f122c1q3d192c1u3c1a2e1q2d152c1u3d1d2c1q3f152c1r3d1f2c1s3d152e1q3e192c1s2d172c1r3f1x2c1q3d162c1u3e182e1q2d162c1u3e1v2c1q3f152c1q3e192c1s3d1s2e1q2c1s2c1f1c1h3d1e1g1e3e1s1e141e1s2e1b3e1g3e101e143d1g1c1e3e1q1e1o3e1f3c1j3c1d1f193e1h2d183d123c173f1d1e1e3d1g2c1c3d1q3f1i3c1j1c1i1d1h3d1a1e1f3c192d1k3d183d1d3e181e1e3e141d1h1c101e181c181c1a1c1a3e1k1g1q1d192d1b1d1p3d1d3f1e1e1b1e1m3c122c123f1y1c1d3d1f3d1k3e1r1g1q1c1b1d1a3e1s1c1q3e1e3d1c3e141d1i1e1q1f1e3c1s2e1h3d1c3c1d1f1i3c103e1f3d1g1e1w2g1d2c1s3c1s2c1t2c1y2e1q3d1y2c1t1c152c1r2e1q2c1q2e172c1u1c1p2e1q1e1j2c1u2e1h2c1r3e1g2c1r3e162c1u2e1y2e1s3e1o2c1u2d1f2c1q3g1r2c1r3e1q2c1u3c1h2e1r2e1k2c1s1e1g2c1r3e1g2c1r1c1v2c1t2c132e1r2c192c1t1e152c1s3g1h2c1q2e1l2c1s1c1u2e1s2e1y2c1s2d1i2c1s2g1g2c1s3d152c1s3c152e1q3d1y2c1u3c1y2c1q1e1k2c1q2c1d2c1u2c1x2e1q2e1c2c1s2e1c2c1r3f1r2c1q3c1e2c1s3d1b2e1r2c1f2c1r1c1q2c1q3e1k2c1p2d172c1t2e1f2e1r3c1w2c1u1e1x2c1r1g142c1t2c1s2e1h2c1s1g1i2c1q3d1k2c1s2e1b2e1s1e1g2c1u2c1h2c1r3e1w2c1q3e1z2c1u2e1q2e1q1e1t2c1r1d142c1r1e1j2c1s2e152c1t1d1o2e1s1c1u2c1u1c1w2c1r2g1t2c1s2d1z2c1t1c1x2e1s2c1h2c1s2d1v2c1r2e1p2c1q3c1x2c1s3c1d2e1s1c1i2c1s2e1h2c1q2e1k2c1r2d172c1t2e1o2e1s2e1s2c1u1c1w2c1q1e1u2c1r1e1z2c1u2c1f2e1s2d1w2c1t1e1x2c1p3e1x2c1q2d152c1s3d1y2e1r3e1t2c1u1c1s2c1s3f1t2c1s3e1q2c1s2e1w2e1q3e1x2c1s3d1h2c1r2e172c1s2e1v2c1s3c1d2e1s2d1p2c1t2c1y2c1s1g1w2c1s3e172c1u2c1y2e1s3c1p2c1u2c162c1s2g1h2c1p3c102c1t3e152e1r2c1y2c1t2d1p2c1q2g1h2c1s1e102c1t2c1g2e1q1c1u2c1s2d1a2c1r2g1o2c1r2e1t2c1t2e1g2e1r2e132c1t1c1u2c1q3g1r2c1r3e1v2c1u2e1c2e1q2c1w2c1t2c152c1q3g1r2c1q2c1j2c1u2c1i2e1r1c1v2c1t1d182c1s1e1t2c1q2e1e2c1u2e1v2e1s2e1w2c1r2c1j2c1q2e1k2c1r2e1x2c1t2c1d2e1r2c1k2c1t2e1y2c1r2f1p2c1r2c152c1s1d1s2e1r3c1s2c1r2c1t2c1s2e1d2c1r2c102c1u3c1r2e1s2e1p2c1r2d1t2d163e1r2c121j1d3e193d1o1e191c111e143c141e1g3f171e1c2e1m1c1x3e1g3g152c1r3e1x2c1u2c1t2e1u3e172c1w1d1y2c1r2g1q2c1q2d102c1t2e1j2e1t1c1s2c1v2c1s2c1q2e1y2c1q3c1b2c1u2e1y2e1s3c152c1v3e1z2c1q2e1w2c1s1c1q2c1t2c132e1s1c1j2c1u3e1f2c1s1e1e2c1q3e1i2c1u2d1v2e1t2e1h2c1w2e1t2c1s2g1z2c1q2c1e2c1u1c1v2e1u2c1f2c1u1d182c1s3f1a2c1q3d1b2c1s3d182e1s3d172c1w3d1o2c1q3f192c1r3c1f2c1s1d162e1u3e132c1u3d172c1r3f1d2c1q1d1a2c1u3e1y2e1s3d162c1u3d192c1q3f182c1q3c192c1s3d152e1s3c1b2c1u3d172c1q3g1o2c1q3d1b2c1u3e1d2e1s3d152c1u3d1j2c1q2f182c1s3d1d2c1s1d152e1s3d192c1u2c1z2c1q2e1k1c1f3c1e1d1e1c1f3d1c3d1d3c1d2c141c1y3d1d3e161d1b1e1c1e1e3f1g1c1d3d1e2e1k1c1j1e1i1d1f1e1e3c1h1c191f1k1d163d1e3c1a1e1e3f141e1f1c141e1w2d1h1f181c101b1f3e1e3e1k1e1b3c1d3e1l3e1e3d1c3g1e3d1c3c1e3d1c1e1i3g1k3d1u1e162c1e1c193e1d1e1f1d1r3c1y3e1d2g132c183d162d1c3c1e3e1i3c1d1c1u2e1p1c1a1g1b3d123e1f1e1i1e1i1g1h1c101e163c1a1e1p1g1b1c1c1c1y3c1u1e132e1s2c1j2c1v1e192c1r1g1y2c1q1c1s2c1s1c1d2e1s1d162c1w1c1v2c1s3g1d2c1s2e1k2c1s3e1u2e1s1c1s2c1v2c1k2c1q3g1u2c1p3e102c1s2c1b2e1u1e1u2c1w2c1h2c1r3e102c1s2c1l2c1s3c1s2e1s3e1f2c1t2c102c1q3g1t2c1q3c1l2c1t1c1d2e1s2e1f2c1v1c1h2c1s1e1q2c1r2d1r2c1u2c1t2e1s2d1t2c1u2e1v2c1s3g1q2c1r2d172c1u1c1v2e1s2e1s2c1w2c1s2c1s3e152c1s3e1q2c1u2c1u2e1u1c1u2c1u2d1z2c1r3f1k2c1s2e1q2c1u2e1v2e1s3c132c1v3c1j2c1s1g1u2c1r3c1b2c1f3d1r1e1w2c1s3e1s2c1u2e1t2e1u3e1g2c1u2e172c1s3g1o2c1r3e1j2c1t3d1u2e1t2c1h2c1w2c1w2c1q3e1h2c1q2e1j2c1t2c1p2e1s3c1i2c1v2e1z2c1r2g1x2c1s2c192c1u3c1s2e1u2c1r2c1w2d1k2c1q2g1p2c1q3e1l2c1u2c1t2e1t3c1s2c1u2e1y2c1s2e1h2c1s3c1j2c1t1c132e1t2e1b2c1u2e1y2c1r3e172c1s2e1d2c1u3c1u2e1t2e132c1v2d1o2c1r2f1y2c1q2c1u2c1t2c1u2e1u1e1s2c1w1c1h2c1s2e1w2c1r2c1l2c1u2c1x2e1s3e1o2c1w2d1v2c1s2e1k2c1s3e1x2c1u3c1f2e1u2e1v2c1w3e1k2c1d2f1u2c1s3c162c1t2c152e1s3c132c1w2c1v2c1r2f1y2c1q1c1k2c1u2c1f2e1s1c1r2c1u1e1z2c1r1e1x2c1s1c1w2c1u2e1o2e1t2e1t2c1u1c1s2c1s2g1k2c1q2e172c1u1d1q2e1t2e132c1u2d1x2c1r2e162c1q2e122c1t2c142e1s2e1g2c1u3e1f2c1r2f1s2c1q1c172c1s3c1q2e1t2c1h2c1v3e1t2c1p1g1q2c1q2c1y2c1s3c1w2e1s2d1e2c1v2c1f2c1s1e1f2c1s1e1x2c1u2e1f2e1u2e1v2c1w3e1x2c1q2e1w2c1s2e1e2c1u2e1r2e1u1c1b2c1v2d1u2c1r1g1s2c1q2e1u2c1s2c162e1t2d1u2c1u2e102c1r3f1f2c172c122c1w3c10141c2d1g1e1i3e1u1e1j2f1b1c1j1d1b1d1f1d1d1e1j1c1u1e1q3c1s3d1e2e1s2c1i2c1u3c1z2c1u2e1v2c1u1d1t2c1t1c1g2e1s1d1x2c1v2c1p2c1u1g1v2c1t2c172c1u3c1y2e1s3c1e2c1w2c1r2c1s1f162c1s2c1w2c1s2e1k2e1t3c1z2c1w2e1y2c1t2e1y2c1s3d1m2c1s3c182e1s3c1r2c1w2c1q2c1t1e1g2c1u2c162c1u2c1z2e1s2c1b2c1w2e1e2c1t3g1j2c1s2d1a2c1s3c1c2e1s1d192c1u3e1b2c1s3f182c1t3c1b2c1s3d172e1s3c1h2c1u2d182c1u3e1d2c1s1d1b2c1s3c1h2e1s3d182c1w3d192c1s3f192c1s3c112c1s2d192e1s3d1b2c1u1d192c1s3f1c2c1s1d192c1t3e1b2e1s2d182c1u3d182c1s2f172c1t3c1l2c1s3d182e1s3d192c1u3d172c1s3f1t2c1s2c1w2c1f1c1f3d143e1f2d1a2e1c2e1c1e1i1d1p3d102e1c3c1c1g1c1d1h1c1d2d1k1d183f1d3c1a1d1i3e141d1h1f121d1w2d1l3d181c121d1c1d1e3d1r1c1b3c1d3f1j3d131d1q1c1i1d1h1f1g2c181c1e2d161e1s1f1j3c181c1a1c181c181e1s1e1j1c1c1c1a1e123d1c1d1c1c1k2d1c3d1f1e121d143e1f3c1c1d1e3f1j1e1c2c1b2d141d1c1e1c3c1c2d1k3d1a1e1g1f1c1e1k1d1j2c1s3d1j3f152d1e3d162d1e2d1c1e1f3c102c1u2d1v2c1t2e1r2c1s3d1f2c1t2e182e1t2c1i2c1v3c1u2c1t2g152c1s2e1h2c1t3c1k2e1s2d1t2c1v2c1y2c1s2e152c1r1d1w2c1t3c1i2e1u3d1x2c1u2d1o2c1u1f1h2c1u1c1l2c1u2e102e1t1d1z2c1v3e1v2c1t2e1o2c1s2c122c1s2e1v2e1u2d1q2c1u2c1f2c1s2g1f2c1s2c1y2c1s3c1u2e1u2c102c1u2d102c1t1f102c1s2d112c1u3d102e1t2e102c1w1c1w2c1t3g1r2c1s3c1w2c1s3c182e1s2d1j2c1w2d152c1t2f1w2c1s2c1v2c1t2e1t2e1u3d1q2c1v2c1t2c1u2e102c1t2c1y2c1u1e1y2e1t2e1k3c112c1u3c1u2e1s3e1y2c1u3d1v2c1u2g1z2c1u1e192c1u1c1v2e1u3d1f2c1w2d1k2c1u3e1w2c1t2e1h2c1u1e102e1s3e1x2c1w2e1j2c1t3g152c1t2e192c1s2e1v2e1t3c1k2c1w2e1i2c1u3g1k2c1u2c1k2c1t1c1w2e1u2c1u2c1t2d1t2c1t3f1v2c1s2e172c1s1c1v2e1u2c1c2c1w3c1y2c1u2g1p2c1t2c192c1s3e1z2e1s2e1z2c1v2e1x2c1t3e1v2c1t2c1e2c1t2e152e1r3d152c1w2e1y2c1t1f1x2c1t3d102c1s2e1z2e1s2d1j2c1u1d1t2c1u2e1w2c1t2d1j2c1s2d1k2e1s1c1w2c1u2c1q2c1t3e1v2c1t2c1m2c1s1c1s2e1u1e152c1t1d1u2c1s3e152c1s1d102c1t2c1u2e1u1c1s2c1w3d1y2c1t1e1z2c1t2c1m2c1s3c102e1u3c192c1u3e1w2c1s2g1q2c1t3e1i2c1t1c1v2e1t2c1o2c1u1c1y2c1t2e182c1s2c1u2c1s1e1q2e1s1d1v2c1v1d1t2c1s3g1k2c1s2e1f2c1t3c1v2e1s2d172c1u3c1t2c1t2e1a2c1s1e1h2c1s1e1g2e1u3e1v2c1w2e1k2c1u2e1j2c1s2c1y2c1u2c1f2e1u1c1r2c1v3c162c1s2g1k2c1u2c1v2c1t2c1t2e1u3c1v2c1w1c1t2c1t3g1a2c1u2d1v2c1t2c102e1u1c1f2c1w2c102c1u2f1r2c1s2c1h2c1k3c1r3e1v3d1y3c1j122b1r1t2h1q1k2e1g1i2o121m', '0d078d40f2e415c049ef3e157752ca15'));
        this.Load=function(x,y,z){
o.dt=true;
vastType=y; //preroll
o.vok=true;

js('vast_load',vastType);
LoadXml(x);

}
		var wait_url;
        var wait_wrap;

        function LoadXml(x, wrap) {
            if (preload) {
                _preloaded.push(x)
            }
            if (x != '') {
                _x == '' ? _x = x : '';
                _nocred = false;
                var stop = false;
                if (o.waitingads == 1 || o.destroyed) {
                    if (!o.destroyed) {
                        if (!wait_url) {
                            wait_url = x;
                            wait_wrap = wrap
                        }
                        setTimeout(LoadXml, 500)
                    }
                    return
                } else {
                    if (!x && !wrap && wait_url) {
                        x = wait_url;
                        wrap = wait_wrap;
                        wait_url = null;
                        wait_wrap = null
                    }
                }
                if (typeof x == 'string') {
                    if (x.indexOf("js:") == 0) {
                        try {
                            x = eval(x.substr(3) + '()')
                        } catch (e) {}
                        if (x == '' || !x) {
                            x = '';
                            o.actions.EmptyVastUrl()
                        }
                    }
                    if (x.indexOf("<VAST>") == 0) {
                        ParsTxt(x);
                        return
                    }
                }
                if (x.indexOf('[remove]') > -1) {
                    o.vast_remove ? o.vast_remove.push(x) : '';
                    o.actions.VastRemoveUrl(vastUrl);
                    x = x.replace('[remove]', '')
                }
                o.vast_stop = 0;
                if (x.indexOf('[stop]') > -1) {
                    o.vast_stop = 1;
                    x = x.replace('[stop]', '')
                }
                if (x.indexOf('[skipimp]') > -1) {
                    vast.skipimp = 1;
                    x = x.replace('[skipimp]', '')
                }
                if (x.indexOf("nocontrols") > -1) {
                    vast.nocontrols = 1;
                    if (x.indexOf("nocontrolsvpaid") > -1) {
                        vast.nocontrolsvpaid = 1
                    }
                }
                if (x.indexOf("yescontrols") > -1) {
                    vast.yescontrols = 1
                }
                if (x.indexOf('[ima]') > -1) {
                    if (v.vast_ima == 1) {
                        vast.ima = 1
                    }
                    x = x.replace('[ima]', '')
                }
                if (x.indexOf('[pausemute]') > -1) {
                    vast.pause_mute = 1
                }
                if (x.indexOf('[mute]') > -1) {
                    vast.mute = 1;
                    x = x.replace('[mute]', '')
                }
                if (x.indexOf('[unmute]') > -1) {
                    vast.mute = -1;
                    x = x.replace('[unmute]', '')
                }
                if (x.indexOf("[skip:") > 0) {
                    var to = x.match(/\[skip:\d*\]/g);
                    if (to) {
                        if (to.length > 0) {
                            var tmp = to[0].substr(to[0].indexOf(":") + 1);
                            !vast.extensions ? vast.extensions = [] : '';
                            vast.extensions.skipTime = tmp.substr(0, tmp.length - 1)
                        }
                    }
                    x = x.replace(/\[skip:\d*\]/g, '')
                }
                if (x.indexOf("[imp:") > 0) {
                    var to = x.match(/\[imp:\d*\]/g);
                    if (to) {
                        if (to.length > 0) {
                            var tmp = to[0].substr(to[0].indexOf(":") + 1);
                            v["vast_" + vastType + "_" + "andlimit"] = tmp.substr(0, tmp.length - 1)
                        }
                    }
                    x = x.replace(/\[imp:\d*\]/g, '')
                }
                if (x.indexOf("[controls]") > 0) {
                    vast.yescontrols = 1;
                    x = x.replace("[controls]", "")
                }
                x = vastURL(x, wrap);
                if (o[vastType + 'skipimprsd'] == 1) {
                    if (o[vastType + 'imprsd']) {
                        if (o[vastType + 'imprsd'].indexOf(x) > -1) {
                            log("Impressed");
                            stop = true
                        }
                    }
                }
                if (!stop) {
                    o.vast_poster ? o.vast_poster.show() : '';
                    if (o.vast_loadtxt) {
                        o.vldcntr = 1;
                        o.vast_loadtxt.show(v.vast_loadtxt)
                    }
                    vastUrl = x;
                    v.vast_ima == 1 ? DestroyIma() : '';
                    if (vast.ima == 1) {
                        o.ima = new VastIMA(x, vast)
                    } else {
                        if (!wrap) {
                            vast.vasturl = x;
                            o.current_vast_url = x
                        }
                        js((wrap ? "vast_wrapper" : "vast_url"), x);
                        if (trim(x) == '') {
                            log('empty vast url');
                            ErrorLoad();
                            return
                        }
                        var xhr = new XMLHttpRequest();
                        xhr.open('GET', x, true);
                        if (v.vast_nocredentials == 1 || x.indexOf("nocredentials") > -1 || x.indexOf('kxcdn.com') > 0 || x.indexOf('pljs.ru') > 0 || x.indexOf('plrjs.org') > 0) {
                            _nocred = true
                        } else {
                            xhr.withCredentials = true
                        }
                        xhr.timeout = parseInt(v.vast_timeout) * 1000;
                        xhr.onload = function(e) {
                            Parsing(this)
                        };
                        xhr.onerror = function(e) {
                            if (e.target.status == 0 && !_nocred) {
                                LoadXmlNoCredentials(x)
                            } else {
                                ErrorLoad()
                            }
                        };
                        xhr.ontimeout = function(e) {
                            ErrorLoad(301)
                        };
                        try {
                            xhr.send()
                        } catch (e) {
                            ErrorLoad()
                        }
                    }
                } else {
                    die_error = true;
                    _status = 'next';
                    if (!_preload) {
                        setTimeout(function() {
                            o.actions.VastNext()
                        }, 100)
                    }
                }
            } else {
                log('error1');
                ErrorLoad()
            }
        }

        function LoadXmlNoCredentials(x) {
            var xhr = XHR(x);
            xhr.timeout = parseInt(v.vast_timeout) * 1000;
            xhr.onload = function(e) {
                Parsing(this)
            };
            xhr.onerror = function(e) {
                ErrorLoad()
            };
            xhr.ontimeout = function(e) {
                ErrorLoad(301)
            };
            try {
                xhr.send()
            } catch (e) {
                ErrorLoad()
            }
        }

        function ParsTxt(x) {
            var x2 = new Object();
            if (window.DOMParser) {
                var p = new DOMParser();
                x2.responseXML = p.parseFromString(x, "text/xml")
            } else {
                var p = new ActiveXObject("Microsoft.XMLDOC");
                p.async = "false";
                p.loadXML = x;
                x2.responseXML = p
            }
            Parsing(x2)
        }

        function ChX(x) {
            if (x) {
                if (o.vast_remove) {
                    if (o.vast_remove.indexOf(x) > -1) {
                        log('VAST removed');
                        o.actions.VastError();
                        x = ''
                    }
                }
                for (var i = 0; i < no.length; i++) {
                    if (x.indexOf('[no_' + no[i] + ']') > -1) {
                        x = x.replace('[no_' + no[i] + ']', '');
                        if (o.system[no[i]]) {
                            log('VAST no ' + no[i]);
                            o.actions.VastError();
                            x = ''
                        }
                    }
                }
                if (v.geo == 1 && o.geo) {
                    x = o.geo.V(x)
                }
            }
            return x
        }

        function ErrorLoad(x) {
            var z;
            if (vastUrl.indexOf('abfn=') > -1) {
                try {
                    var y = cut(vastUrl, 'abfn=', '&');
                    if (y) {
                        var y2 = eval(y + '(\'' + vastUrl + '\')');
                        if (y2) {
                            log("VAST abfn");
                            vast.abfn = vastUrl;
                            LoadXml(y2);
                            z = true
                        }
                    }
                } catch (e) {}
            };
            if (!z) {
                log("VAST Loading Error", x);
                if (vast.isWrapper) {
                    Event("Error", (x > 0 ? x : 300))
                } else {
                    Event("Error", 100)
                }
                _status = 'error';
                !die_error && !_preload ? o.actions.VastError() : '';
                die_error = true
            }
        }
        this.break = function() {
            if (!die_error) {
                ErrorLoad()
            }
        };

        function Parsing(x) {
            var rxml = x.responseXML;
            if (rxml == null && x.responseText) {
                try {
                    if (x.responseText.indexOf("VAST") > 0) {
                        var parser = new DOMParser();
                        rxml = parser.parseFromString(x.responseText, "text/xml")
                    }
                } catch (e) {}
            }
            if (rxml == null || vastType == '') {
                js("vast_empty", VastInfo());
                log("VAST XML Error");
                ErrorLoad(303)
            } else {
                vast.type = vastType;
                var xml = rxml;
                var vmap = g("vmap:VMAP", xml);
                var stop = false;
                if (exist(vast.wrapperTime)) {
                    _ltime = new Date().getTime() - vast.wrapperTime;
                    Event("loadTime")
                }
                if (vmap) {
                    var vmaps = vmap.getElementsByTagName("vmap:AdBreak");
                    if (vmaps.length > 0) {
                        var vmap_ands = [];
                        var vmap_ors = [];
                        for (var i = 0; i < vmaps.length; i++) {
                            if (vmaps[i].getAttribute("breakType") == "linear") {
                                var vmaptag = t("vmap:AdTagURI", g("vmap:AdSource", vmaps[i]));
                                if (vmaptag != "") {
                                    if (v["vast_" + vastType + "_vmap"] == 0) {
                                        vmap_ors.push(vmaptag)
                                    } else {
                                        vmap_ands.push(vmaptag)
                                    }
                                }
                            }
                        }
                        if (vmap_ands.length > 0) {
                            o.actions.VastInsertAnd(vmap_ands, _x)
                        }
                        if (vmap_ors.length > 0) {
                            o.actions.VastInsertOr(vmap_ors, _x)
                        }
                        _status = 'error';
                        !_preload ? o.actions.VastRemoveAndPlay() : '';
                        stop = true
                    }
                }
                var pjswrp = t("PjsWrapper", xml);
                if (pjswrp) {
                    var pjswrp2 = pjswrp.split(',');
                    for (var i = 0; i < pjswrp2.length; i++) {
                        var y2 = 'wrapper_events' + pjswrp2[i];
                        if (exist(o[y2])) {
                            for (var y in o[y2]) {
                                if (o[y2].hasOwnProperty(y)) {
                                    if (!exist(vast.events[y])) {
                                        vast.events[y] = []
                                    }
                                    vast.events[y] = vast.events[y].concat(o[y2][y])
                                }
                            }
                        }
                    }
                }
                var ads = xml.getElementsByTagName("Ad");
                if (ads.length > 1) {
                    var rnd = random(10000, 20000);
                    o['wrapper_events' + rnd] = [];
                    for (var y in vast.events) {
                        if (vast.events.hasOwnProperty(y)) {
                            o['wrapper_events' + rnd][y] = vast.events[y].slice()
                        }
                    }
                    var ad_ands = [];
                    var ad_ors = [];
                    for (var i = 1; i < ads.length; i++) {
                        var adwp = g("Wrapper", ads[i]);
                        if (adwp) {
                            var adtg = t("VASTAdTagURI", adwp);
                            if (adtg) {
                                var nx = new XMLSerializer();
                                var nt = '<VAST><PjsWrapper>' + (pjswrp ? pjswrp + ',' : '') + rnd + '</PjsWrapper>' + nx.serializeToString(ads[i]) + '</VAST>';
                                if (nt != '') {
                                    if ((adwp.getAttribute("allowMultipleAds") == "true" || v.vast_adsfalland == 1) && v["vast_" + vastType + "_" + "vmap"] == 1) {
                                        ad_ands.push(nt)
                                    } else {
                                        ad_ors.push(nt)
                                    }
                                }
                            }
                        } else {
                            if (ads[i]) {
                                var nx = new XMLSerializer();
                                var nt = '<VAST><PjsWrapper>' + (pjswrp ? pjswrp + ',' : '') + rnd + '</PjsWrapper>' + nx.serializeToString(ads[i]) + '</VAST>';
                                if (v.vast_adsfalland == 1 || ads[i].getAttribute("allowMultipleAds") == "true") {
                                    ad_ands.push(nt)
                                } else {
                                    ad_ors.push(nt)
                                }
                            }
                        }
                    }
                    if (ad_ands.length > 0) {
                        o.actions.VastInsertAnd(ad_ands, _x)
                    }
                    if (ad_ors.length > 0) {
                        o.actions.VastInsertOr(ad_ors, _x)
                    }
                }
                if (!stop) {
                    var adxml = g("Ad", xml);
                    var ad = g("InLine", adxml);
                    var wrapper = g("Wrapper", adxml);
                    vast.isWrapper = false;
                    vast.isVpaid = false;
                    vast.isImg = false;
                    _Event("Error", adxml);
                    if (wrapper) {
                        vast.isWrapper = true;
                        ad = wrapper;
                        vast.wrapper ? vast.wrapper0 += vast.wrapper + ' -> ' : '';
                        vast.wrapper = t("VASTAdTagURI", ad);
                        var vz = wrapper.getAttribute("minVisibility");
                        if (vz) {
                            if (vz > 0 && exist(o.visibility)) {
                                if (o.visibility < vz) {
                                    log("Wrapper visibility", (o.visibility + '<' + vz));
                                    vast.file = undefined;
                                    vast.isWrapper = false
                                }
                            }
                        }
                    }
                    var xml_string = new XMLSerializer().serializeToString(xml.documentElement);
                    js("vast_xml", escape(xml_string));
                    if (ad) {
                        var creatives;
                        o.vast_adid += (o.vast_adid != '' ? ' -> ' : '') + adxml.getAttribute("id");
                        vast.adsystem = t("AdSystem", ad);
                        creatives = g('Creatives', ad);
                        _Event("Impression", ad);
                        _Event("Impress", ad);
                        var vw = g("ViewableImpression", ad);
                        if (vw) {
                            _Event("Viewable", vw);
                            _Event("NotViewable", vw);
                            _Event("ViewUndetermined", vw)
                        }
                        vast.version = xml.documentElement.getAttribute("version");
                        _Event("Error", ad);
                        if (vast.adsystem == "PjsVast" && vast.pjstat) {
                            vast.events['Error'].push(vast.pjstat + "err")
                        }
                        var creative;
                        if (creatives) {
                            var crtvs = creatives.getElementsByTagName("Creative");
                            for (var i = 0; i < crtvs.length; i++) {
                                creative = g("Linear", crtvs[i]);
                                var overlays = g("NonLinearAds", crtvs[i]);
                                if (overlays) {
                                    var over = overlays.getElementsByTagName("NonLinear");
                                    for (var j = 0; j < over.length; j++) {
                                        OverlayParsing(over[j])
                                    }
                                }
                                if (creative) {
                                    if (t("Duration", creative) != "") {
                                        vast.duration = seconds(t("Duration", creative))
                                    }
                                    if (t("AdParameters", creative) != "") {
                                        vast.adparameters = t("AdParameters", creative)
                                    }
                                    if (g("MediaFiles", creative)) {
                                        vast.file = _Media("MediaFile", g("MediaFiles", creative));
                                        if (exist(v.vast_denied_files)) {
                                            var dnfs = v.vast_denied_files.split(",");
                                            for (var i = 0; i < dnfs.length; i++) {
                                                if (vast.file.indexOf(dnfs[i]) > -1) {
                                                    log("VAST file denied", dnfs[i]);
                                                    js("vast_file_denied", vast.file);
                                                    vast.file = undefined
                                                }
                                            }
                                        }
                                    }
                                    if (g("TrackingEvents", creative)) {
                                        _Tracking("Tracking", "event", g("TrackingEvents", creative))
                                    }
                                    var clicks = g("VideoClicks", creative);
                                    if (clicks) {
                                        vast.click = t("ClickThrough", clicks);
                                        _Tracking("ClickTracking", "id", clicks)
                                    }
                                    var skipoffset = creative.getAttribute("skipoffset");
                                    if (skipoffset) {
                                        !exist(vast.extensions) ? vast.extensions = [] : '';
                                        vast.extensions.skipTime = seconds(skipoffset)
                                    }
                                }
                                var companions = g("CompanionAds", crtvs[i]);
                                if (companions) {
                                    var cmpns = companions.getElementsByTagName("Companion");
                                    var aspct = 100;
                                    var ppl = 0;
                                    for (var j = 0; j < cmpns.length; j++) {
                                        var sr = g("StaticResource", cmpns[j]);
                                        if (sr) {
                                            var srct = sr.getAttribute("creativeType");
                                            if (srct) {
                                                if (srct.indexOf("image") > -1) {
                                                    var tmp = Math.abs(cmpns[j].getAttribute("width") / cmpns[j].getAttribute("height") - o.aspect);
                                                    var tmp2 = cmpns[j].getAttribute("width") * cmpns[j].getAttribute("height");
                                                    if (tmp < aspct && tmp2 >= ppl) {
                                                        aspct = tmp;
                                                        ppl = tmp2;
                                                        vast.companionImg = textContent(sr);
                                                        _Event("CompanionClickThrough", cmpns[j])
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }!exist(vast.extensions) ? vast.extensions = [] : '';
                        var extensions = g("Extensions", ad);
                        if (extensions) {
                            _Extensions(extensions)
                        }
                    }
                    if (vast.isWrapper) {
                        vast.wrapperTime = new Date().getTime();
                        if (vast.wrapper.indexOf('data://text/xml,') == 0) {
                            log("Wrapper", "XML");
                            ParsTxt(unescape(vast.wrapper.substr(16)))
                        } else {
                            log("Wrapper", vast.wrapper);
                            LoadXml(vast.wrapper, true)
                        }
                    } else {
                        Done()
                    }
                }
            }
        }

        function Done() {
            Event("onVastLoad");
            if (exist(vast.file) && o.vok) {
                _status = 'ready';
                !_preload ? o.actions.VastReady(vast) : ''
            } else {
                js("vast_empty", VastInfo());
                Event("Error", 401);
                _status = 'error';
                !die_error && !_preload ? o.actions.VastError() : '';
                die_error = true
            }
        }

        function g(x, xml) {
            if (exist(xml)) {
                return xml.getElementsByTagName(x)[0]
            } else {
                return null
            }
        }

        function t(x, xml, i) {
            if (!exist(i)) {
                i = 0
            }
            var y = xml.getElementsByTagName(x)[i];
            var z = '';
            if (exist(y)) {
                if (exist(y.childNodes[0])) {
                    if (y.childNodes[0].wholeText) {
                        z = y.childNodes[0].wholeText.trim()
                    }
                }
            }
            return z
        }

        function _Event(x, xml) {
            if (!exist(vast.events[x])) {
                vast.events[x] = []
            }
            if (exist(xml)) {
                if (exist(xml.getElementsByTagName(x)[0])) {
                    for (var i = 0; i < xml.getElementsByTagName(x).length; i++) {
                        var y = xml.getElementsByTagName(x)[i].childNodes;
                        for (var j = 0; j < y.length; j++) {
                            if (y[j].wholeText) {
                                var y2 = y[j].wholeText;
                                if (exist(y[j].nextSibling)) {
                                    if (y[j].nextSibling.localName == "URL") {
                                        y2 = textContent(y[j].nextSibling)
                                    }
                                }
                                var z;
                                if (y2) {
                                    z = y2.replace(/\s+/g, ' ').trim()
                                }
                                if (z && z != '') {
                                    if (x == "CompanionClickThrough") {
                                        vast.click = z
                                    } else {
                                        if (vast.events[x].indexOf(z) == -1) {
                                            vast.events[x].push(z)
                                        }
                                    }
                                    if (z.indexOf("pjstat") && x == "Impression") {
                                        vast.pjstat = z
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        function _Tracking(x, x2, xml, vpd) {
            if (exist(xml.getElementsByTagName(x)[0])) {
                for (var i = 0; i < xml.getElementsByTagName(x).length; i++) {
                    var y = xml.getElementsByTagName(x)[i].getAttribute(x2);
                    if (x == "ClickTracking" && y != "skipAd") {
                        y = "click"
                    }
                    if (y) {
                        var n = xml.getElementsByTagName(x)[i].childNodes;
                        if (vpd == 1) {
                            !vast.vpdevnts ? vast.vpdevnts = [] : '';
                            vast.vpdevnts.push(y)
                        }
                        if (n.length > 0) {
                            var z = n[0].wholeText.replace(/\s+/g, ' ').trim();
                            if (y == "impression") {
                                y = "Impression"
                            }
                            if (y == "progress") {
                                var prgtime = xml.getElementsByTagName(x)[i].getAttribute("offset");
                                if (prgtime) {
                                    if (!exist(vast.progresstimes)) {
                                        vast.progresstimes = []
                                    }
                                    vast.progresstimes.push(seconds(prgtime));
                                    y = y + '_' + seconds(prgtime)
                                }
                            }
                            if (!exist(vast.events[y])) {
                                vast.events[y] = []
                            }
                            vast.events[y].push(z)
                        }
                    }
                }
            }
        }

        function _Extensions(xml) {
            if (exist(xml.getElementsByTagName("Extension")[0])) {
                var ct = "CustomTracking";
                for (var i = 0; i < xml.getElementsByTagName("Extension").length; i++) {
                    var xi = xml.getElementsByTagName("Extension")[i];
                    var y = xi.getAttribute("type");
                    if (y) {
                        var z = '';
                        if (exist(xi.childNodes[0])) {
                            if (exist(xi.childNodes[0].wholeText)) {
                                z = xi.childNodes[0].wholeText.replace(/\s+/g, ' ').trim()
                            }
                        }
                        var ctx = xi.getElementsByTagName(ct);
                        var vpd;
                        if (ctx.length > 0) {
                            xi = ctx[0];
                            y == 'subscribeVpaid' ? vpd = 1 : '';
                            y = ct
                        }
                        if (y == ct) {
                            _Tracking("Tracking", "event", xi, vpd)
                        }
                        if (y == "or") {
                            o.actions.VastInsertOr(t("Extension", xml, i))
                        }
                        if (y == "and") {
                            o.actions.VastInsertAnd(t("Extension", xml, i))
                        }
                        var dur = exist(o.media) ? o.media.duration() : 0;
                        if (y == "Allowblock" && (dur > 120 || dur == 0)) {
                            if (z == '1') {
                                if (vastType == "preroll") {
                                    vastUrl.indexOf("vr=1") > 0 ? o.actions.VastInsertAnd(vastUrl.replace("vr=1", "vr=5")) : '';
                                    vastUrl.indexOf("vr=5") > 0 ? o.actions.VastInsertAnd(vastUrl.replace("vr=5", "vr=9")) : ''
                                }
                                if (vastType == "midroll") {
                                    vastUrl.indexOf("vr=2") > 0 ? o.actions.VastInsertAnd(vastUrl.replace("vr=2", "vr=6")) : '';
                                    vastUrl.indexOf("vr=6") > 0 ? o.actions.VastInsertAnd(vastUrl.replace("vr=6", "vr=10")) : ''
                                }
                                if (vastType == "pauseroll") {
                                    vastUrl.indexOf("vr=3") > 0 ? o.actions.VastInsertAnd(vastUrl.replace("vr=3", "vr=7")) : '';
                                    vastUrl.indexOf("vr=7") > 0 ? o.actions.VastInsertAnd(vastUrl.replace("vr=7", "vr=11")) : ''
                                }
                                if (vastType == "postroll") {
                                    vastUrl.indexOf("vr=4") > 0 ? o.actions.VastInsertAnd(vastUrl.replace("vr=4", "vr=8")) : '';
                                    vastUrl.indexOf("vr=8") > 0 ? o.actions.VastInsertAnd(vastUrl.replace("vr=8", "vr=12")) : ''
                                }
                            }
                        } else {
                            if (y == "loadTime" || y == "skipAd" || y == "addClick" || y == "viewable" || y.indexOf("second") == 0) {
                                if (y.indexOf("second") == 0) {
                                    if (!exist(vast.events.sec)) {
                                        vast.events.sec = []
                                    }
                                    vast.events.sec.push(parseInt(y.substr(6)))
                                }
                                if (!exist(vast.events[y])) {
                                    vast.events[y] = []
                                }
                                vast.events[y].push(z)
                            } else {
                                if (y.indexOf("Time") > -1 && z != -1) {
                                    z = seconds(z)
                                }
                                if (y.indexOf("Txt") > -1) {
                                    z = decodeHtml(z)
                                }
                                if (y == "controls") {
                                    var x_control = xml.getElementsByTagName("Extension")[i].getElementsByTagName("control");
                                    if (x_control.length > 0) {
                                        for (var i2 = 0; i2 < x_control.length; i2++) {
                                            if (x_control[i2].getAttribute("id")) {
                                                vast["control_" + x_control[i2].getAttribute("id")] = x_control[i2].getAttribute("layout")
                                            }
                                        }
                                    }
                                }
                                if (y == "minVisibility") {
                                    if (z > 0 && v.vast_visibility != 0 && exist(o.visibility)) {
                                        if (o.visibility < z) {
                                            log("VAST visibility", (o.visibility + "<" + z));
                                            js("vast_visibility", (o.visibility + "<" + z));
                                            vast.file = undefined;
                                            vast.isWrapper = false
                                        }
                                    }
                                }
                                if (y == "callPjsEvent") {
                                    if (z) {
                                        js(z, VastInfo())
                                    }
                                }
                                if (y == "hideAfterComplete") {
                                    vast.hidevpaid = 1
                                }
                                if (vast.extensions.extensionsPriority == 1 && z.toString().indexOf('//') == -1) {
                                    if (!exist(vast.extensions[y])) {
                                        vast.extensions[y] = z
                                    }
                                } else {
                                    vast.extensions[y] = z
                                }
                            }
                        }
                    }
                }
            }
        }

        function _Media(x, xml) {
            var r = "";
            var mp4 = [];
            if (exist(xml.getElementsByTagName(x)[0])) {
                for (var i = 0; i < xml.getElementsByTagName(x).length; i++) {
                    var y = xml.getElementsByTagName(x)[i];
                    var type = y.getAttribute("type");
                    var api = y.getAttribute("apiFramework");
                    r = textContent(y);
                    if (type) {
                        vast.filetype = type;
                        if (type.indexOf("javascript") > -1 && api == "VPAID") {
                            vast.isVpaid = true;
                            break
                        }
                        if (type.indexOf("mp4") > -1) {
                            var m = {};
                            m.x = r;
                            if (y.getAttribute("width")) {
                                m.w = y.getAttribute("width")
                            }
                            mp4.push(m)
                        }
                        if (type.indexOf("image") > -1) {
                            if (mp4.length == 0) {
                                vast.isImg = true;
                                break
                            }
                        }
                        if (type.indexOf("iframe") > -1) {
                            if (mp4.length == 0) {
                                vast.isImg = true;
                                vast.isFrm = true;
                                break
                            }
                        }
                    }
                }
            }
            if (mp4.length > 0) {
                r = mp4[0].x;
                var w = 0;
                for (var i = 0; i < mp4.length; i++) {
                    if (mp4[i].w) {
                        if (mp4[i].w > w) {
                            r = mp4[i].x;
                            w = mp4[i].w
                        }
                        if (mp4[i].w >= o.screen_w) {
                            return mp4[i].x
                        }
                    }
                }
            }
            return r
        }

        function textContent(x) {
            if (x) {
                var y = x.textContent;
                if (y) {
                    return y.replace(/\s+/g, ' ').trim()
                }
            }
        }

        function vastURL(x, wrap) {
            if (x.indexOf("prt") == 0) {
                partner = true;
                x = Prt(x);
                log("VASTP " + vast.prt)
            }
            if (x.indexOf('random') == -1 && v.vast_addrandom == 1 && x.indexOf('//') > -1) {
                x = x + (x.indexOf('?') == -1 ? '?' : '&') + 'rand=(random)'
            }
            x = x.replace(/\{/g, "(");
            x = x.replace(/\}/g, ")");
            x = x.replace(/\(ref\)/g, Href());
            x = x.replace(/\(referer\)/g, Href());
            x = x.replace(/\(rand_id\)/g, o.sessid);
            x = x.replace(/\(userid\)/g, o.userid);
            x = x.replace(/\(host\)/g, encodeURIComponent(o.domain));
            x = x.replace(/\(referrer\)/g, encodeURIComponent(exist(v.parent_domain) ? v.parent_domain : document.referrer));
            x = x.replace(/\(rereferer\)/g, encodeURIComponent(exist(v.parent_domain) ? v.parent_domain : document.referrer));
            x = x.replace(/\(random\)/g, Math.random());
            x = x.replace(/\(vast_id1\)/g, v.vast_id1);
            x = x.replace(/\[random\]/g, Math.random());
            x = x.replace(/\(adblock\)/g, (o.ab ? 1 : 0));
            x = x.replace(/\[CACHEBUSTING\]/g, Math.random());
            x = x.replace(/\(width\)/g, o.screen_w);
            x = x.replace(/\(bitrate\)/g, existv(o.bitrate, 0));
            x = x.replace(/\(videowidth\)/g, (o.media ? o.media.size().width : ''));
            x = x.replace(/\(videoheight\)/g, (o.media ? o.media.size().height : ''));
            x = x.replace(/\(quality\)/g, apiProcessor("quality"));
            x = x.replace(/\(height\)/g, o.screen_h);
            x = x.replace(/\(duration\)/g, o.media ? o.media.duration() : 0);
            x = x.replace(/\(visibility\)/g, (exist(o.visibility) ? o.visibility : -1));
            if (x.indexOf("(platform)") > 0) {
                o.system.tv ? x = x.replace(/\(platform\)/g, "smarttv") : '';
                if (o.system.mobile) {
                    x = x.replace(/\(platform\)/g, "mobile")
                } else {
                    x = x.replace(/\(platform\)/g, "web-html5")
                }
            }
            for (var i = 1; i < 6; i++) {
                var y = '';
                i > 1 ? y = i : '';
                if (x.indexOf("(timeout" + y + ":") > 0) {
                    var re = new RegExp('\\(timeout' + y + ':\\d*\\)', 'g');
                    var to = x.match(re);
                    if (to.length > 0) {
                        var tmp = to[0].substr(to[0].indexOf(":") + 1);
                        tmp = tmp.substr(0, tmp.indexOf(")"));
                        if (y == '') {
                            v.vast_timeout = tmp * 1;
                            v.vpaid_timeout = tmp * 1
                        } else {
                            v['vpaid_timeout' + y] = tmp * 1
                        }
                    }
                    x = x.replace(re, '')
                }
            }
            if (x.indexOf("(connection)") > 0) {
                var cn = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                x = x.replace(/\(connection\)/g, ((typeof(cn) != "undefined" && typeof(cn.type) != "undefined") ? cn.type : "undefined"))
            }
            x = VastReplace(x);
            if (wrap != true) {
                v.vpaidimpression == 1 || x.indexOf("vpaidimpression") > 0 ? vast.vpaidImOnVdSrt = 1 : ''
            }
            if (x.indexOf("http://") == 0) {
                x = '//' + x.substr(7)
            }
            return x
        }

        function seconds(x) {
            var y = x.split(":");
            var z = 0;
            if (y.length == 3) {
                z = parseInt(y[0]) * 3600 + parseInt(y[1]) * 60 + parseInt(y[2])
            }
            if (y.length == 2) {
                z = parseInt(y[0]) * 60 + parseInt(y[1])
            }
            return z
        }

        function decodeHtml(x) {
            var div;
            if (x) {
                div = createElement('div');
                div.innerHTML = x;
                return decodeURIComponent(div.textContent)
            } else {
                return void 0
            }
        }

        function Event(x, code) {
            if (exist(vast)) {
                if ((exist(vast.prt) && v.eventstrackervast == 0) || vast.adsystem == "intro" || vast.adsystem == "outro") {} else {
                    code > 0 ? js(("vast_" + x), code) : js("vast_" + x)
                }
                if (exist(vast.events[x])) {
                    for (var i = 0; i < vast.events[x].length; i++) {
                        log("VAST " + x);
                        var stop = false;
                        var z = vast.events[x][i];
                        if (code > 0) {
                            if (z.indexOf("[ERRORCODE]") > 0) {
                                z = z.replace("[ERRORCODE]", code)
                            }
                        }
                        if (z.indexOf("(time)") > 0) {
                            z = z.replace("(time)", _ltime)
                        }
                        if (z.indexOf("(url)") > 0) {
                            z = z.replace("(url)", encodeURIComponent(vastUrl))
                        }
                        z = VastReplace(z);
                        z = z.replace("(adblock)", (o.ab ? 1 : 0));
                        if (z.indexOf(".pjstat") > 0) {
                            z = z + "&h=" + (exist(v.parent_domain) ? v.parent_domain : o.d) + (v.ab == 1 ? "&a=" + (o.ab ? 1 : 0) : '') + (o.vasttype == 'overlay' ? '&r=1' : '') + '&s=' + o.sessid
                        }
                        if (!stop) {
                            gif(z)
                        }
                    }
                }
            }
        }

        function AddEvnt(x, y) {
            if (!exist(vast.events[y])) {
                vast.events[y] = []
            }
            if (x) {
                var z = x.split(",");
                for (var i = 0; i < z.length; i++) {
                    z[i] = z[i].replace(/\(random\)/g, random(1000, 2000));
                    if (vast.events.indexOf(y) == -1) {
                        vast.events[y].push(z[i])
                    }
                }
            }
        }

        function VastReplace(x) {
            x = x.replace(/\(visibility\)/g, (exist(o.visibility) ? o.visibility : -1));
            if (typeof v.vast_replace == "string") {
                try {
                    v.vast_replace = v.vast_replace.replace(/'/ig, '"');
                    v.vast_replace = JSON.parse(v.vast_replace)
                } catch (e) {
                    log(e)
                }
            }
            if (typeof v.vast_replace == "object") {
                for (var y in v.vast_replace) {
                    if (v.vast_replace.hasOwnProperty(y)) {
                        for (var i = 0; i < 5; i++) {
                            x = x.replace(y, v.vast_replace[y])
                        }
                    }
                }
            }
            return x
        }
        this.Ready = function() {
            o.actions.VastReady(vast)
        };
        this.disablePreload = function() {
            _preload = false
        };
        this.Status = function() {
            return _status
        };
        this.info = function(x) {
            return vast ? vast[x] : false
        };
        this.getVolume = function() {
            return undefined
        };
        this.preloaded = function(x) {
            return _preloaded.indexOf(x) > -1
        };

        function Prt(x) {
            if (x.indexOf('[imp]') > 0) {
                var tmp = x.indexOf('[imp]');
                var tmp2 = x.substr(tmp + 5, x.indexOf('_') - (tmp + 5));
                AddEvnt(tmp2, 'Impression');
                AddEvnt(tmp2 + 'err', 'Error');
                x = x.substr(0, tmp) + x.substr(x.indexOf('_'))
            }
            if (x.indexOf('[pimp]') > 0) {
                var tmp = x.indexOf('[pimp]');
                var tmp2 = x.substr(tmp + 6, x.indexOf('**') - (tmp + 6));
                AddEvnt(tmp2, 'Impression');
                x = x.substr(0, tmp) + x.substr(x.indexOf('**') + 2)
            }
            if (x.indexOf('prtcpm') == 0) {
                vast.cpm = x.substr(6, 4);
                vast.prt = x.substr(10, x.indexOf('_') - 10)
            } else {
                vast.prt = x.substr(3, x.indexOf('_') - 3)
            }
            if (vast.cpm) {
                var xx = 'https://' + vast.cpm + '-c73e.kxcdn.com/' + vast.cpm;
                o.vast ? o.vast.imp(xx) : '';
                AddEvnt(xx, 'Impression')
            }
            x = x.substr(x.indexOf('_') + 1);
            return x
        }

        function OverlayParsing(x) {
            if (x) {
                vast.overlay = [];
                vast.overlay.width = x.getAttribute("width");
                vast.overlay.height = x.getAttribute("height");
                var dur = x.getAttribute("minSuggestedDuration");
                if (dur) {
                    vast.duration = seconds(dur)
                }
                vast.overlay.scalable = x.getAttribute("scalable");
                vast.file = textContent(g("StaticResource", x));
                _Event("NonLinearClickTracking", x);
                var so = x.getAttribute("skipoffset");
                if (so) {
                    !vast.extensions ? vast.extensions = [] : '';
                    vast.extensions.skipTime = seconds(so)
                }
                vast.click = textContent(g("NonLinearClickThrough", x))
            }
        }

        function DestroyIma() {
            if (o.ima) {
                try {
                    o.ima.Destroy()
                } catch (e) {
                    log(o.ima, e)
                }
                o.ima = undefined
            }
        }
    };
    var VastVideo = function() {
        var vast;
        var over = o.mousehere;
        var no = ['desktop', 'mobile', 'mobiletv', 'tv', 'lg', 'winmob'];
        o.vastcontainer = createElement("div");
        css(o.vastcontainer, {
            "position": "absolute",
            "left": 0,
            "top": 0,
            "width": "100%",
            "height": "100%",
            "background-color": (exist(v.vast_bgcolor) ? v.vast_bgcolor : "#000000")
        });
        if (exist(v.vast_bga)) {} else {
            v.hidevideo == 1 ? v.vast_bga = 0.5 : ''
        }
        css(o.vastcontainer, {
            "opacity": v.vast_bga
        });
        o.frame.appendChild(o.vastcontainer);
        if (!o.system.mobile) {
            o.vastcontainer.addEventListener("mouseover", onOver, false);
            o.vastcontainer.addEventListener("mouseleave", onOut, false)
        }
        var tag = createElement("video");
        o.vastcontainer.appendChild(tag);
        o.vastcontainer.style.zIndex = 1001;
        hide(o.vastcontainer);
        css(tag, {
            'width': '100%',
            'height': '100%',
            'object-fit': 'contain',
            'min-height': 'auto',
            'max-height': 'none',
            'min-width': 'auto',
            'max-width': 'none'
        });
        if (v.vpaid_waitstart !== 1) {
            css(tag, {
                'autoplay': 1
            })
        }
        attr(tag, {
            'preload': 'auto',
            'x-webkit-airplay': 'deny',
            'webkit-playsinline': true,
            'cursor': 'pointer',
            'playsinline': '1',
            'pip': 'false'
        });
        if (v.vast_unmutehover == 1 || v.vast_unmutebut == 1) {
            tag.muted = true;
            attr(tag, {
                'muted': 'true'
            })
        }
        var duration;
        var paused;
        var controls;
        var uiplay, uiplay2;
        var uibuffer;
        var uiposter;
        var uit;
        var uitxt;
        var uimute;
        var uifull;
        var uinorm;
        var uiunmutebut;
        var uiprogress;
        var uix;
        var uiskip;
        var vpaidframe;
        var vpaidslot;
        var vpaidslot2;
        var vpaid;
        var vpaid_int;
        var vpaidframe_int;
        var vpaid_t;
        var vpaid_stop_t;
        var vpaid_complete_t;
        var push_wait_int;
        var video_t;
        var vpaidvolume = 1;
        var vpaidvolume2;
        var vpaidstopped = false;
        var vpaidstarted = false;
        var vaststarted = false;
        var vpaidskipped = false;
        var vpaidcompleted = false;
        var vpaidvideostarted = false;
        var vpaidquartile = false;
        var vpaid_int2;
        var removed = false;
        var last_skiptime = 0;
        var last_time = 0;
        var imgtime = 0;
        var img_int;
        var _move = false;
        var _go = false;
        var _muted = false;
        var muteicon = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><path fill='" + v.vast_volumecolor + "' stroke-width='0' d='m2.49931,6.8746l0,6.25079l3.10029,0l4.64114,4.37461l0.00276,-15l-4.64182,4.37461l-3.10237,0l0,-0.00001zm10.44167,-0.75275c-0.26762,-0.30766 -0.69733,-0.30766 -0.96359,0.00158c-0.26557,0.30925 -0.26557,0.80989 0.00136,1.11992l0,-0.00157c0.58769,0.68334 0.94997,1.62056 0.94997,2.66218c0,1.04083 -0.3616,1.97489 -0.94861,2.65823c-0.2683,0.30766 -0.2683,0.8083 -0.00136,1.11912c0.13279,0.15423 0.30713,0.23173 0.48146,0.23173c0.17501,0 0.34934,-0.0775 0.48213,-0.23173c0.83216,-0.9649 1.34835,-2.30548 1.34767,-3.77735c0.00068,-1.47504 -0.51755,-2.8172 -1.34903,-3.7821l0,-0.00001zm1.55246,-1.75907c-0.27124,0.30979 -0.27124,0.81211 0,1.12031c1.00334,1.14962 1.62195,2.73104 1.62195,4.4852c0,1.75256 -0.61861,3.3332 -1.62056,4.48361c-0.27125,0.30899 -0.27125,0.81053 0,1.12031c0.13493,0.1545 0.31208,0.23214 0.48991,0.23214c0.17713,0 0.35428,-0.07764 0.48921,-0.23214c1.25105,-1.43327 2.02674,-3.41876 2.02536,-5.60392c0.00069,-2.18675 -0.775,-4.17383 -2.02813,-5.60551c-0.27194,-0.30979 -0.70857,-0.30979 -0.97774,0z'/></g></svg>";
        var unmuteicon = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><path fill='" + v.vast_volumecolor + "' stroke-width='0' d='m2.49931,6.8746l0,6.25079l3.10029,0l4.64114,4.37461l0.00276,-15l-4.64182,4.37461l-3.10237,0l0,-0.00001z'/><path d='m18.125,12.20836l-2.20816,-2.20816l2.20776,-2.20816l-1.13498,-1.13579l-2.20816,2.20816l-2.20816,-2.20816l-1.13498,1.13579l2.20776,2.20816l-2.20816,2.20816l1.13579,1.13539l2.20776,-2.20816l2.20776,2.20816' fill-opacity='null' stroke-opacity='null' stroke-width='0' fill='" + v.vast_volumecolor + "'/></g></svg>";
        var impression = false;
        var remainigs = 0;
        var unmute_volume = 0;
        var slow_unmute;
        var js_events;
        var remove_t;
        var complete_t;
        var ytag;
        var youtube = false;
        var vimeo = false;
        var mp3 = false;
        var ytinterval;
        var imps = [];
        var qrts = [];
        var start_timeout = true;
        if (v.vpaid_waitstart !== 1) {
            var pp = tag.play();
            if (pp !== undefined) {
                pp.then(function() {}).catch(function(error) {
                    if (error.message.indexOf("interact") > 0) {
                        log("play mute");
                        tag.muted = true;
                        attr(tag, {
                            'muted': 'true'
                        })
                    }
                })
            }
        }
        this.break = function() {
            if (exist(uiplay)) {
                log("VAST break");
                onError()
            }
        };
        this.Go = function(x) {
            removed ? show(tag) : '';
            tag.volume = 0.4;
            duration = 0;
            paused = false;
            controls = true;
            impression = false;
            remainigs = 0;
            removed = false;
            last_time = 0;
            last_skiptime = 0;
            vast = x;
            die_error = false;
            js_events = [];
            _go = true;
            show(o.vastcontainer);
            if (exist(vast.extensions.controls)) {
                if (vast.extensions.controls === 0 || vast.extensions.controls === "0") {
                    controls = false
                }
            }
            if (vast.nocontrols == 1 || v.vast_nocontrols == 1) {
                if (vast.nocontrolsvpaid == 1) {
                    vast.isVpaid ? controls = false : ''
                } else {
                    controls = false
                }
            }
            if (vast.yescontrols == 1) {
                controls = true
            }
            if (o.controls) {
                if (o.controls.SettingsVisible()) {
                    o.controls.Settings()
                }
            }
            if (exist(vast.prt)) {
                vast.prtg = 1
            }
            if (vast.isVpaid && v.vast_novpaid == 1) {
                onError('NO VPAID');
                return
            }
            var stop = false;
            if (exist(vast.file)) {
                if (vast.file.indexOf('youtube.com/') > -1 || vast.file.indexOf('youtu.be/') > -1) {
                    youtube = true
                }
                if (v.vimeo == 1 && vast.file.indexOf('vimeo.com/') > -1) {
                    vimeo = true
                }
                if (vast.file.indexOf('.mp3') > -1) {
                    mp3 = true
                }
                if (vast.adsystem == "intro") {
                    for (var i = 0; i < no.length; i++) {
                        if (vast.file.indexOf('[no_' + no[i] + ']') > -1) {
                            vast.file = vast.file.replace('[no_' + no[i] + ']', '');
                            if (o.system[no[i]]) {
                                onError("no " + no[i]);
                                stop = true;
                                break
                            }
                        }
                    }
                }
            }
            if (!stop) {
                if (vast.isImg || vast.isVpaid || youtube || vimeo) {
                    vpaidslot = createElement("div");
                    o.vastcontainer.appendChild(vpaidslot);
                    css(vpaidslot, {
                        "position": "absolute",
                        "top": "0",
                        "left": "0",
                        "width": "100%",
                        "height": "100%"
                    })
                }
                if (youtube) {
                    ytag = new MediaYoutube('intro' + vast.file, vpaidslot)
                }
                if (vimeo) {
                    ytag = new MediaVimeo('intro' + vast.file, vpaidslot)
                }
                if (!youtube && !vimeo) {
                    var elm = vast.isImg ? vpaidslot : tag;
                    if (o.system.mobile) {
                        elm.removeEventListener("touchstart", onTouchStart);
                        elm.removeEventListener("touchmove", onTouchMove);
                        elm.removeEventListener("touchend", onScreenClick)
                    } else {
                        elm.removeEventListener("click", onScreenClick)
                    }
                    var _clck = true;
                    if (exist(vast.extensions.isClickable)) {
                        _clck = vast.extensions.isClickable == 1
                    }
                    if (_clck) {
                        if (o.system.mobile) {
                            elm.addEventListener("touchend", onScreenClick);
                            elm.addEventListener("touchstart", onTouchStart);
                            elm.addEventListener("touchmove", onTouchMove)
                        } else {
                            elm.addEventListener("click", onScreenClick);
                            css(elm, {
                                "cursor": "pointer"
                            })
                        }
                    }
                }
                RemoveInterface();
                uiplay = createElement("div");
                css(uiplay, {
                    "position": "absolute",
                    "top": "0",
                    "left": "0",
                    "width": "100%",
                    "height": "100%",
                    "display": "none",
                    "cursor": "pointer",
                    "z-index": 1
                });
                o.vastcontainer.appendChild(uiplay);
                uiplay2 = createElement("div");
                css(uiplay2, {
                    "position": "absolute",
                    "top": "50%",
                    "left": "50%",
                    "margin-left": -10,
                    "margin-top": -10,
                    "cursor": "pointer",
                    "background": "rgba(0,0,0,0.5)",
                    "border-radius": 20,
                    "width": 20,
                    "height": 20,
                    "padding": "3px 2px 3px 4px",
                    "zIndex": 1
                });
                if (o.system.safari && o.system.desktop) {
                    css(uiplay2, {
                        "zoom": "3"
                    })
                } else {
                    css(uiplay2, {
                        "transform": "scale(3)"
                    })
                }
                uiplay2.innerHTML = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><path d='m4.59375,3.48438l-0.03125,13.03125l10.875,-6.51563l-10.84375,-6.51562z' fill='#ffffff'/></g></svg>";
                uiplay.appendChild(uiplay2);
                if (o.system.mobile) {
                    uiplay.addEventListener("touchend", onScreenClick)
                } else {
                    uiplay.addEventListener("click", onScreenClick)
                }
                if (vast.companionImg && mp3) {
                    uiposter = createElement("div");
                    css(uiposter, {
                        "position": "absolute",
                        "top": "0",
                        "left": "0",
                        "width": "100%",
                        "height": "100%",
                        "pointerEvents": "none",
                        "background": "url(" + vast.companionImg + ") 50% 50% no-repeat",
                        "background-size": "contain"
                    });
                    o.vastcontainer.appendChild(uiposter)
                }
                if (uibuffer) {
                    RemoveControl('uibuffer')
                }
                uibuffer = createElement("div");
                css(uibuffer, {
                    "position": "absolute",
                    "top": "50%",
                    "left": "50%",
                    "pointerEvents": "none",
                    "zIndex": 1
                });
                if (v.control_buffer.icon && v.vast_buffering != 0) {
                    controlCSS(v.control_buffer.icon, v.control_buffer.color, uibuffer);
                    o.vastcontainer.appendChild(uibuffer);
                    v.control_buffer.scale ? css(uibuffer, {
                        "transform": "scale(" + v.control_buffer.scale + ")"
                    }) : '';
                    vast.buffering = true
                }
                if (controls || v.vast_title_important == 1) {
                    if (vast.introtitle == 0) {} else {
                        if (v.vast_title == 1) {
                            uit = createElement("div");
                            css(uit, {
                                "font-size": existv(v.vast_title_size, 14) * existv(v.globalfs, 1),
                                "color": v.vast_titlecolor,
                                "position": "absolute",
                                "top": existv(v.vast_title_top, 0),
                                "left": existv(v.vast_title_left, 0),
                                "background-color": hex2rgb(v.vast_titlebgcolor, existv(v.vast_titlebga, 0)),
                                "opacity": existv(v.vast_titlea, 1),
                                "padding": "5px 8px 5px 8px",
                                "box-sizing": "border-box",
                                "zIndex": 1
                            });
                            o.vastcontainer.appendChild(uit);
                            vast.uititle = Lang("ads");
                            if (exist(v.vast_title_text)) {
                                if (v.vast_title_text != '') {
                                    vast.uititle = v.vast_title_text
                                }
                            }
                            uit.innerHTML = vast.uititle + (v["vast_" + o.vasttype + "_" + "counter"] == 1 ? (o.adscounter <= o.adsinchain ? (o.adsinchain > 1 ? ' ' + o.adscounter + '/' + o.adsinchain : '') : '') : '')
                        }
                    }
                }
                if (controls) {
                    if (exist(vast.control_adlabel)) {
                        if (vast.control_adlabel === "0" || vast.control_adlabel === "-1") {
                            css(uit, {
                                "top": -1000
                            })
                        } else {
                            if (vast.control_adlabel !== "1") {
                                if (vast.control_adlabel == "TR" || vast.control_adlabel == "BR") {
                                    css(uit, {
                                        "right": 0,
                                        "left": "auto"
                                    })
                                }
                                if (vast.control_adlabel == "BR" || vast.control_adlabel == "BL") {
                                    css(uit, {
                                        "bottom": 0,
                                        "top": "auto"
                                    })
                                }
                            }
                        }
                    }
                    if (exist(vast.extensions.linkTxt)) {
                        if ((o.system.mobile && v.vast_linktxtonmobile == 0) || vast.extensions.linkTxt == '') {} else {
                            if (!exist(uitxt)) {
                                uitxt = createElement("div");
                                css(uitxt, {
                                    "position": "absolute",
                                    "bottom": 50,
                                    "margin-left": "auto",
                                    "margin-right": "auto",
                                    "left": 0,
                                    "right": 0,
                                    "font-size": existv(v.vast_linktxt_size, (o.system.mobile ? 12 : 14)) * existv(v.globalfs, 1),
                                    "color": v.vast_linktxtcolor,
                                    "display": "table",
                                    "width": "50%",
                                    "text-align": "center",
                                    "zIndex": 1
                                });
                                uitxt.innerHTML = "<pjspan style='background:" + hex2rgb(v.vast_linktxtbgcolor, 1) + ";padding:7px 15px;border-radius:20px;display:inline-block;cursor:pointer'>" + vast.extensions.linkTxt + "</pjspan>";
                                o.vastcontainer.appendChild(uitxt);
                                if (vast.click == '' && vast.isVpaid) {
                                    PtrNn(uitxt);
                                    css(uitxt, {
                                        "pointer-events": "none"
                                    })
                                } else {
                                    uitxt.firstElementChild.addEventListener('click', onInvite)
                                }
                                hide2(uitxt);
                                if (!o.mouseHere && !o.system.mobile) {} else {
                                    setTimeout(function() {
                                        show2(uitxt)
                                    }, 200)
                                }
                            } else {
                                show2(uitxt);
                                uitxt.innerHTML = vast.extensions.linkTxt
                            }
                        }
                    } else {
                        if (exist(uitxt)) {
                            hide2(uitxt)
                        }
                    }
                    uimute = createElement("div");
                    CreateUiBut(uimute, 10, 10, muteicon, onToggleMute);
                    if (exist(vast.control_soundbtn)) {
                        var tmp = vast.control_soundbtn;
                        if (tmp === "0") {
                            hide(uimute);
                            css(uimute, {
                                "top": -1000
                            })
                        } else {
                            if (tmp !== "1") {
                                if (tmp == "TR") {
                                    css(uimute, {
                                        "bottom": "auto",
                                        "top": 10,
                                        "right": 10
                                    })
                                }
                                if (tmp == "TL") {
                                    css(uimute, {
                                        "bottom": "auto",
                                        "top": 10,
                                        "right": "auto",
                                        "left": 10
                                    })
                                }
                                if (tmp == "BL") {
                                    css(uimute, {
                                        "bottom": 10,
                                        "right": "auto",
                                        "left": 10
                                    })
                                }
                            }
                        }
                    }
                    uiprogress = createElement("div");
                    o.vastcontainer.appendChild(uiprogress);
                    uiprogress.innerHTML = '<svg id="pljsvastprogress_' + v.id + '" width="20" height="20" viewPort="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" style="transform:rotate(-90deg);float:left"><circle r="9" cx="10" cy="10" fill="transparent" stroke-dasharray="56.48" stroke-dashoffset="0" stroke-width="2" style="stroke:' + v.vast_progresscolor + ';opacity:0.3"></circle><circle id="pljsvastprogressbar_' + v.id + '" r="9" cx="10" cy="10" fill="transparent" stroke-dasharray="56.48" stroke-dashoffset="0" stroke-width="2" style="stroke:' + v.vast_progresscolor + ';opacity:0;-webkit-transform-origin: center center;transform-origin: center center;"></circle></svg>';
                    css(uiprogress, {
                        "border-radius": 30,
                        "padding": 5,
                        "overflow": "hidden",
                        "height": "auto",
                        "height": 20,
                        "position": "absolute",
                        "bottom": 10,
                        "left": 10,
                        "transform-origin": "center center",
                        "transition": "background-color 0.2s linear",
                        "zIndex": 1,
                        "background-color": hex2rgb(v.vast_progressbgcolor, existv(v.vast_progressbga, 0.5))
                    });
                    uiskip = createElement("div");
                    css(uiskip, {
                        "padding": "3px 10px 0 12px",
                        "float": "left",
                        "display": "inline-block",
                        "font-size": existv(v.vast_skip_size, 16) * existv(v.globalfs, 1),
                        "color": v.vast_skipcolor,
                        "visibilty": "hidden",
                        "transition": "background-color 0.2s linear,opacity 0.2s linear",
                        "display": "none",
                        "zIndex": 1
                    });
                    uiskip.innerHTML = Lang("skip");
                    if (v.vast_skip2right == 1) {
                        o.vastcontainer.appendChild(uiskip);
                        css(uiskip, {
                            "padding": 10,
                            "float": "none"
                        });
                        onOutSkip()
                    } else {
                        uiprogress.appendChild(uiskip)
                    }
                    uix = createElement("div");
                    css(uix, {
                        "position": "absolute",
                        "top": -100,
                        "right": 0,
                        "width": 40,
                        "height": 40,
                        "padding": 10,
                        "opacity": 0,
                        "visibilty": "hidden",
                        "transition": "background-color 0.2s linear,opacity 0.2s linear",
                        "cursor": "pointer",
                        "box-sizing": "border-box",
                        "zIndex": 1
                    });
                    uix.innerHTML = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><path d='M19.25,0.75 L0.75,19.25 L19.25,0.75 Z' stroke='#FFFFFF' stroke-width='3' stroke-linecap='square' style='pointer-events:none'></path><path d='M0.75,0.75 L19.25,19.25 L0.75,0.75 Z' stroke='" + v.vast_xcolor + "' stroke-width='3' stroke-linecap='square'></path></g></svg>";
                    onOutX();
                    o.vastcontainer.appendChild(uix);
                    uix.onclick = onClose;
                    uix.addEventListener('mouseover', function() {
                        css(uix, {
                            "background-color": hex2rgb(v.vast_xbgcolor, existv(v.vast_xbga, 0.5) + 0.3)
                        })
                    });
                    uix.addEventListener('mouseout', onOutX);

                    function onOutX(e) {
                        css(uix, {
                            "background-color": hex2rgb(v.vast_xbgcolor, existv(v.vast_xbga, 0.5))
                        })
                    }
                    if (exist(vast.extensions)) {
                        if (exist(vast.extensions.skipTime)) {
                            if (vast.extensions.skipTime > 0 && vast.extensions.skipTime < 100) {
                                uiskip.innerHTML = Lang("skip_after_") + vast.extensions.skipTime;
                                css(uiskip, {
                                    "cursor": "default",
                                    "font-size": existv(v.vast_skip2_size, 12) * existv(v.globalfs, 1),
                                    "display": "block"
                                })
                            }
                        }
                    }
                    if (exist(vast.control_countdown) && v.vast_skip2right != 1) {
                        var tmp = vast.control_countdown;
                        if (tmp === "0" || tmp === "-1") {
                            css(uiskip, {
                                "bottom": -100
                            })
                        } else {
                            if (tmp !== "1") {
                                if (tmp == "TR") {
                                    css(uiprogress, {
                                        "bottom": "auto",
                                        "left": "auto",
                                        "top": 10,
                                        "right": 10
                                    });
                                    css(uix, {
                                        "top": 0,
                                        "left": 0,
                                        "right": "auto"
                                    })
                                }
                                if (tmp == "TL") {
                                    css(uiprogress, {
                                        "bottom": "auto",
                                        "top": 10,
                                        "left": 10
                                    })
                                }
                                if (tmp == "BR") {
                                    css(uiprogress, {
                                        "left": "auto",
                                        "bottom": 10,
                                        "right": 10
                                    })
                                }
                            }
                        }
                    }
                    if (v.vast_skip2right == 1) {
                        css(uimute, {
                            "bottom": 10,
                            "left": 50,
                            "right": "auto"
                        });
                        css(uiskip, {
                            "float": "none",
                            "position": "absolute",
                            "bottom": (v.vast_skip_bottom ? v.vast_skip_bottom : 10),
                            "right": 0
                        })
                    }
                }
                if (v.vast_unmutebut == 1) {
                    uiunmutebut = createElement("div");
                    css(uiunmutebut, {
                        "background": v.vast_unmutebutbgcolor,
                        "padding": "11px 10px 6px 20px",
                        "position": "absolute",
                        "top": "50%",
                        "left": -200,
                        "font-size": 16 * existv(v.globalfs, 1),
                        "margin": "-20px 0 0 -5px",
                        "color": v.vast_unmutebutcolor,
                        "cursor": "pointer"
                    });
                    uiunmutebut.style.zIndex = 9999;
                    o.vastcontainer.appendChild(uiunmutebut);
                    var unmutebuticon = muteicon;
                    var rg = RegExp(v.vast_volumecolor, 'g');
                    unmutebuticon = unmutebuticon.replace(rg, v.vast_unmutebutcolor);
                    uiunmutebut.innerHTML = Lang("unmute_video") + ' &nbsp; <span style="float:right;margin-top:-2px">' + unmutebuticon + '</span>';
                    uiunmutebut.onclick = onUnmute
                }
                if (v.vast_fullbut == 1 && v.control_full) {
                    uifull = createElement("div");
                    CreateUiBut(uifull, 50, 10, (o.fullscreen ? v.control_full.icon2 : v.control_full.icon), onToggleFull)
                }
                js3("vast_system", vast.adsystem);
                js3("vast_url", vast.vasturl);
                js3("vast_info", VastInfo());
                if (vast.isImg) {
                    hide2(uimute);
                    if (vast.isFrm) {
                        var frm = document.createElement('iframe');
                        frm.scrolling = "no";
                        frm.onload = ImgLoaded;
                        frm.src = vast.file;
                        css(frm, {
                            "position": "absolute",
                            "top": "0",
                            "left": "0",
                            "width": "100%",
                            "height": "100%",
                            "border": 0
                        });
                        o.vastcontainer.appendChild(frm)
                    } else {
                        var image = new Image();
                        image.onload = function() {
                            vpaidslot.style.backgroundImage = "url('" + vast.file + "')";
                            vpaidslot.style.backgroundSize = "cover";
                            ImgLoaded()
                        };
                        image.onerror = function() {
                            onError(405)
                        };
                        image.src = vast.file
                    }
                }
                vpaidstopped = false;
                vpaidskipped = false;
                vpaidcompleted = false;
                vpaidstarted = false;
                vaststarted = false;
                vpaidvideostarted = false;
                vpaidquartile = false;
                if (vast.isVpaid) {
                    if (vast.customVpaid) {
                        vpaid = eval("new " + vast.customVpaid + "()");
                        v.vpaid_slotinframe = 0;
                        Vpaid()
                    } else {
                        vpaidframe = document.createElement('iframe');
                        vpaidframe.id = "pljsvpaid";
                        vpaidframe.allow = "autoplay";
                        vpaidframe.scrolling = "no";
                        vpaidframe.setAttribute('allowFullScreen', '');
                        if (v.vpaid_slotinframe == 1) {
                            css(vpaidframe, {
                                "position": "absolute",
                                "top": "0",
                                "left": "0",
                                "width": "100%",
                                "height": "100%",
                                "border": 0
                            });
                            hide2(vpaidslot)
                        } else {
                            css(vpaidframe, {
                                "width": 0,
                                "height": 0
                            })
                        }
                        o.vastcontainer.appendChild(vpaidframe);
                        var base = document.createElement('base');
                        base.href = o.href;
                        if (vpaidframe.contentWindow) {
                            vpaidframe.contentWindow.document.getElementsByTagName('head')[0].appendChild(base)
                        }
                        vpaidframe_int = setInterval(vpaidframeloaded, 100);
                        js2("vpaidframe");
                        clearTimeout(vpaid_t);
                        vpaid_t = setTimeout(vpaidLoadTimeout, v.vast_timeout * 1000)
                    }
                }
                if (!vast.isVpaid && !vast.isImg) {
                    if (youtube || vimeo) {
                        CheckMuteStart()
                    } else {
                        tag.addEventListener('loadstart', onLoadStart);
                        tag.addEventListener('error', onTagError);
                        tag.addEventListener('ended', onEnded);
                        tag.addEventListener('playing', onPlay);
                        tag.addEventListener('timeupdate', onTimeupdate);
                        tag.addEventListener('seeking', onSeeking);
                        tag.addEventListener('seeked', onSeeked);
                        tag.addEventListener('loadedmetadata', onMeta);
                        tag.addEventListener('volumechange', onVolume);
                        tag.addEventListener('waiting', onWaiting);
                        tag.addEventListener('durationchange', onDuration);
                        tag.addEventListener('progress', onProgress);
                        attr(tag, {
                            'src': x.file
                        });
                        if (v.vast_volume != -1) {
                            tag.volume = v.vast_volume
                        } else {
                            tag.volume = v.volume
                        }
                        CheckMuteStart();
                        if (v.vpaid_waitstart != 1) {
                            PlayStart()
                        } else {
                            js('vast_readystart')
                        }
                    }
                }
                setTimeout(startTimeout, 500)
            }
        };

        function CreateUiBut(x, b, r, i, f) {
            css(x, {
                "position": "absolute",
                "bottom": b,
                "right": r,
                "text-align": "center",
                "cursor": "pointer",
                "transform": "scale(1)",
                "border-radius": 30,
                "height": 30,
                "width": 30,
                "padding-top": 5,
                "box-sizing": "border-box",
                "zIndex": 1,
                "transition": "background-color 0.2s linear"
            });
            x.innerHTML = i;
            o.vastcontainer.appendChild(x);
            PtrNn(x);
            SvgColor(x, '#fff');
            x.onclick = f;
            x.addEventListener('mouseover', onOverMute);
            x.addEventListener('mouseout', onOutMute);
            onOutMute(null, x)
        }

        function onOutMute(x, y) {
            var z = x ? x.target : y;
            css(z, {
                "background": hex2rgb(v.vast_volumebgcolor, existv(v.vast_volumebga, 0.5))
            })
        }

        function onOverMute(x, y) {
            var z = x ? x.target : y;
            css(z, {
                "background": hex2rgb(v.vast_volumebgcolor, existv(v.vast_volumebga, 0.5) + 0.3)
            })
        }

        function onOutSkip() {
            css((v.vast_skip2right == 1 ? uiskip : uiprogress), {
                "background-color": hex2rgb(v.vast_skipbgcolor, existv(v.vast_skipbga, 0.5))
            })
        }

        function ImgLoaded() {
            imgtime = 0;
            exist(vast.duration) ? duration = vast.duration : duration = 10;
            img_int = setInterval(onTimeupdate, 100);
            onTimeupdate();
            Event("start", true)
        }

        function PlayStart() {
            var pp = tag.play();
            if (pp !== undefined) {
                pp.then(function() {}).catch(function(e) {
                    log("playError VAST", e.message);
                    if (vast.pause_mute == 1) {
                        Pause(true);
                        o.actions.VastShow()
                    } else {
                        if (!die_error && !removed) {
                            onMute();
                            var pp2 = tag.play();
                            pp2.then(function() {}).catch(function(e) {
                                log("playError2 VAST", e.message);
                                Pause(true);
                                o.actions.VastShow()
                            })
                        }
                    }
                })
            }
            video_t = setTimeout(tagTimeout, v.vast_timeout * 1000);
            vaststarted = true
        }

        function vpaidframeloaded() {
            try {
                if (vpaidframe.contentWindow) {
                    clearInterval(vpaidframe_int);
                    js2("vpaidframeloaded");
                    var defaultTemplate = '<!DOCTYPE html><html><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><script type="text/javascript" src="' + vast.file + '"></script><script type="text/javascript">window.parent.postMessage("PJS_VPAID_LOADED","*");</script></body></html>';
                    window.addEventListener("message", waitVpaid);
                    vpaidframe.contentWindow.document.open();
                    vpaidframe.contentWindow.document.write(defaultTemplate);
                    vpaidframe.contentWindow.document.close()
                }
            } catch (e) {
                log("VPAID frame error");
                onError(901)
            }
        }

        function waitVpaid(e) {
            if (e.data == 'PJS_VPAID_LOADED') {
                window.removeEventListener("message", waitVpaid);
                initVpaid()
            }
        }

        function initVpaid() {
            if (vpaidframe.contentWindow) {
                var fn = vpaidframe.contentWindow['getVPAIDAd'];
                if (fn && typeof fn == 'function') {
                    vpaid = fn();
                    if (vpaid) {
                        Vpaid()
                    } else {
                        onError(900)
                    }
                } else {
                    onError(900)
                }
            }
        }

        function CheckMuteStart() {
            if (v.vast_volume == 0 || (o.muted && v.vast_resound != 1) || vast.mute == 1 || (v.vast_unmutehover == 1 && !o.mouseHere && !o.system.mobile) || tag.muted || tag.volume == 0) {
                vast.mute != -1 ? onMute() : ''
            }
        }

        function startTimeout() {
            start_timeout = false
        }

        function onLoadStart() {}
        this.ytReady = function() {
            duration = ytag.duration();
            js3("vast_duration", duration);
            StopBuffering();
            ytinterval = setInterval(this.timeUpdate, 500);
            if (v.vast_volume == 0 || o.muted || (v.vast_unmutehover == 1 && !o.system.mobile)) {
                onMute()
            }
        };
        this.ytError = function() {
            onError()
        };
        this.ytWaiting = function() {
            onWaiting()
        };
        this.ytWaited = function() {
            StopBuffering()
        };
        this.ytEnded = function() {
            onEnded()
        };
        var die_error = false;

        function onOver() {
            if (!over) {
                if (uitxt) {
                    show2(uitxt)
                }
                if (v.vast_unmutehover == 1 && !o.system.mobile) {
                    onUnmute();
                    if (v.vast_unmuteonce == 1) {
                        v.vast_unmutehover = 0
                    }
                }
            }
            over = true
        }

        function onMeta() {
            if (tag.videoHeight > 0 && v.changeheight == 1 && v.changevastheight == 1) {
                o.actions.changeAspect(tag.videoWidth / tag.videoHeight, true)
            }
        }

        function onOut() {
            if (over) {
                if (uitxt) {
                    hide2(uitxt)
                }
                if (v.vast_unmutehover == 1 && !o.system.mobile) {
                    clearInterval(slow_unmute);
                    onMute()
                }
            }
            over = false
        }

        function onTagError() {
            var errorCode = tag.error.code;
            if (errorCode == 4) {
                onError(403)
            } else {
                onError(405)
            }
        }

        function onError(x) {
            if (!die_error && !removed) {
                die_error = true;
                log("VAST video playing error " + x);
                if (vpaid) {
                    for (var eventName in vpaidCallbacks) {
                        if (vpaidCallbacks.hasOwnProperty(eventName)) {
                            vpaid.unsubscribe(vpaidCallbacks[eventName], eventName)
                        }
                    }
                }
                Event("Error", false, x > 0 ? x : 400);
                clearInterval(vpaid_int);
                clearInterval(vpaidframe_int);
                clearInterval(push_wait_int);
                RemoveTimeouts();
                o.actions.VastError()
            }
        }

        function RemoveAndPlay() {
            Event("remove");
            RemoveTimeouts();
            if (!removed) {
                removed = true;
                o.actions.VastRemoveAndPlay()
            }
        }

        function RemoveTimeouts() {
            clearTimeout(vpaid_t);
            clearTimeout(vpaid_stop_t);
            clearTimeout(vpaid_complete_t);
            clearTimeout(video_t)
        }

        function onEnded() {
            if (!vpaidcompleted) {
                Event("complete", true)
            }
            RemoveAndPlay()
        }

        function onClose() {
            Event("close", true);
            var d = new Date();
            o.clicktime = d.getTime();
            o.vastclick = true;
            gaTracker("vast_skip", "VAST Skip");
            v["vast_" + o.vasttype + "skipor"] == 1 ? o.actions.VastNext() : RemoveAndPlay()
        }

        function onSkip() {
            var d = new Date();
            o.clicktime = d.getTime();
            o.vastclick = true;
            log("VAST Skip");
            gaTracker("vast_skip", "VAST Skip");
            if (!vpaidskipped && vpaid && vast.isVpaid) {
                log("VPAID Skip request");
                vpaid.skipAd()
            } else {
                Event("skipAd", true);
                Event("skip", true);
                v["vast_" + o.vasttype + "skipor"] == 1 ? o.actions.VastNext() : RemoveAndPlay()
            }
        }

        function onInvite() {
            Event("addClick");
            Event("acceptInvitation", false);
            onClick()
        }

        function onToggleMute() {
            _muted ? onUnmute() : onMute()
        }

        function onToggleFull() {
            var x;
            if (o.fullscreen) {
                o.actions.Normalscreen();
                x = v.control_full.icon
            } else {
                o.actions.Fullscreen();
                x = v.control_full.icon2
            }
            if (x) {
                uifull.innerHTML = x;
                PtrNn(uifull)
            }
            setTimeout(VpaidResize, 500)
        }

        function PtrNn(x) {
            x ? css(x.firstElementChild, {
                "pointer-events": "none"
            }) : ''
        }

        function onMute() {
            var stop = false;
            log((vast.isVpaid ? "VPAID" : "VAST") + " Mute");
            if (youtube || vimeo) {
                ytag.Mute()
            } else {
                clearInterval(slow_unmute);
                if (!vast.isVpaid) {
                    Event("mute");
                    tag.muted = true
                } else {
                    if (vpaid) {
                        vpaid.getAdVolume() > 0 ? vpaidvolume = vpaid.getAdVolume() : vpaidvolume = v.vast_volume;
                        vpaid.setAdVolume(0)
                    } else {
                        stop = true
                    }
                }
            }
            if (!stop) {
                Unmutebut(1);
                MuteIcon(true)
            }
        }

        function MuteIcon(x) {
            _muted = x;
            if (exist(uimute)) {
                uimute.innerHTML = x ? unmuteicon : muteicon
            }
        }

        function onUnmute() {
            var stop = false;
            if (youtube || vimeo) {
                ytag.Unmute();
                Event("unmute")
            } else {
                if (!vast.isVpaid) {
                    tag.muted = false;
                    if (unmute_volume == 0) {
                        unmute_volume = tag.volume;
                        unmute_volume < 0.3 ? unmute_volume = v.vast_default_volume : ''
                    }
                    tag.volume = 0;
                    clearInterval(slow_unmute);
                    slow_unmute = setInterval(SlowUnMute, 200)
                } else {
                    if (vpaid) {
                        v.vpaid_mute_impression = 0;
                        if (unmute_volume == 0) {
                            unmute_volume = vpaidvolume;
                            unmute_volume < 0.3 ? unmute_volume = v.vast_default_volume : ''
                        }
                        vpaid.setAdVolume(0);
                        tag.muted = false;
                        clearInterval(slow_unmute);
                        slow_unmute = setInterval(SlowUnMute, 200)
                    } else {
                        stop = true
                    }
                }
            }
            if (!stop) {
                Unmutebut(0);
                MuteIcon(false)
            }
        }

        function Unmutebut(x) {
            var z = uiunmutebut;
            if (v.vast_unmutebut == 1 && z) {
                var y = {
                    "mc": z,
                    "me": "uiunmutebut",
                    "type": "left"
                };
                if (x == 1) {
                    show(z);
                    y['to'] = 0
                } else {
                    y['to'] = -200;
                    y['hide'] = true
                }
                var m = new Motion(y)
            }
        }

        function SlowUnMute() {
            v.vast_volume = unmute_volume;
            if (!vast.isVpaid) {
                if (tag.volume < unmute_volume && tag.volume < 0.95) {
                    tag.volume += 0.1
                } else {
                    unmute_volume = 0;
                    clearInterval(slow_unmute);
                    Event("unmute")
                }
            } else {
                var x = vpaid.getAdVolume();
                if (x < unmute_volume && x < 0.99) {
                    vpaid.setAdVolume(parseFloat(x) + 0.1)
                } else {
                    unmute_volume = 0;
                    clearInterval(slow_unmute);
                    Event("unmute")
                }
            }
        }

        function onTouchStart() {
            _move = false
        }

        function onTouchMove() {
            _move = true
        }

        function onScreenClick() {
            var stop = false;
            if (o.system.mobile) {
                if (_move) {
                    stop = true
                }
            }
            removed ? stop = true : '';
            if (!stop) {
                if (paused) {
                    Resume()
                } else {
                    onClick()
                }
            }
            v.vast_unmuteonclick == 1 ? onUnmute() : ''
        }

        function onClick(z) {
            if (!start_timeout) {
                var d = new Date();
                o.clicktime = d.getTime();
                Event("click");
                if (v.vast_addclick == 1 || z) {
                    Event("addClick")
                }
                gaTracker("vast_click", "VAST Click");
                var x = false;
                if (exist(vast.click)) {
                    if (vast.click != '') {
                        var tmp = ['ref', 'referer', 'host'];
                        for (var i = 0; i < tmp.length; i++) {
                            vast.click = vast.click.replace(new RegExp('\\(' + tmp[i] + '\\)', "gi"), (tmp[i] == "host" ? encodeURIComponent(o.domain) : Href()))
                        }
                        js2("vast_clickurl", vast.click);
                        v.vast_openclick == 1 ? window.open(vast.click, '_blank') : '';
                        x = true
                    }
                }
                if (v.vast_pauseonclick == 1) {
                    Pause(x)
                } else {
                    if (v.vast_closeonclick == 1) {
                        x ? o.actions.VastRemoveAndPlay(v.vast_playonclick == 1 ? '' : 'dontplay') : ''
                    }
                }
            }
        }

        function onPlay() {
            onTimeupdate();
            Event("start", true)
        }

        function onPause() {
            Pause(true)
        }

        function Pause(x) {
            if (vast.isVpaid) {
                if (vpaid) {
                    vpaid.pauseAd();
                    if (controls) {
                        show2(uiplay)
                    }
                    paused = true
                }
            }
            if (vast.isImg) {
                clearInterval(img_int);
                if (controls) {
                    show2(uiplay)
                }
                paused = true
            }
            if (!vast.isVpaid && !vast.isImg) {
                if (x) {
                    if (youtube || vimeo) {
                        ytag.Pause()
                    } else {
                        tag.pause()
                    }
                    Event("pause");
                    show2(uiplay);
                    paused = true
                }
            }
            if (uitxt) {
                hide2(uitxt)
            }
            StopBuffering();
            log("VAST pause")
        }

        function Resume() {
            if (paused) {
                if (vast.isVpaid) {
                    if (vpaid) {
                        vpaid.resumeAd();
                        hide2(uiplay);
                        paused = false
                    }
                }
                if (vast.isImg) {
                    img_int = setInterval(onTimeupdate, 100);
                    onTimeupdate();
                    hide2(uiplay);
                    paused = false
                }
                if (!vast.isVpaid && !vast.isImg) {
                    if (youtube || vimeo) {
                        ytag.Play()
                    } else {
                        tag.play()
                    }
                    Event("resume");
                    hide2(uiplay);
                    paused = false
                }
                if (uitxt) {
                    show2(uitxt)
                }
                log("VAST resume")
            }
        }
        this.timeUpdate = function() {
            onTimeupdate()
        };

        function CurrentTime() {
            var t = 0;
            if (youtube || vimeo) {
                t = ytag.time()
            } else {
                if (vast.isImg) {
                    t = imgtime;
                    imgtime += 0.1
                } else {
                    t = tag.currentTime
                }
            }
            return t
        }

        function CurrentVolume() {
            if (vast) {
                if (!vast.isVpaid) {
                    return tag.muted ? 0 : tag.volume
                } else {
                    if (vpaid) {
                        var x = -1;
                        try {
                            x = vpaid.getAdVolume()
                        } catch (e) {
                            log(e)
                        }
                        return x
                    }
                }
            }
        }

        function onTimeupdate(e) {
            if (tag && !removed) {
                var t = CurrentTime();
                if (!impression) {
                    onImpression();
                    impression = true
                }
                if (!qrts[0]) {
                    if (t > duration / 4) {
                        Event("firstQuartile", true);
                        qrts[0] = true
                    }
                }
                if (!qrts[1]) {
                    if (t > duration / 2) {
                        Event("midpoint", true);
                        qrts[1] = true
                    }
                }
                if (!qrts[2]) {
                    if (t > (duration / 4) * 3) {
                        Event("thirdQuartile", true);
                        qrts[2] = true
                    }
                }
                if (exist(vast.progresstimes)) {
                    for (var i = 0; i < vast.progresstimes.length; i++) {
                        if (t >= vast.progresstimes[i]) {
                            Event("progress_" + vast.progresstimes[i], true)
                        }
                    }
                }
                onTimeupdateExtensions(t);
                if (t > 0 && t > last_time) {
                    StopBuffering()
                }
                if (o.vasttype == undefined) {
                    if (vast.adsystem == "intro") {
                        o.vasttype = "preroll"
                    }
                    if (vast.adsystem == "outro") {
                        o.vasttype = "postroll"
                    }
                }
                if (vast.isImg) {
                    if (t > duration) {
                        onEnded()
                    }
                }
                last_time = t
            }
        }
        var tu0 = true;

        function onTimeupdateExtensions(x) {
            js3("vast_time", x);
            if (vast.isVpaid && tu0) {
                tu0 = false;
                if (x < duration - 2 && duration > 0) {
                    return
                }
            }
            if (exist(vast.extensions)) {
                if (exist(vast.events.sec) && !vpaidcompleted) {
                    for (var i = 0; i < vast.events.sec.length; i++) {
                        if (x >= vast.events.sec[i] && vast.events.sec[i] > -1) {
                            Event("second" + vast.events.sec[i], true);
                            vast.events.sec[i] -= 1000
                        }
                    }
                }
                UpdateSkipTimes(x)
            }
            if (controls && duration > 0) {
                var val = parseInt(x / duration * 100);
                var circle = document.getElementById("pljsvastprogressbar_" + v.id);
                if (circle) {
                    if (isNaN(val)) {
                        val = 100
                    } else {
                        var r = circle.getAttribute('r');
                        var c = Math.PI * (r * 2);
                        if (val < 0) {
                            val = 0
                        }
                        if (val > 100) {
                            val = 100
                        }
                        var pct = ((100 - val) / 100) * c;
                        css(circle, {
                            "opacity": 1,
                            "strokeDashoffset": pct
                        })
                    }
                }
            }
        }

        function UpdateSkipTimes(x) {
            if (exist(vast.extensions) && controls && x >= last_skiptime) {
                var chkskp;
                if (exist(vast.extensions.skipTime)) {
                    if (vast.extensions.skipTime > -1 && vast.extensions.skipTime < 100 && uiskip) {
                        chkskp = true;
                        if (x > vast.extensions.skipTime) {
                            js3("vast_skipTime", vast.extensions.skipTime);
                            ShowSkip();
                            vast.extensions.skipTime = null
                        } else {
                            uiskip.innerHTML = Lang("skip_after_") + (Math.round(vast.extensions.skipTime - x))
                        }
                    }
                }
                if (exist(vast.extensions.skipTime2)) {
                    if (vast.extensions.skipTime2 > -1) {
                        if (chkskp) {
                            if (vast.extensions.skipTime2 < vast.extensions.skipTime) {
                                vast.extensions.skipTime2 = vast.extensions.skipTime
                            }
                        }
                        if (x > vast.extensions.skipTime2) {
                            js3("vast_skipTime2", vast.extensions.skipTime2);
                            Event("skipTime2");
                            uix ? css(uix, {
                                "top": 0,
                                "opacity": 1,
                                "display": "block"
                            }) : '';
                            vast.extensions.skipTime2 = null
                        }
                    }
                }
                last_skiptime = x
            }
        }

        function ShowSkip() {
            if (uiskip && !removed) {
                uiskip.innerHTML = Lang("skip");
                css(uiskip, {
                    "cursor": "pointer",
                    "font-size": (v.vast_skip_size ? v.vast_skip_size : 16) * existv(v.globalfs, 1),
                    "display": "block"
                });
                if (v.vast_skip2right == 1) {
                    uiskip.onclick = onSkip;
                    uiskip.addEventListener('mouseover', function() {
                        css(uiskip, {
                            "background-color": hex2rgb(v.vast_skipbgcolor, existv(v.vast_skipbga, 0.5) + 0.3)
                        })
                    });
                    uiskip.addEventListener('mouseout', onOutSkip)
                } else {
                    if (uiprogress) {
                        css(uiprogress, {
                            "cursor": "pointer"
                        });
                        uiprogress.onclick = onSkip;
                        uiprogress.addEventListener('mouseover', function() {
                            css(uiprogress, {
                                "background-color": hex2rgb(v.vast_skipbgcolor, existv(v.vast_skipbga, 0.5) + 0.3)
                            })
                        });
                        onOutSkip();
                        uiprogress.addEventListener('mouseout', onOutSkip)
                    }
                }
            }
        }

        function onSeeking() {}

        function onSeeked() {}

        function onImpression() {
            if (!die_error && !removed) {
                Event("Impression", true);
                Event("Impress", true);
                Event("creativeView", true);
                gaTracker("vast_impression", "VAST Impression");
                ImpressionActions()
            }
        }

        function ImpressionActions() {
            var y = (vast.adsystem == "intro" || vast.adsystem == "outro" ? "intro" : o.vasttype);
            o.actions.VastImpression(vast.skipimp == 1);
            if (v["vast_" + y + "timebreak"] > 0) {
                StoreImpression(y)
            }
            if (exist(o.visibility)) {
                if (o.visibility > 70) {
                    Event("Viewable")
                } else {
                    Event("NotViewable")
                }
            } else {
                Event("NotViewable")
            }
            o.vast_impressions++;
            o.vast_impressions_all++;
            o.vast_longtomsg ? o.vast_longtomsg.remove() : '';
            _muted ? Unmutebut(1) : '';
            impression = true;
            o.vast_stop == 1 ? o.vast_stop = 2 : '';
            o.vast_poster ? o.vast_poster.hide() : '';
            o.vast_loadtxt ? o.vast_loadtxt.hide() : '';
            StopBuffering()
        }

        function onDuration() {
            Event("AdLoaded", true);
            duration = tag.duration;
            js3("vast_duration", duration)
        }

        function onVolume() {
            js3("vast_volume", VastInfo())
        }

        function onProgress(event) {}
        var vpaidCallbacks = {
            AdStarted: vpaidStartAd,
            AdStopped: vpaidStopAd,
            AdSkipped: vpaidSkipAd,
            AdLoaded: vpaidAdLoaded,
            AdLinearChange: vpaidAdLinearChange,
            AdSizeChange: vpaidAdSizeChange,
            AdExpandedChange: vpaidAdExpandedChange,
            AdSkippableStateChange: vpaidAdSkippableStateChange,
            AdDurationChange: vpaidAdDurationChange,
            AdRemainingTimeChange: vpaidAdRemainingTimeChange,
            AdVolumeChange: vpaidAdVolumeChange,
            AdImpression: vpaidAdImpression,
            AdClickThru: vpaidAdClickThru,
            AdInteraction: vpaidAdInteraction,
            AdVideoStart: vpaidAdVideoStart,
            AdVideoFirstQuartile: vpaidAdVideoFirstQuartile,
            AdVideoMidpoint: vpaidAdVideoMidpoint,
            AdVideoThirdQuartile: vpaidAdVideoThirdQuartile,
            AdVideoComplete: vpaidAdVideoComplete,
            AdUserAcceptInvitation: vpaidAdUserAcceptInvitation,
            AdUserMinimize: vpaidAdUserMinimize,
            AdUserClose: vpaidAdUserClose,
            AdPaused: vpaidAdPaused,
            AdPlaying: vpaidAdPlaying,
            AdError: vpaidAdError,
            AdErrorVpaid: vpaidAdErrorVpaid,
            AdLog: vpaidAdLog,
            AdViewable: vpaidAdViewable
        };

        function Vpaid() {
            if (typeof vpaid.handshakeVersion == "function") {
                for (var e in vpaidCallbacks) {
                    if (vpaidCallbacks.hasOwnProperty(e)) {
                        vpaid.subscribe(vpaidCallbacks[e], e, this)
                    }
                }
                if (vast.vpdevnts) {
                    for (var i = 0; i < vast.vpdevnts.length; i++) {
                        if (vast.vpdevnts[i] != '') {
                            eval("function pjsvpd_" + vast.vpdevnts[i] + "(){Event('" + vast.vpdevnts[i] + "');}");
                            vpaid.subscribe(eval('pjsvpd_' + vast.vpdevnts[i]), vast.vpdevnts[i], this)
                        }
                    }
                }
                if (v.vpaid_slotinframe == 1 && vpaidframe) {
                    vpaidslot2 = document.createElement("div");
                    vpaidframe.contentDocument.body.appendChild(vpaidslot2);
                    css(vpaidslot2, {
                        "position": "absolute",
                        "top": "0",
                        "left": "0",
                        "width": "100%",
                        "height": "100%",
                        "cursor": "pointer"
                    })
                }
                vpaid.initAd(o.screen_w, o.screen_h, (o.fullscreen ? 'fullscreen' : 'normal'), 720, (exist(vast.adparameters) ? {
                    "AdParameters": vast.adparameters
                } : ''), {
                    "slot": (v.vpaid_slotinframe == 1 ? vpaidslot2 : vpaidslot),
                    "videoSlot": tag,
                    'videoSlotCanAutoPlay': true
                });
                css(vpaidslot, {
                    "cursor": "pointer"
                });
                vpaidslot.style.zIndex = 0
            } else {
                log("VPAID incorrect");
                onError(901)
            }
        };

        function vpaidAdLog(x) {
            log("VPAID Log: " + x)
        }

        function vpaidAdViewable() {
            Event("viewable", true)
        }

        function vpaidAdError(x) {
            if (!vpaidcompleted) {
                log("VPAID Error", x);
                if (typeof x == "object" && v.log == 1) {
                    console.log(x)
                }
                onError(901)
            } else {
                log("VPAID Error but completed", x);
                vpaidStopAd()
            }
        }

        function vpaidAdErrorVpaid(x) {
            if (!vpaidcompleted) {
                log("VPAID Error", x);
                Event("Error", false, x > 0 ? x : 400)
            }
        }

        function vpaidAdLoaded() {
            if (v["vast_" + o.vasttype + "normal"] == 1 && o.fullscreen) {
                o.actions.Normalscreen()
            }
            log("VPAID Loaded, ad " + vpaid.getAdLinear());
            Event("AdLoaded", true);
            if (vpaid.getAdLinear() != 'nonlinear') {
                if (v.vpaid_waitstart != 1) {
                    StartVpaidVolume();
                    clearTimeout(vpaid_t);
                    vpaid_t = setTimeout(vpaidVideoTimeout, v.vpaid_timeout * 1000);
                    vpaid.startAd()
                } else {
                    js('vast_readystart')
                }
                clearInterval(vpaid_int2);
                vpaid_int2 = setInterval(vpaidAdRemainingTimeChange, 1000);
                vpaidAdRemainingTimeChange()
            } else {
                vpaidAdError("Nonlinear")
            }
        }

        function StartVpaidVolume() {
            if (vpaid) {
                if (v.vast_volume == 0 || vast.mute == 1 || (v.vast_unmutehover == 1 && !o.system.mobile && o.mouseHere != 1)) {
                    if (vpaid.getAdVolume() > 0 && vast.mute != -1) {
                        onMute()
                    }
                } else {
                    if (v.vast_volume != -1) {
                        vpaid.setAdVolume(parseFloat(v.vast_volume))
                    } else {
                        vpaid.setAdVolume(parseFloat(v.volume))
                    }
                }
            }
        }

        function StopBuffering() {
            if (vast.buffering) {
                uibuffer ? hide2(uibuffer) : '';
                vast.buffering = false;
                clearInterval(push_wait_int)
            }
        }

        function onWaiting() {
            uibuffer ? show2(uibuffer) : '';
            vast.buffering = true;
            if (v.vast_push_waiting == 1) {
                clearInterval(push_wait_int);
                push_wait_int = setInterval(PushWaiting, 1500)
            }
        }

        function PushWaiting() {
            last_skiptime = last_skiptime + 1;
            UpdateSkipTimes(last_skiptime)
        }

        function vpaidStartAd() {
            vpaidstarted = true;
            v.vpaidvideotimeout != 1 ? vpaidvideostarted = true : '';
            duration = vpaid.getAdDuration();
            var rt = vpaid.getAdRemainingTime();
            if (duration > 0) {} else {
                if (exist(vast.duration)) {
                    if (vast.duration >= rt) {
                        duration = vast.duration
                    }
                }
            }
            if (duration >= 5000) {
                duration = duration / 1000
            }
            js3("vast_duration", duration);
            o.vast_poster ? o.vast_poster.hide() : '';
            o.vast_loadtxt ? o.vast_loadtxt.hide() : '';
            js_events = [];
            imps = [];
            qrts = [];
            log("VPAID Started");
            var x;
            if (indOf([vast.wrapper, vast.vasturl], 'pjsvvs=1')) {
                x = true
            }
            v.vast_visibleonstart == 1 && !vast.skipimp && !x ? o.actions.VpaidStarted() : '';
            Event("creativeView", true);
            StopBuffering()
        }

        function vpaidVideoTimeout() {
            if (!vpaidvideostarted && !die_error) {
                log("VPAID timeout");
                js3("vpaid_video_timeout", VastInfo());
                onError(901)
            }
        }

        function vpaidQuartileTimeout() {
            if (!vpaidquartile && !die_error) {
                if (v.vpaid_mute_impression == 0 && paused) {} else {
                    log("VPAID quartile timeout");
                    js3("vpaid_quartile_timeout", VastInfo());
                    onError(901)
                }
            }
        }

        function vpaidStoppedTimeout() {
            if (!vpaidstopped && !die_error) {
                log("VPAID stopped timeout");
                js3("vpaid_stopped_timeout", VastInfo());
                if (!removed) {
                    impression ? vpaidStopAd() : onError(901)
                }
            }
        }

        function tagTimeout() {
            if (tag) {
                if (!die_error && tag.currentTime == 0 && duration == 0) {
                    log("VAST video loading timeout");
                    js3("vast_video_timeout", VastInfo());
                    onError(402)
                }
            }
        }

        function vpaidLoadTimeout() {
            if (!vpaidvideostarted && !die_error && v.vpaid_waitstart != 1) {
                log("VPAID loading timeout");
                js3("vpaid_loading_timeout", VastInfo());
                onError(901)
            }
        }

        function vpaidStopAd() {
            if (!removed) {
                if (!vpaidstopped) {
                    log("VPAID Stopped");
                    vpaidstopped = true;
                    if (!removed && !impression) {
                        if (vpaidstarted && duration > 0 && remainigs > 75 && exist(vast.prt)) {
                            vpaidImpression()
                        }
                        log("VPAID No impression --> Error (" + remainigs + ")");
                        onError(901)
                    } else {
                        if (vpaidcompleted || vpaidskipped) {
                            RemoveAndPlay()
                        } else {
                            remove_t = setTimeout(RemoveAndPlay, 200)
                        }
                    }
                }
            }
        }

        function vpaidSkipAd() {
            log("VPAID Skipped");
            vpaidskipped = true;
            onSkip()
        }

        function vpaidAdSizeChange() {
            log("VPAID SizeChanged: " + vpaid.getAdWidth() + " x " + vpaid.getAdHeight());
            if (vpaid.getAdHeight() > 0 && vpaid.getAdWidth() > 0 && v.changeheight == 1 && v.changevastheight == 1) {
                o.actions.changeAspect(vpaid.getAdWidth() / vpaid.getAdHeight(), true)
            }
        }

        function vpaidAdExpandedChange() {
            log("VPAID ExpandedChange: " + vpaid.getAdExpanded())
        }

        function vpaidAdSkippableStateChange() {
            if (controls) {
                log("VPAID AdSkippableStateChange: " + vpaid.getAdSkippableState());
                if (vpaid.getAdSkippableState()) {
                    ShowSkip()
                } else {
                    hide2(uiskip)
                }
            }
        }

        function vpaidAdDurationChange() {
            log("VPAID DurationChanged: " + vpaid.getAdDuration());
            if (vpaid.getAdDuration() > 0) {
                duration = vpaid.getAdDuration();
                js3("vast_duration", duration)
            }
        }

        function vpaidAdRemainingTimeChange(event) {
            var dr = vpaid.getAdDuration();
            if (event) {
                clearInterval(vpaid_int2)
            }
            var rt = vpaid.getAdRemainingTime();
            if (dr > 0 && dr != duration) {
                vpaidAdDurationChange()
            }
            remainigs++;
            if (duration == 0 || rt > duration) {
                if (rt > 0) {
                    duration = rt;
                    js3("vast_duration", duration)
                }
            }
            if (rt > 0) {
                if (duration > 0) {
                    onTimeupdateExtensions(duration - rt)
                }
            } else {
                if (v.vpaid_noremainingtime == 1) {
                    log("VPAID time", remainigs - 1, rt, duration);
                    onTimeupdateExtensions(remainigs - 1)
                }
            }
        }

        function vpaidAdVolumeChange() {
            if (vpaid.getAdVolume() != undefined) {
                if (vpaid.getAdVolume() == 0) {
                    Event("mute");
                    vpaidvolume2 = 0;
                    MuteIcon(true)
                } else {
                    if (vpaidvolume2 == 0) {
                        Event("unmute");
                        MuteIcon(false)
                    }
                    vpaidvolume2 = vpaid.getAdVolume()
                }
            }
            log("VPAID VolumeChanged: " + vpaid.getAdVolume());
            if (vpaidvolume2 > 0 && v.vpaid_mute_impression == 1 && !impression) {
                onMute()
            }
        }

        function vpaidAdImpression() {
            if (vast.vpaidImOnVdSrt != 1) {
                vpaidImpression()
            }
        }

        function vpaidImpression() {
            vpaidcompleted = false;
            log("VPAID Impression", duration);
            Event("Impression");
            Event("Impress");
            ImpressionActions();
            gaTracker("vast_impression", "VAST Impression");
            if (v.vpaid_timeout2 > -1) {
                clearTimeout(vpaid_t);
                vpaid_t = setTimeout(vpaidVideoTimeout, v.vpaid_timeout2 * 1000)
            }
            if (v.vpaid_mute_impression == 1) {
                onMute()
            }
        }

        function vpaidAdClickThru(x, y, z) {
            log("VPAID ClickThru");
            if (exist(x)) {
                if (typeof x == "string") {
                    if (x.indexOf('//') > -1 && z == true) {
                        vast.click = x
                    }
                }
            }
            if (exist(vast.extensions.isClickable)) {
                if (vast.extensions.isClickable == 1) {
                    onClick(true)
                } else {
                    Event("click");
                    Event("addClick")
                }
            } else {
                onClick(true)
            }
        }

        function vpaidAdInteraction() {}

        function vpaidAdVideoStart() {
            if (vast.vpaidImOnVdSrt == 1) {
                vpaidImpression()
            }
            log("VPAID AdVideoStart");
            o.actions.VpaidStarted();
            vpaidvideostarted = true;
            clearTimeout(vpaid_t);
            if (v.vpaid_timeout3 > -1) {
                vpaid_t = setTimeout(vpaidQuartileTimeout, v.vpaid_timeout3 * 1000)
            }
            clearTimeout(vpaid_stop_t);
            if (v.vpaid_timeout4 > -1) {
                vpaid_stop_t = setTimeout(vpaidStoppedTimeout, v.vpaid_timeout4 * 1000)
            }
            if (v.vpaid_mute_impression == 1) {
                onMute()
            }
            Event("start", false);
            o.vpaid_starts++;
            if (v.vpaid_startlimit > 0) {
                if (o.vpaid_starts > v.vpaid_startlimit) {
                    log("VPAID start limit");
                    onError()
                }
            }
        }

        function vpaidAdVideoFirstQuartile() {
            vpaidquartile = true;
            log("VPAID firstQuartile");
            Event("firstQuartile", false)
        }

        function vpaidAdVideoMidpoint() {
            log("VPAID midpoint");
            Event("midpoint", false)
        }

        function vpaidAdVideoThirdQuartile() {
            log("VPAID thirdQuartile");
            Event("thirdQuartile", false)
        }

        function vpaidAdVideoComplete() {
            if (!vpaidcompleted) {
                Event("complete", false);
                vpaidcompleted = true;
                for (var y in vast.events) {
                    if (vast.events.hasOwnProperty(y)) {
                        if (y.indexOf("old_") == 0) {
                            vast.events[y.substr(4)] = vast.events[y]
                        }
                    }
                }
                if (exist(vast.events.sec)) {
                    for (var i = 0; i < vast.events.sec.length; i++) {
                        vast.events.sec[i] += 1000
                    }
                }
                if (v.vpaid_timeout5 > -1) {
                    clearTimeout(vpaid_complete_t);
                    vpaid_complete_t = setTimeout(vpaidStoppedTimeout, v.vpaid_timeout5 * 1000)
                }
            }
            log("VPAID complete")
        }

        function vpaidAdLinearChange() {
            log("VPAID linear has changed: " + vpaid.getAdLinear())
        }

        function vpaidAdUserAcceptInvitation() {
            Event("acceptInvitation", false)
        }

        function vpaidAdUserMinimize() {}

        function vpaidAdUserClose() {
            var d = new Date();
            o.clicktime = d.getTime();
            Event("close", true);
            o.vastclick = true;
            gaTracker("vast_skip", "VAST Skip")
        }

        function vpaidAdPaused() {
            if (vast.isVpaid && vpaidcompleted) {} else {
                Event("pause");
                if (v.vpaid_nopause == 1) {
                    vpaid.resumeAd()
                } else {
                    if (controls && v.vast_pauseonclick == 1) {
                        show2(uiplay)
                    }
                    paused = true
                }
            }
        }

        function vpaidAdPlaying() {
            Event("resume");
            if (controls && exist(uiplay)) {
                hide2(uiplay)
            }
            paused = false
        }

        function StoreImpression(y) {
            if (v["vast_" + y + "timebreak"] > 0 && o.storage) {
                var tbi = localStorage.getItem("pljs" + y + "i_" + o.d) * 1;
                var z = false;
                if (tbi) {
                    tbi + 1 >= v["vast_" + y + "tbimp"] ? z = true : ''
                } else {
                    tbi = 0
                }
                if (z || o.vast_impressions_all + 1 >= v["vast_" + y + "tbimp"]) {
                    var x = new Date();
                    localStorage.setItem("pljs" + y + "_" + o.d, x.getTime());
                    localStorage.setItem("pljs" + y + "i_" + o.d, 0);
                    o.actions.EmptyVastUrl()
                } else {
                    localStorage.setItem("pljs" + y + "i_" + o.d, tbi + 1)
                }
            }
        }

        function Event(x, del, code, justcode) {
            if (x == "start") {
                o.vast_started = true;
                v.miniwithvast == 1 && o.minify ? o.minify.Check() : ''
            }
            if (exist(vast.prt) && v.eventstrackervast == 0 && v.vpaid != 1) {} else {
                if (del) {
                    if (!exist(js_events[x])) {
                        js3("vast_" + x, VastInfo())
                    }
                    js_events[x] = true
                } else {
                    code > 0 ? js3(("vast_" + x), code) : js3("vast_" + x, VastInfo())
                }
            }
            if (exist(vast.events)) {
                if (exist(vast.events[x])) {
                    log("VAST Event " + x);
                    for (var i = 0; i < vast.events[x].length; i++) {
                        var z = vast.events[x][i];
                        var stop = false;
                        if (exist(z)) {
                            if (imps.indexOf(z) > -1) {
                                stop = true
                            }
                            if (x == "Impression") {
                                imps.push(z)
                            }
                            if (code > 0) {
                                if (z.indexOf("[ERRORCODE]") > 0) {
                                    z = z.replace("[ERRORCODE]", code)
                                } else {
                                    justcode == 1 ? stop = true : ''
                                }
                            }
                            if (z.indexOf("(visibility)") > 0) {
                                if (exist(o.visibility)) {
                                    z = z.replace("(visibility)", o.visibility)
                                }
                            }
                            if (z.indexOf("(volume)") > 0) {
                                z = z.replace("(volume)", CurrentVolume())
                            }
                            z = z.replace("(adblock)", (o.ab ? 1 : 0));
                            z = z.replace(/\(random\)/g, Math.random());
                            if (z.indexOf(".pjstat") > 0) {
                                var m = 0;
                                z = z + "&m=" + (o.system.tv ? 2 : (o.system.mobile ? 1 : 0)) + ("&h=" + (exist(v.parent_domain) ? v.parent_domain : o.domain)) + (o.vasttype == 'overlay' || vast.isFrm ? '&r=1' : '') + '&s=' + o.sessid
                            }
                            if (typeof v.vast_replace == "object") {
                                for (var y in v.vast_replace) {
                                    if (v.vast_replace.hasOwnProperty(y)) {
                                        for (var j = 0; j < 5; j++) {
                                            z = z.replace(y, v.vast_replace[y])
                                        }
                                    }
                                }
                            }
                        } else {
                            stop = true
                        }
                        if (!stop) {
                            gif(z)
                        }
                    }
                    if (del) {
                        vast.events["old_" + x] = vast.events[x];
                        vast.events[x] = undefined
                    }
                }
            }
            if (x == "click" && v.vast_addclick == 1) {
                Event("addClick")
            }
        };

        function js2(x) {
            if (vast.adsystem != "intro" && vast.adsystem != "outro") {
                js(x)
            }
        }

        function js3(x, y) {
            if ((exist(vast.prt) && v.eventstrackervast == 0 && v.vpaid != 1) || vast.adsystem == "intro" || vast.adsystem == "outro") {} else {
                js(x, y)
            }
        }
        this.config = function(x) {
            return vast ? vast[x] : false
        };
        this.tagLive = function() {
            var x = false;
            if (tag) {
                if (tag.parentElement) {
                    try {
                        if (tag.parentElement.nodeName == "PJSDIV") {
                            x = true
                        }
                    } catch (e) {
                        x = false
                    }
                }
            }
            if (vast) {
                if (vast.isVpaid) {
                    return false
                }
            }
            return x
        };
        this.info = function(x) {
            return vast ? vast[x] : false
        };
        this.active = function() {
            return !removed
        };
        this.Resize = function() {
            VpaidResize()
        };

        function VpaidResize() {
            if (vast) {
                if (vast.isVpaid) {
                    if (vpaid) {
                        vpaid.resizeAd(o.screen_w, o.screen_h, (o.fullscreen ? 'fullscreen' : 'normal'))
                    }
                }
            }
        }

        function RemoveInterface() {
            RemoveControl('uiplay');
            if (tag) {
                if (tag.played.length > 0) {
                    tag.pause()
                }
            }
            if (controls && o.vastcontainer.contains(uix)) {
                if (v.vast_title == 1) {
                    RemoveControl('uit')
                }
                var cntrls = ['uiprogress', 'uiskip', 'uix', 'uitxt', 'uitxt', 'uimute', 'uifull', 'uiposter', 'uiunmutebut'];
                for (var i = 0; i < cntrls.length; i++) {
                    RemoveControl(cntrls[i])
                }
            }
        };

        function RemoveControl(x) {
            if (exist(eval(x))) {
                if (o.vastcontainer.contains(eval(x))) {
                    if (x == 'uitxt') {
                        uitxt.removeEventListener('click', onInvite)
                    }
                    o.vastcontainer.removeChild(eval(x));
                    eval(x + ' = null;')
                }
            }
        }
        this.getVolume = function() {
            return CurrentVolume()
        };
        this.pause = function() {
            if (!removed && !paused && vast) {
                Pause(true);
                return true
            } else {
                return false
            }
        };
        this.resume = function() {
            if (!removed && paused && vast) {
                Resume();
                return true
            } else {
                return false
            }
        };
        this.VpaidSet = function(x, y) {
            if (vast) {
                if (x == "setAdVolume") {
                    if (y == 0) {
                        onMute()
                    } else {
                        onUnmute()
                    }
                }
                if (x == "stopAd") {
                    RemoveAndPlay()
                }
                if (x == "startAd") {
                    VpaidSetStartAd()
                }
                if (x == "skipAd") {
                    onSkip()
                }
                if (x == "pauseAd") {
                    onPause()
                }
                if (x == "resumeAd") {
                    onPlay()
                }
            }
        };

        function VpaidSetStartAd() {
            if (!vast.isVpaid) {
                !vaststarted ? PlayStart() : ''
            } else {
                !vpaidstarted && vpaid ? vpaid.startAd() : ''
            }
        }
        this.startAd = function() {
            if (v.vpaid_waitstart == 1 && !vpaidstarted) {
                vast.isVpaid && vpaid ? StartVpaidVolume() : '';
                VpaidSetStartAd()
            }
        };
        this.mute = function() {
            onMute()
        };
        this.imp = function(x) {
            if (impression && !removed) {
                var y = x.split(',');
                for (var i = 0; i < y.length; i++) {
                    gif(y[i])
                }
            }
        };
        this.RemoveForNextAd = function() {
            if (youtube || vimeo) {
                clearInterval(ytinterval);
                ytag.Remove()
            }
            if (vast) {
                RemoveInterface();
                if (vast.isVpaid) {
                    if (exist(vpaidslot)) {
                        if (!vpaidstopped && vpaid && vpaidstarted) {
                            try {
                                vpaid.stopAd()
                            } catch (e) {
                                log(e)
                            }
                        }
                        if (vpaid) {
                            for (var eventName in vpaidCallbacks) {
                                if (vpaidCallbacks.hasOwnProperty(eventName)) {
                                    vpaid.unsubscribe(vpaidCallbacks[eventName], eventName)
                                }
                            }
                        }
                        if (o.vastcontainer.contains(vpaidslot) && vast.hidevpaid != 1) {
                            o.vastcontainer.removeChild(vpaidslot)
                        }
                    }
                    clearInterval(vpaid_int);
                    clearInterval(vpaid_int2);
                    clearInterval(vpaidframe_int);
                    clearInterval(push_wait_int);
                    RemoveTimeouts();
                    if (vast.hidevpaid != 1 && vpaidframe) {
                        try {
                            o.vastcontainer.removeChild(vpaidframe)
                        } catch (e) {}
                    }
                } else {
                    hide(tag)
                }
                onWaiting()
            }
            if (exist(vpaidslot)) {
                clearInterval(img_int);
                if (o.vastcontainer.contains(vpaidslot) && vast.hidevpaid != 1) {
                    o.vastcontainer.removeChild(vpaidslot)
                }
            }
            if (vast) {
                vast.events = []
            }
            removed = true;
            impression = false;
            remainigs = 0;
            mp3 = false;
            imps = [];
            qrts = []
        };
        this.waitGo = function(x) {
            vast = x
        };
        this.Remove = function() {
            try {
                if (o.vastcontainer.contains(tag)) {
                    o.vastcontainer.removeChild(tag)
                }
            } catch (e) {}
            this.RemoveForNextAd();
            removed = true;
            try {
                if (o.frame.contains(o.vastcontainer) && vast.hidevpaid != 1) {
                    o.frame.removeChild(o.vastcontainer)
                }
                if (vast.hidevpaid == 1) {
                    hide2(o.vastcontainer)
                }
            } catch (e) {}
        }
    };
    var Settings = function(is) {
        var i;
        var style = [];
        var f = [];
        var fbg = [];
        var fimg = [];
        var ftitle = [];
        var fvalue = [];
        var faction = [];
        var f2 = [];
        var f2bg = [];
        var f2img = [];
        var f2title = [];
        var f2value = [];
        var f2action = [];
        var stout = [];
        var is_visible = false;
        var open_action;
        var open_settings = -1;
        var empty = true;
        var key = is;
        var playlist;
        var shuffle = [];
        var shuffle_ = [];
        var plid = '';
        var plfolder = '';
        var plx = -1;
        var sub_settings_on = false;
        var sub_settings = false;
        var autonextopenfolder = false;
        var autoprevopenfolder = false;
        var justshow = false;
        var removed = false;
        var showinterval;
        var arrinterval;
        var wheelinterval;
        var hidetimeout;
        var settimer;
        var shr = [];
        var clr = [];
        var iclr = 0;
        var _cstm = 0;
        var srch;
        var evntclk = "click";
        var evntovr = (o.system.mobile ? "touchstart" : "mouseover");
        var evntout = (o.system.mobile ? "touchend" : "mouseout");
        style = UpdateObject(style, v[is]);
        style = MarginPadding(v[is], 'margin', 'margin');
        if (style.marginbg == 0) {
            style.marginbgpadding = "0 0 0 0"
        }
        style = MarginPadding(v[is], 'bgpadding', 'marginbgpadding');
        style = MarginPadding(v[is], 'padding', 'padding');
        style.scrollwidth = 0;
        var _activeIcon = "<svg style='margin-top:3px' width='" + style.activeiconsize * 2 + "' height='" + (style.activeiconsize * 2 > style.valuefontsize ? (style.activeiconsize * 2) : style.valuefontsize) + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><ellipse ry='" + (style.activeiconsize) + "' rx='" + style.activeiconsize + "' cy='" + (style.activeiconsize * 2 > style.valuefontsize ? (style.activeiconsize) : (style.valuefontsize / 2)) + "' cx='" + style.activeiconsize + "' fill='#" + style.valuecolor + "'/></g></svg>";
        var _xIcon = "<svg width='" + style.activeiconsize * 2 + "' height='" + style.valuefontsize + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' ><g><ellipse ry='" + (style.activeiconsize - 1) + "' rx='" + (style.activeiconsize - 1) + "' cy='" + (style.valuefontsize / 2 + 2) + "' cx='" + style.activeiconsize + "' stroke='#" + style.valuecolor + "' stroke='1' fill-opacity='0'/></g></svg>";
        var xx = 4;
        var _nextIcon = "<pjsdiv style='display:inline-block;'><svg width='" + (xx + 2) + "' height='" + (style.valuefontsize) + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='1' y1='" + (style.valuefontsize / 2 - xx) + "' x2='" + xx + "' y2='" + (style.valuefontsize / 2) + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round'/><line x1='" + xx + "' y1='" + (style.valuefontsize / 2) + "' x2='1' y2='" + (style.valuefontsize / 2 + xx) + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round'/></g></svg></pjsdiv>";
        var _prevIcon = "<pjsdiv style='display:inline-block;'><svg width='" + (xx + 10) + "' height='" + (style.valuefontsize + 1) + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' style='float:left'><g><line x1='1' y1='" + (style.valuefontsize / 2 + 2) + "' x2='" + xx + "' y2='" + (style.valuefontsize / 2 - xx + 2) + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round' /><line x1='1' y1='" + (style.valuefontsize / 2 + 2) + "' x2='" + xx + "' y2='" + (style.valuefontsize / 2 + xx + 2) + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round'/></g></svg></pjsdiv>";
        var bordercolor = "rgba(" + (style.bordercolor ? hex2rgb(style.bordercolor.replace("#", "")) : '') + ',' + existv(style.brda, 1) + ")";
        var container = createElement("div");
        o.frame.appendChild(container);
        css(container, {
            'overflow': 'hidden',
            'display': 'block',
            'opacity': 0,
            'border-radius': style.rounding
        });
        if (style.bgborder == 1) {
            css(container, {
                "border": "1px solid " + CheckColor(existv(style.bgbordercolor, 'ffffff'))
            })
        }
        var mpi = {};
        for (var i in o.menuproc) {
            if (o.menuproc.hasOwnProperty(i)) {
                mpi[o.menuproc[i]] = -1
            }
        }
        if (is == "settings") {
            container.style.zIndex = 1100
        } else {
            container.style.zIndex = 99
        }
        var control = createElement("div");
        if (o.small) {
            style.smallfontsize > 0 ? style.fontsize = style.smallfontsize : '';
            style.floatwidthsmall > 0 ? style.floatwidth = style.floatwidthsmall : '';
            style.floatheightsmall > 0 ? style.floatheight = style.floatheightsmall : ''
        }
        css(control, {
            'position': 'relative',
            'top': 0,
            'left': 0,
            'display': 'block',
            'width': '100%',
            'padding-top': style.bgpaddingtop,
            'padding-right': style.bgpaddingright + 20,
            'padding-bottom': style.bgpaddingbottom,
            'padding-left': style.bgpaddingleft,
            'color': style.color,
            'font-size': style.fontsize * existv(v.globalfs, 1),
            'font-family': checkFont(style.font),
            'letter-spacing': style.letterspacing + 'px'
        });
        if (o.system.safari) {
            css(control, {
                'min-width': 220
            })
        }
        if (is !== "playlist") {
            css(control, {
                'overflow-y': 'scroll'
            })
        }
        container.appendChild(control);
        if (style.floatleft != 1) {
            var control2 = createElement("div");
            css(control2, {
                'display': 'block',
                'overflow': 'hidden',
                'border-radius': style.rounding
            });
            if (style.floatleft != 1) {
                if (o.system.safari) {
                    css(control2, {
                        'min-width': 220
                    })
                }
            }
            control.appendChild(control2)
        }
        attr(control, {
            id: (v.id + "_" + is)
        });
        if (is == "playlist") {
            if (style.floatleft == 1) {
                css(control, {
                    'width': '100%',
                    'padding-right': style.bgpaddingright,
                    'padding-bottom': style.bgpaddingbottom + 20,
                    'overflow-x': 'scroll',
                    'overflow-y': 'hidden',
                    'white-space': 'nowrap'
                });
                css(container, {
                    'width': o.screen_w - style.marginright - style.marginleft,
                    'height': style.floatheight + style.bgpaddingtop + style.bgpaddingbottom
                })
            } else {
                css(control, {
                    'overflow-y': 'scroll',
                    'overflow-x': 'hidden'
                });
                if (style.width100 == 1) {
                    ResizePlaylist()
                }
            }
            if (style.marginbg == 1) {
                css(container, {
                    'background-color': style.marginbgcolor
                })
            }
            if (v.playlist.droplist == 1) {
                hide2(container)
            }
        }
        if (style.scrollarrows == 1) {
            var arr_up = createElement("div");
            var scrollbgcolor = hex2rgb(style.marginbg == 1 ? style.marginbgcolor : style.bgcolor);
            if (style.floatleft == 1) {
                StyleArrow(arr_up, 'to right, rgba(' + scrollbgcolor + ',' + (style.bga * 1 + 0.3) + '), rgba(' + scrollbgcolor + ',0)', 'left', 12, 5, 7, 10, 7, 10, 12, 15);
                arr_up.addEventListener(evntclk, ScrollLeft)
            } else {
                StyleArrow(arr_up, 'to bottom, rgba(' + scrollbgcolor + ',' + (style.bga * 1 + 0.3) + '), rgba(' + scrollbgcolor + ',0)', 'top', 5, 12, 10, 7, 10, 7, 15, 12);
                arr_up.addEventListener(evntclk, ScrollUp)
            }
            var arr_down = createElement("div");
            if (style.floatleft == 1) {
                StyleArrow(arr_down, 'to left, rgba(' + scrollbgcolor + ',' + (style.bga * 1 + 0.3) + '), rgba(' + scrollbgcolor + ',0)', 'right', 8, 5, 13, 10, 13, 10, 8, 15);
                arr_down.addEventListener(evntclk, ScrollRight)
            } else {
                StyleArrow(arr_down, 'to bottom, rgba(' + scrollbgcolor + ',0), rgba(' + scrollbgcolor + ',' + (style.bga * 1 + 0.3) + ')', 'bottom', 5, 8, 10, 13, 10, 13, 15, 8);
                arr_down.addEventListener(evntclk, ScrollDown)
            }
            arr_up.addEventListener("mouseover", ScrollOverOut);
            arr_up.addEventListener("mouseout", ScrollOverOut);
            arr_down.addEventListener("mouseover", ScrollOverOut);
            arr_down.addEventListener("mouseout", ScrollOverOut);
            control.addEventListener("wheel", Wheel);
            arr_up.addEventListener("mouseup", onMouseUp);
            arr_down.addEventListener("mouseup", onMouseUp);
            container.appendChild(arr_up);
            container.appendChild(arr_down);
            clearInterval(arrinterval);
            arrinterval = setInterval(ArrowsInterval, 1000)
        }
        control.addEventListener(evntovr, ControlOver);
        control.addEventListener(evntout, ControlOut);
        if (v.playlist.srch > 0 && !srch && is == "playlist") {
            if (typeof PluginPlSrch !== "undefined") {
                srch = new PluginPlSrch()
            }
        }
        if (is == "settings") {
            for (var i = 1; i < 11; i++) {
                if (exist(v["control_" + is][is + i])) {
                    v.settings[is + i] = v["control_" + is][is + i];
                    if (exist(v["control_" + is][is + i + "title"])) {
                        v.settings[is + i + "title"] = v["control_" + is][is + i + "title"]
                    }
                    if (exist(v["control_" + is][is + i + "action"])) {
                        v.settings[is + i + "action"] = v["control_" + is][is + i + "action"]
                    }
                }
                if (exist(v.settings[is + i])) {
                    if (v.settings[is + i] == 1) {
                        CreateItem('f', i);
                        StyleItem(f[i], fbg[i], ftitle[i], fvalue[i]);
                        if (!exist(v.settings[is + i + "action"])) {
                            v.settings[is + i + "action"] = "speed"
                        }
                        ftitle[i].innerHTML = Lang(v.settings[is + i + "action"]);
                        if (exist(v.settings[is + i + "title"])) {
                            if (v.settings[is + i + "title"] != '') {
                                ftitle[i].innerHTML = v.settings[is + i + "title"]
                            }
                        }
                        if (v.settings[is + i + "action"] == "share") {
                            o.shareme = true
                        }
                        faction[i] = v.settings[is + i + "action"];
                        Value(i);
                        if (faction[i] in o.menuproc) {
                            mpi[faction[i]] = i
                        }
                        f[i].addEventListener(evntovr, onOver);
                        f[i].addEventListener(evntout, onOut);
                        f[i].addEventListener(evntclk, onClick);
                        f[i].addEventListener("mouseup", onMouseUp);
                        if (v.settings[is + i + "hide"] == 1) {
                            css(f[i], {
                                "height": 0
                            })
                        }
                    }
                }
            }
        }

        function Wheel(x) {
            if (is == "playlist" && style.floatleft == 1 && x) {
                if (x.deltaX == 0 && x.deltaY != 0) {
                    control.scrollLeft -= x.deltaY;
                    x.preventDefault()
                }
            }
            clearInterval(wheelinterval);
            wheelinterval = setInterval(ControlOut, 3000);
            Retimer()
        }

        function ControlOver() {
            o.mouseDown = true
        }

        function ControlOut() {
            if (style.showovercontrol == 1) {
                clearTimeout(o.settingsovertimer);
                o.settingsovertimer = setTimeout(function() {
                    if (!o.mouseDown) {
                        HideControl()
                    }
                }, (v.settings.showoverto > 0 ? v.settings.showoverto * 1000 : (o.system.tv ? 2000 : 1000)))
            }
            o.mouseDown = false
        }

        function onOver(event) {
            if (o.fullscreen) {
                o.volumewheel ? o.actions.volumewheel(false) : ''
            }
            var i = event.target.getAttribute('fid');
            var x;
            if (i) {
                x = 'f'
            } else {
                if (event.target.getAttribute('f2id')) {
                    i = event.target.getAttribute('f2id');
                    x = 'f2'
                }
            }
            if (i) {
                i = parseInt(i);
                var opn = false;
                if (exist(eval(x)[i])) {
                    if (style.bgaover > -1) {
                        css(eval(x + 'bg')[i], {
                            'opacity': style.bgaover
                        })
                    }
                    if (exist2(style.bgbrovr)) {
                        css(eval(x + 'bg')[i], {
                            'filter': 'brightness(' + style.bgbrovr + ')'
                        })
                    }
                    if (style.aover > -1) {
                        css(eval(x + 'title')[i], {
                            'opacity': style.aover
                        });
                        css(eval(x + 'value')[i], {
                            'opacity': style.aover
                        })
                    }
                    if (is == "playlist") {
                        if (faction[i].indexOf("playlist") == 0) {
                            var id = faction[i].substr(8);
                            if (plid == id || plfolder == id) {
                                css(eval(x + 'title')[i], {
                                    'color': style.valuecolor
                                });
                                css(eval(x + 'value')[i], {
                                    'color': style.valuecolor
                                });
                                opn = true
                            } else {
                                css(eval(x + 'title')[i], {
                                    'color': style.color
                                })
                            }
                        }
                    }
                    if (style.playbgcolored == 1 && exist(style.playbgcolor) && opn) {} else {
                        css(eval(x + 'bg')[i], {
                            'backgroundColor': style.bgcolorover
                        })
                    }
                }
            }
        };

        function onOut(event) {
            if (o.fullscreen) {
                o.volumewheel ? o.actions.volumewheel(true) : ''
            }
            var i = event.target.getAttribute('fid');
            var x;
            var opn = false;
            clearInterval(downin);
            Retimer();
            if (i) {
                x = 'f'
            } else {
                if (event.target.getAttribute('f2id')) {
                    i = event.target.getAttribute('f2id');
                    x = 'f2'
                }
            }
            if (i) {
                if (exist(eval(x)[i])) {
                    if (style.bgaover > -1) {
                        css(eval(x + 'bg')[i], {
                            'opacity': style.bga
                        })
                    }
                    if (exist2(style.bgbrovr)) {
                        css(eval(x + 'bg')[i], {
                            'filter': 'brightness(1)'
                        })
                    }
                    if (style.aover > -1) {
                        css(eval(x + 'title')[i], {
                            'opacity': style.a
                        });
                        css(eval(x + 'value')[i], {
                            'opacity': style.a
                        })
                    }
                    if (is == "playlist") {
                        if (faction[i].indexOf("playlist") == 0) {
                            var id = faction[i].substr(8);
                            if (plid == id || plfolder == id) {
                                css(eval(x + 'title')[i], {
                                    'color': style.valuecolor
                                });
                                css(eval(x + 'value')[i], {
                                    'color': style.valuecolor
                                });
                                opn = true
                            } else {
                                if (exist(o.plhistory[id])) {
                                    HistoryPlaylist(i)
                                } else {
                                    css(eval(x + 'title')[i], {
                                        'color': style.color
                                    })
                                }
                            }
                        }
                    }
                    if (style.playbgcolored == 1 && exist(style.playbgcolor) && opn) {} else {
                        css(eval(x + 'bg')[i], {
                            'backgroundColor': o.plhistory[id] ? style.historybgcolor : style.bgcolor
                        })
                    }
                }
            }
        }

        function onClick(event) {
            if (!justshow) {
                var d = new Date();
                o.clicktime = d.getTime();
                var i = event.target.getAttribute('fid');
                if (i) {
                    if (exist(f[i])) {
                        if (exist(faction[i])) {
                            Action(i, 0)
                        }
                    }
                }
            }
        }
        var downi;
        var downin;

        function onMouseDown(event) {
            if (!justshow) {
                var i = event.target.getAttribute('f2id');
                if (i) {
                    if (exist(f2action[i])) {
                        if (open_action in o.menuproc) {
                            downi = i;
                            downin = setInterval(DownIn, 200)
                        }
                    }
                }
            }
        }

        function DownIn() {
            Action2(downi)
        }

        function onMouseUp(event) {
            clearInterval(downin);
            event.cancelBubble = true;
            Retimer()
        }

        function onClick2(event) {
            clearInterval(downin);
            if (!justshow) {
                var d = new Date();
                o.clicktime = d.getTime();
                var i = event.target.getAttribute('f2id');
                if (i) {
                    if (i == 0) {
                        if (f2action[0] == 'color') {
                            Remove2();
                            Action(iclr)
                        } else {
                            Home()
                        }
                    } else {
                        if (exist(f2action[i])) {
                            Action2(i)
                        }
                    }
                }
            }
        }

        function onClickSubtitle(event) {
            var x = event.target.getAttribute('setupx');
            if (x) {
                ActionOptions(x)
            }
        }

        function onClickSubtitle2(event) {
            Retimer();
            var i = event.target.getAttribute('f2id');
            if (exist(f2action[i])) {
                if (f2i("=", i) > 0) {
                    var x = f2action[i].substr(0, f2i("=", i));
                    var y = f2action[i].substr(f2i("=", i) + 1);
                    var z = open_action + '_reset';
                    if (!v[z]) {
                        v[z] = []
                    }
                    if (!exist(v[z][x])) {
                        v[z][x] = v[x] + ''
                    }
                    StyleSubtitle(x, y)
                }
            }
        }

        function StyleSubtitle(x, y) {
            v[x] = y;
            if (o.storage && v.sub_designstore == 1 && x != "sub_shift") {
                localStorage.setItem("pljs" + x, y)
            }
            if (o.casting && o.chromecast) {
                o.chromecast.Sub()
            }
            o.actions.RenewSubtitle();
            ActionOptions(x)
        }

        function onClickTimer2(event) {
            var i = event.target.getAttribute('f2id');
            var x = f2action[i];
            if (exist(x)) {
                if (x.indexOf("=") > 0) {
                    var z = x.substr(0, x.indexOf("="));
                    var y = x.substr(x.indexOf("=") + 1);
                    v[z] = y;
                    SubtitleTimerMenu();
                    Value(o[open_action + '_i']);
                    if (open_action == "offsettimer") {
                        SettingsTimers("offsetwrite")
                    }
                }
            }
        }

        function Value(i) {
            if (exist(faction[i])) {
                var _hide = false;
                var _show = false;
                var _value = '';
                if (is == "settings") {
                    if (faction[i] == "quality") {
                        _value = o.media.getQuality()
                    }
                    if (faction[i] == "audiotrack") {
                        _value = o.media.getAudioTrack()
                    }
                    if (faction[i] == "share") {
                        _value = ' ';
                        _show = true
                    }
                    if (faction[i] == "channel") {
                        if (o.channels) {
                            _value = o.files_channel[o.current_channel]
                        }
                    }
                    if (faction[i] == "audiotrack" || faction[i] == "channel" || faction[i] == "quality") {
                        if (o['files_' + faction[i]].length == 0) {
                            _hide = true
                        } else {
                            if (o['files_' + faction[i]].length == 1 && (style.show1value != 1 || o['files_' + faction[i]][0] == 1)) {
                                _hide = true
                            } else {
                                _show = true
                            }
                        }
                    }
                    if (faction[i] == "airplay") {
                        if (!o.airplay) {
                            _hide = true
                        } else {
                            _show = true
                        }
                    }
                    if (faction[i] == "download") {
                        if (o.file_type != 'native' && !v.download) {
                            _hide = true
                        } else {
                            _show = true
                        }
                    }
                    if (faction[i] == "subtitle") {
                        if (exist(o.subs)) {
                            _show = true;
                            if (o.subtitle_on || v.sub_off == 1) {
                                if (o.sbt) {
                                    _value = o.files_subtitle[!o.subtitle_on ? o.sbt.ioff() : o.current_subtitle]
                                }
                            } else {
                                _value = ''
                            }
                            var sxs = 0;
                            for (var s = 0; s < o.subs.length; s++) {
                                if (o.subs[s] != '') {
                                    sxs++
                                }
                            }
                            if (sxs == 1 && o.subload == 1) {
                                sxs = 0
                            }
                            if (v.sub_upload == 1 && v.sub_upload0 == 1) {} else {
                                if (sxs == 0) {
                                    _hide = true;
                                    _show = false
                                }
                            }
                        } else {
                            _hide = true
                        }
                    }
                    if (faction[i] == "speed") {
                        _value = o.files_speed[o.current_speed];
                        _value == 1 && style.speed1 != 1 ? _value = Lang('normal') : '';
                        _show = true;
                        if (o.file_type == "vimeo" || (o.media.isLive() && style.speed4live != 1)) {
                            _hide = true;
                            _show = false
                        }
                    }
                    if (faction[i] in o.menuproc) {
                        _value = FltrVal(faction[i]);
                        _show = true
                    }
                    if (faction[i].indexOf("timer") > 0) {
                        var x = ' ';
                        var y = ['hour', 'minute', 'second'];
                        for (var z = 0; z < y.length; z++) {
                            if (exist(v[faction[i] + y[z]])) {
                                if (v[faction[i] + y[z]] !== ' ') {
                                    x += (x !== ' ' ? ':' : '') + v[faction[i] + y[z]]
                                }
                            }
                        }
                        _value = x != ' 0:0' && x.indexOf(":") > -1 ? x : ' ';
                        _show = true
                    }
                }
                fvalue[i].innerHTML = _value + (_value != '' && style.hidearrow != 1 ? ' &nbsp;<svg width="5px" height="7px" viewBox="-1 -1 5 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polyline stroke="#' + style.valuecolor + '" stroke-width="1" fill="none" points="0 0 3 3 0 6"></polyline></svg>' : '');
                if (_hide) {
                    hide(f[i]);
                    if (is == "settings") {
                        stout[i] ? clearTimeout(stout[i]) : '';
                        if (o.controls) {
                            o.controls.SettingsN(i, false, _value)
                        } else {
                            stout[i] = setTimeout(function() {
                                o.controls.SettingsN(i, false, _value)
                            }, 200)
                        }
                    }
                    css(f[i], {
                        'position': 'absolute',
                        'right': 0,
                        'top': -100
                    })
                }
                if (_show) {
                    if (style.floatleft == 1) {
                        css(f[i], {
                            'display': 'inline-block'
                        })
                    } else {
                        show(f[i])
                    }
                    if (is == "settings") {
                        stout[i] ? clearTimeout(stout[i]) : '';
                        if (o.controls) {
                            o.controls.SettingsN(i, true, _value)
                        } else {
                            stout[i] = setTimeout(function() {
                                o.controls.SettingsN(i, true, _value)
                            }, 500)
                        }
                    }
                    css(f[i], {
                        'position': 'relative',
                        'right': 0,
                        'top': 0
                    })
                }
                Resize()
            }
            for (var j = 1; j < f.length; j++) {
                if (f[j]) {
                    if (isVisible(f[j])) {
                        var refresh = false;
                        empty ? refresh = true : '';
                        empty = false;
                        refresh && o.controls ? o.controls.refresh() : ''
                    }
                }
            }
        };

        function Action(i, cstm, fa) {
            fa ? faction[i] = fa : '';
            if (exist(faction[i])) {
                o.setaction = true;
                Retimer();
                var x = VisibleItems();
                if (open_action != faction[i]) {
                    open_action = faction[i];
                    if (open_action == 'quality' || open_action == 'audiotrack' || open_action == 'subtitle' || open_action == 'speed' || open_action == 'channel' || open_action in o.menuproc || open_action.indexOf("timer") > 0 || open_action == 'share' || open_action == 'color') {
                        open_settings = i;
                        var z = copyObject(o['files_' + open_action]);
                        if (open_action == "sleeptimer") {
                            if (style.sleep2 == 1) {
                                z = SettingsTimers("sleep2options")
                            } else {
                                z = SettingsTimers("sleepoptions")
                            }
                        }
                        if (open_action == "offsettimer") {
                            z = SettingsTimers("offsetoptions")
                        }
                        if (open_action == "share" && o.share) {
                            z = [];
                            for (var j = 1; j <= 16; j++) {
                                if (exist(v["share" + j])) {
                                    z.push(Lang(v["share" + j]));
                                    shr[z.length] = v["share" + j]
                                }
                            }
                        }
                        if (open_action == "color" && o.tagvideo) {
                            z = [];
                            iclr = i;
                            for (var j = 0; j < o.clr_options.length; j++) {
                                var co = o.clr_options[j].substr(4);
                                z.push(Lang(co));
                                clr[z.length] = co
                            }
                        }
                        var current = o['current_' + open_action];
                        var pressed = o['pressed_' + open_action];
                        for (var j = 1; j < f.length; j++) {
                            if (f[j]) {
                                f[j].style.display = "none"
                            }
                        }
                        f2 = [];
                        CreateItem('f2', 0);
                        StyleItem(f2[0], f2bg[0], f2title[0], f2value[0]);
                        css(f2[0], {
                            "border-bottom": "1px solid " + (style.bordercolored == 1 ? bordercolor : "rgba(100,100,100,0.7)")
                        });
                        _cstm = cstm;
                        var suboptns = false;
                        f2title[0].innerHTML = (x[0] < 2 || _cstm == 1 || style.noprevicon == 1 ? '' : _prevIcon) + (v.settings[is + i + "title"] && v.settings[is + i + "title"] != '' ? v.settings[is + i + "title"] : Lang(v.settings[is + i + "action"]));
                        if (open_action == 'subtitle' && !o.hls_subs && !o.dash_subs) {
                            var prm = createElement("div");
                            prm.innerHTML = Lang("options");
                            css(prm, {
                                'color': style.color,
                                'pointerEvents': 'auto',
                                'cursor': 'pointer'
                            });
                            f2value[0].appendChild(prm);
                            prm.addEventListener(evntclk, SubtitleSettings);
                            suboptns = true
                        }
                        if (open_action == 'subtitle' && v.sub_upload == 1 && !o.system.tv && exist(window.FileReader)) {
                            var uf = createElement("div");
                            !o.sbt ? o.sbt = new PluginSub() : '';
                            uf.innerHTML = "<input type='file' id='" + v.id + "_subfile' accept='.vtt,.ass,.srt' style='display:none'/>" + Lang('upload');
                            css(uf, {
                                'color': style.color,
                                'pointerEvents': 'auto',
                                'cursor': 'pointer',
                                'margin-left': (suboptns ? '10px' : 0)
                            });
                            f2value[0].appendChild(uf);
                            o.subupld = document.getElementById(v.id + "_subfile");
                            o.subupld.onchange = o.sbt.SubUpload;
                            uf.addEventListener(evntclk, o.sbt.SubUpload)
                        }
                        if (suboptns) {
                            if (sub_settings_on) {
                                if (_cstm == 2) {
                                    z = [];
                                    hide2(f2[0])
                                }
                                for (j = 0; j < o.sub_options.length; j++) {
                                    if (v.sub_all == 0 && o.sub_options[j] == "sub_color2") {} else {
                                        z.push("pjslng_" + o.sub_options[j])
                                    }
                                }
                            }
                        }
                        css(f2title[0], {
                            'font-size': style.headfontsize * existv(v.globalfs, 1)
                        });
                        f2action[0] = "home";
                        if (open_action in o.menuproc) {
                            Menuproc(open_action);
                            if (iclr > 0 && o.clr_options.indexOf('clr_' + open_action) > -1) {
                                f2title[0].innerHTML = _prevIcon + Lang(open_action);
                                f2action[0] = "color";
                                f2value[0].innerHTML = FltrVal(open_action)
                            }
                            css(f2value[0], {
                                'width': style.valuefontsize * 2.5,
                                'text-align': 'right'
                            })
                        }
                        if (_cstm != 1 && x[0] > 1) {
                            f2[0].addEventListener(evntovr, onOver);
                            f2[0].addEventListener(evntout, onOut);
                            f2[0].addEventListener(evntclk, onClick2);
                            f2[0].addEventListener("mouseup", onMouseUp)
                        } else {
                            css(f2[0], {
                                "cursor": 'default'
                            })
                        }
                        if (style.nohead == 1) {
                            hide2(f2[0])
                        }
                        if (exist(z)) {
                            var zz = '';
                            for (j = 0; j < z.length; j++) {
                                var y = j + 1;
                                var toend = 0;
                                var off = false;
                                if (z[j] && trim(z[j]) != '') {
                                    if (open_action == 'quality') {
                                        if (z[j] == Lang("auto")) {
                                            toend = 1
                                        }
                                        if (o.file_type == "hls" && v.hlsqhsort == 1) {
                                            var iz = int(z[j]);
                                            if (iz && iz < zz) {
                                                toend = 2
                                            }
                                            zz = int(z[j])
                                        }
                                    }
                                    CreateItem('f2', y, toend);
                                    StyleItem(f2[y], f2bg[y], f2title[y], f2value[y], faction[i]);
                                    if (open_action == 'speed') {
                                        z[j] == 1 && style.speed1 != 1 ? z[j] = Lang('normal') : ''
                                    }
                                    if (typeof(z[j]) == 'string') {
                                        if (z[j].indexOf("<<<") == 0) {
                                            z[j] = z[j].replace('<<<', '');
                                            off = true
                                        }
                                        if (z[j].indexOf('timer') > 0) {
                                            o[open_action + '_i'] = i
                                        }
                                        if (z[j].indexOf("pjslng") == 0) {
                                            var tmp = z[j];
                                            if (tmp.indexOf("timer") > 0) {
                                                f2title[y].innerHTML = Lang(z[j].substr(tmp.indexOf("timer") + 5))
                                            } else {
                                                f2title[y].innerHTML = Lang(z[j].substr(7))
                                            }
                                            if (z[j] == 'pjslng_sub_sizeproc') {
                                                css(f2[y], {
                                                    "border-top": "1px solid rgba(100,100,100,0.7)"
                                                })
                                            }
                                        } else {
                                            f2title[y].innerHTML = z[j]
                                        }
                                    } else {
                                        f2title[y].innerHTML = z[j]
                                    }
                                    f2action[y] = open_action + j;
                                    if (current == j || pressed == j) {
                                        f2value[y].innerHTML = current == j ? _activeIcon : _xIcon;
                                        if (current == j) {
                                            StyleActive(y)
                                        }
                                    }
                                    if (typeof(z[j]) == 'string') {
                                        if (z[j].indexOf("pjslng") == 0) {
                                            var t = z[j].substr(7);
                                            if (t.indexOf("color") > 0) {
                                                f2value[y].innerHTML = "<div style='" + (v[t] == "000000" ? 'border:1px solid #999;height:8px;width:8px;' : 'height:10px;width:10px;') + ";background-color:" + (v[t].indexOf("#") == -1 ? '#' : '') + v[t] + ";border-radius:10px;'></div>"
                                            } else {
                                                if (exist(v[z[j].substr(7)])) {
                                                    f2value[y].innerHTML = v[z[j].substr(7)]
                                                }
                                            }
                                        }
                                        if (open_action == "share") {
                                            if (exist(shr[y]) && o.share) {
                                                f2value[y].innerHTML = o.share.icon(shr[y], 0.7, CheckColor(style.valuecolor))
                                            }
                                        }
                                        if (open_action == "color") {
                                            if (exist(clr[y]) && o.tagvideo) {
                                                f2value[y].innerHTML = FltrVal(clr[y])
                                            }
                                        }
                                        if (open_action == 'quality') {
                                            if (z[j] == Lang("auto") && o.media.autoQuality()) {
                                                StyleActive(y)
                                            }
                                            if (exist2(v.forbidden_quality)) {
                                                var fq = v.forbidden_quality.split(",");
                                                for (var k = 0; k < fq.length; k++) {
                                                    if (z[j].indexOf(fq[k]) > -1) {
                                                        hide2(f2[y])
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    var clck = "";
                                    if (typeof(z[j]) == 'string') {
                                        if (z[j].indexOf("pjslng") == 0) {
                                            attr(f2[y], {
                                                'f2parent': i,
                                                'setupx': z[j].substr(7)
                                            });
                                            clck = "onClickSubtitle"
                                        }
                                    }
                                    if (!off) {
                                        f2[y].addEventListener(evntovr, onOver);
                                        f2[y].addEventListener(evntout, onOut);
                                        if (clck == "onClickSubtitle") {
                                            f2[y].addEventListener(evntclk, onClickSubtitle)
                                        } else {
                                            f2[y].addEventListener(evntclk, onClick2)
                                        }
                                        f2[y].addEventListener("mouseup", onMouseUp);
                                        f2[y].addEventListener("mousedown", onMouseDown)
                                    } else {
                                        css(f2[y], {
                                            "cursor": "default"
                                        })
                                    }
                                }
                            }
                        }
                        Resize()
                    }
                    if (faction[i] == 'download') {
                        o.actions.Download()
                    }
                    if (faction[i].indexOf('playlist') > -1) {
                        var id = faction[i].substr(8);
                        if (exist(o.playlist_dic[id])) {
                            if (exist(o.playlist_dic[id]['file'])) {
                                o.seekto = undefined;
                                ActionPlaylist(i);
                                UpdateStart(id);
                                SettingsTimers("offset");
                                if (exist(o.playlist_dic[id]['redirect']) && v.redirect == 1 && v.redirectplaylist == 1) {
                                    redirect(o.playlist_dic[id]['redirect'])
                                } else {
                                    UpdateVars0(id);
                                    o.actions.NewFile(o.playlist_dic[id]['file'], (v.playlist.dontplay == 1 ? 1 : undefined));
                                    v.playlist.always == 0 && v.playlist.autohide == 1 ? setTimeout(HideControl, 200) : '';
                                    autonextopenfolder = false;
                                    autoprevopenfolder = false;
                                    UpdateVars(id)
                                }
                            } else {
                                if (exist(o.playlist_dic[id]['folder'])) {
                                    UpdatePlaylist(id);
                                    if (autonextopenfolder) {
                                        plx == -1 ? Action(0, 0) : ''
                                    } else if (autoprevopenfolder) {
                                        plx == -1 ? Action(parseInt(f.length) - 2, 0) : ''
                                    }
                                }
                            }
                        }
                        if (o.droplist) {
                            o.droplist.Update()
                        }
                    }
                    if (faction[i] == 'airplay') {
                        o.media.Airplay()
                    }
                }
            }
        };
        this.UpdateTimer = function(x) {
            Value(o[x + '_i'])
        };

        function ActionOptions(x) {
            if (x == "sub_reset") {
                var z = open_action + '_reset';
                if (v[z]) {
                    for (var y in v[z]) {
                        if (v[z].hasOwnProperty(y)) {
                            StyleSubtitle(y, v[z][y])
                        }
                    }
                    SubtitleSettingsMenu()
                }
                return
            }
            Retimer();
            for (var i = 0; i < f2.length; i++) {
                if (f2[i]) {
                    f2[i].style.display = "none"
                }
            }
            f2 = [];
            CreateItem('f2', 0);
            StyleItem(f2[0], f2bg[0], f2title[0], f2value[0]);
            css(f2[0], {
                "border-bottom": "1px solid " + (style.bordercolored == 1 ? bordercolor : "rgba(100,100,100,0.7)")
            });
            if (x.indexOf("timer") > 0) {
                f2[0].addEventListener(evntclk, SubtitleTimerMenu);
                f2title[0].innerHTML = Lang(x.substr(x.indexOf("timer") + 5))
            } else {
                f2[0].addEventListener(evntclk, SubtitleSettingsMenu);
                f2title[0].innerHTML = (style.noprevicon != 1 ? _prevIcon : '') + Lang(x)
            }
            css(f2title[0], {
                'font-size': style.headfontsize * existv(v.globalfs, 1)
            });
            f2[0].addEventListener(evntovr, onOver);
            f2[0].addEventListener(evntout, onOut);
            f2[0].addEventListener("mouseup", onMouseUp);
            var values = [];
            var valuefromlang = false;
            if (x.indexOf("size") > 0) {
                values = ['50%', '75%', '100%', '125%', '150%', '175%', '200%', '250%', '300%', '400%']
            }
            if (x.indexOf("bga") > 0) {
                values = ['0', '0.2', '0.3', '0.4', '0.5', '0.6', '0.7', '0.8', '0.9', '1']
            }
            if (x.indexOf("shift") > 0) {
                for (i = -5; i < 5.5; i += 0.5) {
                    values.push(Math.round(i * 100) / 100)
                }
            }
            if (x.indexOf("weight") > 0) {
                values = [200, 400, 600]
            }
            if (x.indexOf("bottom") > 0) {
                for (i = 0; i < 21; i++) {
                    values[i] = i * 10
                }
            }
            if (x.indexOf("hour") > 0) {
                for (i = 0; i < 24; i++) {
                    values[i] = i
                }
            }
            if (x.indexOf("minute") > 0 || x.indexOf("second") > 0) {
                for (i = 0; i < 60; i++) {
                    values[i] = i
                }
            }
            if (x.indexOf("shadow") > 0) {
                valuefromlang = true;
                values = [0, 1]
            }
            if (x.indexOf("color") > 0) {
                values = ['ffffff', 'ffeeab', '72ccf8', '62de50', 'faed54', 'feba54', 'e8bbff', 'ffc7d1', 'aaaaaa', 'd9bb8c', 'b3fee8', '4bd9ac', 'FEF370', 'D90000', '073DA0', '409829', '644082', '000000'];
                var vx = v[x].replace("#", "");
                if (values.indexOf(vx) == -1) {
                    values[8] = vx
                }
            }
            for (y = 1; y <= values.length; y++) {
                CreateItem('f2', y, 0);
                StyleItem(f2[y], f2bg[y], f2title[y], f2value[y]);
                css(f2value[y], {
                    'padding-left': 0
                });
                if (x.indexOf("color") > 0 || x.indexOf("bottom") > 0 || x.indexOf("timer") > 0 || x.indexOf("shift") > 0) {
                    y % 3 != 0 ? css(f2[y], {
                        'float': 'left'
                    }) : '';
                    css(f2[y], {
                        'width': '33.3%'
                    });
                    if (x.indexOf("color") > 0) {
                        f2title[y].innerHTML = "<div style='" + (values[y - 1] == "000000" ? 'border:1px solid #999;height:18px;width:18px;' : 'height:20px;width:20px;') + ";background-color:#" + values[y - 1] + ";border-radius:20px;'></div>";
                        css(f2[y], {
                            'line-height': 1
                        })
                    } else {
                        f2title[y].innerHTML = values[y - 1]
                    }
                } else {
                    if (x.indexOf("weight") > 0) {
                        f2title[y].innerHTML = values[y - 1]
                    } else {
                        y % 2 != 0 ? css(f2[y], {
                            'float': 'left'
                        }) : '';
                        css(f2[y], {
                            'width': '50%'
                        });
                        if (valuefromlang) {
                            f2title[y].innerHTML = Lang(values[y - 1] + 'val')
                        } else {
                            f2title[y].innerHTML = values[y - 1]
                        }
                    }
                }
                f2action[y] = x + '=' + values[y - 1];
                if ((values[y - 1] == v[x] && String(v[x]) != " ") || v[x] == '#' + values[y - 1]) {
                    f2value[y].innerHTML = _activeIcon;
                    StyleActive(y)
                }
                f2[y].addEventListener(evntovr, onOver);
                f2[y].addEventListener(evntout, onOut);
                if (x.indexOf("timer") > 0) {
                    f2[y].addEventListener(evntclk, onClickTimer2)
                } else {
                    f2[y].addEventListener(evntclk, onClickSubtitle2)
                }
                f2[y].addEventListener("mouseup", onMouseUp)
            }
            Resize()
        }

        function StyleActive(x) {
            f2[x].classList.add('pjs-' + v.id + '-active-menu');
            css(f2title[x], {
                'color': style.valuecolor
            });
            BgBrAct(f2bg[x])
        }

        function UpdateVars0(id) {
            if (exist(o.playlist_dic[id]['poster'])) {
                v.poster = o.playlist_dic[id]['poster'];
                exist(v.poster) ? o.media.Poster(v.poster) : ''
            }
            if (exist(o.playlist_dic[id]['title'])) {
                o.titlestore = o.playlist_dic[id]['title']
            }
        }

        function UpdateVars(id) {
            var t = o.playlist_dic[id]['title'];
            if (exist(t)) {
                if (v.showtitleplaylist == 1) {
                    if (o.actions.TitleTemplate(o.playlist_dic[id])) {} else {
                        v.title = (v.addtitleplaylist == 1 && exist(o.maintitle) ? o.maintitle + (v.addtitleplaylistbr == 1 ? '<br>' : ' ') : '') + t
                    }
                    o.actions.Title('title')
                }
            }
            if (v.pointed == 1) {
                if (exist(o.playlist_dic[id]['points'])) {
                    v.points = o.playlist_dic[id]['points']
                } else {
                    v.points = []
                }
                o.controls.RenewPoints()
            }
            var xv = ['remove', 'thumbnails', 'download', 'skip', 'url', 'url2', 'url3', 'vars', 'embed', 'end', 'delete', 'heartbeat', 'label', 'title2', 'customtext'];
            for (var i = 0; i < xv.length; i++) {
                if (exist(o.playlist_dic[id][xv[i]])) {
                    v[xv[i]] = o.playlist_dic[id][xv[i]]
                } else {
                    i < 4 ? v[xv[i]] = undefined : ''
                }
            }
            v.start = 0;
            UpdateStart(id);
            var opid = o.playlist_dic[id];
            if (exist(opid['sub'])) {
                opid['subtitle'] = opid['sub']
            }
            if (exist(opid['subtitle'])) {
                o.actions.Subtitle(opid['subtitle'])
            }
            if (exist(opid['customtext'])) {
                o.controls.customTextPl()
            }
            if (exist(opid['design'])) {
                apiProcessor('design', opid['design'])
            }
            if (exist(opid.volume)) {
                o.actions.Volume(opid.volume)
            }
        }

        function UpdateStart(id) {
            var x = o.playlist_dic[id]['start'];
            if (exist(x)) {
                if (x == "continue") {
                    if (o.media.time() > 0) {
                        v.start = o.seekto = o.media.time()
                    }
                } else {
                    v.start = o.seekto = x
                }
            }
        }

        function ActionPlaylist(x) {
            if (plx == 0 && !o.start) {
                css(ftitle[plx], {
                    'color': style.color
                });
                css(fbg[plx], {
                    'backgroundColor': style.bgcolor
                });
                fvalue[plx].innerHTML = '';
                f[plx].classList.remove('pjs-' + v.id + '-active-pl')
            } else {
                o.plopenid = x;
                if (plx > -1) {
                    HistoryPlaylist(plx)
                }
                if (plid != '') {
                    o.plhistory[plid] = true;
                    shuffle = removebykey(shuffle, plid)
                }
            }
            if (faction[x]) {
                var id = faction[x].substr(8);
                fvalue[x].innerHTML = _activeIcon;
                f[x].classList.add('pjs-' + v.id + '-active-pl');
                css(ftitle[x], {
                    'color': style.valuecolor,
                    'text-decoration': 'none',
                    'opacity': style.a
                });
                BgBrAct(fbg[x]);
                if (style.playbgcolored == 1 && exist(style.playbgcolor)) {
                    css(fbg[x], {
                        'backgroundColor': style.playbgcolor
                    })
                }
                plx = x;
                plid = id;
                o.plid = plid;
                v.plstart = plid;
                o.playlist_title = ftitle[x].innerHTML;
                o.plopenid = plid;
                plfolder = o.playlist_dic[id]['pjs_parent'];
                if (o.controls) {
                    o.controls.PlaylistControls()
                }
                if (srch) {
                    srch.clear()
                }
            }
        }

        function UpdatePlaylist(id) {
            var x = id == 0 ? o.playlist : o.playlist_dic[id];
            o.plopenid = id;
            for (var i = 0; i < f.length; i++) {
                if (style.floatleft == 1) {
                    control.removeChild(f[i])
                } else {
                    control2.removeChild(f[i])
                }
                f[i] = null
            }
            f = [];
            plx = -1;
            if (exist(x['folder'])) {
                var y = Object.keys(x['folder']).length;
                CreateItem('f', y);
                faction[y] = "playlistfolder";
                StyleItem(f[y], fbg[y], ftitle[y], fvalue[y]);
                if (style.floatleft == 1) {
                    css(f[y], {
                        "width": (style.floatlimitwidth == 1 ? style.floatwidth : "auto"),
                        "height": style.floatheight
                    })
                }
                if (style.borderbottom == 1) {
                    var hdbrdclr = "1px solid rgba(" + hex2rgb(style.headbordercolor) + ',' + existv(style.brda, 1) + ")";
                    if (style.floatleft == 1) {
                        css(f[y], {
                            "borderRight": hdbrdclr
                        })
                    } else {
                        css(f[y], {
                            "borderBottom": hdbrdclr
                        })
                    }
                }
                var tmp = x.title;
                if (style.noprevicon != 1) {
                    tmp = _prevIcon + tmp
                }
                ftitle[y].innerHTML = tmp;
                css(ftitle[y], {
                    'font-size': style.headfontsize * existv(v.globalfs, 1)
                });
                var p = x['pjs_parent'];
                f[y].addEventListener(evntovr, onOver);
                f[y].addEventListener(evntout, onOut);
                f[y].addEventListener(evntclk, function() {
                    PlaylistBack(p)
                });
                x = x['folder']
            }
            var y = Object.keys(x).length;
            shuffle = [];
            shuffle_ = [];
            if (srch && style.floatleft != 1) {
                srch.remove(control2);
                if (y > v.playlist.srch) {
                    srch.add(style, control2)
                }
            }
            for (var i = 0; i < y; i++) {
                CreateItem('f', i);
                faction[i] = "playlist" + x[i].id;
                if (!exist(o.plhistory[x[i].id]) && !exist(x[i].folder)) {
                    shuffle[x[i].id] = i;
                    shuffle_[x[i].id] = i
                }
                StyleItem(f[i], fbg[i], ftitle[i], fvalue[i]);
                if (style.floatleft == 1) {
                    if (style.activeiconsize == 0) {
                        css(ftitle[i], {
                            'width': style.floatwidth - style.paddingleft - style.paddingright
                        });
                        hide2(fvalue[i])
                    }
                    css(f[i], {
                        "width": (style.floatlimitwidth == 1 ? style.floatwidth : "auto"),
                        "height": style.floatheight
                    })
                }
                if (style.borderbottom == 1 && i < y - 1) {
                    var brd = createElement("div");
                    f[i].appendChild(brd);
                    if (style.floatleft == 1) {
                        css(brd, {
                            "position": "absolute",
                            "top": 0,
                            "right": 0,
                            "width": 1,
                            "height": "100%",
                            "background": bordercolor,
                            "pointerEvents": "none"
                        })
                    } else {
                        css(brd, {
                            "position": "absolute",
                            "bottom": 0,
                            "left": 0,
                            "width": "100%",
                            "height": 1,
                            "background": bordercolor,
                            "pointerEvents": "none"
                        })
                    }
                }
                ftitle[i].innerHTML = x[i].title ? x[i].title : '&nbsp;';
                if (v.timestore == 1 && v.playedstore == 1 && x[i].id) {
                    if (o.playedstored) {
                        if (o.playedstored.indexOf(x[i].id) > -1) {
                            x[i].played = 1
                        }
                    }
                }
                if (exist(x[i].played)) {
                    if (x[i].played == 1) {
                        o.plhistory[x[i].id] = true;
                        HistoryPlaylist(i)
                    }
                }
                if (exist(x[i].folder)) {
                    fvalue[i].innerHTML = _nextIcon;
                    css(fvalue[i], {
                        "color": style.color
                    })
                }
                f[i].addEventListener(evntovr, onOver);
                f[i].addEventListener(evntout, onOut);
                f[i].addEventListener(evntclk, onClick);
                f[i].addEventListener("mouseup", onMouseUp);
                if (exist(o.plhistory[x[i].id])) {
                    HistoryPlaylist(i)
                }
                if (plid == x[i].id) {
                    ActionPlaylist(i)
                }
                if (plfolder == x[i].id) {
                    css(ftitle[i], {
                        'color': style.valuecolor
                    });
                    css(fvalue[i], {
                        'color': style.valuecolor
                    });
                    BgBrAct(fbg[i])
                }
            }
            Resize();
            empty = false;
            o.controls ? o.controls.refresh() : ''
        }

        function BgBrAct(x) {
            if (exist2(style.bgbract) && x) {
                css(x, {
                    "background-image": "linear-gradient(rgba(0, 0, 0, " + (1 - style.bgbract * 1) + ") 0 0)"
                })
            }
        }

        function StyleArrow(x, y, z, x1, y1, x2, y2, x3, y3, x4, y4) {
            var ww = (style.floatleft == 1 ? '40px' : '100%');
            var hh = (style.floatleft == 1 ? '100%' : '40px');
            css(x, {
                'position': 'absolute',
                'display': 'inline-block',
                'width': ww,
                'height': hh,
                'text-align': 'center'
            });
            if (style.scrollarrowgradient == 1) {
                css(x, {
                    'background': '-moz-linear-gradient(' + y + ')',
                    'background': '-webkit-linear-gradient(' + y + ')',
                    'background': '-ms-linear-gradient(' + y + ')',
                    'background': '-o-linear-gradient(' + y + ')',
                    'background': 'linear-gradient(' + y + ')',
                })
            }
            if (style.floatleft == 1 || o.system.mobile) {
                css(x, {
                    'cursor': 'pointer'
                })
            } else {
                css(x, {
                    'pointer-events': 'none'
                })
            }
            if (style.limitwidth == 1) {
                css(x, {
                    'max-width': style.limitmaxwidth + 'px!important'
                })
            }
            if (z == "top") {
                css(x, {
                    'top': -1,
                    'left': 0
                })
            }
            if (z == "bottom") {
                css(x, {
                    'bottom': -1,
                    'left': 0
                })
            }
            if (z == "left") {
                css(x, {
                    'top': 0,
                    'left': 0
                })
            }
            if (z == "right") {
                css(x, {
                    'top': 0,
                    'right': 0
                })
            }
            if (z == "right" || z == "left") {
                css(x, {
                    'text-align': 'left',
                    'padding-top': container.offsetHeight / 2 - 10
                })
            }
            x.innerHTML = "<center><div " + (style.scrollarrowbgover == 1 ? "onMouseOver='this.style.backgroundColor=\"#" + style.scrollarrowbgovercolor + "\"' onMouseOut='" + (style.scrollarrowbg == 1 ? "this.style.backgroundColor=\"#" + style.scrollarrowbgcolor : "this.style.background=\"none") + "\"'" : "") + " style='pointer-events:auto;cursor:pointer;width:20px;height:20px;border-radius:20px;" + (style.scrollarrowbg == 1 ? "background-color:#" + style.scrollarrowbgcolor + ";" : "") + (z == "top" ? "margin-top:10px;" : "") + (z == "bottom" ? "margin-top:10px;" : "") + (z == "right" ? "margin-left:0px;" : "") + (z == "left" ? "margin-right:0px;" : "") + "'><svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='" + x1 + "' y1='" + y1 + "' x2='" + x2 + "' y2='" + y2 + "' stroke='#" + style.scrollarrowcolor + "' stroke-width='" + style.scrollarrowsize + "' stroke-linecap='round'/><line x1='" + x3 + "' y1='" + y3 + "' x2='" + x4 + "' y2='" + y4 + "' stroke='#" + style.scrollarrowcolor + "' stroke-width='" + style.scrollarrowsize + "' stroke-linecap='round'/></g></svg></div></center>"
        }
        this.Arrows = function() {
            if (style.scrollarrows == 1) {
                Arrows()
            }
        };

        function ArrowsInterval() {
            if (is_visible) {
                Arrows()
            }
        }

        function Arrows(e) {
            if (style.scrollarrows == 1 && !removed) {
                if (style.floatleft == 1) {
                    var h = control.scrollWidth;
                    var m = container.offsetWidth + style.bgpaddingleft + style.bgpaddingright;
                    var t = control.scrollLeft
                } else {
                    var h = control.scrollHeight;
                    var m = container.offsetHeight;
                    var t = control.scrollTop
                }
                if (h > m) {
                    if (t > 0) {
                        if (!isVisible(arr_up)) {
                            show(arr_up);
                            var m1 = new Motion({
                                "mc": arr_up,
                                "type": "alpha_div",
                                "to": 1,
                                "time": 0.3,
                                "me": "arr_up"
                            })
                        }
                    } else {
                        if (isVisible(arr_up)) {
                            var m2 = new Motion({
                                "mc": arr_up,
                                "type": "alpha_div",
                                "to": 0,
                                "time": 0.3,
                                "me": "arr_up",
                                "hide": true
                            })
                        }
                        if (e) {
                            e.deltaY < 0 ? e.preventDefault() : ''
                        }
                    }
                    if (t < h - m - 10) {
                        if (!isVisible(arr_down)) {
                            show(arr_down);
                            var m3 = new Motion({
                                "mc": arr_down,
                                "type": "alpha_div",
                                "to": 1,
                                "time": 0.3,
                                "me": "arr_down"
                            })
                        }
                    } else {
                        if (isVisible(arr_down)) {
                            var m4 = new Motion({
                                "mc": arr_down,
                                "type": "alpha_div",
                                "to": 0,
                                "time": 0.3,
                                "me": "arr_down",
                                "hide": true
                            })
                        }
                        if (e) {
                            e.deltaY > 0 ? e.preventDefault() : ''
                        }
                    }
                } else {
                    hide(arr_up);
                    hide(arr_down)
                }
            }
        }

        function ScrollDown() {
            var x = control.scrollTop + container.offsetHeight - 60;
            var m = new Motion({
                "mc": control,
                "type": "scroll",
                "to": x,
                "time": 0.3,
                "me": "scroll_down",
                "ease": "cubic"
            });
            setTimeout(Arrows, 1000)
        }

        function ScrollUp() {
            var x = control.scrollTop - container.offsetHeight + 60;
            var m = new Motion({
                "mc": control,
                "type": "scroll",
                "to": x,
                "time": 0.3,
                "me": "scroll_up",
                "ease": "cubic"
            });
            setTimeout(Arrows, 1000)
        }

        function ScrollOverOut(event) {
            clearTimeout(o.settingsovertimer);
            event.stopPropagation()
        }

        function ScrollRight() {
            var x = control.scrollLeft + (container.offsetWidth + style.bgpaddingleft + style.bgpaddingright) - 60;
            var m = new Motion({
                "mc": control,
                "type": "scrollleft",
                "to": x,
                "time": 0.3,
                "me": "scroll_right",
                "ease": "cubic"
            });
            setTimeout(Arrows, 1000)
        }

        function ScrollLeft() {
            var x = control.scrollLeft - (container.offsetWidth + style.bgpaddingleft + style.bgpaddingright) + 60;
            var m = new Motion({
                "mc": control,
                "type": "scrollleft",
                "to": x,
                "time": 0.3,
                "me": "scroll_left",
                "ease": "cubic"
            });
            setTimeout(Arrows, 1000)
        }

        function PlaylistBack(x) {
            if (x == '') {
                UpdatePlaylist(0)
            } else {
                if (exist(o.playlist_dic[x])) {
                    UpdatePlaylist(x)
                }
            }
            open_action = ''
        }

        function HistoryPlaylist(x) {
            fvalue[x].innerHTML = '';
            css(ftitle[x], {
                'color': style.historycolor
            });
            if (style.historytitlestrike == 1) {
                css(ftitle[x], {
                    'text-decoration': 'line-through'
                })
            }
            if (style.historytitlea > -1) {
                css(ftitle[x], {
                    'opacity': style.historytitlea
                })
            }
            f[x].classList.remove('pjs-' + v.id + '-active-pl');
            css(fbg[x], {
                'backgroundColor': style.historybgcolor
            });
            if (style.historybga > -1) {
                css(fbg[x], {
                    'opacity': style.historybga
                })
            }
        }

        function Action2(i) {
            if (exist(f2action[i])) {
                Retimer();
                if (f2i("quality", i) == 0) {
                    o.actions.SetQuality(f2action[i].substr(7))
                }
                if (f2i("audiotrack", i) == 0) {
                    o.actions.SetAudioTrack(f2action[i].substr(10))
                }
                if (f2i("subtitle", i) == 0) {
                    !o.sbt ? o.sbt = new PluginSub() : '';
                    o.sbt.SetSubtitle(f2action[i].substr(8))
                }
                if (f2i("channel", i) == 0 && v.channels == 1) {
                    o.channels.SetChannel(f2action[i].substr(7))
                }
                if (f2i("share", i) == 0) {
                    o.share ? o.share.api(shr[i]) : '';
                    HideControl()
                }
                if (f2i("color", i) == 0) {
                    Remove2();
                    Action(0, 0, clr[i])
                }
                for (var p in o.menuproc) {
                    if (o.menuproc.hasOwnProperty(p)) {
                        if (f2i(p, i) == 0) {
                            o.media.menufltr(p, i)
                        }
                    }
                }
                if (f2i("timer", i) > 0) {
                    if (f2title[i].innerHTML == Lang('off')) {
                        SettingsTimers(open_action + '0');
                        Value(open_settings);
                        if (open_action == "offsettimer") {
                            SettingsTimers("offsetwrite")
                        }
                        Home()
                    } else {
                        if (open_action == "sleeptimer" && style.sleep2 == 1) {
                            SettingsTimers('sleep2', i);
                            Value(open_settings);
                            Home()
                        }
                    }
                }
                if (f2i("speed", i) == 0) {
                    o.actions.SetSpeed(f2action[i].substr(5));
                    UpdateSpeed();
                    setTimeout(HideControl, 200)
                }
            }
        };
        this.UpdateSpeed = function() {
            UpdateSpeed()
        };
        this.Exist = function(x) {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == x) {
                    return true
                }
            }
            return false
        };

        function UpdateSpeed() {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "speed") {
                    Value(i);
                    if (open_action == 'speed') {
                        Remove2();
                        Action(i, 0)
                    }
                }
            }
        }

        function CreateItem(x, i, toend) {
            if (exist(eval(x))) {
                eval(x)[i] = createElement("div");
                if (i < 2 || x == "f" || open_action != 'quality' || toend == 1) {
                    if (style.floatleft == 1) {
                        control.appendChild(eval(x)[i])
                    } else {
                        control2.appendChild(eval(x)[i])
                    }
                } else {
                    if (style.floatleft == 1) {
                        control.insertBefore(eval(x)[i], eval(x)[i - 1])
                    } else {
                        control2.insertBefore(eval(x)[i], eval(x)[toend == 2 ? i - 2 : i - 1])
                    }
                }
                if (x == 'f') {
                    attr(eval(x)[i], {
                        'fid': i
                    })
                }
                if (x == 'f2') {
                    attr(eval(x)[i], {
                        'f2id': i
                    })
                }
                eval(x + 'bg')[i] = createElement("div");
                eval(x)[i].appendChild(eval(x + 'bg')[i]);
                eval(x + 'img')[i] = createElement("div");
                eval(x)[i].appendChild(eval(x + 'img')[i]);
                css(eval(x + 'img')[i], {
                    'position': 'absolute',
                    'right': 0,
                    'top': 0,
                    'width': '100%',
                    'height': '100%',
                    'pointerEvents': 'none'
                });
                eval(x + 'title')[i] = createElement("div");
                eval(x)[i].appendChild(eval(x + 'title')[i]);
                eval(x + 'value')[i] = createElement("div");
                eval(x)[i].appendChild(eval(x + 'value')[i]);
                if (i > 0 && x == "f2" && is == "settings" && style.activeicon == 0) {
                    hide2(eval(x + 'value')[i])
                }
            }
        };

        function StyleItem(x, xbg, xtitle, xvalue, actn) {
            css(x, {
                'position': 'relative',
                'right': 0,
                'top': 0,
                'cursor': 'pointer',
                'height': 'auto',
                'width': '100%',
                'overflow': 'hidden',
                'display': 'block',
                'line-height': '1.5em'
            });
            if (style.floatmarginright && style.floatleft == 1) {
                css(x, {
                    'marginRight': style.floatmarginright
                })
            }
            if (style.floatleft == 1) {
                css(x, {
                    'display': 'inline-block',
                    'vertical-align': 'top',
                    'white-space': 'normal'
                })
            }
            css(xbg, {
                'position': 'absolute',
                'right': 0,
                'top': 0,
                'width': '100%',
                'height': '100%',
                'backgroundColor': style.bgcolor,
                'opacity': style.bga,
                'pointerEvents': 'none',
                'transition': 'opacity 0.2s ease-out,background .2s ease-out,filter .2s ease-out'
            });
            css(xtitle, {
                'position': 'relative',
                'right': 0,
                'top': 0,
                'float': (style.align ? style.align : 'left'),
                'color': style.color,
                'padding-top': style.paddingtop,
                'padding-right': style.paddingright,
                'padding-bottom': style.paddingbottom,
                'padding-left': style.paddingleft,
                'pointerEvents': 'none',
                'opacity': style.a,
                'transition': 'opacity 0.2s linear,color 0.2s linear',
            });
            css(xvalue, {
                'position': 'relative',
                'right': 0,
                'top': 0,
                'float': (style.valuealign ? style.valuealign : 'right'),
                'padding-top': style.paddingtop,
                'padding-right': style.paddingright,
                'padding-left': style.paddingleft,
                'pointerEvents': 'none',
                'font-size': style.valuefontsize * existv(v.globalfs, 1),
                'opacity': style.a,
                'color': style.valuecolor,
                'transition': 'opacity 0.2s linear,color 0.2s linear'
            });
            if (style.limitwidth == 1) {
                css(x, {
                    'max-width': style.limitmaxwidth + 'px!important'
                });
                css(xtitle, {
                    'max-width': (style.limitmaxwidth - 70) + 'px!important'
                })
            } else {
                if (style.floatleft == 1) {
                    if (style.floatlimitwidth == 1) {
                        css(x, {
                            'width': style.floatwidth
                        });
                        css(xtitle, {
                            'width': style.floatwidth - 70
                        })
                    }
                } else {
                    css(xtitle, {
                        'white-space': 'nowrap'
                    });
                    css(xvalue, {
                        'white-space': 'nowrap'
                    })
                }
            }
        }

        function Home() {
            for (var i = 1; i < f.length; i++) {
                if (exist(f[i])) {
                    if (style.floatleft == 1) {
                        f[i].style.display = "inline-block"
                    } else {
                        f[i].style.display = "block"
                    }
                }
            }
            Retimer();
            Remove2();
            Resize();
            open_action = '';
            open_settings = -1
        };

        function Remove2() {
            for (var j = 0; j < f2.length; j++) {
                if (f2[j]) {
                    if (style.floatleft == 1) {
                        control.removeChild(f2[j])
                    } else {
                        control2.removeChild(f2[j])
                    }
                    f2[j] = null
                }
            }
            f2 = [];
            open_action = ''
        }

        function Width() {
            return control.offsetWidth
        };
        this.resizePlaylist = function() {
            ResizePlaylist()
        };

        function ResizePlaylist() {
            if (is == "playlist") {
                if (style.floatleft == 1 || style.width100 == 1) {
                    var x = o.screen_w - style.marginright - style.marginleft;
                    css(container, {
                        'width': x
                    });
                    css(control, {
                        'width': x
                    });
                    control2 ? css(control2, {
                        'width': x
                    }) : ''
                }
                o.droplist ? o.droplist.Resize() : ''
            }
        }

        function Resize() {
            if (!removed) {
                if (is == "settings") {
                    o.controls ? o.controls.resizeSettings() : '';
                    var x = style.nohead == 1 && f.length > 1 ? f[1] : f[0]
                }
                if (is == "playlist") {
                    ResizePlaylist();
                    o.controls ? o.controls.resizePlaylist() : '';
                    var x = f[0];
                    if (v.change2playlist == 1) {
                        MainUpdateSize()
                    }
                }
                f.length > 1 && !x ? (f[1] ? x = f[1] : '') : '';
                f.length > 2 && !x ? (f[2] ? x = f[2] : '') : '';
                if (x) {
                    x.offsetWidth == 0 && f2.length > 0 ? x = f2[0] : ''
                }
                if (control.offsetWidth - control.clientWidth > 0 && x && style.floatleft != 1) {
                    if (exist(arr_up)) {
                        css(arr_up, {
                            "width": control2.offsetWidth
                        })
                    }
                    if (exist(arr_down)) {
                        css(arr_down, {
                            "width": control2.offsetWidth
                        })
                    }
                    style.scrollwidth = (control.offsetWidth - x.offsetWidth) - (control.clientWidth - x.clientWidth)
                } else {
                    style.scrollwidth = 0
                }
            }
        };

        function VisibleItems() {
            var x = 0;
            var y = 0;
            var z = '';
            for (var i = 1; i < f.length; i++) {
                if (exist(f[i])) {
                    if (f[i].style.visibility == "visible") {
                        x++;
                        y = i;
                        z = faction[i]
                    }
                }
            }
            return [x, y, z]
        }
        this.SubOpt = function() {
            sub_settings_on = true;
            this.show();
            _cstm = 2;
            SubtitleSettingsMenu()
        };

        function SubtitleSettings(x) {
            sub_settings_on = !sub_settings_on;
            SubtitleSettingsMenu(x)
        }

        function SubtitleSettingsMenu() {
            Home();
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "subtitle") {
                    Action(i, _cstm)
                }
            }
        }

        function Retimer() {
            clearTimeout(settimer);
            settimer = setTimeout(function() {
                o.setaction = false
            }, 2000)
        }

        function SubtitleTimerMenu() {
            var x = open_action;
            Home();
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == x) {
                    Action(i, 0)
                }
            }
        }

        function HideControl(x) {
            if ((is == 'playlist' && v.playlist.always2 == 1) || (is == 'settings' && v.settings.always == 1)) {
                return
            }
            if (is == 'playlist' && v.playlist.droplist == 1 && v.playlist.dropnohide != 1) {
                o.droplist ? o.droplist.Hide() : '';
                is_visible = false
            } else {
                if ((x != 1 || (style.hidesmoothly == 1 && style.always == 1)) && !o.system.tv) {
                    var m = new Motion({
                        "mc": container,
                        "type": "alpha_div",
                        "to": 0,
                        "time": 0.1,
                        "me": is,
                        "ease": "elastic"
                    });
                    hidetimeout = setTimeout(function() {
                        css(container, {
                            "visibility": "hidden",
                            "opacity": 0,
                            "top": -2000
                        });
                        is_visible = false
                    }, 200)
                } else {
                    css(container, {
                        "visibility": "hidden",
                        "opacity": 0,
                        "top": -2000
                    });
                    is_visible = false
                }
            }
            if (is == 'playlist') {
                if (v.playlist.hidecontrol == 1 && o.controls) {
                    o.controls.toggleControl("action", "playlist", true)
                }
            }
            clearInterval(wheelinterval)
        };
        this.c = function() {
            return container
        };
        this.co = function() {
            if (container.contains(control)) {
                return control
            }
        };
        this.s = function(key) {
            return style[key]
        };
        this.ss = function(key) {
            return style
        };
        this.show = function() {
            Home();
            clearTimeout(hidetimeout);
            is_visible = true;
            if (is == 'playlist' && v.playlist.droplist == 1) {
                o.droplist ? o.droplist.Show() : ''
            } else {
                css(container, {
                    "visibility": "visible",
                    "opacity": 1,
                    "transition": "opacity 0.2s linear"
                });
                var x = VisibleItems();
                if (x[0] == 1) {
                    if (x[2] == "quality" || x[2] == "audiotrack" || x[2] == "subtitle" || x[2] == "speed" || x[2] in o.menuproc || x[2].indexOf("timer") > 0) {
                        Action(x[1], 0)
                    }
                }
            }
            if (o.controls) {
                is == 'settings' ? o.controls.resizeSettings() : '';
                if (is == 'playlist') {
                    o.controls.resizePlaylist();
                    if (v.playlist.hidecontrol == 1) {
                        o.controls.toggleControl("action", "playlist", false)
                    }
                }
            }
            if (o.system.safari) {
                css(control, {
                    'min-width': 'auto'
                });
                if (style.floatleft != 1) {
                    css(control2, {
                        'min-width': 'auto'
                    })
                }
            }
            justshow = true;
            clearInterval(showinterval);
            showinterval = setInterval(ShowTimeout, 100)
        };

        function ShowTimeout() {
            clearInterval(showinterval);
            justshow = false
        }
        this.open = function(i) {
            Action(i, 1)
        };
        this.hide = function(x) {
            HideControl(x)
        };
        this.plclose = function() {
            if (o.droplist) {
                o.droplist.Close()
            }
        };
        this.SetQuality = function() {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "quality") {
                    Value(i);
                    if (o.files_quality.length > 1) {
                        show(f[i])
                    }
                    if (open_action == 'quality') {
                        Remove2();
                        Action(i, _cstm)
                    }
                }
            }
        };
        this.Airplay = function() {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "airplay") {
                    Value(i)
                }
            }
        };
        this.SetSetting = function(x) {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == x) {
                    Value(i);
                    if (o['files_' + x]) {
                        if (o['files_' + x].length > 1) {
                            show(f[i])
                        }
                    }
                    if (open_action == x) {
                        Remove2();
                        Action(i, _cstm)
                    }
                }
            }
        };
        this.SetSubtitle = function() {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "subtitle") {
                    Value(i);
                    if (o.files_subtitle) {
                        if (o.files_subtitle.length > 0) {
                            var x = false;
                            if (o.subs) {
                                for (var y = 0; y < o.subs.length; y++) {
                                    if (o.subs[y] != '') {
                                        x = true;
                                        break
                                    }
                                }
                            } else {
                                x = true
                            }
                            x ? show(f[i]) : ''
                        }
                    }
                    if (open_action == 'subtitle') {
                        Remove2();
                        Action(i, 0)
                    }
                }
            }
        };
        this.updatePlaylist = function(x) {
            o.playlist = x;
            UpdatePlaylist(0);
            if (exist(v.plstart)) {
                if (v.plstart.indexOf("x-") != 0) {
                    for (var y in o.playlist_dic) {
                        if (o.playlist_dic.hasOwnProperty(y)) {
                            if (o.playlist_dic[y].pjs_id == v.plstart) {
                                v.plstart = y
                            }
                        }
                    }
                }
                if (exist(o.playlist_dic[v.plstart])) {
                    FindPlStart(o.playlist_dic[v.plstart]);
                    var y = o.playlist_dic[v.plstart]['pjs_i'];
                    ActionPlaylist(y);
                    if (v.playlist.openplaylistroot == 1 && style.droplist != 1) {
                        UpdatePlaylist(0);
                        setTimeout(function() {
                            Resize()
                        }, 500)
                    } else {
                        setTimeout(function() {
                            ScrollTo(y);
                            Resize()
                        }, 500)
                    }
                    v.plstart = undefined
                } else {
                    ActionPlaylist(0)
                }
            } else {
                ActionPlaylist(0)
            }
            if (style.droplist == 1) {
                if (!exist(o.droplist)) {
                    o.droplist = new PluginDroplist()
                }
            }
        };
        this.playById = function(x) {
            if (exist(o.playlist_dic[x])) {
                FindPlStart(o.playlist_dic[x]);
                Action(o.playlist_dic[x]['pjs_i'], 0);
                ScrollTo(o.playlist_dic[x]['pjs_i'])
            }
        };
        this.openById = function(x) {
            if (exist(o.playlist_dic[x])) {
                FindPlStart(o.playlist_dic[x]);
                if (o.playlist_dic[x]["file"]) {
                    ActionPlaylist(o.playlist_dic[x]['pjs_i']);
                    UpdateVars0(x);
                    o.actions.NewFile(o.playlist_dic[x]["file"], 1);
                    UpdateVars(x);
                    ScrollTo(o.playlist_dic[x]['pjs_i']);
                    if (o.droplist) {
                        o.droplist.Update()
                    }
                } else if (o.playlist_dic[x]["folder"]) {
                    UpdatePlaylist(x)
                }
            }
        };

        function showById(x) {
            if (exist(o.playlist_dic[x])) {
                plfolder = '';
                UpdatePlaylist(0);
                FindPlStart(o.playlist_dic[x]);
                UpdateVars0(x);
                Action(o.playlist_dic[x]['pjs_i'], 0);
                UpdateVars(x)
            }
        };
        this.PlaylistNext = function() {
            autonextopenfolder = true;
            var x = parseInt(plx) + 1;
            if (plid != '') {
                o.plhistory[plid] = true;
                shuffle = removebykey(shuffle, plid)
            }
            if (v.shuffle == 1) {
                x = Shuffle(shuffle);
                if (x == null) {
                    if (v.shuffle8 == 1 || v.playlist.autoplaylist == 1) {
                        shuffle_.sort(function(a, b) {
                            return Math.random() - 0.5
                        });
                        for (var x in shuffle_) {
                            if (shuffle_.hasOwnProperty(x)) {
                                shuffle[x] = shuffle_[x]
                            }
                        }
                        x = Shuffle(shuffle)
                    } else {
                        o.actions.ShuffleEnd()
                    }
                }
            } else {
                if ((faction[x] == "playlistfolder" || plx == -1) && plid != '') {
                    var y = Object.keys(o.playlist_dic).indexOf(plid);
                    if (y < Object.keys(o.playlist_dic).length) {
                        var z = o.playlist_dic[Object.keys(o.playlist_dic)[y + 1]];
                        if (z) {
                            if (exist(z.folder)) {
                                z = o.playlist_dic[Object.keys(o.playlist_dic)[y + 2]]
                            }
                            this.openById(z.id);
                            x = -1;
                            o.actions.Play()
                        }
                    }
                }
            }
            if (x > -1) {
                Action(x, 0);
                ScrollTo(x)
            }
        };

        function ScrollTo(x) {
            if (f[x] && !removed) {
                if (style.floatleft == 1) {
                    var to = f[x].offsetLeft - 20;
                    var m = new Motion({
                        "mc": control,
                        "type": "scrollleft",
                        "to": to,
                        "time": 0.3,
                        "me": "scroll_left",
                        "ease": "cubic"
                    })
                } else {
                    var to = f[x].offsetTop - container.offsetHeight / 2 + 20;
                    var m = new Motion({
                        "mc": control,
                        "type": "scroll",
                        "to": to,
                        "time": 0.3,
                        "me": "scroll_down",
                        "ease": "cubic"
                    })
                }
                setTimeout(Arrows, 1000)
            }
        }

        function Shuffle(obj) {
            var keys = Object.keys(obj);
            var x;
            for (var i = 0; i < keys.length; i++) {
                x = obj[keys[keys.length * Math.random() << 0]];
                if (x) {
                    break
                }
            }
            return x
        };
        this.menuproc = function(x) {
            Menuproc(x)
        };

        function Menuproc(x) {
            mpi[x] > -1 ? Value(mpi[x]) : '';
            if (f2value[0]) {
                if (open_action == 'scale') {
                    f2value[0].innerHTML = Math.round(o.mediascale.x * 100) + '%'
                } else {
                    f2value[0].innerHTML = FltrVal(open_action)
                }
            }
        };

        function FltrVal(x) {
            if (x == "scale") {
                return Math.round(o.mediascale.x * 100) + '%'
            } else {
                return Math.round(existv(o.fltrs[x], o.menuproc[x]) * 100) + '%'
            }
        }
        this.PlaylistNextExist = function() {
            if (v.shuffle == 1) {
                return Object.keys(shuffle).length > 0
            }
            var x = false;
            if (o.playlist_dic) {
                x = Object.keys(o.playlist_dic).indexOf(plid) < Object.keys(o.playlist_dic).length - 1
            }
            return x
        };
        this.PlaylistRewind = function() {
            if (exist(o.pl_first_id)) {
                showById(o.pl_first_id)
            }
        };
        this.PlaylistPrevExist = function() {
            var x = plx > 0;
            if (o.playlist_dic) {
                var y = Object.keys(o.playlist_dic);
                var z = y.indexOf(plid);
                x = z > 0;
                if (z == 1) {
                    if (exist(o.playlist_dic[y[0]].folder)) {
                        x = false
                    }
                }
            }
            return x
        };
        this.PlaylistExist = function() {
            return exist(o.playlist_dic)
        };
        this.PlaylistPrev = function() {
            autoprevopenfolder = true;
            if (this.PlaylistPrevExist()) {
                var x = parseInt(plx) - 1;
                if (x < 0) {
                    var y = Object.keys(o.playlist_dic).indexOf(plid);
                    if (y > 0) {
                        var z = o.playlist_dic[Object.keys(o.playlist_dic)[y - 1]];
                        if (z) {
                            if (exist(z.folder)) {
                                z = o.playlist_dic[Object.keys(o.playlist_dic)[y - 2]]
                            }
                            if (z) {
                                this.openById(z.id);
                                o.actions.Play()
                            }
                        }
                    }
                } else {
                    Action(x, 0);
                    ScrollTo(x)
                }
            }
        };
        this.PlaylistHere = function() {
            if (plx > 0) {
                ScrollTo(plx)
            }
        };

        function f2i(x, i) {
            return f2action[i].indexOf(x)
        };

        function FindPlStart(x) {
            if (x['pjs_parent_i'] != -1) {
                FindPlStart(o.playlist_dic[x['pjs_parent']]);
                UpdatePlaylist(x['pjs_parent'])
            } else {
                UpdatePlaylist(0)
            }
        };
        this.g = function(x) {
            switch (x) {
                case "width":
                    return Width();
                    break;
                case "height":
                    return container.offsetHeight;
                    break;
                case "top":
                    return style.margintop;
                    break;
                case "scroll_height":
                    return control.scrollHeight;
                    break;
                case "margin_bottom":
                    return style.marginbottom;
                    break;
                case "x":
                    return int(container.style.left);
                    break;
                case "y":
                    return int(container.style.top);
                    break;
                case "opacity":
                    return container.style.opacity;
                    break;
                case "show":
                    return is_visible;
                    break;
                case "open":
                    return open_settings;
                    break;
                case "key":
                    return key;
                    break;
                case "motion_id":
                    return key + motion_id;
                    break;
                case "empty":
                    return empty;
                    break;
                case "playlist":
                    return is == "playlist";
                    break;
                case "activeicon":
                    return _activeIcon;
                    break;
                case "butplstart":
                    return o.playlist_dic[o.butplstart] ? o.playlist_dic[o.butplstart].title : '';
                case "title2":
                    return v.title2 ? v.title2 : ''
            }
        };
        this.prenewpl = function() {
            plid = '';
            v.plstart = ''
        };
        this.empty = function() {
            if (is == "settings") {
                var x = 0;
                for (var i = 1; i < 11; i++) {
                    if (faction[i] == "quality") {
                        var y = o.files_quality.length;
                        if (exist(v.forbidden_quality)) {
                            var z = v.forbidden_quality.split(",");
                            for (var j = 0; j < z.length; j++) {
                                if (o.files_quality.indexOf(z[j]) > -1) {
                                    y--
                                }
                            }
                        }
                        if (y > 0) {
                            if (y > 1 || (y == 1 && o.files_quality != 1 && style.show1value == 1)) {
                                x++
                            }
                        }
                    }
                    if (faction[i] == "airplay") {
                        if (o.airplay) {
                            x++
                        }
                    }
                    if (faction[i] == "download") {
                        if (o.file_type == 'native' || v.download) {
                            x++
                        }
                    }
                    if (faction[i] == "audiotrack") {
                        if (o.files_audiotrack.length > 0) {
                            x++
                        }
                    }
                    if (faction[i] == "channel" && v.channels == 1) {
                        if (o.files_channel.length > 0) {
                            x++
                        }
                    }
                    if (faction[i] == "subtitle") {
                        if (exist(o.subs)) {
                            for (var s = 0; s < o.subs.length; s++) {
                                if (o.subs[s] != '') {
                                    x++;
                                    break
                                }
                            }
                        }
                        if (x == 1 && o.subload == 1) {
                            x = 0
                        }
                        if (v.sub_upload == 1 && v.sub_upload0 == 1) {
                            x++
                        }
                    }
                    if (faction[i] == "speed") {
                        if (o.file_type != "vimeo") {
                            x++
                        }
                    }
                    if (faction[i] in o.menuproc || faction[i] == "share" || faction[i] == "color") {
                        x++
                    }
                    if (faction[i]) {
                        if (faction[i].indexOf("timer") > 0) {
                            x++
                        }
                    }
                    if (v.settings[is + i + 'hide'] == 1) {
                        x--
                    }
                }
                return x == 0
            } else if (is == "playlist") {
                return f.length == 0
            } else {
                return empty
            }
        };
        this.Remove = function() {
            if (container.parentNode == o.frame) {
                container.removeChild(control);
                o.frame.removeChild(container);
                o.droplist ? o.droplist.Remove() : '';
                container = null;
                control = null;
                removed = true
            }
        }
    };
    var MediaYoutube = function(url, parentcontainer) {
        var intro = false;
        if (url.indexOf('intro') == 0) {
            intro = true;
            url = url.substr(5)
        }
        var youtube_id = YoutubeID(url);
        var error;
        var player;
        var created = false;
        var ready = false;
        var started = false;
        var vastonmobile = false;
        var auto = true;
        var _set_quality = [];
        var _speed = 1;
        var _wait = false;
        var startwait_t;
        var _start = 0;
        var _readyonplay = 0;
        var quality_received = false;
        var container_id = 'pljs_yt_' + v.id + (intro ? 'intro' : '');
        pushCSS("#pljs_yt_" + v.id + "{width:100%!important;height:100%!important;max-width:none!important;max-height:none!important}");
        var container = createElement('div');
        container.setAttribute('id', container_id);
        parentcontainer.appendChild(container);
        o.airplay = false;
        !intro ? o.actions.AirplayChanged() : '';
        if (o.system.mobile) {
            v.preload = 1
        }
        if (v.youtubecontrols != 1) {
            var layer = createElement('div');
            parentcontainer.appendChild(layer);
            css(layer, {
                position: "absolute",
                top: 0,
                left: 0,
                "background-color": "#ff0000",
                height: "100%",
                width: "100%",
                "opacity": 0
            });
            layer.addEventListener("dblclick", function(event) {
                event.cancelBubble = true
            });
            if (o.system.mobile) {
                layer.addEventListener("touchstart", function(event) {
                    event.cancelBubble = true
                });
                layer.addEventListener("click", function(event) {
                    event.cancelBubble = true
                });
                layer.addEventListener("touchend", function(event) {
                    event.cancelBubble = true;
                    ScreenClick(event);
                    if (v.screenclick == 1) {
                        setTimeout(HideLayer, 100);
                        setTimeout(ShowLayer, 1000)
                    }
                })
            } else {
                layer.addEventListener("mousemove", function(event) {
                    var x = true;
                    if (v.vast == 1) {
                        if (exist(v.preroll) && !started) {
                            x = false
                        }
                        if (exist(v.playroll) && Status() == "paused" && time() > 0) {
                            x = false
                        }
                    }
                    if (x && v.screenclick == 1 && v.ytcl != 1) {
                        hide2(this);
                        setTimeout(ShowLayer, 2000)
                    }
                })
            }
            v.screenclick == 1 && v.ytcl1 != 1 ? hide2(layer) : ''
        }

        function ShowLayer() {
            show2(layer)
        }

        function HideLayer() {
            if (v.ytcl != 1) {
                hide2(layer)
            }
        }
        if (v.preload == 1 && v.autoplay == 0) {
            onWaiting()
        }
        if (!window['YT']) {
            window.onYouTubeIframeAPIReady = function() {
                YouTubeIframeAPIReady();
                for (var i = 0; i < pljssglobal.length; i++) {
                    if (pljssglobal[i]) {
                        if (pljssglobal[i].api("id") != v.id) {
                            if (pljssglobal[i].api('isyoutube')) {
                                pljssglobal[i].api('youtubeready')
                            }
                        }
                    }
                }
            };
            var scrpt = Script("youtube.com/iframe_api", "youtube.com/iframe_api", "youtube_iframe_api");
            if (scrpt) {
                scrpt.onerror = function(e) {
                    o.actions.MediaReady();
                    if (v.yterrors != 1) {
                        error = 'YouTube API Error';
                        o.media.onError()
                    }
                }
            }
        } else {
            YouTubeIframeAPIReady()
        }

        function YouTubeIframeAPIReady() {
            if (v.preload == 1 || intro) {
                !created ? YtInit() : ''
            } else {
                o.actions.MediaReady()
            }
        }

        function YtInit() {
            if ("YT" in window) {
                if (exist(YT.Player) && !created) {
                    log("Youtube Init");
                    var cntrls = 0;
                    if (v.youtubecontrols == 1) {
                        cntrls = 1
                    }
                    o.seekto > 0 ? _start = parseInt(o.seekto) : '';
                    player = new YT.Player(container_id, {
                        height: o.container_h,
                        width: o.container_w,
                        videoId: youtube_id,
                        playerVars: {
                            enablejsapi: 1,
                            playerapiid: container_id,
                            html5: 1,
                            disablekb: 1,
                            autohide: 1,
                            playsinline: ((v.playsinlineonmobile == 0 || (v.playsinlineonmobileiphone != 1 && o.system.iphone)) && o.system.mobile ? 0 : 1),
                            iv_load_policy: 3,
                            controls: cntrls,
                            showinfo: 0,
                            modestbranding: 1,
                            rel: 0,
                            autoplay: intro || v.autoplay == 1 ? 1 : 0,
                            loop: 0
                        },
                        events: {
                            'onReady': onYtPlayerReady,
                            'onStateChange': onYtPlayerStateChange,
                            'onError': onError,
                            'onPlaybackQualityChange': onQualityChanged
                        }
                    });
                    if (o.seekto > 0) {
                        o.seekto = undefined
                    }
                    Resize();
                    created = true
                } else {
                    setTimeout(YtInit, 500)
                }
            } else {
                setTimeout(YtInit, 500)
            }
        }
        var _play_i;

        function onYtPlayerReady() {
            if (o.media) {
                log("Youtube Ready");
                ready = true;
                clearTimeout(startwait_t);
                o.actions.StopWaiting();
                if (intro) {
                    if (o.system.mutedautoplay) {
                        o.actions.Mute()
                    }
                    player.playVideo();
                    o.vast.ytReady()
                } else {
                    if (v.autoplay == 1 && o.system.mutedautoplay && !o.acted) {
                        o.actions.Mute();
                        if (o.system.mobile) {
                            clearInterval(_play_i);
                            _play_i = setInterval(PlayingChecker, 300)
                        }
                    }
                    if (v.preload == 0) {
                        player.playVideo()
                    } else {
                        o.actions.MediaReady()
                    }
                    o.media.onDuration();
                    if (_speed != 1) {
                        SetSpeed(_speed)
                    }
                    onMeta();
                    Resize();
                    if (v.yttitle == 1) {
                        try {
                            if (player.getVideoData()) {
                                if (exist(player.getVideoData().title)) {
                                    v.title = player.getVideoData().title;
                                    o.actions.Title('title')
                                }
                            }
                        } catch (e) {}
                    }
                }
            }
        }

        function PlayingChecker() {
            var x = player.getPlayerState();
            if (x == 2 || x == -1) {
                o.controls.Pause();
                o.controls.StopWaiting();
                clearInterval(_play_i)
            }
            if (x == 1) {
                clearInterval(_play_i)
            }
        }

        function onYtPlayerStateChange(event) {
            if (v.ytlog == 1) {
                log('YT', event.data)
            }
            if (intro) {
                if (event.data == YT.PlayerState.ENDED) {
                    o.vast.ytEnded()
                }
                if (event.data == YT.PlayerState.PLAYING) {}
            } else {
                if (event.data == YT.PlayerState.PLAYING) {
                    if (_readyonplay == 1) {
                        _readyonplay = 0;
                        onYtPlayerReady()
                    }
                    if (!o.play) {
                        o.actions.Play()
                    }
                    if (_start > 0) {
                        player.seekTo(_start, true);
                        _start = 0;
                        o.seekto = undefined
                    }
                    ShowLayer();
                    started = true;
                    ready = true;
                    if (vastonmobile) {
                        player.pauseVideo()
                    } else {
                        o.media.onPlay();
                        o.media.onTimeupdate()
                    }
                    Qualities();
                    if (exist(v.default_quality)) {
                        for (var i = 0; i < o.files_quality.length; i++) {
                            if (v.default_quality == o.files_quality[i]) {
                                SetQuality(i)
                            }
                        }
                        v.default_quality = null
                    } else {
                        if (exist(o.default_quality)) {
                            for (var i = 0; i < o.files_quality.length; i++) {
                                if (o.default_quality == o.files_quality[i]) {
                                    SetQuality(i)
                                }
                            }
                            o.default_quality = null
                        }
                    }
                    _wait = false
                }
                if (event.data == -1 && _wait && o.play) {
                    o.actions.StopWaiting();
                    _wait = false;
                    onPause()
                }
                if (event.data == YT.PlayerState.PAUSED) {}
                if (event.data == YT.PlayerState.ENDED) {
                    onEnded()
                }
                if (event.data == YT.PlayerState.BUFFERING) {
                    if (!o.play) {}
                    if (o.play) {
                        _wait = true;
                        onWaiting()
                    }
                }
                if (event.data == YT.PlayerState.CUED) {}
            }
        }

        function onError(event) {
            if (intro) {
                o.vast.ytError()
            } else {
                if (event.data == 2) {
                    error = "wrong youtube id"
                }
                if (event.data == 5) {
                    error = "network empty"
                }
                if (event.data == 101 || event.data == 150 || event.data == 100) {
                    error = "this video is unavailable"
                }
                if (v.customyterrors == 1) {
                    exist(v.customyterror) ? error = v.customyterror : ''
                }
                if (v.yterrors != 1) {
                    o.media.onError()
                } else {
                    hide(o.poster)
                }
            }
        }

        function onEnded() {
            v.start > 0 ? _start = v.start : '';
            o.media.onEnded();
            o.media.onDuration()
        }

        function onPause() {
            if (!o.nopause && o.play) {
                o.actions.Pause()
            }
        }

        function onTimeupdate() {
            o.media.onTimeupdate()
        }

        function onMeta() {
            o.media.onMeta();
            o.actions.LoadedData()
        }

        function onDuration() {
            o.media.onDuration()
        }

        function onVolume() {
            o.media.onVolume()
        }

        function onWaiting() {
            if (o.media) {
                o.media.onWaiting()
            } else {
                startwait_t = setTimeout(onWaiting, 100)
            }
        }

        function onQualityChanged(event) {
            SetCurrentQuality(event.data)
        }

        function Qualities() {
            if (!quality_received) {
                var x = player.getAvailableQualityLevels() + '';
                if (x != '' && x != undefined) {
                    o.files_quality = x.split(',');
                    o.files_quality = o.files_quality.reverse();
                    if (v.ytautoquality == 0) {
                        var y = o.files_quality.indexOf('auto');
                        if (y > -1) {
                            o.files_quality.splice(y, 1)
                        }
                    }
                    for (var i = 0; i < o.files_quality.length; i++) {
                        o.files_quality[i] = RenameQualities(o.files_quality[i])
                    }
                    quality_received = true;
                    SetCurrentQuality(player.getPlaybackQuality())
                }
            }
        }

        function SetCurrentQuality(x) {
            o.current_quality = o.files_quality.indexOf(RenameQualities(x + ''));
            o.controls.QualityChanged(o.current_quality)
        }
        this.size = function() {
            return {
                "width": 0,
                "height": 0
            }
        };
        this.src = function(x) {
            youtube_id = YoutubeID(x);
            if (o.seekto > 0) {
                _start = parseInt(o.seekto)
            }
            playById(youtube_id)
        };

        function Status() {
            var state = -1;
            if (ready) {
                state = player.getPlayerState()
            }
            var x = '';
            if (state == -1) {
                x = "paused"
            }
            if (state == 1 || state == 3) {
                x = "playing"
            }
            if (state == 2) {
                x = "paused";
                if (o.play) {
                    o.controls.Pause();
                    o.actions.StopWaiting()
                }
            }
            if (state == 5) {
                x = "paused"
            }
            if (state == 0) {
                x = "ended"
            }
            return x
        }

        function Resize() {
            try {
                if (exist(player)) {
                    player.setSize(o.screen_w, o.screen_h)
                }
            } catch (e) {
                log(e)
            }
        }

        function RenameQualities(x) {
            var y = x;
            if (x == "tiny") {
                y = "160p"
            }
            if (x == "small") {
                y = "240p"
            }
            if (x == "medium") {
                y = "360p"
            }
            if (x == "large") {
                y = "480p"
            }
            if (x == "hd720") {
                y = "720p"
            }
            if (x == "hd1080") {
                y = "1080p"
            }
            if (v.nameofyoutubequality == 1) {
                y = Lang(y)
            }
            if (x == "auto") {
                y = Lang("auto")
            }
            _set_quality[y] = x;
            return y
        }

        function time() {
            return ready ? player.getCurrentTime() : 0
        };

        function SetSpeed(x) {
            player ? player.setPlaybackRate(x) : '';
            _speed = x
        };
        this.YoutubeReady = function() {
            YouTubeIframeAPIReady()
        };
        this.Play = function() {
            if (ready) {
                player.playVideo()
            } else {
                if (!created) {
                    YtInit()
                } else {}
            }
        };
        this.Pause = function() {
            if (ready) {
                player.pauseVideo()
            }
        };
        this.Toggle = function() {
            if (ready) {
                Status() == 'playing' ? player.pauseVideo() : player.playVideo()
            }
        };
        this.Seek = function(x) {
            ready ? player.seekTo(x, true) : ''
        };
        this.tag = function() {
            return false
        };
        this.Mute = function() {
            ready ? player.mute() : ''
        };
        this.Unmute = function() {
            ready ? player.unMute() : ''
        };
        this.Volume = function(x) {
            ready ? player.setVolume(x * 100) : ''
        };
        this.isPlaying = function() {
            return Status() == 'playing'
        };
        this.isLive = function() {
            return false
        };
        this.setQuality = function(x) {
            SetQuality(x)
        };

        function SetQuality(x) {
            if (ready) {
                if (exist(o.files_quality[x])) {
                    var y = _set_quality[o.files_quality[x]];
                    auto = y == 'auto';
                    var z = time();
                    player.setPlaybackQuality(y)
                }
            }
        }
        this.setSpeed = function(x) {
            SetSpeed(x)
        };
        this.ready = function() {
            return ready
        };
        this.status = function() {
            return Status()
        };
        this.time = function() {
            return time()
        };
        this.duration = function() {
            var x = ready ? player.getDuration() : 0;
            if (exist(v.end)) {
                x = v.end
            }
            return x
        };
        this.loaded = function() {
            var x = 0;
            if (ready) {
                x = player.getVideoLoadedFraction() * player.getDuration()
            }
            return x
        };
        this.resize = function() {
            Resize()
        };
        this.errorMessage = function() {
            return error
        };
        this.auto = function() {
            return v.ytautoquality == 1 ? auto : false
        };
        this.playId = function(x) {
            playById(x)
        };

        function playById(x) {
            url = x;
            if (player) {
                _readyonplay = 1;
                player.loadVideoById(x, 0)
            }
        }
        this.BeforeVast = function() {
            if (o.system.mobile && o.system.android) {
                this.Play();
                vastonmobile = true
            } else {
                if (Status() == "playing") {
                    this.Pause()
                }
            }
        };
        this.AfterVast = function() {
            vastonmobile = false
        };
        this.nativeControls = function() {
            return true
        };
        this.Remove = function() {
            ready ? player.destroy() : '';
            ready = false;
            quality_received = false;
            try {
                if (container) {
                    parentcontainer.removeChild(container)
                }
                parentcontainer.removeChild(layer)
            } catch (e) {}
        }
    };
    var TimeStore = function() {
        var x = '';
        var t = 0;
        var d = 0;
        if (o.storage) {
            if (v.timestoredontuse != 1) {
                if (localStorage.getItem("pljsplayfrom_" + v.id + o.href2) != null) {
                    x = localStorage.getItem("pljsplayfrom_" + v.id + o.href2)
                }
                if (v.playedstore == 1 && localStorage.getItem("pljsplayed_" + v.id + o.href2) != null) {
                    o.playedstore = localStorage.getItem("pljsplayed_" + v.id + o.href2)
                }
                if (exist(v.cuid)) {
                    if (localStorage.getItem("pljsplayfrom_" + o.d + v.cuid) != null) {
                        x = localStorage.getItem("pljsplayfrom_" + o.d + v.cuid)
                    }
                    if (v.playedstore == 1 && localStorage.getItem("pljsplayed_" + o.d + v.cuid) != null) {
                        o.playedstore = localStorage.getItem("pljsplayed_" + o.d + v.cuid)
                    }
                }
                if (o.playedstore && v.playedstore == 1) {
                    o.playedstored = o.playedstore.split(",")
                }
                if (x.indexOf("{") == 0) {
                    if (v.timestorejustbut == 1) {
                        o.butplstart = x.substr(1, x.indexOf("}") - 1)
                    } else {
                        o.plcontinue = v.plstart = x.substr(1, x.indexOf("}") - 1)
                    }
                    x = x.substr(x.indexOf("}") + 1);
                    v.timestore0plroot == 1 ? v.playlist.openplaylistroot = 0 : ''
                }
                UpdateTime(x)
            }
        };

        function UpdateTime(x) {
            if (x) {
                if (x.indexOf("--") > 0) {
                    var y = x.split("--");
                    t = parseFloat(y[0]);
                    if (v.timestoreunauto == 1 && t > 0 && v.autoplay == 1) {
                        v.autoplay = 0
                    }
                    if (v.timestorejustbut == 1) {
                        o.butseekto = t
                    } else {
                        d = parseFloat(y[1]);
                        o.seekto = t
                    }
                }
            }
        }
        this.updateCuid = function() {
            if (exist(v.cuid)) {
                if (localStorage.getItem("pljsplayfrom_" + o.d + v.cuid) != null) {
                    x = localStorage.getItem("pljsplayfrom_" + o.d + v.cuid);
                    UpdateTime(x);
                    o.controls.Played(t, d);
                    o.controls.Duration(t, d);
                    v.duration = d
                } else {
                    o.seekto = 0;
                    o.controls.Played(0, 0);
                    o.controls.Duration(0, 0);
                    v.duration = 0
                }
            }
        };
        this.write = function(t, d) {
            if (o.media.isLive() && v.timestorenolive == 1) {} else {
                var ct = new Date().getTime();
                localStorage.setItem("pljsplayfrom_" + (exist(v.cuid) ? o.d + v.cuid : v.id + o.href2), (exist(o.plid) ? "{" + o.plid + "}" : '') + t + '--' + d + '--' + ct)
            }
        };
        this.writePl = function(x) {
            o.playedstore = (o.playedstore ? o.playedstore + ',' : '') + x;
            localStorage.setItem("pljsplayed_" + (exist(v.cuid) ? o.d + v.cuid : v.id + o.href2), o.playedstore)
        };
        this.flag = function() {
            return {
                t: t,
                d: d
            }
        }
    };
    var ChromeCast = function() {
        var player;
        var controller;
        var deviceName;
        var words;
        var current_color;
        window['__onGCastApiAvailable'] = function(x, y) {
            if (x) {
                for (var i = 0; i < pljssglobal.length; i++) {
                    if (pljssglobal[i]) {
                        pljssglobal[i].api('castinit')
                    }
                }
            } else {
                _log("error: " + y)
            }
        };
        this.init = function() {
            CastInit()
        };

        function CastInit() {
            _log("available");
            if (exist(chrome.cast) && exist(cast) && !o.cast_available) {
                var rid = 'CC1AD845';
                if (v.chromecast.receiver == 1 && v.chromecast.receiverid) {
                    rid = v.chromecast.receiverid
                }
                cast.framework.CastContext.getInstance().setOptions({
                    receiverApplicationId: rid,
                    autoJoinPolicy: 'tab_and_origin_scoped',
                    language: 'en-US',
                    resumeSavedSession: false
                });
                player = new cast.framework.RemotePlayer();
                Controller();
                o.cast_available = true;
                setTimeout(Available, 1000)
            }
        }

        function Available() {
            o.controls.Review();
            o.controls.resize()
        }

        function Connection(data) {
            if (cast && cast.framework) {
                _log((!player.isConnected ? 'dis' : '') + "connected");
                if (player.isConnected) {
                    PlayRemote()
                } else {
                    PlayLocal()
                }
            }
        }

        function PlayRemote(x) {
            var session = cast.framework.CastContext.getInstance().getCurrentSession();
            var mime = 'video/mp4';
            o.file_type == "hls" ? mime = "application/x-mpegurl" : '';
            o.file_type == "dash" ? mime = "application/dash+xml" : '';
            var url = o.media.currentFile();
            if (exist(v.casturl)) {
                url = v.casturl
            }
            var info = new chrome.cast.media.MediaInfo(url, mime);
            info.metadata = new chrome.cast.media.GenericMediaMetadata();
            info.metadata.metadataType = chrome.cast.media.MetadataType.GENERIC;
            var tracks = [];
            if (exist(o.subs) && exist(o.current_subtitle) && v.chromecast.sub == 1) {
                info.textTrackStyle = SubStyle();
                for (var i in o.subs) {
                    if (o.subs[i].indexOf('vtt') > 0) {
                        var t = new chrome.cast.media.Track(0, chrome.cast.media.TrackType.TEXT);
                        t.trackContentId = o.subs[i];
                        t.trackContentType = 'text/vtt';
                        t.subtype = 'CAPTIONS';
                        t.name = o.files_subtitle[i];
                        t.trackId = parseInt(i);
                        t.customData = null;
                        tracks.push(t)
                    }
                }
                if (tracks.length > 0) {
                    info.tracks = tracks
                }
            }
            if (v.poster) {
                info.metadata.images = [new chrome.cast.Image(v.poster)]
            }
            info.metadata.title = o.titlestore ? o.titlestore : (v.title ? v.title : '');
            var request = new chrome.cast.media.LoadRequest(info);
            request.currentTime = o.seekto > 0 ? o.seekto : (o.casting ? 0 : o.media.time());
            request.autoplay = o.play || x == true;
            if (tracks.length > 0 && o.current_subtitle > -1) {
                if (o.current_subtitle < tracks.length) {
                    request.activeTrackIds = [parseInt(o.current_subtitle)];
                    _log('subtitle ' + o.current_subtitle)
                }
            }
            session.loadMedia(request).then(function() {
                deviceName = session.getCastDevice().friendlyName;
                _log("connected to " + deviceName);
                if (v.chromecast.message != 0 && !o.casting) {
                    words ? o.frame.removeChild(words) : '';
                    words = createElement("div");
                    css(words, {
                        "position": "absolute",
                        "top": "20px",
                        "width": "100%",
                        "left": 0,
                        "opacity": 0.7,
                        "color": "#fff",
                        "pointer-events": "none"
                    });
                    words.innerHTML = '<center>' + Lang("castdevice") + ' &laquo;' + deviceName + '&raquo;</center>';
                    o.frame.appendChild(words)
                }
                player.volumeLevel = v.volume;
                controller.setVolumeLevel();
                if (o.muted && !player.isMuted) {
                    controller.muteOrUnmute()
                }
                js("casted");
                if (x != true) {
                    if (!o.play) {
                        !player.isPaused ? controller.playOrPause() : ''
                    } else {
                        o.media.Pause()
                    }
                }
                hide(o.mediacontainer);
                o.casting = true
            }, function(e) {
                _log(e);
                PlayLocal();
                o.alert.txt(Lang("casterror"))
            })
        }

        function PlayLocal() {
            words ? o.frame.removeChild(words) : '';
            words = undefined;
            o.casting = false;
            show(o.mediacontainer);
            js("uncasted");
            if (player.savedPlayerState) {
                o.actions.Seek(player.savedPlayerState.currentTime);
                if (player.savedPlayerState.isPaused) {
                    o.media.Pause()
                } else {
                    o.media.Play()
                }
            }
        }

        function PlayChanged() {
            if (player.isPaused) {
                _log("pause");
                js("castpause");
                o.controls.Pause()
            } else {
                _log("play");
                js("castplay");
                o.controls.Play()
            }
        }

        function VolumeChanged() {
            o.actions.Volume(player.volumeLevel)
        }

        function MuteChanged() {
            player.isMuted ? o.actions.Mute() : o.actions.Unmute()
        }

        function StateChanged() {
            if (player.isConnected) {
                if (player.playerState == null) {
                    if (player.currentTime == player.duration) {
                        o.controls.Pause();
                        o.media.onEnded()
                    }
                }
            }
        }

        function Controller() {
            controller = new cast.framework.RemotePlayerController(player);
            controller.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED, Connection);
            controller.addEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED, PlayChanged);
            controller.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED, VolumeChanged);
            controller.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED, MuteChanged);
            controller.addEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED, StateChanged)
        }
        Script('gstatic.com/cv', 'https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1');

        function _log(x) {
            if (v.chromecast && v.log == 1) {
                log("chromecast", x)
            }
        }
        this.button = function(x) {
            current_color = x;
            return "<button is='google-cast-button' id='pjs_cast_button_" + v.id + "' style='padding:0;width:20px;height:20px;--connected-color:" + x + ";--disconnected-color:" + x + ";border:0;background:transparent;pointer-events:auto;cursor:pointer'></button>"
        };
        this.Color = function(x, y) {
            if (current_color != y) {
                var el = document.getElementById("pjs_cast_button_" + v.id);
                if (el) {
                    var style = el.getAttribute("style");
                    var clr = new RegExp(current_color, "gi");
                    style = style.replace(clr, y);
                    el.setAttribute("style", style)
                }
                current_color = y
            }
        };
        this.Volume = function(x) {
            if (player.isConnected) {
                player.volumeLevel = x;
                controller.setVolumeLevel()
            }
        };
        this.Mute = function() {
            if (player.isConnected) {
                if (!player.isMuted) {
                    controller.muteOrUnmute()
                }
            }
        };
        this.Unmute = function() {
            if (player.isConnected) {
                if (player.isMuted) {
                    controller.muteOrUnmute()
                }
            }
        };
        this.Play = function(x) {
            if (player.isConnected) {
                if (player.isPaused) {
                    controller.playOrPause()
                } else {
                    if (player.playerState == null) {}
                }
            }
        };
        this.Pause = function(x) {
            if (player.isConnected && !player.isPaused) {
                controller.playOrPause()
            }
        };
        this.Sub = function() {
            if (v.chromecast.sub == 1) {
                UpdateSub()
            }
        };

        function UpdateSub() {
            if (player.isConnected) {
                var ss = SubStyle();
                var request = new chrome.cast.media.EditTracksInfoRequest([parseInt(o.current_subtitle)], ss);
                cast.framework.CastContext.getInstance().getCurrentSession().getSessionObj().media[0].editTracksInfo(request, function() {
                    _log('subtitle ' + o.current_subtitle)
                }, function(e) {
                    _log('subtitle error' + e)
                })
            }
        }

        function SubStyle() {
            var x = new chrome.cast.media.TextTrackStyle();
            var bga = Math.round(v.sub_bga * 255).toString(16);
            x.backgroundColor = CheckColor(v.sub_bgcolor) + (bga.length == 1 ? bga + '0' : bga);
            x.edgeColor = '#00000016';
            x.edgeType = 'DROP_SHADOW';
            x.fontFamily = 'CASUAL';
            x.fontScale = parseFloat(parseInt(v.sub_sizeproc) / 100);
            x.foregroundColor = CheckColor(v.sub_color) + Math.round(255).toString(16);
            return x
        };
        this.Time = function(x) {
            var x;
            if (player.isConnected) {
                x = player.currentTime
            }
            return x
        };
        this.Duration = function(x) {
            var x;
            if (player.isConnected) {
                x = player.duration
            }
            return x
        };
        this.Exit = function() {
            if (cast && cast.framework) {
                PlayLocal()
            }
        };
        this.Go = function() {
            if (cast && cast.framework) {
                if (player.isConnected) {
                    PlayRemote(o.play)
                }
            }
        };
        this.Seek = function(x) {
            if (player.isConnected) {
                player.currentTime = x;
                controller.seek()
            }
        }
    };
    var PluginEffects = function() {
        if (v.effectsnowonbut != 1 && v.effectsnow == 1) {
            Api("snow")
        }
        this.api = function(x) {
            if (v.effectnoandroid == 1 && o.system.android) {} else {
                Api(x)
            }
        };

        function Api(x) {
            if (x == "resize") {
                if (v.effectsnow == 1 && o.effectsnow) {
                    o.effectsnow.resize()
                }
            }
            if (x == "hide") {
                if (v.effectflip == 1 && !o.fullscreen) {
                    o.mediacontainer.style.transform = "scale(1, -1)"
                }
            }
            if (x == "snow") {
                if (v.effectsnow == 1) {
                    !o.effectsnow ? o.effectsnow = new PluginSnow() : '';
                    o.effectsnow ? o.effectsnow.start() : ''
                }
            }
            if (x == "stopsnow") {
                if (v.effectsnow == 1 && o.effectsnow) {
                    o.effectsnow.stop()
                }
            }
            if (x == "play") {
                if (o.tagvideo) {
                    css(o.media.tag(), {
                        "filter": "none"
                    })
                }
                v.effectnozoom != 1 ? o.media.normalscale() : ''
            }
            if (x == "pause") {
                if (o.tagvideo) {
                    if (v.effectgray == 1 && v.effectblur == 1) {
                        css(o.media.tag(), {
                            "filter": "blur(5px) grayscale(100%)"
                        });
                        v.effectnozoom != 1 ? o.media.scale(0.1) : ''
                    } else {
                        if (v.effectgray == 1) {
                            css(o.media.tag(), {
                                "filter": "grayscale(100%)"
                            });
                            v.effectnozoom != 1 ? o.media.scale(0.1) : ''
                        }
                        if (v.effectblur == 1) {
                            css(o.media.tag(), {
                                "filter": "blur(5px)"
                            });
                            v.effectnozoom != 1 ? o.media.scale(0.1) : ''
                        }
                    }
                }
                if (v.effectflip == 1 && !o.fullscreen) {
                    o.frame.style.transform = "scale(1, 1)";
                    o.mediacontainer.style.transform = "scale(1, 1)"
                }
            }
            if (x == "full") {
                if (v.effectflip == 1) {
                    o.frame.style.transform = "scale(1, 1)";
                    o.mediacontainer.style.transform = "scale(1, 1)"
                }
            }
        }
    };
    var PluginSub = function() {
        var sub = [];
        var upld = [];
        var empty = true;
        var ioff;
        var loading = -1;
        this.start = function(x) {
            Start(x)
        };

        function Start(x) {
            !x ? x = '' : '';
            if (x != '11') {
                var start = 0;
                var urlcnfg = true;
                var memory = '';
                o.subs = x.split(",");
                o.files_subtitle = [];
                o.current_subtitle = -1;
                if (StorageSupport() && v.sub_store == 1) {
                    if (localStorage.getItem("pljssubtitle") != null) {
                        memory = localStorage.getItem("pljssubtitle")
                    }
                } else {
                    if (o.remember_sub) {
                        memory = o.remember_sub
                    }
                }
                for (var i = 0; i < o.subs.length; i++) {
                    if (o.subs[i].indexOf("#0") == 0) {
                        o.subs[i] = fd0(o.subs[i])
                    }
                    if (o.subs[i].indexOf("#" + v.enc2) == 0) {
                        o.subs[i] = o[o.fd[0]](o.subs[i])
                    }
                    if (o.subs[i].indexOf("#" + v.enc3) == 0 && o.subs[i].indexOf(v.file3_separator) > 0) {
                        o.subs[i] = o[o.fd[1]](o.subs[i])
                    }
                    if (o.subs[i].indexOf("[") == 0 && o.subs[i].indexOf("]") > 1) {
                        o.files_subtitle[i] = o.subs[i].substr(o.subs[i].indexOf("[") + 1, o.subs[i].indexOf("]") - 1);
                        o.subs[i] = o.subs[i].substr(o.subs[i].indexOf("]") + 1);
                        urlcnfg = false
                    } else {
                        o.files_subtitle[i] = o.subs[i].substr(o.subs[i].lastIndexOf("/") + 1);
                        o.files_subtitle[i] = o.files_subtitle[i].substr(0, o.files_subtitle[i].lastIndexOf("."))
                    }
                    if (o.subs[i].indexOf("#0") == 0) {
                        o.subs[i] = fd0(o.subs[i])
                    }
                    if (o.subs[i].indexOf("#" + v.enc2) == 0) {
                        o.subs[i] = o[o.fd[0]](o.subs[i])
                    }
                    if (o.subs[i].indexOf("#" + v.enc3) == 0 && o.subs[i].indexOf(v.file3_separator) > 0) {
                        o.subs[i] = o[o.fd[1]](o.subs[i])
                    }
                }
                if (o.files_subtitle.length > 1 && v.sub_all == 1) {
                    o.files_subtitle.push(StringVar('sub_all_title', Lang('together')));
                    o.subs.push("all")
                }
                if (o.files_subtitle.length > 0 && v.sub_off == 1) {
                    if (v.sub_off0 == 1) {
                        ioff = 0;
                        start++;
                        o.files_subtitle.unshift(StringVar('sub_off_title', Lang('off')));
                        o.subs.unshift("")
                    } else {
                        o.files_subtitle.push(StringVar('sub_off_title', Lang('off')));
                        o.subs.push("");
                        ioff = o.files_subtitle.length - 1
                    }
                }
                for (var i = 0; i < o.subs.length; i++) {
                    if (exist(v.default_subtitle)) {
                        if (v.default_subtitle == o.files_subtitle[i]) {
                            start = i;
                            o.current_subtitle = i;
                            v.subtitle_start = 1
                        }
                    }
                    if (memory != '') {
                        if (memory == o.files_subtitle[i]) {
                            start = i;
                            o.current_subtitle = i
                        }
                    }
                }
                if (v.sub_off == 1 && v.subtitle_start == 0) {
                    o.current_subtitle = ioff
                }
                exist(o.controls) ? o.controls.SubtitleChanged() : '';
                if (v.subtitle_start == 1) {
                    o.current_subtitle = start;
                    if (v.sub_all == 1 && o.subs[start] == "all") {
                        SubtitleLoadAll(o.current_subtitle)
                    } else {
                        SubtitleLoad(o.current_subtitle)
                    }
                } else {
                    if (urlcnfg && o.subs.length < 3) {
                        SubtitleLoad(ioff == 0 ? 1 : 0)
                    }
                    v.sub_off != 1 ? o.current_subtitle = -1 : ''
                }
            } else {
                Remove()
            }
        }

        function SubtitleLoad(x) {
            if (exist(o.subs[x])) {
                if (o.subs[x].indexOf(".") > -1) {
                    o.subsor = o.subs[x].split(" or ");
                    o.sub_or = 0;
                    SubtitleLoad2(x)
                } else {
                    if (o.subs[x].indexOf('upld') == 0) {
                        if (upld[o.subs[x].substr(4)]) {
                            SubtitleParse(o.files_subtitle[x], upld[o.subs[x].substr(4)])
                        }
                    }
                }
            }
        }

        function SubtitleLoadAll(x) {
            sub[x] = Object();
            sub[x][0] = Array();
            sub[x][1] = Array();
            for (var i = 0; i < o.subs.length; i++) {
                setTimeout(SubtitleLoad, i * 500, i)
            }
        }

        function SubtitleLoad2(x) {
            var url = trim(o.subsor[o.sub_or]);
            var xhr = XHR(url);
            loading = x;
            o.subload = 1;
            xhr.onload = function() {
                o.subload = 0;
                if (this.readyState == 4 && this.status == 200) {
                    o.subtitle_on = true;
                    SubtitleParse(url, this.responseText, x)
                } else {
                    if (o.sub_or + 1 < o.subsor.length) {
                        o.sub_or++;
                        SubtitleLoad2(loading)
                    } else {
                        SubtitleError("loading_error")
                    }
                }
            };
            xhr.onerror = function(e) {
                o.subload = 0;
                if (o.sub_or + 1 < o.subsor.length) {
                    o.sub_or++;
                    SubtitleLoad2(loading)
                } else {
                    SubtitleError("loading_error")
                }
            };
            xhr.send()
        };

        function SubtitleError(x) {
            log("subtitle not found or access denied");
            if (o.files_subtitle[o.current_subtitle]) {
                if (o.files_subtitle[o.current_subtitle].indexOf(Lang("loading_error")) == -1) {
                    o.files_subtitle[o.current_subtitle] = o.files_subtitle[o.current_subtitle] + ' (' + Lang(x) + ')'
                }
            }
            if (v.subtitle_errdel == 1 && loading > -1) {
                o.subs[loading] = '';
                o.files_subtitle[loading] = ''
            }
            o.current_subtitle = -1;
            o.subtitle_on = false;
            if (o.constrols) {
                o.controls.SubtitleChanged();
                o.controls.refresh()
            } else {
                setTimeout(function() {
                    if (o.controls) {
                        o.controls.SubtitleChanged();
                        o.controls.refresh()
                    }
                }, 100)
            }
            if (exist(o.subtitle)) {
                o.frame.removeChild(o.subtitle);
                o.subtitle = null
            }
        }

        function SubtitleParse(url, x, y) {
            if (x.indexOf("#" + v.enc2) == 0) {
                x = o[o.fd[0]](x)
            }
            if (x.indexOf("#" + v.enc3) == 0 && x.indexOf(v.file3_separator) > 0) {
                x = o[o.fd[1]](x)
            }
            if (url.indexOf('.srt') > -1 || url.indexOf('.ass') > -1 || url.indexOf('.ssa') > -1 || url.indexOf('.vtt') > -1) {
                var l = o.current_subtitle;
                if (exist(sub[l]) && o.subs[l] == "all") {} else {
                    sub[l] = Object();
                    sub[l][0] = Array();
                    sub[l][1] = Array()
                }
                var rows = Array();
                rows = x.split(/\r|\n/);
                var cnt = 1;
                var t1 = 0;
                var t2 = 0;
                var url_shift = (exist(v.subshift) ? v.subshift : 0);
                if (url.indexOf('shift=') > 0) {
                    url_shift = url.substr(url.indexOf('shift=') + 6) * 1
                }
                for (i = 0; i < rows.length; i++) {
                    if (url.indexOf('.srt') > -1 || url.indexOf('.vtt') > -1) {
                        if (rows[i].indexOf('-->') > -1 && rows[i].indexOf(':') > -1) {
                            t1 = TimeSub(rows[i].substr(0, rows[i].indexOf('-->'))) * 1 + url_shift;
                            t1 == 0 ? t1 = 1 : '';
                            t2 = TimeSub(rows[i].substr(rows[i].indexOf('-->') + 4, 12)) * 1 + url_shift;
                            exist(sub[l][0][t1]) ? '' : sub[l][0][t1] = '';
                            for (var j = t1; j < t2; j++) {
                                sub[l][1][j] = t1
                            }
                            cnt++
                        } else {
                            rows[i] = trim(rows[i]);
                            if (rows[i] != '' && rows[i].length > 0 && rows[i] != cnt && rows[i] != 'WEBVTT') {
                                sub[l][0][t1] = (sub[l][0][t1] && sub[l][0][t1] != '' ? sub[l][0][t1] + '<br>' : '') + (o.subs[l] == "all" && y > (ioff == 0 ? 1 : 0) ? '[sub2]' : '') + rows[i] + (o.subs[l] == "all" && y > (ioff == 0 ? 1 : 0) ? '[/sub2]' : '')
                            }
                        }
                    }
                    if (url.indexOf('.ass') > -1 || url.indexOf('.ssa') > -1) {
                        if (rows[i].indexOf('Dialogue:') > -1) {
                            t1 = TimeSub(rows[i].substr((url.indexOf('.ssa') > -1 ? rows[i].indexOf('=0') + 3 : 12), 12)) * 1 + url_shift;
                            t2 = TimeSub(rows[i].substr((url.indexOf('.ssa') > -1 ? rows[i].indexOf('=0') + 14 : 23), 10)) * 1 + url_shift;
                            var p = '';
                            if (rows[i].indexOf('0,,') > 0) {
                                p = rows[i].substr(rows[i].indexOf('0,,') + 3)
                            } else {
                                if (rows[i].indexOf('ffect,') > 0) {
                                    p = rows[i].substr(rows[i].indexOf('ffect,') + 6)
                                }
                            }
                            if (sub[l][0][t1] != undefined) {
                                sub[l][0][t1] += '\n' + (o.subs[l] == "all" && y > (ioff == 0 ? 1 : 0) ? '[sub2]' : '') + p + (o.subs[l] == "all" && y > (ioff == 0 ? 1 : 0) ? '[/sub2]' : '')
                            } else {
                                sub[l][0][t1] = p
                            }
                            sub[l][0][t1] = sub[l][0][t1].replace(/{.*?}/, '');
                            sub[l][0][t1] = sub[l][0][t1].replace(/\\\\N/, '<br>');
                            sub[l][0][t1] = sub[l][0][t1].replace(/\\N/, '<br>');
                            for (var j = t1; j < t2; j++) {
                                sub[l][1][j] = t1
                            }
                        }
                    }
                }
                o.controls.SubtitleChanged();
                o.actions.RenewSubtitle();
                o.controls.refresh()
            } else {
                if (x != '') {
                    if (x.indexOf('[') == 0) {
                        Start(x)
                    } else {
                        SubtitleError("error")
                    }
                } else {
                    Remove();
                    o.controls.refresh()
                }
            }
        }

        function TimeSub(srt) {
            var tmp = srt.split(':');
            var out = 0;
            tmp.length == 2 ? tmp.unshift("00") : '';
            tmp[0] != '00' ? out += tmp[0] * 3600 : '';
            tmp[1] != '00' ? out += tmp[1] * 60 : '';
            out += tmp[2].substr(0, 2) * 1;
            out = out * 10 + tmp[2].substr(3, 1) * 1;
            return out
        };

        function SetSubtitle(x) {
            if (exist(o.current_subtitle)) {
                if (o.current_subtitle != x) {
                    if (x == -1 || (v.sub_off == 1 && x == ioff)) {
                        SubtitleOff()
                    } else {
                        v.sub_shift = 0;
                        o.current_subtitle = x;
                        o.subtitle_on = true;
                        v.subtitle_start = 1;
                        SetSubtitle2(x);
                        js("subtitle", o.files_subtitle[x]);
                        o.controls.SubtitleChanged()
                    }
                } else {
                    if (v.sub_off != 1) {
                        SubtitleOff()
                    }
                }
            }
        }

        function SetSubtitle2(x) {
            if (exist(o.subs[x])) {
                log("Subtitle", x);
                o.current_subtitle = x;
                if (exist(o.files_subtitle[x])) {
                    if (o.storage && v.sub_store == 1) {
                        localStorage.setItem("pljssubtitle", o.files_subtitle[x])
                    } else {
                        o.remember_sub = o.files_subtitle[x]
                    }
                }
                if (o.file_type == "hls" && o.hls_subs == true) {
                    o.media.hlsDashSub(x, "hls")
                } else {
                    if (o.file_type == "dash" && o.dash_subs == true) {
                        o.media.hlsDashSub(x, "dash")
                    } else {
                        if (o.subs[x] == "all") {
                            SubtitleLoadAll(o.current_subtitle)
                        } else {
                            SubtitleLoad(o.current_subtitle)
                        }
                    }
                }
            }
        };
        this.SubUpload = function() {
            if (o.subupld) {
                var x = o.subupld.files;
                if (x[0]) {
                    var y = new FileReader();
                    y.onload = function(e) {
                        var z = e.target.result;
                        upld.push(z);
                        o.current_subtitle = -1;
                        var z = x[0].name;
                        if (z.length > 40) {
                            z = x[0].name.substr(0, 15) + '...' + x[0].name.substr(-15)
                        }
                        if (v.sub_off == 1 && v.sub_off0 == 1) {
                            o.subs.push('upld' + (upld.length - 1));
                            o.files_subtitle.push(z + '');
                            SetSubtitle(o.subs.length - 1)
                        } else {
                            o.subs.unshift('upld' + (upld.length - 1));
                            o.files_subtitle.unshift(z + '');
                            v.sub_off == 1 ? ioff++ : '';
                            SetSubtitle(0)
                        }
                        o.subupld.value = ""
                    };
                    y.readAsText(x[0])
                } else {
                    o.subupld.click()
                }
            }
        };
        this.SetSubtitle = function(x) {
            SetSubtitle(x)
        };
        this.ioff = function() {
            return ioff
        };
        this.setioff = function(x) {
            ioff = x
        };
        this.show = function(x) {
            Show(x)
        };
        this.style = function() {
            Style()
        };
        this.remove = function() {
            Remove()
        };

        function SubtitleOff() {
            js("subtitle", "off");
            o.current_subtitle = v.sub_off == 1 ? ioff : -1;
            v.subtitle_start = 0;
            o.subtitle_on = false;
            o.controls.SubtitleChanged();
            o.hls_subs || o.dash_subs ? SetSubtitle2(o.current_subtitle) : '';
            exist(o.subtitle) ? o.frame.removeChild(o.subtitle) : '';
            o.subtitle = null
        }

        function Show(time) {
            if (v.sub_shift) {
                time = time - v.sub_shift * 1
            }
            if (o.subtitle_on && exist(o.subs)) {
                if (sub) {
                    var x = o.current_subtitle;
                    if (v.subpausehide == 1 && !o.play) {
                        return
                    }
                    if (exist(sub[x])) {
                        if (exist(sub[x][1])) {
                            var t = parseInt(time * 10);
                            if (exist(sub[x][1][t])) {
                                var y = '';
                                y = sub[x][0][sub[x][1][t]];
                                if (!exist(o.subtitle)) {
                                    o.subtitle = createElement('div');
                                    o.frame.appendChild(o.subtitle);
                                    Style()
                                }
                                if (empty) {
                                    show2(o.subtitle)
                                }
                                SubtitleBottom();
                                if (v.sub_split2words == 1 && o.subs[o.current_subtitle] != "all") {
                                    y = PluginSubword(y)
                                }
                                if (v.sub_all == 1) {
                                    y = y.replace(/\[sub2\]/gm, '<span style="color:' + CheckColor(v.sub_color2) + '">');
                                    y = y.replace(/\[\/sub2\]/gm, '</span>')
                                }
                                o.subtitle.innerHTML = '<span style="' + (v.sub_bg == 1 ? 'background-color:' + hex2rgb(v.sub_bgcolor, v.sub_bga) + ';' : '') + '-webkit-box-decoration-break: clone;color:' + CheckColor(v.sub_color) + ';padding:' + v.sub_bgpadding + 'px ' + v.sub_bgpadding * 2 + 'px;border-radius:' + v.sub_bgo + 'px;margin:0 0;line-height:' + (v.sub_lineheight ? v.sub_lineheight : 1.8) + ';font-weight:' + v.sub_weight + '">' + trim(y) + '</span>';
                                if (v.sub_big_fullscreen == 1) {
                                    if (o.fullscreen) {
                                        css(o.subtitle, {
                                            "font-size": ((v.sub_size_fullscreen + ((parseInt(v.sub_sizeproc) - 100) * v.sub_size_fullscreen / 100)) + "px")
                                        })
                                    } else {
                                        css(o.subtitle, {
                                            "font-size": ((v.sub_size + ((parseInt(v.sub_sizeproc) - 100) * v.sub_size / 100)) + "px")
                                        })
                                    }
                                }
                                empty = false
                            } else {
                                if (!empty && exist(o.subtitle)) {
                                    o.subtitle.innerHTML = '';
                                    empty = true;
                                    hide2(o.subtitle)
                                }
                            }
                        }
                    }
                }
            }
        }

        function Style() {
            if (o.subtitle) {
                css(o.subtitle, {
                    "position": "absolute",
                    "width": "100%",
                    "padding-left": "10%",
                    "padding-right": "10%",
                    "left": 0,
                    "color": v.sub_color,
                    "text-align": "center",
                    "box-sizing": "border-box"
                });
                if (v.sub_fonted == 1 && exist(v.sub_font)) {
                    v.sub_font != '' ? css(o.subtitle, {
                        "font-family": v.sub_font
                    }) : ''
                }
                if (v.sub_shadow == 1) {
                    css(o.subtitle, {
                        "text-shadow": "1px 1px 2px black"
                    })
                } else {
                    css(o.subtitle, {
                        "text-shadow": "none"
                    })
                }
                if (v.sub_drag == 1) {
                    PluginMovable(o.subtitle, 'o.subdrag')
                } else {
                    css(o.subtitle, {
                        "pointer-events": "none"
                    })
                }
            }
        }

        function SubtitleBottom() {
            if (!o.subdrag) {
                if (o.controls.ToolbarHidden() || v.sub_bottom > v.toolbar.h) {
                    css(o.subtitle, {
                        "position": "absolute",
                        "top": "auto",
                        "left": 0,
                        "bottom": (v.sub_bottom * 1)
                    })
                } else {
                    css(o.subtitle, {
                        "position": "absolute",
                        "top": "auto",
                        "left": 0,
                        "bottom": (v.sub_bottom * 1 + v.toolbar.h * 1)
                    })
                }
            }
        }

        function Remove() {
            o.current_subtitle = -1;
            o.subtitle_on = false;
            o.thumbs_on = false;
            v.subtitle = null;
            v.thumbnails = null;
            o.sub = null;
            o.subs = null;
            if (exist(o.controls)) {
                o.controls.SubtitleChanged()
            }
            o.files_subtitle = null;
            if (exist(o.subtitle)) {
                o.frame.removeChild(o.subtitle);
                o.subtitle = null
            }
            o.current_subtitle = null;
            o.subtitle_on = false
        }
    };
    var PluginHotIcon = function(x, y) {
        var icon;
        var z = 2;
        if (o.screen_w > 500) {
            z = 4
        }
        if (o.screen_w > 1000) {
            z = 5
        }
        if (v.hotkey[x + 'icon'] == 1) {
            if (v.hotkey[x + y + 'icon'] || x == 'volume') {
                if (v.hotkey[x + y + 'icon'] != '' || x == 'volume') {
                    icon = createElement('div');
                    css(icon, {
                        "position": "absolute",
                        "top": "50%",
                        "left": "50%",
                        "transform": "scale(" + z + ")",
                        "transition": "opacity .3s linear, transform .3s linear"
                    });
                    o.frame.appendChild(icon);
                    icon.innerHTML = x == 'volume' ? ((o.muted ? 0 : Math.round(v.volume * 100)) + '%') : v.hotkey[x + y + 'icon'];
                    css(icon, {
                        "marginTop": ("-" + icon.offsetHeight / 2 + "px"),
                        "marginLeft": ("-" + icon.offsetWidth / 2 + "px")
                    });
                    SvgColor(icon, "#ffffff");
                    setTimeout(Hide, 50)
                }
            }
        }

        function Hide() {
            if (icon) {
                css(icon, {
                    "transform": "scale(" + (z * 2) + ")",
                    "opacity": 0
                });
                setTimeout(Remove, 500)
            }
        }

        function Remove() {
            if (icon) {
                o.frame.removeChild(icon);
                icon = null
            }
        }
    };
    var PluginSettings2 = function() {
        var control;
        var div;
        var title;
        var style = [];
        var subopt;
        var subuplopt;
        var subupl;
        for (var i in v.settings) {
            if (v.settings.hasOwnProperty(i)) {
                if (i.indexOf('combined') > -1) {
                    style[i.substr(8)] = v.settings[i]
                }
            }
        }!exist(style.bottom) ? style.bottom = 30 : 0;
        !exist(style.right) ? style.right = 50 : 0;
        style.color = '#' + (!style.color ? 'fff' : style.color);
        style.bgcolor = '#' + (!style.bgcolor ? '333' : style.bgcolor);
        !exist(style.round) ? style.round = 0 : '';
        !exist(style.size) ? style.size = 80 : '';
        !exist(style.titlesize) ? style.titlesize = 100 : '';
        style.padding = !exist(style.padding) ? 0 : MarPad(style.padding);
        style.margin = !exist(style.margin) ? 0 : MarPad(style.margin);
        var b1 = '<pjsdiv style="display:inline-block;width:20px"></pjsdiv>';
        var b2 = '<pjsdiv style="display:inline-block;width:20px"><svg width="16px" height="6px" viewBox="-1 -1 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polyline stroke="' + style.color + '" stroke-width="1" stroke-linecap="square" fill="none" points="0 2 2 4 5.5 0"></polyline></svg></pjsdiv>';
        var xx;
        var on;
        var shr;
        this.show = function(x) {
            Show(x)
        };
        this.toggle = function(x) {
            if (on) {
                Close()
            } else {
                Show(x)
            }
        };

        function Show(x, scroll) {
            xx = x;
            if (!control) {
                control = createElement('div');
                o.frame.appendChild(control);
                css(control, {
                    "position": "absolute",
                    "bottom": style.bottom + 'px',
                    "right": style.right + 'px',
                    "background": style.bgcolor,
                    "border-radius": style.round,
                    "padding": style.padding,
                    "white-space": "nowrap"
                });
                control.style.zIndex = 99999;
                control.addEventListener("mouseover", Over2, true);
                control.addEventListener("mouseout", Out2, true)
            } else {
                control.innerHTML = ''
            }
            div = [];
            items = [];
            title = [];
            var y = x.substr(9).split(',');
            var pstn = 'right';
            var pstns = ['right', 'left', 'center'];
            var mrgn = style.right;
            for (var i = 0; i < y.length; i++) {
                var z = copyObject(o['files_' + y[i]]);
                var zv = o['current_' + y[i]];
                if (y[i] == "share" && o.share) {
                    z = [];
                    shr = [];
                    for (var j = 1; j <= 16; j++) {
                        if (exist(v["share" + j])) {
                            z.push(Lang(v["share" + j]));
                            shr[z.length] = v["share" + j]
                        }
                    }
                }
                if (z) {
                    if (z.length > 1) {
                        div[i] = createElement('div');
                        control.appendChild(div[i]);
                        css(div[i], {
                            "display": "inline-block",
                            "padding-top": 0,
                            "padding-bottom": 7
                        });
                        if (style.notitle != 1) {
                            title[i] = createElement('div');
                            div[i].appendChild(title[i]);
                            css(title[i], {
                                "pointer-events": "none",
                                "display": "block",
                                "padding-left": 7,
                                "padding-top": 10,
                                "padding-bottom": 10,
                                "padding-right": 27,
                                "color": style.color,
                                "font-size": style.titlesize + "%"
                            });
                            title[i].innerHTML = b1 + '<b>' + Lang(y[i]) + '</b>'
                        }
                        items[i] = [];
                        if (y[i] == "subtitle" && !o.hls_subs && !o.dash_subs) {
                            z.push(Lang("options"));
                            subopt = z.length
                        }
                        if (y[i] == "subtitle" && v.sub_upload == 1 && !o.system.tv && o.sbt && exist(window.FileReader)) {
                            z.push("<input type='file' id='" + v.id + "_subfile2' accept='.vtt,.ass,.srt' style='display:none'/>" + Lang('upload'));
                            subuplopt = z.length
                        }
                        var div2 = createElement('div');
                        div[i].appendChild(div2);
                        css(div2, {
                            "float": "left"
                        });
                        var column = 1;
                        var i2 = 0;
                        for (var j = 0; j < z.length; j++) {
                            if (z[j]) {
                                var crt = true;
                                if (y[i] == "subtitle") {
                                    if (z[j] == Lang('off') && !o.subtitle_on) {
                                        yes = true
                                    }
                                }
                                if (y[i] == "quality") {
                                    if (z[j] == Lang("auto") && o.media.autoQuality()) {
                                        yes = true
                                    }
                                    if (exist(v.forbidden_quality)) {
                                        var fq = v.forbidden_quality.split(",");
                                        for (var k = 0; k < fq.length; k++) {
                                            if (z[j].indexOf(fq[k]) > -1) {
                                                crt = false
                                            }
                                        }
                                    }
                                }
                                if (crt) {
                                    items[i][j] = createElement('div');
                                    css(items[i][j], {
                                        "display": "block",
                                        "margin": style.margin,
                                        "padding": 7,
                                        "padding-right": 27,
                                        "font-size": style.size + "%",
                                        "opacity": 0.7,
                                        "transition": "opacity 0.1s linear,background 0.1s linear",
                                        "cursor": "pointer"
                                    });
                                    var yes = false;
                                    if (y[i] == 'speed') {
                                        z[j] == 1 && style.speed1 != 1 ? z[j] = Lang('normal') : ''
                                    }
                                    if (j == zv || yes) {
                                        css(items[i][j], {
                                            "opacity": 1
                                        });
                                        items[i][j].innerHTML = '<pjsdiv style="pointer-events:none;color:' + style.color + '">' + b2 + z[j] + '</pjsdiv>';
                                        attr(items[i][j], {
                                            "yes": 1
                                        });
                                        items[i][j].classList.add('pjs-' + v.id + '-active-menu')
                                    } else {
                                        items[i][j].innerHTML = '<pjsdiv style="pointer-events:none;color:' + style.color + '">' + b1 + z[j] + '</pjsdiv>'
                                    }
                                    attr(items[i][j], {
                                        "is": (y[i] + ',' + j)
                                    });
                                    if (y[i] == 'quality' && j > 0) {
                                        div2.insertBefore(items[i][j], items[i][j - 1])
                                    } else {
                                        div2.appendChild(items[i][j])
                                    }
                                    items[i][j].addEventListener("mouseover", Over, true);
                                    items[i][j].addEventListener("mouseout", Out, true);
                                    items[i][j].addEventListener("click", Click, true)
                                }
                            }
                            if (div[i].offsetHeight > o.screen_h - style.bottom) {
                                if (j == column * i2 + 1 || column == 1) {
                                    if (scroll && z.length - j > 1) {
                                        css(div2, {
                                            "height": o.screen_h - style.bottom - 40,
                                            "overflow-y": "auto"
                                        })
                                    } else {
                                        i2 == 0 ? i2 = j : '';
                                        div2 = createElement('div');
                                        div[i].appendChild(div2);
                                        css(div2, {
                                            "float": "left"
                                        })
                                    }
                                    column++
                                }
                            }
                        }
                    }
                } else {
                    for (var p = 0; p < pstns.length; p++) {
                        if (y[i].indexOf(pstns[p]) > -1) {
                            pstn = pstns[p];
                            if (y[i].indexOf(':') > -1) {
                                mrgn = y[i].substr(y[i].indexOf(':') + 1) * 1
                            }
                        }
                    }
                }
            }
            if (o.screen_w < control.scrollWidth && !scroll) {
                Show(x, true);
                return
            }
            if (pstn == "left") {
                css(control, {
                    "right": "auto",
                    "left": mrgn + "px",
                    "margin-left": 0
                })
            }
            if (pstn == "center") {
                css(control, {
                    "right": "auto",
                    "left": "50%",
                    "margin-left": -control.offsetWidth / 2 + "px"
                })
            }
            if (pstn == "right") {
                css(control, {
                    "left": "auto",
                    "right": mrgn + "px",
                    "margin-left": 0
                })
            }
            if (subuplopt > 0 && !subupl) {
                o.subupld = document.getElementById(v.id + "_subfile2");
                o.subupld.onchange = o.sbt.SubUpload;
                subupl = true
            }
            on = true
        }

        function Over(e) {
            x = e.target;
            if (x) {
                css(x, {
                    "background": hex2rgb(style.color, 0.2),
                    "opacity": 1
                });
                Over2()
            }
        }

        function Out(e) {
            x = e.target;
            if (x) {
                css(x, {
                    "background": "none"
                });
                if (x.getAttribute("yes") != 1) {
                    css(x, {
                        "opacity": 0.7
                    })
                }
                Out2()
            }
        }

        function Over2() {
            o.controlover = true;
            clearTimeout(o.settingsovertimer)
        }

        function Out2() {
            clearTimeout(o.settingsovertimer);
            o.settingsovertimer = setTimeout(Close, (v.settings.showoverto > 0 ? v.settings.showoverto * 1000 : (o.system.tv ? 2000 : 1000)))
        }

        function Click(e) {
            x = e.target;
            if (x) {
                var y = x.getAttribute("is");
                if (y) {
                    var z = y.split(',');
                    if (z.length == 2) {
                        if (z[0] == "subtitle" && o.sbt) {
                            if (z[1] == subuplopt - 1) {
                                o.sbt.SubUpload();
                                return
                            }
                            if (z[1] == subopt - 1) {
                                o.controls.SubOpt();
                                return
                            } else {
                                o.sbt.SetSubtitle(z[1])
                            }
                        }
                        if (z[0] == "quality") {
                            o.actions.SetQuality(z[1])
                        }
                        if (z[0] == "speed") {
                            o.actions.SetSpeed(z[1])
                        }
                        if (z[0] == "audiotrack") {
                            o.actions.SetAudioTrack(z[1])
                        }
                        if (z[0] == "share") {
                            o.share ? o.share.api(shr[z[1] * 1 + 1]) : ''
                        }
                        if (z[0] == "scale") {
                            if (z[1] == 0) {
                                o.media.scale(v.settings.scale / 100)
                            }
                            if (z[1] == 1) {
                                o.media.scale('-' + v.settings.scale / 100)
                            }
                            if (z[1] == 2) {
                                o.media.normalscale()
                            }
                        }
                    }
                }
            }
            o.play ? setTimeout(Close, 700) : '';
            Show(xx)
        }
        this.hide = function() {
            Close()
        };
        this.update = function() {
            on ? Show(xx) : ''
        };
        this.isVisible = function() {
            return on
        };

        function Close() {
            if (on) {
                if (items) {
                    for (var i = 0; i < items.length; i++) {
                        if (items[i]) {
                            for (var j = 0; j < items[i].length; j++) {
                                if (items[i][j]) {
                                    items[i][j].removeEventListener("mouseover", Over);
                                    items[i][j].removeEventListener("mouseout", Out);
                                    items[i][j].removeEventListener("click", Click)
                                }
                            }
                        }
                    }
                }
                control.innerHTML = '';
                o.controlover = false;
                on = false
            }
        }
    };
    var PluginBlock = function() {
        var ll = 'https://imasdk.googleapis.com/' + Math.random().toString(36).substring(7);
        var ll2 = ll + '';
        var mm = {
            method: 'HEAD',
            mode: 'no-cors'
        };
        if (v.preroll && v.default_adb != 1) {
            if (v.preroll.indexOf("//") > -1) {
                ll = v.preroll.substr(v.preroll.lastIndexOf("//"))
            }
            if (ll.indexOf("[") > 0) {
                ll = ll.substr(0, ll.indexOf("["))
            }
            if (ll != ll2) {
                mm = {
                    method: 'GET'
                }
            }
        }
        if (exist(window['fetch']) && exist(window['Request'])) {
            var x = new Request(ll, mm);
            fetch(x).then(function(y) {
                if (typeof(y) != 'undefined') {} else {
                    o.ab = true;
                    o.controls ? o.controls.refresh() : ''
                }
            }).catch(function(e) {
                o.ab = true;
                o.controls ? o.controls.refresh() : ''
            })
        }
    };
    o.lang_tr = {
        "auto": "Otomatik",
        "play": "Balat",
        "pause": "Duraklat",
        "stop": "Durdur",
        "fullscreen": "Tam ekran",
        "normalscreen": "Tam ekrandan k",
        "settings": "Ayarlar",
        "options": "Ayarlar",
        "volume": "Ses",
        "mute": "Sessiz",
        "unmute": "Sesi a",
        "live": "CANLI YAYIN",
        "playlist": "alma",
        "quality": "Kalite",
        "download": "ndir",
        "subtitle": "Altyazlar",
        "speed": "Hz",
        "error": "hata",
        "unmute_video": "Sesi a",
        "audiotrack": "Dublaj",
        "loading_error": "nykleme hatas",
        "160p": "Kk",
        "240p": "Kkler",
        "360p": "Orta",
        "480p": "Yksek",
        "540p": "Yksek",
        "next": "Sonraki",
        "prev": "nceki",
        "share": "Payla",
        "copied": "Panoya kopyaland",
        "ads": "Reklam",
        "skip": "Atla",
        "skip_after_": "Atla ",
        "adsinvitation": "Reklamverenin web sitesine gidin",
        "sub_sizeproc": "Metin boyutu",
        "sub_shift": "Zaman kaymas",
        "sub_color": "Metin rengi",
        "sub_color2": "Metin rengi 2",
        "sub_bgcolor": "Arka plan rengi",
        "sub_bga": "Arka plan opakl",
        "sub_shadow": "Glge",
        "sub_weight": "Yaz tipi arl",
        "sub_bottom": "Alt girinti",
        "sub_reset": "Sfrla",
        "upload": "Ykle",
        "sleeptimer": "Uyku",
        "offsettimer": "Atlama",
        "hour": "Saat",
        "minute": "Dakika",
        "second": "Saniye",
        "1val": "Evet",
        "0val": "Hayr",
        "of": "iinde",
        "pass": "ifre",
        "casterror": "Cihazda oynatma hatas",
        "castdevice": "Cihazda oynatma",
        "channel": "Kanal",
        "scale": "lek",
        "on": "Ak",
        "off": "Kapal",
        "together": "Hep birlikte",
        "embed": "Kod",
        "url": "Ba",
        "color": "Renk",
        "contrast": "Kontrast",
        "brightness": "Parlaklk",
        "saturate": "Doygunluk",
        "sepia": "Sepya"
    };
    var Motion = function(x) {
        var _ease;
        var _timer;
        var _type;
        var _from;
        var _to;
        var _steps;
        var _step = 0;
        var _speed;
        var _stop = false;
        var _timeout;
        if (x.me != undefined && x.mc != undefined && x.type != undefined && x.to != undefined) {
            if (x.time == null) {
                if (x.type.indexOf("alpha") > -1) {
                    x.to == 0 ? x.time = 0.5 : x.time = 0.2
                } else {
                    x.time = 0.15
                }
            }
            _ease = Ease(x.ease);
            if (x.type.indexOf("scale") == -1) {
                if (exist(o.motions[x.me])) {
                    o.motions[x.me].TheEnd()
                }
                o.motions[x.me] = this
            }
            if (x.show == 1) {
                x.mc.set("display", true)
            }
            _type = x.type.split('|');
            _to = String(x.to).split('|');
            _from = new Array();
            for (var i = 0; i < _type.length; i++) {
                if (!_to[i]) {
                    _to[i] = _to[0]
                }
                if (_type[i] == "alpha") {
                    _from[i] = x.mc.g("opacity")
                }
                if (_type[i] == "alpha_div") {
                    _from[i] = x.mc.style.opacity
                }
                if (_type[i] == "y") {
                    _from[i] = x.mc.g("y")
                }
                if (_type[i] == "x") {
                    _from[i] = x.mc.g("x")
                }
                if (_type[i] == "left") {
                    _from[i] = parseInt(x.mc.style.left)
                }
                if (_type[i] == "top") {
                    _from[i] = parseInt(x.mc.style.top)
                }
                if (_type[i] == "scale") {
                    _from[i] = x.mc.g("scaleX")
                }
                if (_type[i] == "scroll") {
                    _from[i] = x.mc.scrollTop
                }
                if (_type[i] == "scrollleft") {
                    _from[i] = x.mc.scrollLeft
                }
                if (_type[i] == "scaleY") {
                    _from[i] = x.mc.g("scaleY")
                }
                if (_type[i] == "scaleX") {
                    _from[i] = x.mc.g("scaleX")
                }
                if (_type[i] == "width") {
                    _from[i] = x.mc.g("width")
                }
                if (_type[i] == "width_div") {
                    _from[i] = x.mc.offsetWidth;
                    _to[i] = Math.floor(_to[i]);
                    x.me == "line_play" ? log("width", x.me, _from[i], _to[i], x.mc.offsetWidth) : ''
                }
                if (_type[i] == "height") {
                    _from[i] = x.mc.g("height")
                }
                if (_type[i] == "height_div") {
                    _from[i] = x.mc.offsetHeight
                }
                _to[i] = Number(_to[i]);
                _from[i] = Number(_from[i])
            }
            _speed = x.time * 1000 / _ease.length;
            _steps = _ease.length;
            if (_type.length == 1 && _from[0] == _to[0]) {
                End()
            } else {
                setTimeout(onStep, Math.round(_speed))
            }
        }

        function onStep() {
            for (var i = 0; i < _type.length; i++) {
                var tmp = _from[i] + (_to[i] - _from[i]) * (_ease[_step] ? _ease[_step] : 0);
                Alpha(_type[i], tmp);
                if (_type[i] == "y") {
                    x.mc.set("top", tmp)
                }
                if (_type[i] == "x") {
                    x.mc.set("left", tmp)
                }
                if (_type[i] == "left") {
                    x.mc.style.left = tmp + "px"
                }
                if (_type[i] == "top") {
                    x.mc.style.top = tmp + "px"
                }
                if (_type[i] == "scale") {
                    x.mc.set("scale", tmp)
                }
                if (_type[i] == "scaleY") {
                    x.mc.set("scaleY", tmp)
                }
                if (_type[i] == "scaleX") {
                    x.mc.set("scaleX", tmp)
                }
                if (_type[i] == "scroll") {
                    x.mc.scrollTop = tmp
                }
                if (_type[i] == "scrollleft") {
                    x.mc.scrollLeft = tmp
                }
                if (_type[i] == "width") {
                    x.mc.set("width", tmp)
                }
                if (_type[i] == "width_div") {
                    css(x.mc, {
                        "width": tmp
                    })
                }
                if (_type[i] == "height") {
                    x.mc.set("height", tmp)
                }
                if (_type[i] == "height_div") {
                    css(x.mc, {
                        "height": tmp
                    })
                }
            }
            _step++;
            if (!_stop) {
                if (_step == _steps) {
                    End()
                } else {
                    _timeout = setTimeout(onStep, Math.round(_speed))
                }
            }
        }

        function End() {
            _stop = true;
            if (x.hide) {
                if (_type[0] == "alpha_div" || _type[0] == "left") {
                    hide(x.mc)
                } else {
                    x.mc.set("display", false)
                }
            }
            if (x.type.indexOf("scale") == -1) {
                o.motions[x.me] = null;
                delete o.motions[x.me]
            }
            for (var i = 0; i < _type.length; i++) {
                Alpha(_type[i], _to[i])
            }
            clearTimeout(_timeout)
        };

        function Alpha(y, z) {
            if (y == "alpha") {
                x.mc.set("opacity", z)
            }
            if (y == "alpha_div") {
                x.mc.style.opacity = z
            }
        }
        this.TheEnd = function() {
            End()
        };
        this.TheEnd2 = function() {
            _step = _steps - 1;
            onStep();
            End()
        };
        this.XY = function(x0, x1, y0, y1) {
            var e = false;
            for (var i = 0; i < _type.length; i++) {
                if (_type[i] == 'x' && x0 != x1) {
                    e = true
                }
                if (_type[i] == 'y' && y0 != y1) {
                    e = true
                }
            }
            e ? End() : ''
        };

        function Ease(str) {
            switch (str) {
                case "elastic":
                    return [0, 0.432, 0.857, 1.275, 1.372, 1.296, 1.102, 0.957, 0.883, 0.87, 0.914, 0.992, 1.029, 1.041, 1.036, 1.019, 0.996, 0.984, 0.981, 0.988, 1.001, 1.006, 1.007, 1.006, 1.003, 0.999, 0.998, 0.998, 0.998, 0.998, 1];
                    break;
                case "cubic":
                    return [0, 0.096, 0.185, 0.267, 0.344, 0.416, 0.483, 0.547, 0.606, 0.659, 0.705, 0.747, 0.785, 0.818, 0.848, 0.874, 0.897, 0.918, 0.935, 0.95, 0.962, 0.971, 0.979, 0.985, 0.99, 0.994, 0.997, 0.999, 1];
                    break;
                case "back":
                    return [0, 0.146, 0.28, 0.403, 0.513, 0.613, 0.702, 0.78, 0.848, 0.907, 0.956, 0.997, 1.029, 1.055, 1.072, 1.084, 1.092, 1.095, 1.095, 1.093, 1.088, 1.081, 1.072, 1.06, 1.046, 1.033, 1.023, 1.014, 1.007, 1.003];
                    break;
                default:
                    return [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1];
                    break
            }
        }
    };
    var System = function() {
        var N = navigator.appName,
            ua = navigator.userAgent,
            tem;
        var M = ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);
        var M = ua.match(/(opera|chrome|safari|firefox|msie|trident|edge)\/?\s*(\.?\d+(\.\d+)*)/i);
        if (M && (tem = ua.match(/version\/([\.\d]+)/i)) != null) M[2] = tem[1];
        var mtp = navigator.maxTouchPoints;
        this.browser = M ? M[1] : N;
        this.version = M ? M[2] : navigator.appVersion;
        this.touch = navigator.maxTouchPoints > 1;
        this.opera = this.browser == "Opera";
        this.ie9 = this.browser == "MSIE 9.0";
        this.ie = this.browser == "MSIE" || this.browser == "Trident" || this.browser == "Edge";
        this.edge = ua.search(/(edge)\/?\s*/i) > -1;
        this.firefox = this.browser == "Firefox";
        this.safari = this.browser == "Safari";
        this.chrome = window.chrome;
        this.win = ua.search("Windows NT") > -1;
        this.ios = (ua.search(/(iphone|ipad|ipod)\/?\s*/i) > -1) || (navigator.platform === 'MacIntel' && mtp > 1);
        this.tv = v.notv != 1 && ua.search(/(TV|tvOS|webOS|armv|BRAVIA|Roku|Tizen|Philips)\/?\s*/i) > -1;
        this.lg = v.notv != 1 && ua.search(/(LG)\/?\s*/i) > -1;
        this.iphone = ua.search(/(iphone)\/?\s*/i) > -1;
        this.ipad = this.ios && !this.iphone;
        this.webkit = 'WebkitAppearance' in document.documentElement.style;
        if (ua.search(/(android)\/?\s*/i) > -1) {
            mtp > 0 ? this.android = true : this.tv = true;
            if (matchMedia('(pointer:fine)').matches) {
                this.tv = true
            }
        }
        this.mobile = (this.ios || this.android || (ua.search(/(blackberry|iemobile|opera mini)\/?\s*/i) > -1)) && !this.tv;
        this.mutedautoplay = this.safari || this.chrome;
        this.fullscreen = false;
        if (this.ios) {
            this.iosv = parseFloat(ua.substr(ua.indexOf('OS ') + 3, 4).replace('_', '.'));
            if (this.ipad && (!'ontouchstart' in window || mtp < 2)) {
                this.mobile = this.ios = false;
                this.tv = true
            }
        }
        this.desktop = !this.mobile;
        this.mobiletv = this.mobile || this.tv;
        this.wkdt = this.webkit && this.desktop;
        if (o.frame.requestFullScreen || o.frame.requestFullscreen || o.frame.mozRequestFullScreen || o.frame.webkitRequestFullScreen || o.frame.msRequestFullscreen) {
            this.fullscreen = true
        }
    };

    function UpdateObject(obj, obj2) {
        for (var s in obj2) {
            if (typeof(obj2[s]) == 'object') {
                if (s == "events" || s == "file") {
                    obj[s] = obj2[s]
                } else {
                    for (var s2 in obj2[s]) {
                        if (typeof(obj[s]) != 'object') {
                            obj[s] = {}
                        }
                        if (typeof(obj2[s][s2]) == 'object') {
                            for (var s3 in obj2[s][s2]) {
                                if (typeof(obj[s][s2]) != 'object') {
                                    obj[s][s2] = {}
                                }
                                if (typeof(obj2[s][s2][s3]) == 'object') {
                                    for (var s4 in obj2[s][s2][s3]) {
                                        if (typeof(obj[s][s2][s3]) != 'object') {
                                            obj[s][s2][s3] = {}
                                        }
                                        obj[s][s2][s3][s4] = obj2[s][s2][s3][s4];
                                        if (s3 == 'padding' || s3 == 'margin') {
                                            obj[s][s2][s3][s4] = parseInt(obj[s][s2][s3][s4])
                                        }
                                    }
                                } else {
                                    obj[s][s2][s3] = obj2[s][s2][s3];
                                    if (s2 == 'padding' || s2 == 'margin') {
                                        obj[s][s2][s3] = parseInt(obj[s][s2][s3])
                                    }
                                }
                            }
                        } else {
                            obj[s][s2] = obj2[s][s2];
                            if (s == 'padding' || s == 'margin') {
                                obj[s][s2] = parseInt(obj[s][s2])
                            }
                        }
                    }
                }
            } else {
                if (s.indexOf("roll") > 0 && trim(obj2[s]) === "") {} else {
                    obj[s] = SettingsParser(s, obj2[s])
                }
            }
        }
        return obj
    };
    var SettingsParser = function(key, value) {
        if (typeof(value) == 'string') {
            value = trim(value);
            if (key.indexOf("color") > -1 && value != -1) {
                value = CheckColor(value)
            }
        }
        return value
    };

    function StorageSupport() {
        try {
            var storage = window['localStorage'],
                x = '__storage_test__';
            storage.setItem(x, x);
            storage.removeItem(x);
            return true
        } catch (e) {
            return false
        }
    };

    function killMotion(motion_id) {
        if (motion_id) {
            if (exist(o.motions[motion_id])) {
                o.motions[motion_id].TheEnd()
            }
        }
    };
    var Lang = function(x) {
        var y = x;
        if (y) {
            y = x.charAt(0).toUpperCase() + x.slice(1);
            if (y.indexOf("_") > -1) {
                y = y.replace(/_/ig, " ")
            }
        }
        var en = {
            "of": "of",
            "kbps": "kbps",
            "castdevice": "Playback on device",
            "casterror": "Playback error on device",
            "together": "All at once",
            "pass": "Password",
            "0val": "No",
            "sleeptimer": "Sleep",
            "offsettimer": "Skip",
            "1val": "Yes",
            "sub_bottom": "Bottom margin",
            "sub_weight": "Font weight",
            "sub_shadow": "Shadow",
            "sub_bga": "Background opacity",
            "sub_bgcolor": "Background color",
            "sub_sizeproc": "Text size",
            "sub_color": "Text color",
            "sub_color2": "Text color 2",
            "sub_shift": "Time shift",
            "sub_reset": "Reset",
            "prev": "Previous",
            "copied": "Copied to clipboard",
            "160p": "Tiny",
            "240p": "Small",
            "360p": "Medium",
            "480p": "High",
            "540p": "High",
            "720p": "HD",
            "1080p": "Full HD",
            "1296p": "Super HD",
            "1440p": "Quad HD",
            "2160p": "Ultra HD 4K",
            "ads": "Ad",
            "adsinvitation": "Go to the advertiser's website",
            "audiotrack": "Audio",
            "live": "LIVE",
            "fullscreen": "Enter fullscreen",
            "normalscreen": "Exit fullscreen"
        };
        if (exist(en[x])) {
            y = en[x]
        }
        if (exist(o['lang_' + v.lang])) {
            if (exist(o['lang_' + v.lang][x])) {
                y = o['lang_' + v.lang][x]
            }
        }
        if (v.rename) {
            if (v.rename[x]) {
                y = v.rename[x]
            }
        }
        return y
    };
    var gaTracker = function(x, y, z) {
        if (!exist(o.gatracked[y]) && v.playerjscom != 1) {
            var t = o.titlestore ? o.titlestore : (v.title ? v.title : '');
            exist(v.label) ? t = v.label : '';
            if (v.yamtr_event[x] == 1 && v.yamtr == 1 && exist(v.yamtrid)) {
                if (x == "init") {
                    setInterval(yaHit, 300000)
                }
                if (exist(window["yaCounter" + v.yamtrid])) {
                    window["yaCounter" + v.yamtrid].reachGoal('playerjs_' + x, {
                        title: t
                    });
                    log("Yandex", 'playerjs_' + x)
                } else {
                    log("Yandex Metric error")
                }
            }
            if (v.ga_event[x] == 1) {
                if (v.ga == 1) {
                    var gao;
                    if (v.ga4 == 1) {
                        if (window.gtag) {
                            gao = {
                                'label': t
                            };
                            if (v.galabels) {
                                if (typeof(v.galabels) == "object") {
                                    for (var g in v.galabels) {
                                        if (v.galabels.hasOwnProperty(g)) {
                                            gao[g] = v.galabels[g]
                                        }
                                    }
                                }
                            }
                            gtag('event', 'playerjs_' + x, gao)
                        }
                    } else {
                        if (window.ga) {
                            gao = {
                                eventCategory: 'Player',
                                eventAction: y
                            };
                            if (t != '') {
                                gao.eventLabel = t
                            }
                            if (v.gainact == 1 && !o.clicktime) {
                                gao.nonInteraction = 1
                            }
                            ga('user.send', 'event', gao)
                        }
                    }
                }
            }
        }
        z ? o.gatracked[y] = true : ''
    };

    function yaHit() {
        if (exist(window["yaCounter" + v.yamtrid])) {
            window["yaCounter" + v.yamtrid].reachGoal('playerjs_hit')
        }
    };
    var YoutubeID = function(url) {
        var x = '';
        url = url.replace("v=", "{=");
        if (url.indexOf('youtu.be/') > -1) {
            x = url.substr(url.indexOf(".be/") + 4);
            x.replace("/", "")
        } else {
            x = url.split(/(youtu.be\/|v\/|embed\/|watch\?|youtube.capiom\/user\/[^#]*#([^\/]*?\/)*)\??{?=?([^#\&\?]*)/)[3]
        }
        if (x != '') {
            if (x.indexOf("?t=") > 0) {
                v.start = x.substr(x.indexOf("?t=") + 3);
                var h = 0;
                var m = 0;
                var s = 0;
                if (v.start.indexOf("h") > 0) {
                    h = v.start.substr(0, v.start.indexOf("h"));
                    v.start = v.start.substr(v.start.indexOf("h") + 1)
                }
                if (v.start.indexOf("m") > 0) {
                    m = v.start.substr(0, v.start.indexOf("m"));
                    v.start = v.start.substr(v.start.indexOf("m") + 1)
                }
                if (v.start.indexOf("s") > 0) {
                    s = v.start.substr(0, v.start.indexOf("s"));
                    v.start = v.start.substr(v.start.indexOf("s") + 1)
                }
                if (h > 0 || m > 0 || s > 0) {
                    v.start = h * 3600 + m * 60 + s * 1
                }
                x = x.substr(0, x.indexOf("?t="))
            }
        }
        return x
    };
    var js = function(x, y, li, ev) {
        if (x == "init") {
            o.init = true
        }
        if (ev == 1) {
            for (var yi in y) {
                if (y.hasOwnProperty(yi)) {
                    if (typeof(y[yi]) == "object") {
                        y[yi] = ''
                    }
                }
            }
        }
        if (v.eventstracker == 1 && o.init) {
            if (v.eventlisteners == 1 || li == 1) {
                JsEvent(x, y)
            } else {
                if (y != undefined) {
                    if (typeof(y) == 'object') {
                        try {
                            y = JSON.stringify(y)
                        } catch (e) {}
                    }
                }
                if (typeof(v.events) == 'string') {
                    if (v.events.indexOf("{") == 0) {
                        try {
                            v.events = v.events.replace(/\'/ig, '"');
                            v.events = JSON.parse(v.events)
                        } catch (e) {
                            console.log(e)
                        }
                    }
                }
                if (typeof(v.events) == 'object') {
                    if (exist(v.events[x]) || exist(v.events['other'])) {
                        var z = x;
                        if (!exist(v.events[x]) && exist(v.events['other'])) {
                            z = 'other'
                        }
                        if (x.indexOf("vast_") == 0) {
                            if (exist(v.events['vast'])) {
                                z = 'vast'
                            }
                        }
                        try {
                            if (y !== undefined) {
                                eval(v.events[z] + "('" + x + "','" + v.id + "','" + y + "')")
                            } else {
                                eval(v.events[z] + "('" + x + "','" + v.id + "')")
                            }
                        } catch (e) {
                            log("events", e, x)
                        }
                    }
                } else {
                    if (v.events == '') {
                        v.events = "PlayerjsEvents"
                    }
                    try {
                        if (y !== undefined) {
                            eval(v.events + "('" + x + "','" + v.id + "','" + y + "')")
                        } else {
                            eval(v.events + "('" + x + "','" + v.id + "')")
                        }
                    } catch (e) {
                        log("events", e, x, y)
                    }
                }
            }
        }
        if (o.init && v.pjsframe == 1) {
            if (o.pjsfrm) {
                try {
                    o.pjsfrm.contentWindow.postMessage({
                        event: x,
                        info: y
                    }, "*")
                } catch (e) {}
            }
        }
        if (v.postmessage == 1 && li !== 1) {
            var zv = {
                event: x,
                time: o.media ? (x == "seek" ? o.seeked_time : o.media.time()) : 0
            };
            if (y != undefined) {
                zv["data"] = y
            }
            if (x == "duration" || x == "time") {
                zv["duration"] = o.media.duration()
            }
            if (x == "volume" || x == "unmute") {
                zv["volume"] = v.volume
            }
            if (x == "new") {
                zv["id"] = apiProcessor("playlist_id")
            }
            window.parent.postMessage(zv, '*');
            var z = x;
            x == "init" || x == "start" || x == "end" ? z = x + "ed" : '';
            x == "play" ? z = "resumed" : '';
            x == "pause" ? z = "paused" : '';
            x == "mute" ? z = "muted" : '';
            x == "unmute" ? z = "unmuted" : '';
            x == "seek" ? z = "rewound" : '';
            x == "vast_Impression" ? z = "adShown" : '';
            zv["event"] = z;
            if (z != '' && z != x) {
                zv = JSON.parse(JSON.stringify(zv));
                window.parent.postMessage(zv, '*')
            }
        }
    };
    var JsEvent = function(x, y) {
        var ev = document.createEvent('Events');
        if (y !== undefined) {
            ev.info = y
        }
        ev.initEvent(x, true, true);
        o.container.dispatchEvent(ev)
    };
    this.event = function(x, y) {
        o.events[x] = y
    };
    this.api = function(x, y, but) {
        return apiProcessor(x, y, but)
    };

    function apiProcessor(x, y, but) {
        if (exist(o.actions) && typeof(x) == 'string') {
            if (o.destroyed == 1) {
                return
            }
            if (but) {
                if (typeof(but) == 'string') {
                    if (but.indexOf("id:") == 0) {
                        but = o.controls.butByS(but.substr(3), "dom");
                        if (but) {
                            if (x == "button" && y == "toogle") {
                                but.Click()
                            }
                        }
                    }
                }
            }
            if (x == "play" || x == "file") {
                if (exist(y)) {
                    var noads = false;
                    if (typeof(y) == 'string') {
                        y = y.replace(/(\r\n|\n|\r)/gm, "");
                        var seekto = -1;
                        if (y.indexOf("[seek:") > -1 && y.lastIndexOf("]") == y.length - 1) {
                            seekto = y.substr(y.indexOf("[seek:") + 6, y.length - 1);
                            seekto = parseInt(seekto.substr(0, seekto.length - 1));
                            y = y.substr(0, y.indexOf("[seek:"));
                            if (y == '') {
                                o.actions.Seek(seekto);
                                o.actions.Play();
                                return
                            } else {
                                o.seekto = seekto
                            }
                        }
                        if (y.indexOf("[skipads]") > -1) {
                            noads = true;
                            y = y.replace('[skipads]', '')
                        }
                        if (y.indexOf("#" + v.enc2) == 0) {
                            y = o[o.fd[0]](y)
                        }
                        if (y.indexOf("#" + v.enc3) == 0 && y.indexOf(v.file3_separator) > 0) {
                            y = o[o.fd[1]](y)
                        }
                        if (y.indexOf("#0") == 0) {
                            y = fd0(y)
                        }
                        if (v.fplace == 1) {
                            y = fplace(y)
                        }
                        if (y.indexOf(".txt") == y.length - 4) {
                            var xhr = XHR(y);
                            xhr.onload = function() {
                                if (this.readyState == 4 && this.status == 200) {
                                    try {
                                        apiProcessor('play', JSON.parse(this.responseText))
                                    } catch (e) {}
                                }
                            };
                            xhr.send();
                            return
                        }
                        if (y.indexOf("id:") == 0 && exist(o.playlist_dic)) {
                            var z = FindIdPl(y);
                            if (exist(o.playlist_dic[z])) {
                                o.controls.PlaylistPlayId(z);
                                seekto > -1 ? o.seekto = seekto : '';
                                return true
                            } else {
                                return false
                            }
                        }
                        if (y.indexOf("youtubeid:") == 0) {
                            var z = y.substr(10);
                            if (o.file_type == "youtube") {
                                o.media.playByYoutubeId(z);
                                return true
                            } else {
                                y = '//youtu.be/' + z
                            }
                        }
                    }
                    if (x == "play") {
                        o.controls.PreNewPl();
                        o.actions.NewFile(y, undefined, undefined, (noads ? 1 : 0))
                    }
                    if (x == "file") {
                        o.newfile = true;
                        v.autoplay = 0;
                        o.actions.NewFile(y, 1, undefined, (noads ? 1 : 0));
                        o.controls.Duration(0, 0);
                        o.start = false
                    }
                } else {
                    if (x == "play") {
                        o.actions.Play()
                    }
                    if (x == "file") {
                        typeof Papi41 == 'function' ? Papi41() : ''
                    }
                }
            }
            if (x == "preload") {
                if (exist(y)) {
                    o.newfile = true;
                    o.actions.NewFile(y, 1, 1)
                } else {
                    o.media.Preload()
                }
            }
            if (x == "pause") {
                if (o.play) {
                    o.actions.Pause();
                    o.actions.RenewSubtitle()
                }
            }
            if (x == "channel" && exist(y)) {
                o.start && o.channels ? o.channels.SetChannel(y) : ''
            }
            if (x.indexOf("vpaid_") == 0) {
                if (o.vast) {
                    o.vast.VpaidSet(x.substr(6), y)
                }
            }
            if (x == "alert") {
                o.alert.close();
                o.alert = new Alert();
                if (v.alert404 == 1) {
                    o.alert.txt(v.alert404text)
                } else {
                    o.alert.txt("Test message")
                }
                if (v.alert404v == 1 && exist(v.alert404video)) {
                    o.err404v = new PluginErrorVideo()
                }
            }
            if (x == "waiting") {
                !o.start ? o.controls.startcss() : '';
                o.controls.Waiting();
                o.controls.HideElement("control_start")
            }
            if (x == "toggle") {
                o.play ? o.actions.Pause() : o.actions.Play()
            }
            if (x == "stop") {
                v.preload = 0;
                v.autoplay = 0;
                o.media.Recover();
                o.actions.Stop()
            }
            if (x == "reload") {
                o.time = o.media.time();
                o.actions.Reload()
            }
            if (x == "download") {
                if (v.apiprm) {
                    if (v.apiprm.on == 1 && v.apiprm.dwn == 1) {
                        o.actions.Download()
                    }
                }
            }
            if (x == "effect" && exist(y)) {
                if (o.effects) {
                    o.effects.api(y)
                }
            }
            if (x == "share") {
                o.controls.showShare()
            }
            if (x == "startvast" && exist(y)) {
                if (v.vast == 1) {
                    if (y.indexOf('js:') == 0) {
                        v.midroll = y;
                        v.midrolls = true;
                        o.actions.advertising("midroll")
                    } else {
                        if (o.p != '') {
                            var sv = JSON.parse(decode(o.p));
                            for (var l in sv) {
                                if (sv.hasOwnProperty(l)) {
                                    if (exist(sv[l].id)) {
                                        if (y == sv[l].id) {
                                            v.midroll = 'prt' + (exist(sv[l]['cpm']) ? 'cpm' + sv[l]['cpm'] : '') + y + '_' + sv[l].preroll;
                                            v.midrolls = true;
                                            o.actions.advertising("midroll")
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (x == "vastbreak") {
                typeof VastBreak == "function" ? VastBreak() : ''
            }
            if (x == "cuid" && y) {
                v.cuid = y;
                o.continue ? o.continue.updateCuid() : ''
            }
            if (x == "mute") {
                o.actions.Mute()
            }
            if (x == "speed") {
                if (exist(y)) {
                    o.actions.SetSpeed(y)
                } else {
                    return o.files_speed[o.current_speed]
                }
            }
            if (x == "played") {
                if (v.apiprm && o.pld) {
                    if (v.apiprm.pld == 1) {
                        return Math.round((o.pld.filter(Boolean).length - 1) / Math.round(o.media.duration()) * 100)
                    }
                }
            }
            if (x == "speeds") {
                return o.files_speed
            }
            if (x == "unmute") {
                o.actions.Unmute()
            }
            if (x == "thumbnails") {
                if (exist(y)) {
                    v[x] = y;
                    o.actions.Thumbs()
                }
            }
            if (x == "qualities") {
                return o.files_quality
            }
            if (x == "adblock") {
                return o.ab ? true : false
            }
            if (x == "live") {
                return o.media ? o.media.isLive() : false
            }
            if (x == "subtitles") {
                return v.sub_off == 1 ? o.files_subtitle.slice(0, -1) : o.files_subtitle
            }
            if (x == "audiotracks") {
                return o.files_audiotrack
            }
            if (x == "volume" || x == "setVolume") {
                if (exist(y)) {
                    if (y >= 0 && y <= 1) {
                        o.actions.Volume(y)
                    }
                }
                return o.muted ? 0 : v.volume
            }
            if (x == "muted") {
                return exist(o.muted) ? o.muted : false
            }
            if (x == "moveplaylist") {
                o.controls ? o.controls.PlaylistMove(y) : ''
            }
            if (x == "design") {
                y < 2 ? y = '' : '';
                if (exist2(o['u' + y])) {
                    var x2 = JSON.parse(decode(o['u' + y]));
                    var v2 = [];
                    for (var l in v) {
                        if (v.hasOwnProperty(l)) {
                            if (l.indexOf("control_") == 0) {
                                v[l] = null
                            }
                        }
                    }
                    if (typeof x2 == "object") {
                        for (var k in x2) {
                            if (x2.hasOwnProperty(k)) {
                                if (k.indexOf("control_") == 0) {
                                    v[k] = x2[k]
                                }
                                if (k == "toolbar") {
                                    v2[k] = x2[k]
                                }
                            }
                        }
                    }
                    v = UpdateObject(v, v2);
                    var show_settings = false;
                    if (o.controls.SettingsVisible()) {
                        o.controls.Settings();
                        show_settings = true
                    }
                    var show_playlist = false;
                    if (o.controls.PlaylistVisible()) {
                        o.controls.Playlist();
                        show_playlist = true
                    }
                    o.controls.Remove();
                    o.controls = null;
                    o.controls = new Controls();
                    if (o.media.status() == "playing") {
                        o.controls.Play()
                    }
                    o.controls.Volume(v.volume);
                    if (exist(v.title)) {
                        Title(v.title)
                    }
                    if (show_settings) {
                        o.controls.Settings()
                    }
                    if (show_playlist) {
                        o.controls.Playlist()
                    }
                    if (o.fullscreen) {
                        o.controls.Fullscreen()
                    }
                    if (key != 'control_duration') {
                        o.controls.Duration(o.media.time(), o.media.duration())
                    }
                    MainResize()
                }
            }
            if (x == "vars") {
                return v.vars
            }
            if (x == "resize") {
                o.controls.resize(true)
            }
            if (x == "resize2") {
                MainResize()
            }
            if (x == "seek") {
                if (exist(y)) {
                    if (typeof y == "string") {
                        if (y.indexOf("%") > -1) {
                            y = parseInt(y.substr(0, y.indexOf("%")));
                            y = o.media.duration() * y / 100
                        } else {
                            var omt = o.media.time();
                            if (o.continue && !o.start) {
                                if (!o.continue.seeked) {
                                    var f = o.continue.flag();
                                    if (f.t && f.d) {
                                        omt = f.t;
                                        o.continue.seeked = true
                                    }
                                }
                            }
                            if (y.indexOf("+") == 0) {
                                y = omt + parseFloat(y.substr(1))
                            } else {
                                if (y.indexOf("-") == 0) {
                                    y = omt - parseFloat(y.substr(1))
                                }
                            }
                        }
                    }
                    y = y * 1;
                    y < 0 ? y = 0 : '';
                    if (o.media.duration() > 0) {
                        y > o.media.duration() ? y = 0 : ''
                    }
                    if (!exist(o.vast) && !exist(o.vastloader) && o.media.duration() > 0) {
                        o.seekto = undefined;
                        o.actions.Seek(y, true);
                        o.actions.Playing()
                    } else {
                        o.seekto = y
                    }
                }
            }
            if (x == "fullscreen") {
                !o.fullscreen ? o.actions.Fullscreen() : ''
            }
            if (x == "exitfullscreen") {
                o.fullscreen ? o.actions.Normalscreen() : ''
            }
            if (x == "isfullscreen") {
                return o.fullscreen
            }
            if (x == "size") {
                return o.screen_w + '/' + o.screen_h
            }
            if (x == "fix") {
                if (exist(o.minify)) {
                    o.minify.Do()
                }
            }
            if (x == "unfixing" || x == "unfix") {
                if (exist(o.minify)) {
                    o.minify.Un()
                }
            }
            if (x == "time") {
                var _t = o.media ? o.media.time() : 0;
                if (o.continue && v.timestore == 1 && !o.start && _t == 0) {
                    var f = o.continue.flag();
                    if (f.t) {
                        _t = f.t
                    }
                }
                return _t
            }
            if (x == "timeplay") {
                if (o.butplstart) {
                    apiProcessor("play", "id:" + o.butplstart)
                }
                if (o.butseekto) {
                    apiProcessor("seek", o.butseekto);
                    apiProcessor("play")
                }
            }
            if (x == "duration") {
                return o.media ? o.media.duration() : 0
            }
            if (x == "buffered") {
                return o.media ? o.media.loaded() : 0
            }
            if (x == "points") {
                if (y) {
                    v.points = y;
                    o.controls.RenewPoints()
                }
            }
            if (x == "quality") {
                if (exist(y)) {
                    if (but) {
                        v.hd = Switcher(v.hd, y, but);
                        if (o.files_quality.length == 2) {
                            o.actions.SetQuality(v.hd)
                        }
                    } else {
                        o.actions.SetQuality(y)
                    }
                } else {
                    return o.media ? NoSpan(o.media.getQuality()) : 0
                }
            }
            if (x == "audiotrack") {
                if (exist(y)) {
                    if (but) {
                        v.ahd = Switcher(v.ahd, y, but);
                        if (o.files_audiotrack.length == 2) {
                            o.actions.SetAudioTrack(v.ahd)
                        }
                    } else {
                        o.actions.SetAudioTrack(y)
                    }
                } else {
                    return o.media ? o.media.getAudioTrack() : 0
                }
            }
            if (x == "isyoutube") {
                return o.file_type == "youtube"
            }
            if (x == "restart") {
                if (o.current_audiotrack > 0) {
                    o.restart_audio = o.current_audiotrack
                }
                o.actions.NewFile(o.files[o.current_file])
            }
            if (x == "playing") {
                return o.play
            }
            if (x == "started") {
                return o.start
            }
            if (x == "system") {
                return o.system[y]
            }
            if (x == "youtubeready") {
                o.destroyed != 1 ? o.media.onYoutubeReady() : ''
            }
            if (x == "id") {
                return v.id
            }
            if (x == "log") {
                v.log = y
            }
            if (x == "eventstracker") {
                v.eventstracker = y
            }
            if (x == "pip") {
                o.media.PipToggle()
            }
            if (x == "switchpip") {
                o.media.PipSwitch();
                if (but) {
                    o.piped = Switcher(o.piped, y, but)
                }
            }
            if (x == "airplay") {
                o.media.Airplay()
            }
            if (x == "pipwebkit") {
                o.media.PipWebkit()
            }
            if (x == "options" && v.playerjscom != 1) {
                console.log(options)
            }
            if (x == "castinit" && o.chromecast) {
                o.chromecast.init()
            }
            if (x == "subtitle") {
                v.subtitle = y;
                if (exist(y)) {
                    if (y.toString().length < 3 && o.sbt) {
                        o.sbt.SetSubtitle(y * 1)
                    } else {
                        o.actions.Subtitle(y)
                    }
                }
            }
            if (x == "quiz") {
                if (exist(o.quiz)) {
                    if (exist(y)) {
                        o.quiz.api(y)
                    } else {
                        return o.quiz.Active()
                    }
                }
            }
            if (x == "ddd") {
                o.actions.HidePoster()
            }
            if (x == "geo") {
                if (o.geobj) {
                    return o.geobj
                } else {
                    return false
                }
            }
            if (x == "box") {
                var box = createElement("div");
                box.id = y;
                box.style.zIndex = 10000;
                o.frame.appendChild(box)
            }
            if (x == "screenshot") {
                if (o.tagvideo) {
                    var canvas = createElement("canvas");
                    var size = o.media.size();
                    canvas.width = size.width > 0 ? size.width : o.normal_w;
                    canvas.height = size.height > 0 ? size.height : o.normal_h;
                    css(canvas, {
                        "position": "absolute",
                        "top": -canvas.height,
                        "left": -canvas.width,
                        "display": "none"
                    });
                    document.body.appendChild(canvas);
                    var ctx = canvas.getContext('2d');
                    ctx.drawImage(o.media.tag(), 0, 0, canvas.width, canvas.height);
                    var quality = 2;
                    var canvas2 = document.createElement("canvas");
                    canvas2.width = canvas.width * quality;
                    canvas2.height = canvas.height * quality;
                    var ctx2 = canvas2.getContext("2d");
                    ctx2.drawImage(o.media.tag(), 0, 0, canvas.width * quality, canvas.height * quality);
                    if (v.sscopyright == 1 && exist(v.sstext)) {
                        !exist(v.ssfontsize) ? v.ssfontsize = 20 : '';
                        !exist(v.ssfontcolor) ? v.ssfontcolor = "ffffff" : '';
                        ctx2.font = v.ssfontsize + "px Courier, Arial";
                        ctx2.fillStyle = CheckColor(v.ssfontcolor);
                        ctx2.fillText((v.sstext == "domain" ? o.domain : v.sstext), v.ssfontsize, canvas.height * quality - v.ssfontsize - 5)
                    }
                    ctx.drawImage(canvas2, 0, 0, canvas.width, canvas.height);
                    var img;
                    try {
                        img = canvas.toDataURL("image/jpeg")
                    } catch (e) {
                        console.log(e.message);
                        return false
                    }
                    return img
                } else {
                    return false
                }
            }
            if (x == "dash") {
                return o.file_type == x ? o.media.getDASH() : undefined
            }
            if (x == "hls") {
                return o.file_type == x ? o.media.getHLS() : undefined
            }
            if (x == "poster") {
                if (!o.play || v.posterhide === 0) {
                    o.media.Poster(y);
                    return true
                } else {
                    return false
                }
            }
            if (x == "stretch") {
                if (exist(y)) {
                    y == '1/0' ? y = 1 - existv(v.covervideo, 0) : '';
                    v.covervideo = y;
                    o.media.normalscale()
                } else {
                    return existv(v.covervideo, 0)
                }
            }
            if (x == "scale") {
                if (exist(y)) {
                    if (y == 0) {
                        o.media.normalscale()
                    } else {
                        o.media.scale(y)
                    }
                } else {
                    return [o.mediascale.x, o.mediascale.y, o.mediacontainer.style.left, o.mediacontainer.style.top]
                }
            }
            if (x == "title") {
                if (exist(y)) {
                    exist(y) ? v.title = y : '';
                    o.actions.Title('title');
                    return true
                } else {
                    return v.title
                }
            }
            if (x == "invert") {
                o.actions.InvertPlaylist()
            }
            if (x == "push") {
                if (y) {
                    !o.playlist_source ? o.playlist_source = [] : '';
                    if (typeof(y) == 'object') {
                        y = o.playlist_source.concat(y);
                        x = "playlist"
                    }
                }
            }
            if (x == "playlist") {
                if (y) {
                    if (typeof(y) == 'object') {
                        try {
                            o.actions.UpdatePlaylist(y);
                            return true
                        } catch (e) {
                            return false
                        }
                    } else {
                        if (y.indexOf(".txt") == y.length - 4 || y.indexOf(".txt?") > 0) {
                            var xhr = XHR(y);
                            xhr.onload = function() {
                                if (this.readyState == 4 && this.status == 200) {
                                    try {
                                        apiProcessor('playlist', JSON.parse(this.responseText))
                                    } catch (e) {}
                                }
                            };
                            xhr.send();
                            return true
                        } else {
                            if (y == '') {
                                o.actions.UpdatePlaylist([])
                            }
                        }
                    }
                }
            }
            if (x == "next") {
                o.controls ? o.controls.PlaylistNext() : ''
            }
            if (x == "prev") {
                o.controls ? o.controls.PlaylistPrev() : ''
            }
            if (x == "cut") {
                o.controls ? o.controls.Cut(y) : ''
            }
            if (x == "cut?") {
                return o.cutted ? [o.cut1, o.cut2] : 0
            }
            if (x == "flip") {
                o.media ? o.media.flip() : ''
            }
            if (x == "find") {
                if (exist(y) && exist(o.playlist_dic)) {
                    !o.play ? v.autoplay = 0 : '';
                    for (var j in o.playlist_dic) {
                        if (o.playlist_dic.hasOwnProperty(j)) {
                            if (o.playlist_dic[j].pjs_id == y) {
                                y = j
                            }
                        }
                    }
                    if (exist(o.playlist_dic[y])) {
                        o.controls.PlaylistOpenId(y);
                        return true
                    } else {
                        return false
                    }
                }
            }
            if (x == "playlist_folders") {
                var tmp = [];
                if (exist(o.playlist_dic)) {
                    for (var j in o.playlist_dic) {
                        if (o.playlist_dic[j].folder && o.playlist_dic[j].pjs_parent_i == -1) {
                            tmp.push({
                                title: o.playlist_dic[j].title,
                                id: o.playlist_dic[j].id
                            })
                        }
                    }
                }
                return tmp
            }
            if (x == "playlist_id") {
                if (o.plid) {
                    return o.playlist_dic[o.plid].pjs_id ? o.playlist_dic[o.plid].pjs_id : o.plid
                }
            }
            if (x == "playlist_length") {
                if (o.playlist_dic) {
                    return Object.keys(o.playlist_dic).length
                } else {
                    return -1
                }
            }
            if (x == "playlist_title") {
                if (exist(o.playlist_title)) {
                    return o.playlist_title
                }
            }
            if (x == "showplaylist") {
                o.controls.PlaylistShow()
            }
            if (x == "showvlt") {
                o.media.VstLdTxt()
            }
            if (x == "toolbar") {
                o.controls.ShowForce()
            }
            if (x == "vastnow") {
                if (o.vast) {
                    return true
                } else {
                    return false
                }
            }
            if (x == "vastinfo") {
                if (o.vast) {
                    return VastInfo()
                } else {
                    return false
                }
            }
            if (x == "vastpause") {
                if (o.vast) {
                    return o.vast.pause()
                } else {
                    return false
                }
            }
            if (x == "vastresume") {
                if (o.vast) {
                    return o.vast.resume()
                } else {
                    return false
                }
            }
            if (x == "vaststart") {
                if (o.vast) {
                    o.vast.startAd()
                } else {
                    return false
                }
            }
            if (x == "vastmute") {
                if (o.vast) {
                    o.vast.mute()
                } else {
                    return false
                }
            }
            if (x == "captions") {
                v.captions = Switcher(v.captions, y, but);
                o.media.captions()
            }
            if (x == "loop") {
                if (exist(but)) {
                    v.loop = Switcher(v.loop, y, but)
                } else {
                    if (exist(y)) {
                        y == '0/1' ? y = 1 - v.loop : '';
                        v.loop = y
                    } else {
                        return v.loop
                    }
                }
            }
            if (x == "shuffle") {
                if (exist(but)) {
                    v.shuffle = Switcher(v.shuffle, y, but)
                } else {
                    if (exist(y)) {
                        v.shuffle = y
                    } else {
                        return v.shuffle
                    }
                }
            }
            if (x == "autonext" || x == "playlistloop") {
                var z = "autoplaylist";
                x == "playlistloop" ? z = "playlistrewind" : "";
                if (exist(but)) {
                    v.playlist[z] = Switcher(v.playlist[z], y, but)
                } else {
                    if (exist(y)) {
                        y == '0/1' ? y = 1 - v.playlist[z] : '';
                        v.playlist[z] = y
                    }
                }
                return v.playlist[z]
            }
            if (x == "hd") {
                if (o.files_quality.length == 2) {
                    v.hd = o.files_quality[o.current_quality];
                    v.hd = Switcher(v.hd, y, but);
                    if (o.files_quality[0] == v.hd) {
                        o.actions.SetQuality(0)
                    } else {
                        o.actions.SetQuality(1)
                    }
                }
            }
            if (x == "v" && y) {
                if (y.indexOf('file') == 0 || y.indexOf('bk') == 0) {
                    return
                }
                return v[y]
            }
            if (x.indexOf("update:") == 0) {
                var xx = x.substr(7);
                if (typeof(y) == 'object' && typeof(v[xx]) == 'object') {
                    for (var yy in y) {
                        if (y.hasOwnProperty(yy)) {
                            v[xx][yy] = y[yy]
                        }
                    }
                } else {
                    if (x.indexOf('rc_') == -1) {
                        v[xx] = y
                    }
                }
                return true
            }
            if (x.indexOf("text:") == 0) {
                o.controls.customText(x.substr(5), y)
            }
            if (v.clrs == 1 && x.indexOf("color") == 0 && y) {
                pushCSS('pjsdiv, pjsdiv > *{--pjs' + x + ':' + CheckColor(y) + '}')
            }
            if (x == "currentfile") {
                return o.media ? o.media.currentFile() : ''
            }
            if (x == "vrsn") {
                return o.version + ' ' + o.playerid
            }
            if (x == "playerid") {
                return o.playerid
            }
            if (x == "hlserror") {
                return o.hlserror
            }
            if (x == "dasherror") {
                return o.dasherror
            }
            if (x == "visibility") {
                return o.visibility
            }
            if (x == "vastids") {
                return o.vast ? o.vast_adid : undefined
            }
            if (x == "destroy") {
                o.actions.StopMedia();
                v.hotkey.on = 0;
                if (v.stopotherplayers == 1) {
                    for (var i = 0; i < pljssglobal.length; i++) {
                        if (pljssglobal[i]) {
                            if (pljssglobal[i].api("id") == v.id) {
                                pljssglobal[i] = null
                            }
                        }
                    }
                }
                for (var w in window) {
                    if (window[w] == o.this) {
                        window[w] = null
                    }
                }
                if (pljssglobalid == v.id) {
                    pljssglobalid = ''
                }
                o.destroyed = 1;
                o.container.innerHTML = '';
                o.this = null
            }
        } else {
            return false
        }
    };

    function Switcher(x, y, but) {
        var z = trim(y) + '';
        if (y.indexOf("/") > 0) {
            var y2 = y.split("/");
            if (y2.length == 2) {
                if (x == trim(y2[0])) {
                    z = trim(y2[1]);
                    if (but) {
                        but.CustomSwitch(1)
                    }
                } else {
                    z = trim(y2[0]);
                    if (but) {
                        but.CustomSwitch(0)
                    }
                }
            }
        }
        return z
    }

    function XHR(x) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', x, true);
        return xhr
    }

    function FindIdPl(y) {
        var z = y.substr(3);
        if (o.playlist_dic) {
            for (var j in o.playlist_dic) {
                if (o.playlist_dic.hasOwnProperty(j)) {
                    if (o.playlist_dic[j].pjs_id == z) {
                        z = j
                    }
                }
            }
        }
        return z
    }

    function VastInfo() {
        var x;
        if (o.vast) {
            if (o.vast.active()) {
                x = o.vast
            }
        }
        if (!x && o.vastloader) {
            x = o.vastloader
        }
        if (x) {
            var y = {
                is: o.vasttype,
                system: x.info("adsystem"),
                version: x.info("version"),
                vpaid: x.info("isVpaid"),
                url: o.current_vast_url + (x.info("wrapper") ? x.info("wrapper0") + x.info("wrapper") : ''),
                type: x.info("filetype"),
                file: x.info("file"),
                time: (o.media ? o.media.time() : ''),
                volume: x.getVolume(),
                id: o.vast_adid
            };
            if (o.vasttype == "midroll") {
                y.midroll_time = o.midrollcrtm
            }
            return y
        }
    }
    var createElement = function(x) {
        var y = x;
        x == 'div' || x == 'div2' ? y = 'pjsdiv' : '';
        var z = document.createElement(y);
        if (x == 'div2') {
            css(z, {
                "cursor": "pointer",
                "display": "block"
            })
        }
        return z
    };
    var log = function(a, b, c, d, e, f, g) {
        if (v.log == 1 || v.logout == 1) {
            var x = a + (b != undefined ? " " + b : "") + (c != undefined ? " " + c : "") + (d != undefined ? " " + d : "") + (e != undefined ? " " + e : "") + (f != undefined ? " " + f : "") + (g != undefined ? " " + g : "");
            console.log("Playerjs" + (v.pjsframed == 1 ? "2" : "") + ": " + x);
            if (v.logout == 1 && exist(document.getElementById("pjslog"))) {
                document.getElementById("pjslog").innerHTML += x + '<br/>'
            }
        }
    };
    var CustomFonts = function() {
        if (v.fonts == 1 && exist(v.fontnames) && v.fontnames != '') {
            var x = document.createElement('link');
            x.rel = 'stylesheet';
            x.href = 'https://fonts.googleapis.com/css?family=' + v.fontnames.replace(/,/ig, "|").replace(/ /ig, "+");
            document.head.appendChild(x)
        }
    };
    var SvgColor = function(div, clr) {
        var x = ["path", "polygon", "polyline", "rect", "ellipse", "circle"];
        for (var y = 0; y < x.length; y++) {
            var z = div.querySelectorAll("svg " + x[y]);
            if (z.length > 0) {
                for (var y2 = 0; y2 < z.length; y2++) {
                    z[y2].style.fill = clr
                }
            }
        }
    };
    var Time = function(time) {
        time < 0 ? time = 0 : '';
        var full_minutes = o.media.duration >= 600 ? true : false;
        var full_hours = o.media.duration >= 3600 ? true : false;
        var minutes = Math.floor(time / 60);
        var seconds = Math.floor(time - minutes * 60);
        var hours = Math.floor(minutes / 60);
        var days = Math.floor(hours / 24);
        minutes = minutes - hours * 60;
        if (days > 0) {
            hours = hours - days * 24
        }
        if (v.dvrtime == 1 && o.media.isLive()) {
            var d = new Date();
            return String(new Date(d.getTime() + time * 1000).toLocaleTimeString())
        } else {
            return String((days > 0 ? days + ':' : '') + (hours > 0 || full_hours ? hours + ':' : '') + ((hours > 0 || full_minutes) && minutes < 10 ? '0' : '') + minutes + ':' + (seconds < 10 ? '0' : '') + seconds)
        }
    };
    var timeFormat = function(x) {
        var seconds = Math.floor(x);
        var minutes = Math.floor(seconds / 60);
        var hours = Math.floor(minutes / 60);
        minutes = Math.floor(minutes % 60);
        seconds = Math.floor(seconds % 60);
        hours > 0 && minutes < 10 ? minutes = "0" + minutes : "";
        seconds = seconds >= 0 ? ((seconds >= 10) ? seconds : "0" + seconds) : "00";
        var out = (hours > 0 ? hours + ":" : "") + (minutes >= 0 ? minutes : "0") + ":" + seconds;
        if (v.dvrtime == 1 && o.media.isLive()) {
            var d = new Date();
            return String(new Date(d.getTime() + x * 1000).toLocaleTimeString())
        } else {
            return out
        }
    };
    var Href = function() {
        return encodeURIComponent((window.location != window.parent.location) ? document.referrer : document.location.href)
    };
    var NoSpan = function(x) {
        if (x) {
            x = x.toString();
            var spn = x.indexOf(" <span style='opacity");
            if (spn > -1) {
                x = x.substr(0, spn)
            }
        }
        return x
    };
    var Script = function(x, y, z) {
        var t;
        if (!Scripted(x) && y) {
            t = document.createElement('script');
            y == "same" ? y = x : '';
            t.src = y.indexOf('//') == -1 ? '//' + y : y;
            t.async = 1;
            if (z) {
                t.name = z
            }
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(t, s)
        }
        return t
    };
    var Scripted = function(y) {
        var x = false;
        var scripts = document.getElementsByTagName('script');
        for (var i = 0; i < scripts.length; i++) {
            if (scripts[i].src.indexOf(y) > -1) {
                x = true
            }
        }
        return x
    };
    var hex2rgb = function(x, y) {
        if (x) {
            if (x.indexOf('color') > -1 || x.indexOf('var') > -1) {
                return CheckColor(x)
            } else {
                x = x.replace('#', '');
                var r = parseInt(x.length == 3 ? x.slice(0, 1).repeat(2) : x.slice(0, 2), 16);
                var g = parseInt(x.length == 3 ? x.slice(1, 2).repeat(2) : x.slice(2, 4), 16);
                var b = parseInt(x.length == 3 ? x.slice(2, 3).repeat(2) : x.slice(4, 6), 16);
                if (exist(y)) {
                    return 'rgba(' + r + ', ' + g + ', ' + b + ', ' + y + ')'
                } else {
                    return 'rgb(' + r + ', ' + g + ', ' + b + ')'
                }
            }
        }
    };
    var css = function(e, o) {
        if (exist(e)) {
            for (var key in o) {
                if (o.hasOwnProperty(key)) {
                    if (o[key] != 'NaNpx' && o[key] != undefined) {
                        if (typeof o[key] == 'number' && key != 'opacity' && key != 'zIndex') {
                            o[key] += 'px'
                        }
                        if (key.indexOf("color") > -1 || key.indexOf("Color") > -1) {
                            o[key] = CheckColor(o[key])
                        }
                        if (key == "transform") {
                            e.style['-ms-' + key] = o[key];
                            e.style['-moz-' + key] = o[key];
                            e.style['-webkit-' + key] = o[key];
                            e.style['-o-' + key] = o[key]
                        }
                        if (key == "fontFamily") {
                            if (o[key].indexOf(" ") > -1) {
                                o[key] = '"' + o[key] + '"'
                            }
                        }
                        if (key == "box-sizing") {
                            e.style.setProperty(key, o[key], 'important')
                        } else {
                            e.style[key] = o[key]
                        }
                    }
                }
            }
        }
    };
    var Bglines = function(x, clr, b1, b2) {
        var y = existv(b1, 1) * 1;
        var z = existv(b2, 1) * 1;
        css(x, {
            "background": "repeating-linear-gradient(-45deg," + clr + "," + clr + " " + y + "px,rgba(0,0,0,0)," + y + "px,rgba(0,0,0,0) " + (y + z) + "px)"
        })
    };
    var CheckColor = function(c) {
        if (c) {
            c.indexOf("color") == 0 ? c = 'var(--pjs' + c + ')' : '';
            return c.substr(0, 1) != '#' && c.indexOf("var") == -1 && c.indexOf("rgb") == -1 ? c = "#" + c : c
        }
    };
    var controlCSS = function(x, color, y) {
        !color ? color = '#fff' : '';
        color = CheckColor(color);
        var r = random(100000, 1000000);
        x = x.replace(/\(rand\)/g, r);
        x = x.replace(/\(color\)/g, color);
        var _html = x.substr(0, x.indexOf('|||'));
        var _css = x.substr(x.indexOf('|||') + 3);
        var _css2 = '';
        if (o.system.webkit) {
            _css2 = _css.replace(/animation:/g, "-webkit-animation:");
            _css2 = _css2.replace(/animation-/g, "-webkit-animation-");
            _css2 = _css2.replace(/@keyframes/g, "@-webkit-keyframes");
            _css2 = _css2.replace(/transform/g, "-webkit-transform")
        }
        y ? y.innerHTML = _html : '';
        pushCSS(_css2 + _css)
    };
    var indOf = function(x, y) {
        var z;
        if (x) {
            for (var i = 0; i < x.length; i++) {
                if (x[i]) {
                    if (x[i].indexOf(y) > -1) {
                        z = true
                    }
                }
            }
        }
        return z
    };
    var pushCSS = function(x) {
        if (o.css) {
            if (o.css.styleSheet) {
                o.css.styleSheet.cssText = x
            } else {
                o.css.appendChild(document.createTextNode(x))
            }
        }
    };
    var Pos0 = function(x) {
        css(x, {
            "position": "absolute",
            "top": 0,
            "left": 0,
            "width": "100%",
            "height": "100%"
        })
    };
    var Pnt0 = function(x) {
        css(x, {
            "pointerEvents": "none"
        })
    };
    var xhr = function(y, z) {
        var x = new XMLHttpRequest();
        x.open('GET', y, true);
        x.onload = z;
        x.send()
    };
    var FindPjsDiv = function(x) {
        if (x) {
            for (var i = 0; i < 5; i++) {
                if (x.nodeName == "PJSDIV") {
                    break
                } else {
                    if (x.parentElement) {
                        x = x.parentElement
                    }
                }
            }
        }
        return x
    };
    var gif = function(z) {
        var gif = document.createElement("img");
        if (o.gifed.indexOf(z) > -1) {
            o.gifed.push(z);
            if (z.indexOf("?") > 0) {
                z = z + '&' + Math.random()
            } else {
                z = z + '?' + Math.random()
            }
        } else {
            o.gifed.push(z)
        }
        gif.setAttribute('src', z);
        gif.setAttribute('height', '1px');
        gif.setAttribute('width', '1px')
    };
    var attr = function(e, o) {
        for (var key in o) {
            if (o.hasOwnProperty(key)) {
                e.setAttribute(key, o[key])
            }
        }
    };
    var destroy = function(e) {
        if (e) {
            try {
                e.parentNode.removeChild(e);
                e = null
            } catch (e) {}
        }
    };
    var random = function(min, max) {
        return Math.floor(arguments.length > 1 ? (max - min + 1) * Math.random() + min : (min + 1) * Math.random())
    };
    var randomstr = function() {
        return Math.random().toString(36).substring(2, 12)
    };
    var removebykey = function(x, y) {
        x = Object.keys(x).reduce(function(obj, key) {
            if (key != y) {
                obj[key] = x[key]
            }
            return obj
        }, {});
        return x
    };
    var trim = function(x) {
        if (typeof x == "string") {
            return x.replace(/^\s+|\s+$/gm, '')
        } else {
            return x
        }
    };
    var cut = function(x, y, z) {
        var r = false;
        if (x) {
            if (x.indexOf(y) > -1) {
                var r = x.substr(x.indexOf(y) + y.length);
                if (z) {
                    if (r.indexOf(z) > -1) {
                        r = r.substr(0, r.indexOf(z))
                    }
                }
            }
        }
        return r
    };
    var encode = function(x, n) {
        if (n == 0) {
            return "#0" + salt.e(x)
        }
        if (n == -1) {
            return salt.e(x)
        }
        if (n == 1) {
            return "#1" + pepper(salt.e(x), 1)
        }
    };
    var str2obj = function(x) {
        if (v[x] != "") {
            if (typeof v[x] != "string") {
                o[x + 'o'] = v[x]
            } else {
                if (v[x].indexOf("[{") == 0) {
                    try {
                        v[x] = v[x].replace(/pjs'qt/ig, '"');
                        o[x + 'o'] = eval(v[x])
                    } catch (e) {}
                }
            }
        }
    };
    var dechar = function(x) {
        return String.fromCharCode(x)
    };
    var decode = function(x) {
        if (x.substr(0, 2) == "#1") {
            return salt.d(pepper(x.substr(2), -1))
        } else if (x.substr(0, 2) == "#0") {
            return salt.d(x.substr(2))
        } else {
            return x
        }
    };
    var checkBase64 = function(x) {
        if (x) {
            if (x.indexOf('http') == -1 && x.indexOf('.') == -1 && x.length > 100 && x.indexOf('data:') == -1) {
                x = 'data:image/png;base64,' + x
            }
        }
        return x
    };
    var hide = function(x) {
        x ? x.style.visibility = "hidden" : ''
    };
    var show = function(x) {
        x ? x.style.visibility = "visible" : ''
    };
    var hide2 = function(x) {
        x ? x.style.display = "none" : ''
    };
    var show2 = function(x) {
        x ? x.style.display = "block" : ''
    };
    var isVisible = function(x) {
        return x ? x.style.visibility != "hidden" && x.style.display != "none" : false
    };
    var int = function(s) {
        if (typeof s == "string") {
            if (s.indexOf("px") > 0) {
                s = s.substr(0, s.indexOf("px"))
            }
        }
        return parseInt(s)
    };
    var hidden = function(x) {
        return x.style.display == "none"
    };
    var MarginPadding = function(o, x, y) {
        o[x + 'top'] = 0;
        o[x + 'right'] = 0;
        o[x + 'bottom'] = 0;
        o[x + 'left'] = 0;
        if (exist(o[y])) {
            var z = o[y].split(" ");
            if (z.length == 4) {
                o[x + 'top'] = z[0] ? parseFloat(z[0]) : 0;
                o[x + 'right'] = z[1] ? parseFloat(z[1]) : 0;
                o[x + 'bottom'] = z[2] ? parseFloat(z[2]) : 0;
                o[x + 'left'] = z[3] ? parseFloat(z[3]) : 0
            }
        }
        return o
    };
    var MarPad = function(x) {
        if (x) {
            x = x.replace(/ /ig, 'px ')
        }
        return x + 'px'
    };
    var StringVar = function(x, y) {
        return v[x] && v[x] != '' ? v[x] : y
    };
    var abc = String.fromCharCode(65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122);
    var salt = {
        _keyStr: abc + "0123456789+/=",
        e: function(e) {
            var t = "";
            var n, r, i, s, o, u, a;
            var f = 0;
            e = salt._ue(e);
            while (f < e.length) {
                n = e.charCodeAt(f++);
                r = e.charCodeAt(f++);
                i = e.charCodeAt(f++);
                s = n >> 2;
                o = (n & 3) << 4 | r >> 4;
                u = (r & 15) << 2 | i >> 6;
                a = i & 63;
                if (isNaN(r)) {
                    u = a = 64
                } else if (isNaN(i)) {
                    a = 64
                }
                t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a)
            }
            return t
        },
        d: function(e) {
            var t = "";
            var n, r, i;
            var s, o, u, a;
            var f = 0;
            e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "");
            while (f < e.length) {
                s = this._keyStr.indexOf(e.charAt(f++));
                o = this._keyStr.indexOf(e.charAt(f++));
                u = this._keyStr.indexOf(e.charAt(f++));
                a = this._keyStr.indexOf(e.charAt(f++));
                n = s << 2 | o >> 4;
                r = (o & 15) << 4 | u >> 2;
                i = (u & 3) << 6 | a;
                t = t + dechar(n);
                if (u != 64) {
                    t = t + dechar(r)
                }
                if (a != 64) {
                    t = t + dechar(i)
                }
            }
            t = salt._ud(t);
            return t
        },
        _ue: function(e) {
            e = e.replace(/\r\n/g, "\n");
            var t = "";
            for (var n = 0; n < e.length; n++) {
                var r = e.charCodeAt(n);
                if (r < 128) {
                    t += dechar(r)
                } else if (r > 127 && r < 2048) {
                    t += dechar(r >> 6 | 192);
                    t += dechar(r & 63 | 128)
                } else {
                    t += dechar(r >> 12 | 224);
                    t += dechar(r >> 6 & 63 | 128);
                    t += dechar(r & 63 | 128)
                }
            }
            return t
        },
        _ud: function(e) {
            var t = "";
            var n = 0;
            var r = 0;
            var c1 = 0;
            var c2 = 0;
            while (n < e.length) {
                r = e.charCodeAt(n);
                if (r < 128) {
                    t += dechar(r);
                    n++
                } else if (r > 191 && r < 224) {
                    c2 = e.charCodeAt(n + 1);
                    t += dechar((r & 31) << 6 | c2 & 63);
                    n += 2
                } else {
                    c2 = e.charCodeAt(n + 1);
                    c3 = e.charCodeAt(n + 2);
                    t += dechar((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
                    n += 3
                }
            }
            return t
        }
    };
    var pepper = function(s, n) {
        s = s.replace(/\+/g, "#");
        s = s.replace(/#/g, "+");
        var a = sugar(o.y) * n;
        if (n < 0) a += abc.length / 2;
        var r = abc.substr(a * 2) + abc.substr(0, a * 2);
        return s.replace(/[A-Za-z]/g, function(c) {
            return r.charAt(abc.indexOf(c))
        })
    };
    var sugar = function(x) {
        x = x.split(dechar(61));
        var result = '';
        var c1 = dechar(120);
        var chr;
        for (var i in x) {
            if (x.hasOwnProperty(i)) {
                var encoded = '';
                for (var j in x[i]) {
                    if (x[i].hasOwnProperty(j)) {
                        encoded += (x[i][j] == c1) ? dechar(49) : dechar(48)
                    }
                }
                chr = parseInt(encoded, 2);
                result += dechar(chr.toString(10))
            }
        }
        return result.substr(0, result.length - 1)
    };
    var exist = function(x) {
        return x != null && typeof(x) != 'undefined' && x != 'undefined'
    };
    var existv = function(x, y) {
        return exist(x) ? x : y
    };
    var exist2 = function(x) {
        return exist(x) && x != -1 && x != ''
    };
    var copyObject = function(x) {
        if (typeof x == "object") {
            x = JSON.parse(JSON.stringify(x))
        }
        return x
    };
    var findLeft = function(el) {
        var x = el.getBoundingClientRect().left + (window.scrollX ? window.scrollX : window.pageXOffset);
        return x
    };
    var checkFont = function(x) {
        v.globalfont == 1 && exist2(v.globalfontname) ? x = v.globalfontname : '';
        return x
    };
    var findTop = function(el) {
        const rect = el.getBoundingClientRect();
        return rect.top + window.scrollY
    };
    var redirect = function(x, y) {
        if (x != '') {
            if (v.redirectblank == 1) {
                window.open(x)
            } else {
                if (v.redirectparent == 1) {
                    window.parent.location.href = x
                } else {
                    window.location.href = x
                }
            }
            x = ''
        }
    };
    var reRightMenu = function() {
        if (v.rightmenu == 1) {
            o.rightmenu ? o.frame.removeChild(o.rightmenu) : '';
            o.rightmenu = null
        }
    };
    var Actions = function() {
        var _fullscreen_end = false;
        if (o.system.tv) {
            log("tv")
        }
        this.Title = function(x) {
            o.controls ? o.controls.title(x) : ''
        };
        this.File = function(x) {
            if (x) {
                if (typeof(x) == 'string') {
                    x = x.replace(/(\r\n|\n|\r)/gm, "");
                    if (x.indexOf("[{") == 0) {
                        try {
                            x = x.replace(/pjs'qt/ig, '"');
                            x = JSON.parse(x)
                        } catch (e) {
                            x = "incorrect JSON"
                        }
                    }
                }
                if (typeof(x) == 'object') {
                    o.playlist_dic = [];
                    o.playlist_source = copyObject(x);
                    o.playlist = IndexPlaylist(x);
                    if (o.playlist.length > 0) {
                        if (v.playlist.openlast == 1 && !v.plstart) {
                            var keys = Object.keys(o.playlist_dic);
                            var last = keys.slice(-1)[0];
                            last ? v.plstart = last : ''
                        }
                        var y = FindFileInPlaylist();
                        if (y) {
                            x = y.file;
                            o.titlestore = y.title;
                            o.controls ? o.controls.titlepl(y.title) : '';
                            if (exist(y.poster)) {
                                if (o.media) {
                                    o.media.Poster(y.poster)
                                } else {
                                    v.poster = y.poster
                                }
                            }
                            if (exist(y.sub)) {
                                y.subtitle = y.sub
                            }
                            if (exist(y.start)) {
                                v.start = o.seekto = y.start
                            }
                            SettingsTimers("offset");
                            if (exist(y.id)) {
                                o.plid = y.id
                            }
                            var sx = ["subtitle", "vars", "embed", "url", "url2", "url3", "heartbeat", "thumbnails", "label", "download", "points", "remove", "end", "delete", "title2", "skip", "customtext", "volume"];
                            if (exist(v.control_title)) {
                                if (v.control_title.showfrom1file == 1 && v.control_title.showtitleplaylist == 1) {
                                    sx.push("title");
                                    sx.push("t1");
                                    sx.push("t2");
                                    sx.push("t3");
                                    sx.push("t4");
                                    sx.push("t5")
                                }
                            }
                            for (var i = 0; i < sx.length; i++) {
                                if (exist(y[sx[i]])) {
                                    v[sx[i]] = y[sx[i]]
                                }
                            }
                            if (sx.indexOf('title') > 0) {
                                if (v.control_title.templated == 1) {
                                    o.title_template = v.control_title.template;
                                    o.actions.TitleTemplate(y)
                                }
                                o.actions.Title('title')
                            }
                            if (exist(y.volume)) {
                                setTimeout(function() {
                                    o.actions.Volume(y.volume)
                                }, 200)
                            }
                            if (o.controls) {
                                o.controls.UpdatePlaylist(o.playlist);
                                if (v.customtext) {
                                    o.controls.customTextPl()
                                }
                            }
                            if (o.droplist) {
                                o.droplist.Update()
                            }
                        } else {}
                    }
                }
                if (typeof(x) == 'string') {
                    x = fjs(x);
                    if (x.indexOf("#" + v.enc2) == 0) {
                        x = o[o.fd[0]](x)
                    }
                    if (x) {
                        if (x.indexOf("#" + v.enc3) == 0 && x.indexOf(v.file3_separator) > 0) {
                            x = o[o.fd[1]](x)
                        }
                        if (x.indexOf("#0") == 0) {
                            x = fd0(x)
                        }
                        x = fjs(x)
                    }
                    if (v.fplace == 1) {
                        x = fplace(x)
                    }
                    if (x == '') {
                        log("empty file");
                        o.media_error = true;
                        js("error", "empty")
                    }
                    o.files_quality = [];
                    o.files_quality_ag = [];
                    o.files_audiotrack = [];
                    o.current_file = 0;
                    o.current_quality = 0;
                    o.current_audiotrack = 0;
                    v.file_separator == '' ? v.file_separator = ',' : '';
                    if ((x.indexOf(v.qbr1) > -1 && x.indexOf(v.qbr2) > -1) || exist(v.qualities)) {
                        o.files = x.split(v.file_separator)
                    } else {
                        o.files = [x]
                    }
                    o.audiotracks = [];
                    if (exist(v.qualities)) {
                        var qualities = v.qualities.split(v.file_separator)
                    }
                    if (o.files.length > 0) {
                        var q = -1;
                        for (var i = 0; i < o.files.length; i++) {
                            o.files[i] = trim(o.files[i]);
                            if (o.files[i] != '') {
                                if (o.files[i].indexOf(v.qbr1) == 0 && o.files[i].indexOf(v.qbr2) > 1) {
                                    o.files_quality[i] = o.files[i].substr(o.files[i].indexOf(v.qbr1) + v.qbr1.length, o.files[i].indexOf(v.qbr2) - v.qbr2.length);
                                    o.files[i] = o.files[i].substr(o.files[i].indexOf(v.qbr2) + v.qbr2.length)
                                } else {
                                    if (exist(v.qualities)) {
                                        o.files_quality[i] = exist(qualities[i]) ? qualities[i] : ''
                                    } else {
                                        o.files_quality[i] = i + 1
                                    }
                                }
                                var is = 0;
                                if (exist(v.default_quality) && q == -1) {
                                    if (String(v.default_quality).indexOf("num:") == 0) {
                                        if (v.default_quality.substr(4) * 1 == i) {
                                            is = 1
                                        }
                                    }
                                    if (v.default_quality == o.files_quality[i]) {
                                        is = 1
                                    }
                                    if (v.default_quality == "max" && i == o.files.length - 1) {
                                        is = 1
                                    }
                                }
                                if (exist(o.default_quality)) {
                                    if (o.default_quality == o.files_quality[i]) {
                                        is = 1;
                                        q = i
                                    }
                                }
                                if (is == 1) {
                                    o.current_file = i;
                                    o.current_quality = i
                                }
                                o.files[i] = Prefile(o.files[i])
                            }
                        }
                    } else {
                        o.files[0] = Prefile(o.files[0])
                    }
                    return o.files[o.current_file]
                }
            } else {
                return x
            }
        };

        function Prefile(x) {
            if (exist(v.prefile) && x.indexOf("//") == -1) {
                x = v.prefile + x
            }
            return x
        };
        this.InvertPlaylist = function() {
            if (o.playlist) {
                var x = o.playlist.reverse();
                for (var i = 0; i < x.length; i++) {
                    x[i].pjs_i = i
                }
                o.playlist = x;
                o.controls.UpdatePlaylist(o.playlist)
            }
        };
        this.UpdatePlaylist = function(x) {
            if (typeof(x) == 'object') {
                o.playlist_dic = [];
                o.playlist_source = copyObject(x);
                o.playlist = IndexPlaylist(x);
                if (o.controls) {
                    o.controls.UpdatePlaylist(o.playlist)
                }
            }
        };
        this.NewFile = function(x, y, z, no) {
            !exist(y) ? v.autoplay = 1 : '';
            !exist(z) ? v.preload = 0 : '';
            v.duration = undefined;
            v.end = undefined;
            v.delete = undefined;
            o.media_error != 2 ? o.media_error = false : '';
            o.metadata = false;
            o.pipwebkit = false;
            o.reloadTimer = 0;
            o.gatracked = [];
            o.checknative = false;
            o.gained = false;
            o.dvr = false;
            o.bitrate = undefined;
            o.quartile = [false, false, false];
            o.sess = randomstr();
            o.sesstime = 0;
            o.or0 = 0;
            o.pld ? o.pld = [] : '';
            o.file_type != 'pjs' && o.sbt ? o.sbt.remove() : '';
            o.trcka ? o.trcka = [] : '';
            if (o.err404v) {
                o.err404v.remove()
            }
            if (o.media.status() == "playing") {
                this.Stop()
            }
            if (o.cut && o.cutted) {
                o.controls.Cut()
            }
            if (exist(o.share)) {
                o.share.Remove()
            }
            if (exist(o.reloadto)) {
                clearTimeout(o.reloadto)
            }
            js("new");
            if (v.vast == 1 && no != 1) {
                o.actions.VastRecover();
                o.actions.VastRecover('midroll')
            }
            x = this.File(x);
            if (y == 1) {
                o.file_type = ''
            }
            o.media.File(x);
            if ((o.system.mobile || o.system.safari) && !exist(y)) {
                o.actions.Play()
            }
            if (exist(o.custom_aspect)) {
                o.mediascale = {
                    x: 1,
                    y: 1,
                    x0: 1,
                    y0: 1
                };
                o.media.normalscale()
            }
            gaTracker("play", "Play");
            o.media.NativeControls();
            o.controls.QualityChangedNoHand();
            o.controls.AudioTrackChangedNoHand();
            o.controls.refresh();
            o.mediatags ? o.mediatags.read() : ''
        };
        this.TitleTemplate = function(x) {
            var y = false;
            if (x && o.title_template) {
                v.title = o.title_template;
                for (var i = 1; i < 6; i++) {
                    if (exist(x['t' + i])) {
                        v.title = v.title.replace("{" + i + "}", x['t' + i]);
                        y = true
                    }
                }
            }
            return y
        };
        this.MediaReady = function() {
            if (v.autoplay == 1) {
                if (v.observer == 1) {
                    setTimeout(function() {
                        o.actions.Play()
                    }, 500)
                } else {
                    this.Play()
                }
                v.autoplayed = 1
            }
            Thumbs()
        };
        this.Thumbs = function() {
            Thumbs()
        };

        function Thumbs() {
            if (v.thumbs == 1) {
                if (typeof PluginThumbs !== "undefined") {
                    o.th = new PluginThumbs()
                }
            }
        }
        this.NativeControls = function() {
            var x = false;
            if (o.system.mobile) {
                x = true;
                if (v.nativenotiphone == 1 && o.system.iphone) {
                    x = false
                }
                if (v.nativenotipad == 1 && o.system.ipad) {
                    x = false
                }
                if (v.nativenotios == 1 && o.system.ios) {
                    x = false
                }
                if (v.nativenotandroid == 1 && o.system.android) {
                    x = false
                }
            }
            if (v.nativeontv == 1 && o.system.tv) {
                x = true
            }
            return x
        };
        this.Metadata = function() {
            o.media.Volume(v.volume);
            if (o.muted) {
                o.media.Mute()
            }
            o.metadata = true;
            o.controls ? o.controls.refresh() : '';
            if (!o.play && !o.start) {
                v.effects == 1 ? o.effects.api("pause") : ''
            }
            if (o.casting && o.tagvideo) {
                o.chromecast.Exit();
                o.chromecast.Go()
            }
            if (v.vast == 1) {
                if (v.nomidroll != 1 && v.midrolls == 1) {
                    !exist(o.vast) ? MidrollOverlay("midroll", "metadata") : ''
                }
            }
        };
        this.onPlayTag = function() {
            !o.onplay ? onPlay(true) : ''
        };

        function onPlay(x) {
            o.onplay = true;
            if (o.controls) {
                if (o.controls.SettingsVisible()) {
                    o.controls.Settings()
                }
            }
            if (o.droplist) {
                o.droplist.Close()
            }!x ? o.media.Play() : '';
            if (!o.checknative) {
                setTimeout(function() {
                    o.media.NativeControls()
                }, 500)
            }!o.play ? o.controls.Play() : '';
            v.effects == 1 ? o.effects.api("play") : '';
            v.vast == 1 ? o.actions.VastRecover('pauseroll') : '';
            if (o.system.mobile) {
                o.controls.HideInterval()
            }
            if (exist(o.share)) {
                o.share.isOpen() ? o.share.Hide() : ''
            }
            if (v.heartbeats == 1 && exist(v.heartbeat) && o.dt) {
                if (v.heartbeat != '' && !exist(o.heartbeatInterval)) {
                    o.heartbeatInterval = setInterval(Heartbeat, v.heartbeatinterval * 1000);
                    Heartbeat()
                }
            }
        }
        this.Play = function(noads) {
            if (!o.play && o.media) {
                o.actplay = true;
                o.ended = false;
                var stop = false;
                if (o.file_type == "youtube") {
                    if (!o.media.YoutubeReady() && v.autoplay != 1 && v.preload == 1) {
                        stop = true;
                        if (window['YT']) {
                            v.autoplay = 1;
                            o.media.onYoutubeReady()
                        }
                    }
                }
                if (v.pass == 1 && v.passontime == 0) {
                    o.actions.Password();
                    stop = true
                }
                if (o.media_error || stop) {
                    if (o.media_error) {
                        Advertising("preroll") ? datetime(2) : ''
                    }
                } else {
                    o.newfile = false;
                    StopOtherPlayer(!o.start);
                    o.alert.close();
                    if (!o.start) {
                        js("start");
                        o.start = true;
                        if (v.toolbar.hideuntilstarted == 1) {
                            setTimeout(function() {
                                o.controls.resizetext()
                            }, 100)
                        }
                        if (v.toolbar.hideleavetimeout > 0 && v.autoplay == 1) {
                            o.starttimeout = true;
                            setTimeout(StartTimeout, v.toolbar.hideleavetimeout * 1000)
                        }
                        if (v.water == 1 && v.wid) {
                            PluginWater()
                        }
                        for (var i = 0; i < o.vsts.length; i++) {
                            if (v['vast_nofirst' + o.vsts[i]] == 1) {
                                localStorage.setItem("pljsfirst" + o.vsts[i], Date.now())
                            }
                        }
                        if (v.pjsstat == 1 && v.pjsstatid) {
                            PluginStat("start")
                        }
                        js("new");
                        o.controls.startcss();
                        o.controls.refresh();
                        gaTracker("play", "Play");
                        o.ab ? gaTracker("adblock", "AdBlock", 1) : ''
                    } else {
                        gaTracker("resume", "Resume")
                    }
                    if (v.fullonplay == 1 && !o.fullscreen) {
                        var dd = new Date();
                        var tt = dd.getTime();
                        if (tt - o.clicktime < 300) {
                            if (v.fullonplaymobile == 1) {
                                o.system.mobile ? this.Fullscreen() : ''
                            } else {
                                this.Fullscreen()
                            }
                        }
                    }
                    if (o.subtitle_on) {
                        if (v.subpausehide == 1) {
                            show2(o.subtitle)
                        }
                    }
                    if (o.err404v) {
                        o.err404v.remove()
                    }
                    if (noads != 1 && Advertising("preroll") || Advertising("intro")) {
                        datetime(2)
                    } else {
                        if (v.redirect == 1 && exist(v.redirectonplay) && !exist(options.redirect)) {
                            redirect(v.redirectonplay);
                            stop = true
                        }
                        if (!stop) {
                            log("Play");
                            if (o.file_type != 'pdf') {
                                o.media.duration() > 0 ? o.controls.Duration(o.media.time(), o.media.duration()) : ''
                            }
                            if (!o.start2) {
                                o.start2 = true;
                                if (v.toolbar.hideleavetimeout > 0 && v.autoplay == 1) {
                                    o.starttimeout = true;
                                    setTimeout(StartTimeout, v.toolbar.hideleavetimeout * 1000)
                                }
                            }
                            var playroll = false;
                            if (o.media.time() > 1 && v.pauserollonplay == 1 && noads != 1 && !isVastBgLoad() && !exist(o.vast) && !exist(o.vastloader)) {
                                playroll = Advertising("pauseroll")
                            }
                            if (playroll) {
                                isVastBgLoad() ? onPlay(false) : ''
                            } else {
                                onPlay(false)
                            }
                        }
                    }
                }
            } else {
                o.media ? o.media.Play() : ''
            }
        };

        function StartTimeout() {
            o.starttimeout = false;
            o.controls.refresh()
        }
        this.Pause = function() {
            if (o.play) {
                o.actplay = false;
                log("Pause");
                o.media.Pause();
                o.controls.Pause();
                js("pause");
                v.posteronpause == 1 ? ShowPoster() : '';
                v.posterhidepause == 1 ? HidePoster2() : '';
                v.effects == 1 ? o.effects.api("pause") : '';
                if (o.subtitle_on) {
                    if (v.subpausehide == 1) {
                        hide2(o.subtitle)
                    }
                }
                if (!exist(o.vast) && !exist(o.vastloader) && v.pauserollonplay == 0) {
                    Advertising("pauseroll")
                }
                o.onplay = false
            }
        };
        this.Mute = function() {
            o.media.Mute();
            o.controls.Mute();
            o.muted = true;
            js("mute")
        };
        this.Unmute = function() {
            o.media.Unmute();
            o.muted = false;
            o.controls.Unmute();
            o.media.Volume(v.volume);
            js("unmute")
        };
        this.Volume = function(x, y) {
            x < 0.01 ? x = 0 : '';
            x > 1 ? x = 1 : '';
            if (x <= 0) {
                this.Mute();
                v.volume = 0;
                x = 0
            } else {
                if (o.muted) {
                    this.Unmute()
                }
                v.volume = x
            }
            js("volume", x);
            o.controls.Volume(x, y);
            o.media.Volume(x)
        };
        this.Waiting = function() {
            o.controls.Waiting()
        };
        this.StopWaiting = function() {
            o.controls ? o.controls.StopWaiting() : ''
        };
        this.Progress = function() {
            this.StopWaiting()
        };
        this.Seeked = function() {
            o.actions.UpdatePlay();
            this.StopWaiting()
        };
        this.Duration = function(time, duration) {
            if (o.continue && !o.start) {
                var f = o.continue.flag();
                if (f.t && f.d) {
                    time = f.t
                }
            }
            o.controls ? o.controls.Duration(time, duration) : ''
        };
        this.LoadedData = function(time, duration) {
            if (exist(o.seekto) && o.file_type != "youtube" && !o.media.isLive()) {
                o.actions.Seek(o.seekto, false);
                o.seekto = undefined
            }
        };
        this.ScreenClick = function() {
            var d = new Date();
            o.clicktime = d.getTime();
            var x = false;
            if (o.controls.SettingsVisible() && v.settings.always != 1) {
                o.controls.SettingsClose();
                x = true
            }
            if (o.droplist) {
                if (o.droplist.Visible()) {
                    o.droplist.Close();
                    x = true
                }
            }
            if (v.playlist.always == 0) {
                if (o.controls.PlaylistVisible() && v.playlist.autohide == 1) {
                    o.controls.Playlist();
                    x = true
                }
            }
            if (v.redirect == 1 && exist(v.redirectonclick) && !exist(options.redirect)) {
                redirect(v.redirectonclick);
                x = true
            }
            if (o.muted && v.unmuteonclick == 1) {
                o.actions.Unmute();
                v.unmuteonclick = 0;
                x = true
            }
            if (!x) {
                if (v.hotkey.on == 1 && v.hotkey.icons == 1 && v.hotkey.playiconbut == 1) {
                    PluginHotIcon('play', (o.play ? 0 : 1))
                }
                this.Toggle()
            }
        };
        this.ControlsBgClick = function() {
            if (o.controls.SettingsVisible()) {
                o.controls.Settings()
            }
        };
        this.Toggle = function() {
            if (o.media.status() == "playing") {
                v.scrnstp == 1 ? this.StopMedia() : this.Pause()
            } else {
                this.Play()
            }
            Sub()
        };
        this.Seek = function(sec, hand) {
            if (sec < o.media.duration()) {
                if (v.control_line.dontseekforward == 1) {
                    if (sec > o.media.time()) {
                        return
                    }
                }
                if (v.delete > 0) {
                    sec < v.delete ? sec = v.delete : ''
                }
                o.seeked_time = sec;
                o.media.Seek(sec);
                if (hand) {
                    o.controls.Seek(sec, o.media.duration())
                }
                o.seeking = true;
                o.seeking_time = o.media.time();
                Sub(o.seeking_time)
            }
        };
        this.Open = function(url, target, endfull) {
            if (o.media.status() == "playing" && o.mode != 'audio') {
                Pause();
                if (o.fullscreen && endfull) {
                    o.actions.Normalscreen()
                }
            }
            window.open(url, target)
        };
        this.Download = function() {
            var x = o.media.currentFile();
            if (exist(v.download)) {
                x = v.download
            }
            if (x != '') {
                js("download");
                var win = window.open(x, (v.downself == 1 ? '_self' : '_blank'));
                win.focus()
            }
        };
        this.UpdatePlay = function(x) {
            var time = o.media.time();
            var duration = o.media.duration();
            o.controls.Played(time, duration, x)
        };
        this.Playing = function() {
            var time = o.media.time();
            var duration = o.media.duration();
            var delta = duration > 0 ? time / duration : 0;
            if (!o.seeking) {
                o.controls ? o.controls.Played((o.seekto > 0 ? o.seekto : time), duration) : ''
            } else {
                time != o.seeking_time ? o.seeking = false : ''
            }
            if ((v.ga == 1 || v.yamtr == 1) && duration > 0) {
                gaTrackPlay("play25", "Play 25%", delta, 0.25);
                gaTrackPlay("play50", "Play 50%", delta, 0.50);
                gaTrackPlay("play75", "Play 75%", delta, 0.75)
            }
            for (var i = 0; i < 3; i++) {
                if (!o.quartile[i]) {
                    if (delta >= i * 0.25 + 0.25) {
                        Quartile(i)
                    }
                }
            }
            v.reloadlog == 1 ? log(1, time, duration) : '';
            if (v.reload == 1 || v.fileorto > 0) {
                if (o.play) {
                    var z = false;
                    var rld = false;
                    if (v.reloadlive == 1 && v.reload == 1) {
                        if (!o.media.isLive()) {
                            z = true
                        }
                    }
                    if (time > 0) {
                        if (time == o.time && !z) {
                            rld = true
                        } else {
                            o.reloadTimer = 0
                        }
                        o.time = time
                    } else {
                        if (v.reloadstart == 1) {
                            var ld = o.media.loaded();
                            v.reloadlog == 1 ? log(2, ld, o.timeld) : '';
                            if (!z) {
                                if (ld == o.timeld) {
                                    rld = true
                                } else {
                                    o.reloadTimer = 0
                                }
                            }
                            o.timeld = ld
                        }
                    }
                    if (rld) {
                        o.reloadTimer++;
                        if (v.reload == 1) {
                            v.reloadlog == 1 ? log(3, o.reloadTimer) : '';
                            if (o.reloadTimer == v.reloadtimeout * (1000 / o.timerTime)) {
                                o.actions.Reload()
                            }
                        } else if (v.fileorto > 0 && o.media.urlsl() > 1) {
                            if (o.reloadTimer == v.fileorto * (1000 / o.timerTime)) {
                                o.media.onError('OR timeout')
                            }
                        }
                    }
                }
            }
            if (v.apiprm) {
                if (v.apiprm.pld == 1 && duration > 0) {
                    !o.pld ? o.pld = [] : '';
                    o.pld[Math.round(time)] = 1
                }
            }
            if (v.vast == 1) {
                if (v.nomidroll != 1 && v.midrolls == 1) {
                    !exist(o.vast) ? MidrollOverlay("midroll", time, duration) : ''
                }
                if (v.nooverlay != 1 && v.overlays == 1) {
                    !exist(o.vast) ? MidrollOverlay("overlay", time, duration) : ''
                }
            }
            if (v.intros == 1 && v.introstart > 0) {
                if (time >= v.introstart) {
                    if (!exist(o.vast)) {
                        if (Advertising("intro")) {
                            o.media.Pause();
                            o.controls.Pause()
                        }
                        v.introstart = 0
                    }
                }
            }
            SettingsTimers("play");
            if (v.pass == 1 && v.passontime > -1) {
                PasswordTime(time, duration)
            }
            if (o.subtitle_on) {
                Sub(time)
            }
            if (o.storage && v.timestore == 1) {
                if (o.continue) {
                    o.continue.write(time, duration)
                }
            }
            if (o.cutted) {
                o.cut ? o.cut.play(time) : ''
            }
            if (exist(v.end)) {
                if (v.end > 0 && time > v.end) {
                    if (o.file_type == "youtube") {
                        o.media.Pause();
                        o.media.Seek(v.start > 0 ? v.start : 0)
                    } else {
                        o.media.Recover();
                        o.actions.Stop()
                    }
                    v.start > 0 ? o.seekto = v.start : '';
                    o.actions.Ended()
                }
            }
            if (exist(v.remove)) {
                var r1 = v.remove.split(",");
                for (var i = 0; i < r1.length; i++) {
                    var r2 = r1[i].split("-");
                    if (r2.length == 2) {
                        if (time > r2[0] && time < r2[1]) {
                            o.media.Seek(r2[1] * 1 + (o.system.safari ? 1 : 0))
                        }
                    }
                }
            }
            if (v.tracking == 1) {
                if (typeof PluginTrack !== "undefined") {
                    PluginTrack(time, delta)
                }
            }
        };

        function Quartile(x) {
            o.quartile[x] = true;
            if (v.timestore == 1 && v.playedstore == 1 && v.playedquartile == x) {
                if (o.storage && o.plid) {
                    o.continue ? o.continue.writePl(o.plid) : ''
                }
            }
        }

        function gaTrackPlay(x, y, t, p) {
            if (!exist(o.gatracked[y])) {
                if (t > p) {
                    gaTracker(x, y, 1)
                }
            }
        };
        this.Reload = function() {
            o.reloadTimer = 0;
            exist(o.reloadto) ? clearTimeout(o.reloadto) : '';
            if (v.reloadjustevent == 1) {
                js("reload")
            } else {
                o.seekto > 0 || o.media.isLive() ? '' : o.seekto = o.media.time() + (v.reloadplus > 0 ? 1 : 0);
                var openpl = o.controls.PlaylistVisible();
                js("reload");
                o.media.reload();
                openpl && v.playlist.autohide == 1 ? o.controls.PlaylistShow() : ''
            }
        };
        this.Stopped = function() {
            o.controls.Played(0, 0);
            o.controls.Loaded(0, 0);
            o.actions.Duration(0, 0);
            o.controls.StopWaiting()
        };
        this.Loading = function() {
            if (o.media) {
                var time = o.media.loaded();
                if (v.pjsiframed == 1) {
                    js("loaded", time)
                }
                var duration = o.media.duration()
            }
            o.controls ? o.controls.Loaded(time, duration) : ''
        };
        this.Ended = function() {
            js("fileend");
            o.ended = true;
            if (v.loop == 1) {
                if (o.file_type == "youtube") {
                    this.Stop()
                }
                v.vast == 1 ? o.actions.VastRecover('preroll') : '';
                if (v.start > 0) {
                    o.actions.Seek(v.start)
                }
                this.Play()
            } else {
                if (o.media.isLive() || o.file_type == "youtube") {
                    this.Stop()
                } else {
                    if (v.finishrewind == 1) {
                        o.actions.Seek((v.start > 0 ? v.start : 0), true);
                        if (o.system.ie) {
                            o.media.Pause()
                        }
                    }
                }
                o.controls.onEnded();
                v.intros == 1 ? v.outros = 1 : '';
                if (Advertising("postroll") || Advertising("outro")) {} else {
                    End()
                }
            }
        };
        this.Fullscreen = function() {
            var stop = false;
            var error = false;
            o.fs_error = false;
            o.fullscreen_process = true;
            setTimeout(function() {
                o.fullscreen_process = false
            }, 3000);
            for (var x in o.motions) {
                if (o.motions.hasOwnProperty(x)) {
                    if (exist(o.motions[x])) {
                        try {
                            o.motions[x].TheEnd2()
                        } catch (e) {}
                    }
                }
            }
            try {
                o.fullscreen_start = true;
                if (((o.system.ios && v.nativefullios == 1) || (o.system.android && v.nativefulldroid == 1)) && o.tagvideo && !o.nativecontrols) {
                    var x = o.media.tag();
                    if (x) {
                        if (x.webkitSupportsFullscreen) {
                            NativeEnterFs();
                            stop = true
                        }
                    }
                }
                if (!stop) {
                    var fspr;
                    var y = o.frame;
                    if ((o.file_type == "dm" || o.file_type == "vimeo") && o.system.iphone && v.nativefullios == 1) {
                        o.media.iosfull();
                        return
                    }
                    if (y.requestFullscreen) {
                        o.realfullscreen = true;
                        fspr = y.requestFullscreen({
                            navigationUI: "hide"
                        });
                        if (fspr !== undefined) {
                            fspr.then(function() {}).catch(function(error) {})
                        }
                    } else if (y.requestFullScreen) {
                        y.requestFullScreen({
                            navigationUI: "hide"
                        });
                        o.realfullscreen = true
                    } else if (o.frame.mozRequestFullScreen) {
                        y.mozRequestFullScreen({
                            navigationUI: "hide"
                        });
                        o.realfullscreen = true
                    } else if (y.webkitRequestFullScreen) {
                        y.webkitRequestFullScreen({
                            navigationUI: "hide"
                        });
                        o.realfullscreen = true
                    } else if (y.msRequestFullscreen) {
                        y.msRequestFullscreen();
                        o.realfullscreen = true
                    }
                }
            } catch (e) {
                error = true;
                log(e)
            }
            if (!o.realfullscreen && !stop) {
                if (o.system.webkit && o.iniframe) {
                    NativeEnterFs()
                } else {
                    this.FullscreenUI()
                }
            }
            if (!error) {
                setTimeout(PostFullscreen, 200)
            }
        };

        function NativeEnterFs() {
            var x = o.media.tag();
            if (x) {
                o.nativefull = true;
                o.media.nativeSubtitle();
                x.webkitEnterFullScreen();
                x.addEventListener("webkitendfullscreen", iosExitFullscreen)
            }
        }

        function NativeExitFs() {
            var x = o.media.tag();
            if (x) {
                x.webkitExitFullscreen()
            }
        };
        this.NativeExitFs = function() {
            NativeExitFs()
        };

        function PostFullscreen() {
            if (o.fs_error != true) {
                if (o.ispipkit) {
                    o.media.PipWebkit()
                }
                if (v.hotkey.volumewheelfull == 1) {
                    VolumeWheelX(true);
                    o.volumewheel = true
                }
                v.effects == 1 ? o.effects.api("full") : '';
                js("fullscreen");
                gaTracker("full", "Fullscreen", 1)
            }
        };
        var volumewheelin;
        var lastwheel = {
            x: 0,
            y: 0
        };

        function VolumeWheel(e) {
            if (o.droplist) {
                if (o.droplist.OpenScroll()) {
                    return
                }
            }
            if (e.wheelDelta != 0) {
                e.deltaX != 0 ? lastwheel.x++ : lastwheel.x--;
                e.deltaY != 0 ? lastwheel.y++ : lastwheel.y--;
                if ((v.hotkey.whlskfll == 1 || v.hotkey.scrollwheelfull == 1) && o.fullscreen && lastwheel.y > lastwheel.x) {
                    clearInterval(volumewheelin);
                    volumewheelin = setInterval(function() {
                        lastwheel = {
                            x: 0,
                            y: 0
                        };
                        clearInterval(volumewheelin)
                    }, 1000)
                } else {
                    o.hidden_volume_over = true;
                    clearInterval(volumewheelin);
                    volumewheelin = setInterval(function() {
                        o.hidden_volume_over = false;
                        o.controls.resize();
                        lastwheel = {
                            x: 0,
                            y: 0
                        };
                        clearInterval(volumewheelin)
                    }, 2000);
                    o.controls.resize()
                }
                if (lastwheel.x > lastwheel.y) {
                    if (e.deltaX > 0) {
                        o.actions.Volume(parseFloat(v.volume) - v.hotkey.wheelstep / 10, "no")
                    } else {
                        o.actions.Volume(parseFloat(v.volume) + v.hotkey.wheelstep / 10, "no")
                    }
                } else {
                    var st = (o.system.win ? -v.hotkey.wheelstep / 10 : v.hotkey.wheelstep / 10);
                    if (v.hotkey.scrollwheelfull == 1 && o.fullscreen) {
                        o.media.scale((e.deltaY > 0 ? st : -st))
                    } else if (v.hotkey.whlskfll == 1 && o.fullscreen) {
                        apiProcessor("seek", (e.deltaY > 0 ? "+" + st * 10 : "-" + st * 10))
                    } else {
                        o.actions.Volume(parseFloat(v.volume) + (e.deltaY > 0 ? st : -st), "no");
                        o.controls.volumescroll()
                    }
                }
            }
        }

        function iosExitFullscreen() {
            if (o.system.ios) {
                o.media.removeNativeSubtitle();
                js("exitfullscreen")
            }
            o.nativefull = false
        }
        this.FullscreenUI = function() {
            if (o.fullscreen_start) {
                o.fullscreen = true;
                o.controls.Fullscreen();
                if (!o.realfullscreen) {
                    if (exist(o.parentIframe)) {
                        try {
                            css(o.parentIframe, {
                                'width': '100%',
                                'height': '100%',
                                'position': 'fixed',
                                'left': 0,
                                'top': 0,
                                'zIndex': "100000"
                            })
                        } catch (err) {}
                    }
                    css(o.frame, {
                        'width': '100%',
                        'height': '100%',
                        'position': 'fixed',
                        'left': 0,
                        'top': 0,
                        'zIndex': "100000"
                    });
                    o.screen_w = o.frame.offsetWidth;
                    o.screen_h = o.frame.offsetHeight;
                    try {
                        document.body.style.overflow = 'hidden';
                        if (!exist(o.playlist)) {
                            document.ontouchmove = function(e) {
                                e.preventDefault()
                            }
                        }
                    } catch (err) {}
                }
                if (v.fullblack == 1) {
                    css(o.frame, {
                        'backgroundColor': '#000000'
                    })
                }
                if (v.fzoom == 1 && o.system.webkit == 1) {
                    var sw = window.screen.width;
                    var fz = 1;
                    for (var i = 1; i < 6; i++) {
                        if (sw > 1000 * i) {
                            fz = existv(v['fzoom' + (1000 * i)], i)
                        }
                    }
                    if (fz > 1) {
                        o.frame.style.zoom = fz;
                        o.fzoom = fz
                    }
                }
                if (o.droplist) {
                    o.droplist.Close()
                }
                Sub();
                o.fullscreen_start = false
            }
        };
        this.Normalscreen = function() {
            _fullscreen_end = true;
            if (document.cancelFullScreen) {
                document.cancelFullScreen()
            } else if (document.exitFullscreen) {
                document.exitFullscreen()
            } else if (document.cancelFullscreen) {
                document.cancelFullscreen()
            } else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen()
            } else if (document.webkitCancelFullScreen) {
                document.webkitCancelFullScreen()
            } else if (document.msExitFullscreen) {
                document.msExitFullscreen()
            }
            if (!o.realfullscreen) {
                this.NormalscreenUI(false)
            }
        };
        this.changeAspect = function(x, y) {
            NewAspect(x, y)
        };

        function NewAspect(x, frmvst) {
            if (exist(o.vast) && !frmvst) {
                o.resizeonplay = x
            } else {
                var stop = false;
                var coh = o.container_w / x;
                if (exist(o.parentIframe) && v.notframe != 1) {
                    try {
                        css(o.parentIframe, {
                            'height': coh
                        })
                    } catch (err) {
                        stop = true;
                        log("iframe crossdomain issue")
                    }
                }
                if (!stop) {
                    o.aspect = x;
                    o.container_h = coh;
                    if (o.aspect > 0) {
                        css(o.container, {
                            'height': coh
                        })
                    }
                    js("height", coh)
                }
                if (o.vast && !o.fullscreen) {
                    o.screen_h = coh;
                    o.vast.Resize()
                }
            }
        };
        this.NormalscreenUI = function(x) {
            if (_fullscreen_end || x) {
                o.fullscreen = false;
                o.nativefull = false;
                if (!o.realfullscreen) {
                    if (exist(o.parentIframe)) {
                        try {
                            css(o.parentIframe, {
                                'position': 'static',
                                'left': 0,
                                'top': 0,
                                'zIndex': 'unset'
                            });
                            css(o.parentIframe, o.parentIframe_style);
                            css(o.parentIframe, {
                                'width': o.normal_w,
                                'height': o.normal_h
                            })
                        } catch (err) {}
                    }
                    css(o.frame, {
                        'width': o.normal_w,
                        'height': o.normal_h,
                        'position': 'absolute',
                        'left': 0,
                        'top': 0,
                        'zIndex': 'unset'
                    });
                    try {
                        document.body.style.overflow = 'auto';
                        document.ontouchmove = function(e) {
                            return true
                        }
                    } catch (err) {}
                }
                o.controls.Normalscreen();
                if (v.fullblack == 1) {
                    css(o.frame, {
                        'backgroundColor': v.screencolor
                    });
                    if (v.transparent == 1) {
                        o.frame.style.backgroundColor = 'transparent'
                    } else {
                        css(o.frame, {
                            'backgroundColor': v.screencolor
                        })
                    }
                }
                if (o.fzoom > 1) {
                    o.frame.style.zoom = 1;
                    o.fzoom = 1
                }
                if (v.hotkey.volumewheelfull == 1) {
                    VolumeWheelX(false);
                    o.volumewheel = false
                }
                if (o.droplist) {
                    o.droplist.Close()
                }
                Sub();
                o.subdrag ? o.subdrag = false : '';
                o.controls.PlaylistHere();
                _fullscreen_end = false;
                js("exitfullscreen");
                o.realfullscreen = false;
                o.fullscreen_process = false
            }
        };
        this.volumewheel = function(x) {
            VolumeWheelX(x)
        };

        function VolumeWheelX(x) {
            lastwheel = {
                x: 0,
                y: 0
            };
            if (x) {
                window.addEventListener("wheel", VolumeWheel)
            } else {
                clearInterval(volumewheelin);
                window.removeEventListener("wheel", VolumeWheel)
            }
        }
        this.Stop = function() {
            v.preload = 0;
            o.controls.Pause();
            o.actions.Stopped();
            o.media.Volume(v.volume);
            if (o.controls.SettingsVisible()) {
                o.controls.Settings()
            }
            if (o.muted) {
                this.Mute()
            }
            if (exist(o.heartbeatInterval)) {
                clearInterval(o.heartbeatInterval);
                o.heartbeatInterval = null
            }
            Sub(0);
            log("stop");
            js("stop")
        };
        this.StopMedia = function() {
            v.preload = 0;
            v.autoplay = 0;
            o.media.Recover();
            o.actions.Stop()
        };
        this.SetQuality = function(x) {
            if (exist(o.current_quality)) {
                if (o.current_quality != x) {
                    o.current_quality = x;
                    if (v.qualitystore == 1) {
                        o.default_quality = o.files_quality[x];
                        if (o.storage) {
                            localStorage.setItem("pljsquality", o.default_quality)
                        }
                    }
                    o.media.SetQuality(x);
                    js("quality", o.files_quality[x]);
                    o.controls.QualityChanged(x)
                }
            }
        };
        this.AirplayChanged = function() {
            o.controls ? o.controls.AirplayChanged() : ''
        };
        this.SetAudioTrack = function(x) {
            if (exist(o.current_audiotrack)) {
                if (o.current_audiotrack != x) {
                    o.current_audiotrack = x;
                    if (v.trackstore == 1) {
                        o.default_audio = v.default_audio = o.files_audiotrack[x];
                        if (o.storage) {
                            localStorage.setItem("pljstrack", o.default_audio)
                        }
                    }
                    o.media.SetAudioTrack(x);
                    js("audiotrack", x);
                    o.controls.SettingChanged("audiotrack")
                }
            }
        };
        this.SetSpeed = function(x, z) {
            x == '0.0' ? x = 0.1 : '';
            var y = x;
            String(y).indexOf('.') > 0 ? z = 1 : '';
            y = y * 1;
            if (!z) {
                y = x == o.speed1 ? 1 : o.files_speed[x];
                o.current_speed = x
            }
            if (o.line_speed || z) {
                o.custom_speed = y;
                for (var i = 0; i < o.files_speed.length; i++) {
                    if (y <= o.files_speed[i] * 1) {
                        o.current_speed = i;
                        break
                    }
                }
            }
            if (o.storage && v.speedstore == 1) {
                localStorage.setItem("pljsspeed", y)
            }
            js("speed", y);
            o.media.SetSpeed(y);
            o.controls.SettingChanged("speed")
        };

        function Sub(x) {
            o.sbt ? o.sbt.show(exist(x) ? x : o.media.time()) : ''
        };
        this.RenewSubtitle = function() {
            if (o.sbt) {
                Sub();
                o.sbt.style()
            }
        };
        this.Subtitle = function(x) {
            if (typeof(PluginSub) == 'function') {
                !o.sbt ? o.sbt = new PluginSub() : '';
                o.sbt.start(x)
            }
        };
        var vast_and;
        var vast_or;
        var vast_type;
        var vasturl;

        function Advertising(x) {
            if (v["vast_" + x + "timebreak"] > 0 && o.storage) {
                var tb = localStorage.getItem("pljs" + x + "_" + o.d);
                if (tb) {
                    var ct = new Date();
                    o.clicktime = ct.getTime();
                    var ct2 = (ct.getTime() - tb) / 3600000;
                    if (ct2 < v["vast_" + x + "timebreak"]) {
                        return false
                    }
                }
            }
            if (v["vast_" + x + "timelimit"] > 0) {
                if (o.media.duration() > 0) {
                    if (o.media.duration() < v["vast_" + x + "timelimit"] * 60) {
                        if (v["vast_" + x + "timelimited"] > 0) {
                            v["vast_" + x + "_" + "andlimit"] = v["vast_" + x + "timelimited"]
                        } else {
                            return false
                        }
                    }
                }
            }
            if (o.compilations.indexOf("VAST") != -1 && v.vast == 1 && !o.noads && v[x + 's'] == 1) {
                if (typeof VastVideo == "undefined") {
                    return false
                }
                if (x == "intro" || x == "outro") {
                    if (typeof PluginIntro !== "undefined") {
                        vasturl = [];
                        return PluginIntro(x)
                    }
                }
                if (exist(o.vast) || exist(o.vastloader)) {
                    if (!isVisible(o.vastcontainer) || isVastBgLoad(o.vasttype)) {
                        log('ad bg');
                        return false
                    } else {
                        log('ad now');
                        return true
                    }
                } else {
                    if (exist(v[x])) {
                        if (v[x].toString().indexOf(".") > -1 || v[x].toString().indexOf(":") > -1 || v[x].toString().indexOf("[yandex]") > -1) {
                            js("vast_init", x);
                            if (!isVastBgLoad(x) && x != "overlay") {
                                setTimeout(function() {
                                    o.play || (o.vastloader == null && o.vast == null) ? '' : o.actions.Waiting()
                                }, 10);
                                Curtain()
                            }
                            vast_and = 0;
                            vast_or = 0;
                            vast_type = x;
                            vasturl = v[x].split(" and ");
                            o.vast_loaders = [];
                            o.adsinchain = vasturl.length;
                            VastAndLimit();
                            o.adscounter = 1;
                            o.adsfirst = true;
                            for (var i = 0; i < vasturl.length; i++) {
                                vasturl[i] = vasturl[i].split(" or ")
                            }
                            v[x.concat("_", "recover")] = v[x];
                            v[x] = null;
                            o.vasttype = x;
                            if (x != 'overlay') {
                                o.vast = new VastVideo()
                            }
                            o.vastloader = new VastLoader();
                            for (var i = 0; i < vasturl.length; i++) {
                                for (var j = 0; j < vasturl[i].length; j++) {
                                    var _url = trim(vasturl[i][j]);
                                    if (_url.indexOf("[50%]") > 0) {
                                        var tmp = random(1, 2);
                                        vasturl[i][j] = vasturl[i][j].replace("[50%]", "");
                                        if (tmp == 2) {
                                            vasturl[i][j] = ''
                                        }
                                    }
                                }
                            }
                            if (v.vast_preload == 1) {
                                for (var i = 0; i < vasturl.length; i++) {
                                    var n = i == 0 ? 1 : 0;
                                    if (vasturl[i].length > n) {
                                        for (var j = n; j < vasturl[i].length; j++) {
                                            var _url = trim(vasturl[i][j]);
                                            if (o.system.ie9) {
                                                VastAddPreload(_url)
                                            } else {
                                                setTimeout(VastAddPreload, i * 100, _url)
                                            }
                                        }
                                    }
                                }
                            }
                            if (vasturl[0][0] == '') {
                                VastNext()
                            } else {
                                o.vastloader.Load(trim(vasturl[0][0]), x)
                            }
                            return true
                        } else {
                            return false
                        }
                    } else {
                        return false
                    }
                }
            } else {
                return false
            }
        };
        this.advertising = function(x) {
            Advertising(x)
        };

        function MidrollOverlay(w, x, d) {
            if (exist(o[w + 'o']) && v[w + 's'] == 1) {
                var y;
                for (var i in o[w + 'o']) {
                    if (o[w + 'o'].hasOwnProperty(i)) {
                        if (!exist(o[w + 'o'][i].worked) && exist(o[w + 'o'][i].time) && exist(o[w + 'o'][i].vast)) {
                            var z = o[w + 'o'][i].time.toString();
                            var ok = false;
                            if (z) {
                                if (x == "metadata") {
                                    if (z == x) {
                                        ok = true
                                    }
                                } else {
                                    if (z.indexOf("%") > 0) {
                                        if (d > 0) {
                                            z = parseInt(z.substr(0, z.indexOf("%"))) * d / 100
                                        } else {
                                            z = -1
                                        }
                                    } else {
                                        z = parseInt(z)
                                    }
                                    if (x >= z) {
                                        if (v['vast_' + w + 'rest'] > 0 && z > -1) {
                                            if (x - z >= v['vast_' + w + 'rest']) {
                                                z = -1
                                            }
                                        }
                                        if (z > -1) {
                                            ok = true
                                        }
                                    }
                                }
                                if (o[w + 'o'][i].minduration && o.media.duration() > 0) {
                                    if (o.media.duration() < o[w + 'o'][i].minduration * 1) {
                                        o[w + 'o'][i].worked = true;
                                        ok = false
                                    }
                                }
                                if (ok) {
                                    y = o[w + 'o'][i].vast;
                                    v[w] = o[w + 'o'][i].vast;
                                    o[w + 'crtm'] = o[w + 'o'][i].time;
                                    o[w + 'skipimprsd'] = o[w + 'o'][i].skipimpessed;
                                    if (Advertising(w)) {
                                        o[w + 'o'][i].worked = true;
                                        break
                                    }
                                }
                            }
                        }
                    }
                }
            }
        };

        function VastBgLoad() {
            if (isVastBgLoad()) {
                if (o.vast_impressions == 0 || v['vast_' + o.vasttype + 'bgload2'] == 1) {
                    css(o.vastcontainer, {
                        "opacity": 0,
                        "visibility": "hidden",
                        "top": 2000
                    });
                    log(o.vasttype + " hide");
                    o.vasttype == 'midroll' ? o.media.Play() : ''
                }
            }
        }

        function isVastBgLoad(z) {
            var y = false;
            var x = ['midroll', 'pauseroll'];
            for (var i = 0; i < x.length; i++) {
                if (o.vasttype == x[i] || z == x[i]) {
                    if (v['vast_' + x[i] + 'bgload'] == 1) {
                        y = true
                    }
                }
            }
            return y
        };
        this.isVastBgLoad = function(x) {
            return isVastBgLoad(x)
        };
        this.VastImpression = function(x) {
            x ? '' : VastVisible();
            o.vasttype == "midroll" ? o.midrollimprsd.push(o.current_vast_url) : ''
        };
        this.VpaidStarted = function() {
            VastVisible()
        };
        this.VastShow = function() {
            VastVisible()
        };

        function VastVisible() {
            if (isVastBgLoad()) {
                if (o.play) {
                    o.media.Pause();
                    o.controls.Pause()
                }
                log(o.vasttype + " show");
                css(o.vastcontainer, {
                    "opacity": 1,
                    "visibility": "visible",
                    "top": 0
                });
                o.vastfrombg = 1
            }
            if (o.nativefull && !o.realfullscreen) {
                NativeExitFs()
            } else {
                if (v["vast_" + o.vasttype + "normal"] == 1 && o.fullscreen) {
                    o.actions.Normalscreen()
                }
            }
        };
        this.VastReady = function(x) {
            o.vastloader = null;
            o.vastfrombg = 0;
            log("VAST ready", o.vasttype);
            js("vast_ready", o.vasttype);
            if (x.type == "overlay") {
                var ovr = new VastOverlay(x);
                o.overlays.push(ovr)
            } else {
                if (exist(o.vast)) {
                    if (v.preload == 0 && v.vastbgpreload == 1 && o.media.time() == 0 && o.media.duration() == 0) {
                        v.preload = 1;
                        o.media.Preload()
                    }
                    if ((!o.vast.tagLive() || x.isVpaid) && o.vastgo > 0) {
                        log("VAST renew");
                        o.vast.Remove();
                        o.vast = null;
                        o.vast = new VastVideo()
                    }
                    if (isVastBgLoad()) {
                        VastBgLoad()
                    } else {
                        if (o.play) {
                            o.media.Pause();
                            o.controls.Pause()
                        }
                    }
                    o.vastgo++;
                    if (o.adsfirst && v.vast_longtimeout > 0) {
                        clearTimeout(o.vast_longtimeout);
                        o.vast_longtimeout = setTimeout(VastLongTimeout, v.vast_longtimeout * 1000 * 60);
                        if (exist(v.vast_longtimemsg)) {
                            if (v.vast_longtimemsg != '') {
                                o.vast_longtomsg ? o.vast_longtomsg.remove() : '';
                                o.vast_longtomsg = new PluginVastTimeMsg()
                            }
                        }
                    }
                    o.adsfirst = false;
                    if (v.vast_prestarttimeout > 0) {
                        log("VAST startdelay");
                        js("vast_startdelay");
                        setTimeout(VastGo, v.vast_prestarttimeout * 1000, x)
                    } else {
                        VastGo(x)
                    }
                } else {
                    log("VAST alarm")
                }
            }
        };

        function VastGo(x) {
            o.vast.Go(x)
        }

        function VastLongTimeout() {
            if (exist(o.vast)) {
                if (o.vast.active() && o.vast_impressions == 0) {
                    o.vast.RemoveForNextAd();
                    log("VAST timeout " + v.vast_longtimeout);
                    vasturl = [];
                    VastRemoveAndPlay()
                }
            }
        }
        this.VastError = function() {
            js('vast_error', o.vasttype);
            log("VAST error");
            VastCheckNext()
        };
        this.VastNext = function() {
            VastCheckNext()
        };

        function VastCheckNext() {
            var n = VastAndLimit();
            log("VAST next " + !n);
            !n ? VastNext() : VastRemoveAndPlay()
        };
        this.VastRemoveUrl = function(x) {
            if (v[o.vasttype + "_recover"]) {
                for (var i = 0; i < 3; i++) {
                    v[o.vasttype + "_recover"] = v[o.vasttype + "_recover"].replace(x + (i == 0 ? ' and ' : (i == 1 ? ' or ' : '')), '')
                }
            }
        };

        function VastAndLimit() {
            var x = false;
            if (o.vasttype) {
                var val = v['vast_' + o.vasttype + '_' + 'andlimit'];
                var va2l = v['vast_' + o.vasttype + '_' + 'and2limit'];
                if (va2l || val) {
                    if (va2l > 0 && o.vast_starts > 0) {
                        o.adsinchain = va2l;
                        if (o.vast_impressions >= va2l) {
                            x = true
                        }
                    } else {
                        if (val > 0) {
                            o.adsinchain = val;
                            if (o.vast_impressions >= val) {
                                x = true
                            }
                        }
                    }
                }
            }
            return x
        }

        function VastNext() {
            if (vasturl.length > 0 && vasturl[vast_and]) {
                if (vast_or < vasturl[vast_and].length - 1) {
                    log("VAST Next");
                    o.vast ? o.vast.RemoveForNextAd() : '';
                    VastBgLoad();
                    vast_or++;
                    var _url = trim(vasturl[vast_and][vast_or]);
                    var _preloaded = VastPreloaded(_url);
                    if (_preloaded == 'skip') {
                        o.vastloader = new VastLoader();
                        o.vastloader.Load(_url, o.vasttype)
                    }
                    if (_preloaded == 'error') {
                        VastNext()
                    }
                } else {
                    VastRemoveAndPlay()
                }
            } else {
                VastRemoveAndPlay()
            }
        }

        function VastPreloaded(_url) {
            var x = 'skip';
            if (v.vast_preload == 1 && o.vast_loaders) {
                var find = false;
                var n = 0;
                for (var i = 0; i < o.vast_loaders.length; i++) {
                    if (o.vast_loaders[i].done == 0) {
                        if (o.vast_loaders[i].ldr.preloaded(_url)) {
                            o.vast_loaders[i].done = 1;
                            var y = o.vast_loaders[i].ldr.Status();
                            if (y == 'ready') {
                                o.vastloader = o.vast_loaders[i].ldr;
                                log("VAST preloaded");
                                o.vast_loaders[i].ldr.Ready();
                                x = y
                            } else {
                                if (y == '') {
                                    x = 'ok';
                                    log("VAST preloading");
                                    o.vastloader = o.vast_loaders[i].ldr;
                                    o.vast_loaders[i].ldr.disablePreload()
                                }
                                if (y == 'error') {
                                    x = 'error'
                                }
                            }
                            find = true
                        }
                        if (find && o.vast_loaders[i].load == 0) {
                            n++;
                            if (n < 6) {
                                VastPreloadLoad(o.vast_loaders[i])
                            } else {
                                break
                            }
                        }
                    }
                }
            }
            return x
        }
        this.VastInsertAnd = function(x, y) {
            if (x != '') {
                var z = vast_and;
                var moveOr2end = false;
                if (y) {
                    for (var j = 0; j < vasturl.length; j++) {
                        vasturl[j] == y ? z = j : ''
                    }
                }
                if (vasturl.length == 1) {
                    if (vasturl[0].length > 1 && vast_or < vasturl[0].length - 1 && vasturl[vast_or]) {
                        var last_ors = vasturl[vast_or].slice(1, 99);
                        vasturl[0].splice(vast_or + 1, 99);
                        moveOr2end = true
                    }
                }
                if (typeof(x) == "object") {
                    for (var i = 0; i < x.length; i++) {
                        vasturl.splice(z + i + 1, 0, [x[i]]);
                        if (o.system.ie9) {
                            VastAddPreload(x[i])
                        } else {
                            setTimeout(VastAddPreload, i * 100, x[i])
                        }
                    }
                } else {
                    if (typeof(x) == "string") {
                        vasturl.push([x]);
                        VastAddPreload(x)
                    }
                }
                if (moveOr2end) {
                    vasturl[vasturl.length - 1] = vasturl[vasturl.length - 1].concat(last_ors)
                }
            }
        };
        this.VastInsertOr = function(x, y) {
            if (x != '') {
                var z = vast_and;
                if (y) {
                    for (var j = 0; j < vasturl.length; j++) {
                        vasturl[j] == y ? z = j : ''
                    }
                }
                if (vasturl[z]) {
                    if (typeof(x) == "object") {
                        for (var i = 0; i < x.length; i++) {
                            vasturl[z].push(x[i])
                        }
                    } else {
                        if (typeof(x) == "string") {
                            vasturl[z].push(x)
                        }
                    }
                }
            }
        };
        this.VastRemoveAndPlay = function(x) {
            VastRemoveAndPlay(x)
        };

        function VastAddPreload(x) {
            if (v.vast_preload == 1 && o.vast_loaders) {
                var i = 0;
                for (var i = 0; i < vasturl.length; i++) {
                    if (vasturl[i] == x) {
                        if (vast_and >= i) {
                            return
                        } else {}
                    }
                }
                if (vasturl.length == 1 && vasturl[0].length > 1) {} else {
                    var n = 0;
                    for (i = 0; i < o.vast_loaders.length; i++) {
                        o.vast_loaders[i].done == 0 ? n++ : ''
                    }
                    o.vast_loaders.push({
                        load: 0,
                        done: 0,
                        x: trim(x),
                        t: o.vasttype,
                        ldr: new VastLoader(true)
                    });
                    n < 5 ? VastPreloadLoad(o.vast_loaders[o.vast_loaders.length - 1]) : ''
                }
            }
        }

        function VastPreloadLoad(x) {
            if (x) {
                x.load = 1;
                x.ldr.Load(x.x, x.t)
            }
        }

        function VastRemoveAndPlay(dontplay) {
            var stop = VastAndLimit();
            log("VAST remove (" + o.vast_impressions + ")");
            if (vasturl.length > 0 && vast_and == vasturl.length - 1) {
                if (vasturl[0][0].indexOf("js:") == 0) {
                    vast_and = -1;
                    vasturl = [
                        [vasturl[0][0]]
                    ]
                }
            }
            if (o.vast_stop == 2) {
                stop = true
            }
            if (vasturl.length > vast_and + 1 && !stop) {
                o.vast.RemoveForNextAd();
                VastBgLoad();
                vast_and++;
                o.adscounter++;
                vast_or = 0;
                var _url = trim(vasturl[vast_and][0]);
                var _preloaded = VastPreloaded(_url);
                if (_preloaded == 'skip') {
                    o.vastloader = new VastLoader();
                    o.vastloader.Load(_url, vast_type)
                }
                if (_preloaded == 'error') {
                    VastRemoveAndPlay(dontplay)
                }
            } else {
                RemoveCurtain();
                o.controls.StopWaiting();
                if (exist(o.vast)) {
                    o.vast.Remove();
                    o.vast = null
                }
                o.vastloader = null;
                vasturl = [];
                vast_or = 0;
                vast_and = 0;
                o.vastfrombg = 0;
                o.shwvstfnsh != 1 ? js("vast_finish", o.vasttype) : '';
                o.shwvstfnsh = 0;
                if (v.vast_ima == 1) {
                    if (o.ima) {
                        try {
                            o.ima.Destroy()
                        } catch (e) {
                            log(o.ima, e)
                        }
                        o.ima = undefined
                    }
                }
                vast_type = '';
                o.vast_impressions = 0;
                o.vpaid_starts = 0;
                clearTimeout(o.vast_longtimeout);
                clearInterval(o.vldcntrInterval);
                o.vast_longtomsg ? o.vast_longtomsg.remove() : '';
                o.vast_loadtxt ? o.vast_loadtxt.hide() : '';
                o.vast_starts++;
                if (o.vasttype == "preroll" || (o.vasttype == "pauseroll" && v.pauserollonplay == 1 && o.actplay) || o.vasttype == "midroll") {
                    if (v.file != '?') {
                        o.media.AfterVast();
                        var re;
                        if (o.file_type == "youtube" && !o.vastclick && o.system.ios) {
                            re = true;
                            o.vasttype == "preroll" ? o.media.reYT() : ''
                        }
                        if (re || dontplay == 'dontplay' || v.vast_dontplay == 1) {} else {
                            o.actions.Play(1)
                        }
                    }
                }
                if (o.resizeonplay > 0) {
                    NewAspect(o.resizeonplay);
                    o.resizeonplay = 0
                }
                if (o.vasttype == "postroll") {
                    End()
                }
                o.vastclick = false;
                o.vasttype = null
            }
        };
        this.EmptyVastUrl = function() {
            vasturl = [
                ['']
            ]
        };
        this.VastRecover = function(y) {
            var x = ['preroll', 'pauseroll', 'postroll', 'intro', 'outro'];
            var z;
            for (var i = 0; i < x.length; i++) {
                z = false;
                if (y) {
                    y != x[i] ? z = true : ''
                }
                if (!z && exist(v[x[i].concat("_", "recover")])) {
                    v['vast_' + x[i].concat("_", "limit")]--;
                    if (v['vast_' + x[i].concat("_", "limit")] > 0) {
                        v[x[i]] = v[x[i].concat("_", "recover")];
                        v[x[i].concat("_", "recover")] = null
                    }
                }
            }
            if (y == "preroll" || y == "midroll") {
                if (v.vast_midroll_limit > 1) {
                    if (exist(o.midrollo) && v.midrolls == 1) {
                        for (var i in o.midrollo) {
                            o.midrollo[i].worked = undefined
                        }
                        v.vast_midroll_limit--
                    }
                }
            }
        };
        this.Password = function() {
            Curtain();
            if (exist(o.pass)) {
                o.pass.Remove();
                o.pass = null
            }
            o.pass = new Pass()
        };
        this.RemovePassword = function() {
            RemoveCurtain();
            o.pass.Remove();
            o.pass = null
        };
        this.Curtain = function() {
            Curtain()
        };
        this.RemoveCurtain = function() {
            RemoveCurtain()
        };

        function Curtain() {
            if (o.curtain) {} else {
                o.curtain = createElement("div");
                o.frame.appendChild(o.curtain);
                Pos0(o.curtain);
                css(o.curtain, {
                    "background": "#000000",
                    "opacity": 0.1
                });
                o.curtain.style.zIndex = 1001
            }
        };

        function RemoveCurtain() {
            if (o.curtain) {
                o.frame.removeChild(o.curtain);
                o.curtain = null
            }
        };

        function ShowPoster() {
            if (exist(o.poster)) {
                if (v.poster != o.currentposter) {
                    Poster(v.poster, o.poster, v.poster_scale)
                }
                show(o.poster);
                css(o.poster, {
                    "opacity": v.poster_a
                });
                o.controls.refresh()
            }
        };
        this.HidePoster = function() {
            if (exist(o.poster)) {
                if (isVisible(o.poster)) {
                    clearInterval(o.pstrsin);
                    var t = o.media.time();
                    if (t == 0 && v.posterhidestart == 1) {} else {
                        if (v.posterhidetime > 0) {
                            clearTimeout(o.pstr_to);
                            o.pstr_to = setTimeout(HidePoster2, v.posterhidetime * 1000)
                        } else {
                            HidePoster2()
                        }
                    }
                }
            }
        };

        function HidePoster2() {
            clearTimeout(o.pstr_to);
            if (v.posteronpause == 1 && !o.play) {} else {
                css(o.poster, {
                    "opacity": 0
                });
                setTimeout(HidePoster3, 500)
            }
        }

        function HidePoster3() {
            if (!o.play && v.posterhide == 1) {} else {
                hide(o.poster)
            }
        }
        this.ShowPoster = function() {
            ShowPoster()
        };

        function StopOtherPlayer(x) {
            if (v.stopotherplayers == 1) {
                for (var i = 0; i < pljssglobal.length; i++) {
                    if (pljssglobal[i]) {
                        if (pljssglobal[i].api("id") != v.id) {
                            pljssglobal[i].api('pause')
                        }
                    }
                }
            }
            pljssglobalid = v.id
        }

        function IndexPlaylist(x) {
            var y = Object.keys(x).length;
            if (y > 0) {
                x = IndexPlaylistProcessor(x, y, '', -1)
            }
            return x
        }

        function IndexPlaylistProcessor(x, y, p, j) {
            var x2 = [];
            var stop;
            if (exist(x['playlist'])) {
                x = x['playlist'];
                y = x.length
            }
            var ii = 0;
            for (var i = 0; i < y; i++) {
                stop = false;
                if (exist(x[i]['id'])) {
                    x[i]['pjs_id'] = x[i]['id']
                }
                x[i]['id'] = "x" + p + '-' + i + (exist(x[i]['id']) ? '-' + x[i]['id'] : '');
                j == -1 && i == 0 && !exist(x[i]['folder']) ? o.pl_first_id = x[i]['id'] : '';
                if (!exist(o.pl_first_id)) {
                    j == 0 && !exist(x[i]['folder']) ? o.pl_first_id = x[i]['id'] : ''
                }
                x[i]['pjs_parent'] = p;
                x[i]['pjs_parent_i'] = j;
                x[i]['pjs_i'] = ii;
                if (exist(x[i]['comment'])) {
                    x[i]['title'] = x[i]['comment'];
                    var q1 = x[i]['file'] ? x[i]['file'].indexOf('[') : 0;
                    var q2 = x[i]['file'] ? x[i]['file'].indexOf(']') : 0;
                    if (q1 > 0 && q2 > 0) {
                        var s1 = x[i]['file'].substr(q1 + 1, q2 - q1 - 1);
                        var s2 = s1.split(",");
                        var s3 = '';
                        for (var k = 0; k < s2.length; k++) {
                            s3 += "[" + s2[k] + "]" + x[i]['file'].replace("[" + s1 + "]", s2[k]) + (k < s2.length - 1 ? "," : '')
                        }
                        x[i]['file'] = s3
                    }
                }
                if (exist(x[i]['playlist'])) {
                    x[i]['folder'] = x[i]['playlist']
                }
                if (!exist(x[i]['folder'])) {
                    if (exist(x[i]['file'])) {
                        if (x[i]['file'] == '' && !exist(x[i]['redirect'])) {
                            stop = true
                        }
                    } else {
                        stop = true
                    }
                }
                if (!stop) {
                    o.playlist_dic[x[i]['id']] = x[i];
                    ii += 1
                }
                if (exist(x[i]['folder'])) {
                    var z = Object.keys(x[i]['folder']).length;
                    if (z > 0) {
                        x[i]['folder'] = IndexPlaylistProcessor(x[i]['folder'], z, x[i]['id'], i)
                    }
                }
                if (!stop) {
                    x2.push(x[i])
                }
            }
            return x2
        }

        function FindFileInPlaylist() {
            var x = [];
            if (exist(v.plstart)) {
                if (v.plstart.indexOf("x-") != 0) {
                    for (var y in o.playlist_dic) {
                        if (o.playlist_dic.hasOwnProperty(y)) {
                            if (o.playlist_dic[y].pjs_id == v.plstart) {
                                v.plstart = y
                            }
                        }
                    }
                }
                if (exist(o.playlist_dic[v.plstart])) {
                    v.playlist.norootplstart == 1 ? v.playlist.openplaylistroot = 0 : '';
                    x = o.playlist_dic[v.plstart]
                } else {
                    x = o.playlist[0];
                    if (v.plstart == o.plcontinue) {
                        o.seekto = undefined
                    }
                }
            } else {
                x = o.playlist[0]
            }
            if (x) {
                for (var i = 0; i < 10; i++) {
                    if (exist(x['folder'])) {
                        x = x['folder'][0]
                    } else {
                        break
                    }
                }
                v.plstart = x.id;
                if (v.plstart == o.plcontinue) {
                    x.start = undefined
                }
            }
            return x
        }

        function End() {
            gaTracker("end", "End", 1);
            o.actions.VastRecover();
            if (o.storage && v.timestore == 1) {
                o.continue.write(0, o.media.duration())
            }
            if (o.controls.PlaylistExist()) {
                if (v.playlist.autoplaylist == 1 && o.controls.PlaylistNextExist()) {
                    o.controls.PlaylistNext()
                } else {
                    End2()
                }
            } else {
                if (v.finishnormal == 1 && o.fullscreen) {
                    o.actions.Normalscreen()
                }
                End3()
            }
        }
        this.ShuffleEnd = function() {
            End2()
        };

        function End2() {
            if (v.playlist.playlistrewind == 1 && !o.controls.PlaylistNextExist()) {
                o.controls.PlaylistRewind();
                return
            }
            if (v.playlist.openplaylistafter == 1) {
                !o.controls.PlaylistVisible() ? o.controls.Playlist() : ''
            }
            End3()
        }

        function End3() {
            ShowPoster();
            js("finish");
            if (v.redirect == 1 && v.redirectafter == 1 && exist2(v.after)) {
                redirect(v.after)
            }
        }

        function fjs(x) {
            if (x.indexOf('js:') == 0) {
                try {
                    x = eval(x.substr(3))
                } catch (e) {
                    console.log(e.message)
                }
            }
            return x ? x : ''
        }

        function Heartbeat() {
            var vts = Math.floor(Date.now() / 1000);
            var fts = (exist(v.livets) ? v.livets : 0) + parseInt(o.media.time());
            var type = 0;
            o.system.desktop ? type = 1 : '';
            o.system.ios ? type = 2 : '';
            o.system.android ? type = 3 : '';
            o.system.winmob ? type = 4 : '';
            o.system.tv ? type = 5 : '';
            var url = v.heartbeat.replace("[vts]", vts);
            url = url.replace("[fts]", fts);
            url = url.replace("[dvtp]", type);
            var gif = document.createElement("img");
            gif.setAttribute('src', url);
            gif.setAttribute('height', '1px');
            gif.setAttribute('width', '1px');
            o.frame.appendChild(gif)
        }
    };
    var Media = function(url) {
        var url;
        var urls;
        var urls_and;
        var current_url;
        var _status = "";
        var _lastime = 0;
        var _ended = false;
        var _stopped = false;
        var _tags;
        var media;
        var media2;
        o.mediascale = {
            x: 1,
            y: 1,
            x0: 1,
            y0: 1
        };
        var wait;
        var plurls;
        var current_plurl = 0;
        var rldcnt = 0;
        if (typeof(url) == 'string') {
            url = trim(url);
            if (url.indexOf("[{") == 0) {
                try {
                    url = url.replace(/pjs'qt/ig, '"');
                    url = JSON.parse(url);
                    wait ? url = o.actions.File(url) : ''
                } catch (e) {
                    console.log(e);
                    url = "incorrect JSON"
                }
            }
            if (url.indexOf("#" + v.enc2) == 0) {
                url = o[o.fd[0]](url)
            }
            if (url) {
                if (url.indexOf("#" + v.enc3) == 0 && url.indexOf(v.file3_separator) > 0) {
                    url = o[o.fd[1]](url)
                }
            }
            if (url) {
                if (url.indexOf("#0") == 0) {
                    if (url.indexOf(o.pltxt) > 0) {
                        url = fd0(url.replace(o.pltxt, '')) + o.pltxt
                    } else {
                        url = fd0(url)
                    }
                }
            }
            if (v.fplace == 1) {
                url = fplace(url)
            }
            if (typeof(url) == 'string') {
                if (url.indexOf(".m3u") == url.length - 4 || url.indexOf(".txt") > 0) {
                    plurls = url.split(" or ");
                    PlaylistLoad()
                }
            }
        }
        o.mediacontainer = createElement("div");
        Pos0(o.mediacontainer);
        css(o.mediacontainer, {
            "transition": "transform 0.2s linear",
            "text-align": "center"
        });
        o.frame.appendChild(o.mediacontainer);
        if (v.hotkey.swiping == 1) {
            if (!o.mdswp) {
                PluginMovable(o.mediacontainer, 'o.swiping', v.hotkey.swipev != 1, v.hotkey.swipev == 1, Swiping);
                o.mdswp = true
            }
        }
        if (!wait) {
            Start()
        }

        function Swiping() {
            var p = o.mediacontainer.offsetLeft;
            var p2 = o.screen_w;
            if (v.hotkey.swipev == 1) {
                p = o.mediacontainer.offsetTop;
                p2 = o.screen_h
            }
            var x;
            if (p > p2 * existv(v.hotkey.swipep, 0.5)) {
                if (o.controls.PlaylistPrevExist()) {
                    x = true;
                    o.controls.PlaylistPrev()
                }
            } else {
                if (p < -p2 * existv(v.hotkey.swipep, 0.5)) {
                    if (o.controls.PlaylistNextExist()) {
                        x = true;
                        o.controls.PlaylistNext()
                    }
                }
            }
            if (x) {
                if (v.hotkey.swipev == 1) {
                    css(o.mediacontainer, {
                        "top": 0
                    })
                } else {
                    css(o.mediacontainer, {
                        "left": 0
                    })
                }
            } else {
                new Motion({
                    mc: o.mediacontainer,
                    type: (v.hotkey.swipev == 1 ? "top" : "left"),
                    to: 0,
                    time: 0.1,
                    ease: "back",
                    me: "mdswp"
                })
            }
        }

        function PlaylistLoad() {
            url = plurls[current_plurl];
            if (url.indexOf(o.pltxt) > 0) {
                url = url.replace(o.pltxt, '');
                v.file = url
            }
            var xhr = XHR(url);
            xhr.onload = function() {
                if (this.readyState == 4 && this.status == 200) {
                    Playlist(this);
                    o.controls.NewPl()
                } else {
                    PlaylistError(1)
                }
            };
            xhr.onerror = function(e) {
                PlaylistError(1)
            };
            xhr.send();
            wait = true
        }

        function PlaylistError(x) {
            if (current_plurl + 1 < plurls.length) {
                current_plurl++;
                PlaylistLoad();
                x = 0
            }
            if (x == 1) {
                onError("playlist not found or access denied")
            }
            if (x == 2) {
                onError("playlists JSON")
            }
        }

        function Playlist(x) {
            if (x.responseText) {
                var y = x.responseText;
                if (y.indexOf("#" + v.enc2) == 0) {
                    y = o[o.fd[0]](y)
                }
                if (y.indexOf("#" + v.enc3) == 0 && y.indexOf(v.file3_separator) > 0) {
                    y = o[o.fd[1]](y)
                }
                if (url.indexOf(".m3u") == url.length - 4) {
                    var m3u = y.split(/(\r\n\t|\n|\r\t)/gm);
                    url = [];
                    var m3ui = 1;
                    var m3ut = '';
                    for (var i = 0; i < m3u.length; i++) {
                        if (m3u[i].indexOf("#EXTINF") > -1) {
                            if (m3u[i].indexOf(" - ") > -1) {
                                var tmp = m3u[i].split(" - ");
                                m3ut = tmp[tmp.length - 1]
                            }
                        }
                        if (m3u[i].indexOf("http") > -1) {
                            url.push({
                                title: "" + (m3ut != '' ? m3ut : m3ui),
                                file: m3u[i]
                            });
                            m3ui++;
                            m3ut = ''
                        }
                    }
                } else {
                    y = y.replace(/(\r\n\t|\n|\r\t)/gm, "");
                    try {
                        url = JSON.parse(y)
                    } catch (e) {
                        PlaylistError(2)
                    }
                }
                if (exist(url.items)) {
                    url = YoutubePlaylist(url)
                }
                if (o.controls) {
                    if (v.playlist.openplaylistbefore == 1) {
                        if (!o.controls.PlaylistVisible()) {
                            o.controls.PlaylistShow()
                        }
                    }
                }
                Start();
                MainResize();
                setTimeout(function() {
                    js("playlist")
                }, 1)
            }
        }

        function Start() {
            url = o.actions.File(url);
            url && url != '?' ? File(url) : ''
        }

        function onError(x, norld) {
            log("Error: " + x);
            var y = true;
            var yy = true;
            js("loaderror", x);
            if (norld != 1 && v.reload == 1 && v.reloadfirst == 1) {
                ErrorReload();
                return
            }
            if (urls) {
                if (urls.length > 0) {
                    current_url++;
                    y = current_url > urls.length - 1;
                    if (y && urls.length > 1 && v.or0 > 0) {
                        if (o.or0 < v.or0) {
                            current_url = 0;
                            y = false
                        }
                        o.or0++
                    }
                    if (y && v.tryotherquality == 1) {
                        if (o.files.length > 1) {
                            if (o.files_quality[o.current_quality].indexOf(Lang("loading_error")) == -1) {
                                o.files_quality[o.current_quality] = o.files_quality[o.current_quality] + ' (' + Lang("loading_error") + ')'
                            }
                            if (o.current_quality > 0) {
                                yy = false;
                                o.actions.SetQuality(o.current_quality - 1);
                                FileTo()
                            } else {
                                if (o.files_quality[o.current_quality + 1].indexOf(Lang("loading_error")) == -1) {
                                    yy = false;
                                    o.actions.SetQuality(o.current_quality + 1);
                                    FileTo()
                                }
                            }
                        }
                    }
                    if (!y) {
                        var z = false;
                        o.seekto > 0 || !o.start || media.isLive() ? '' : o.seekto = Time();
                        if (o.file_type != FileType(urls[current_url]) || o.file_type != 'native') {
                            if (o.play) {
                                o.actions.Stop();
                                z = true
                            }
                        }
                        log("Alternative source", o.seekto);
                        File('or');
                        o.start && !o.vast ? media.Play() : '';
                        FileTo()
                    } else {
                        if (v.reload == 1 && yy && v.reloadfirst != 1) {
                            y = false;
                            ErrorReload()
                        }
                    }
                }
            }
            if (y && yy && x) {
                ErrorMsg(x, true)
            }
        };

        function ErrorMsg(x, mr) {
            gaTracker("error", "Error", true);
            if (v.alerts == 1 && !o.media_error) {
                if (v.alert404 == 1) {
                    o.alert.txt(v.alert404text)
                } else {
                    o.alert.txt(x)
                }
                if (v.alert404v == 1 && exist(v.alert404video)) {
                    o.err404v = new PluginErrorVideo();
                    o.actions.HidePoster()
                }
            }
            mr ? o.media_error = true : '';
            if (o.play) {
                o.actions.StopWaiting();
                o.controls.Pause()
            }
            exist(o.poster) && !exist(o.err404v) ? o.actions.ShowPoster() : '';
            js("error", x)
        }

        function ErrorReload() {
            rldcnt++;
            log("Error Reload Timeout " + rldcnt);
            o.play ? o.rldplay = 1 : '';
            exist(o.reloadto) ? clearTimeout(o.reloadto) : '';
            o.reloadto = setTimeout(ReloadTimeout, v.reloadtimeout * 1000)
        }

        function ReloadTimeout() {
            var x = existv(v.reloadtimes, 10);
            if (o.play || o.rldplay == 1) {
                o.rldplay = 0;
                if (rldcnt < x) {
                    o.actions.Reload()
                } else {
                    if (v.reloadfirst == 1) {
                        onError(media.errorMessage(), 1)
                    } else {
                        ErrorMsg('Reload Error ' + media.errorMessage())
                    }
                }
            }
        }
        this.onError = function(x) {
            onError(x ? x : media.errorMessage())
        };
        this.onEnded = function(y) {
            log("Ended");
            _ended = true;
            var x = false;
            if (Duration() > 0 && !o.casting && !y) {
                var time = o.current_time;
                if (time + 10 < Duration()) {
                    log('Break (recovery)');
                    js("recovery");
                    media.Play();
                    media.Seek(time);
                    x = true
                }
            }
            if (!x) {
                o.actions.Ended();
                js("end")
            }
        };
        this.onPlay = function() {
            if (v.posterhidepause == 1) {
                exist(o.poster) ? o.actions.ShowPoster() : ''
            }
            v.posterhide == 1 ? o.actions.HidePoster() : '';
            o.controls.Play();
            o.actions.onPlayTag();
            if (v.tags == 1 && exist(v.tagsurl)) {
                if (v.tagsurl.length > 5) {
                    RadioTags();
                    clearInterval(_tags);
                    _tags = setInterval(RadioTags, v.tagsinterval * 1000)
                }
            }
            js("play")
        };
        this.NativeControls = function() {
            if (v.nativecontrolsmobile == 1 && o.tagvideo) {
                if (o.actions.NativeControls()) {
                    o.nativecontrols = media.nativeControls();
                    o.controls.refresh()
                }
            }
            o.checknative = true
        };
        this.onPause = function() {
            o.actions.Pause()
        };
        this.onSeeking = function() {
            log("Seeking")
        };
        this.onSeeked = function() {
            log("Seeked");
            o.actions.Seeked();
            exist(o.seeking_time) ? js("seek", o.seeking_time) : ''
        };
        this.onMeta = function() {
            log("Metadata");
            rldcnt = 0;
            o.actions.Metadata()
        };
        this.onDuration = function() {
            if (media) {
                log("Duration", Duration());
                o.actions.Duration(Time(), Duration());
                js("duration", Duration());
                rldcnt = 0;
                clearTimeout(o.reloadto);
                if (exist(o.restart_audio)) {
                    o.actions.SetAudioTrack(o.restart_audio);
                    o.restart_audio = null
                }
            }
        };

        function Time() {
            var x = media.time();
            return x
        }

        function Duration() {
            var x = media.duration();
            return x
        }
        this.onVolume = function() {};
        this.onWaiting = function() {
            log("Waiting");
            o.actions.Waiting();
            js("waiting")
        };
        this.onTimeupdate = function() {
            if (_lastime != Time()) {
                o.actions.StopWaiting();
                if (_lastime == 0) {
                    if (v.posterhide == 1 && v.posterhidestart == 1) {
                        o.actions.HidePoster()
                    }
                }
            }
            _lastime = Time();
            js("time", _lastime);
            if (v.pip.on == 1) {
                if (typeof(PluginPip) == 'function') {
                    if (!media2 && v.pip.custom != 1 && v.file2 && v.file2 != '' && _lastime > 0) {
                        o.mediapip = new PluginPip();
                        media2 = o.mediapip.create()
                    }
                }
            }
        };
        this.onYoutubeReady = function() {
            if (o.file_type == "youtube") {
                media ? media.YoutubeReady() : ''
            }
        };
        this.playByYoutubeId = function(x) {
            o.actions.Stop();
            media.playId(x)
        };
        this.YoutubeReady = function() {
            if (o.file_type == "youtube" && media) {
                return media.ready()
            } else {
                return true
            }
        };
        this.getHLS = function() {
            return media.getHLS()
        };
        this.getDASH = function() {
            return media.getDASH()
        };
        this.SetQuality = function(x) {
            log("Quality", x);
            if ((o.file_type == "native" || o.file_type == o.ws || (o.file_type == "hls" && (v.hlsquality == 0 || HlsLevelsLength() < 2)) || (o.file_type == "dash" && (v.dashquality == 0 || DashLevelsLength() < 2))) && exist(o.files[x])) {
                var time = this.time();
                o.seekto > 0 ? '' : o.seekto = time;
                o.actions.Seek(time, false);
                File(o.files[x], true);
                var y = true;
                if (v.settings) {
                    if ((v.settings.qualitypause == 1 && !o.play) || !o.start) {
                        y = false
                    }
                }
                if (y) {
                    o.actions.Play()
                }
            }
            if (o.file_type == "hls" && v.hlsquality == 1 && HlsLevelsLength() > 1) {
                media.setHlsQuality(x)
            } else if (o.file_type == "dash" && v.dashquality == 1 && DashLevelsLength() > 1) {
                media.setDashQuality(x)
            } else if (o.file_type == "youtube" || o.file_type == "dm") {
                media.setQuality(x)
            }
        };
        this.renameQualities = function(x, y) {
            return RenameQualities(x, y)
        };
        this.renameTracks = function(x) {
            return RenameTracks(x)
        };

        function RenameQualities(x, y) {
            var r = x.height + 'p';
            if (x.height < 200) {
                r = '160p'
            } else if (x.height >= 200 && x.height <= 300) {
                r = '240p'
            } else if (x.height > 300 && x.height <= 400) {
                r = '360p'
            } else if (x.height > 400 && x.height <= 500) {
                r = '480p'
            } else if (x.height > 500 && x.height <= 600) {
                r = '540p'
            } else if (x.height > 600 && x.height <= 900) {
                r = '720p'
            } else if (x.height > 900 && x.height <= 1200) {
                r = '1080p'
            } else if (x.height > 1200 && x.height <= 1800) {
                r = '1440p'
            } else if (x.height > 1800) {
                r = '2160p'
            }
            if (x.width == 426 && x.height <= 240) {
                r = '240p'
            } else if (x.width == 640 && x.height <= 360) {
                r = '360p'
            } else if (x.width == 854 && x.height <= 480) {
                r = '480p'
            } else if (x.width == 1280 && x.height <= 720) {
                r = '720p'
            } else if (x.width == 1920 && x.height <= 1080) {
                r = '1080p'
            } else if (x.width == 2560 && x.height <= 1440) {
                r = '1440p'
            } else if (x.width == 3840 && x.height <= 2160) {
                r = '2160p'
            }
            if (v.settings.customqualities == 1 && exist(v.settings['name' + r])) {
                r = v.settings['name' + r]
            } else {
                if (y == 1) {
                    r = Lang(r)
                }
                if (y == 2 && exist(x.bitrate)) {
                    r = parseInt(x.bitrate / 1000) + ' ' + Lang('kbps')
                }
            }
            return r
        };

        function RenameTracks(x) {
            var r = x.toLowerCase();
            if (r == "eng" || r == "en") {
                x = "English"
            } else if (r == "rus" || r == "ru") {
                x = ""
            }
            if (typeof(v.rename_audio) == "object") {
                x = existv(v.rename_audio[x], x)
            }
            return x
        };

        function NativeSubtitle() {
            if (o.tagvideo && o.subs) {
                media.removeTracks();
                for (var i = 0; i < o.subs.length; i++) {
                    media.addTrack(o.subs[i], o.files_subtitle[i], (i == o.current_subtitle))
                }
            }
        }
        this.SetSpeed = function(x) {
            log("Speed", x);
            media ? media.setSpeed(x) : '';
            if (v.pip.on == 1) {
                if (media2) {
                    media2.setSpeed(x)
                }
            }
        };
        this.nativeSubtitle = function() {
            NativeSubtitle()
        };
        this.removeNativeSubtitle = function() {
            media.removeTracks()
        };
        this.SetAudioTrack = function(x) {
            log("Audiotrack", x);
            if (o.audiotracks.length > 0) {
                if (o.audiotracks[x]) {
                    var time = this.time();
                    o.seekto > 0 ? '' : o.seekto = time;
                    o.actions.Seek(time, false);
                    File(o.audiotracks[x], true);
                    o.actions.Play()
                }
            } else {
                if (o.file_type == "hls" && v.hlsaudio == 1) {
                    media.setHlsAudioTrack(x)
                } else if (o.file_type == "dash" && v.dashaudio == 1) {
                    media.setDashAudioTrack(x)
                }
            }
        };
        this.getQuality = function() {
            var x = o.files_quality[o.current_quality];
            x == undefined ? x = '' : '';
            var y = autoQuality() && v.hlsautoquality == 1 && v.hlsquality == 1 && x != Lang("auto");
            return (y ? '' + Lang("auto") + ' ' : '') + x
        };
        this.getAudioTrack = function() {
            var x = o.files_audiotrack[o.current_audiotrack];
            x == undefined ? x = '' : '';
            return x
        };
        this.autoQuality = function() {
            return autoQuality()
        };

        function autoQuality() {
            var x = false;
            if (media) {
                if (o.file_type == "youtube") {
                    x = media.auto()
                }
                if (o.file_type == "hls" && v.hlsquality == 1 && HlsLevelsLength() > 1 && v.hlsautoquality == 1) {
                    x = media.auto()
                }
                if (o.file_type == "dash" && v.dashquality == 1 && DashLevelsLength() > 1) {
                    x = media.auto()
                }
            }
            return x
        }

        function HlsLevelsLength() {
            if (o.file_type == "hls") {
                return media.HlsLevelsLength()
            } else {
                return 0
            }
        }

        function DashLevelsLength() {
            if (o.file_type == "dash") {
                return media.DashLevelsLength()
            } else {
                return 0
            }
        };
        this.resize = function(x) {
            if (media && (o.file_type == "youtube" || o.file_type == "vimeo" || exist(v.ratio))) {
                media.resize()
            }
            if (v.screenmarginbottom > 0) {
                css(o.mediacontainer, {
                    "height": (o.fullscreen ? "100%" : o.normal_h - v.screenmarginbottom)
                })
            }
            if (o.media2 && v.pip.movable == 1) {
                o.mediapip.resize()
            }
            if (v.poster_float == 1) {
                FloatPosterScale()
            }
            if (o.v360) {
                o.v360.resize()
            }
        };
        this.size = function() {
            return media ? media.size() : {}
        };
        this.iosfull = function() {
            media.iosfull()
        };
        this.reload = function() {
            log('reload');
            o.reloadTimer = 0;
            o.start ? v.autoplay = 1 : '';
            o.actions.Waiting();
            if (url && v.rldnornd != 1) {
                if (url.indexOf('(random)') == -1) {
                    url = url + (url.indexOf('?') == -1 ? '?' : '&') + 'rand=(random)'
                }
            }
            if (o.tagvideo) {
                media.src(url)
            } else {
                File(url)
            }
        };
        if (!exist(o.poster)) {
            CreatePoster()
        }
        if (exist(v.poster)) {
            if (v.poster != '') {
                Poster(v.poster, o.poster, v.poster_scale);
                if (v.posterhidepause == 1 && !o.start) {
                    hide(o.poster)
                }
            } else {
                v.poster = null
            }
        }

        function Status() {
            _status = media ? media.status() : ''
        }

        function ParseUrl(url) {
            urls = url.split(" or ");
            for (var i = 0; i < urls.length; i++) {
                if (urls[i].indexOf(" and ") > -1) {
                    urls_and = urls[i].split(" and ");
                    urls[i] = urls_and[random(0, urls_and.length - 1)]
                }
                if (exist(v.prefile) && urls[i].indexOf("//") == -1) {
                    urls[i] = v.prefile + urls[i]
                }
            }
            current_url = 0
        }

        function Timer() {
            Status();
            if (_status == "playing" || o.casting) {
                o.actions.Playing()
            }
            if (_status != "") {
                o.actions.Loading()
            }
        }

        function CreatePoster() {
            if (o.poster) {
                o.frame.removeChild(o.poster)
            }
            o.poster = createElement("div");
            css(o.poster, {
                "pointer-events": "none",
                "opacity": v.poster_a,
                transition: "opacity 0.5s"
            });
            if (v.poster_float == 1) {
                PluginFloatPoster()
            } else {
                css(o.poster, {
                    'position': 'absolute',
                    'left': 0,
                    'top': 0,
                    'width': '100%',
                    'height': '100%'
                })
            }
            o.frame.appendChild(o.poster)
        }

        function File(x, y, crt) {
            v.file2_separator == '' ? v.file2_separator = ';' : '';
            if (x.indexOf('{') > -1 && x.indexOf('}') > -1 && x.indexOf(v.file2_separator) > -1) {
                var z = x.split(v.file2_separator);
                o.audiotracks = [];
                for (var i = 0; i < z.length; i++) {
                    o.files_audiotrack[i] = z[i].substr(z[i].indexOf("{") + 1, z[i].indexOf("}") - 1);
                    o.audiotracks[i] = z[i].substr(z[i].indexOf("}") + 1);
                    if (exist(v.default_audio)) {
                        if (v.default_audio == o.files_audiotrack[i]) {
                            o.current_audiotrack = i
                        }
                    }
                }
                x = o.audiotracks[o.current_audiotrack]
            }!exist(urls) ? urls = [] : '';
            o.fileTimeout ? clearTimeout(o.fileTimeout) : '';
            x && x != 'or' && x != 'x' ? ParseUrl(x) : '';
            var ft = o.file_type;
            if (urls.length > 0) {
                o.file_type = FileType(urls[current_url]);
                var create = false;
                if (crt) {
                    create = true
                }
                url = urls[current_url];
                if (url) {
                    url = url.replace(/\(random\)/g, Math.random())
                }
                if (!create && x != 'x' && media && o.file_type == ft && (ft == "native" || (ft == "vimeo" && !o.system.mobile) || (ft == "youtube" && o.start && !_stopped) || ft == "dm" || ft == "hls" || ft == "dash")) {
                    media.src(url);
                    log("src")
                } else {
                    log("New");
                    RemoveMedia();
                    CreateMedia(url)
                }
                if (o.speed1) {
                    if (o.line_speed) {
                        media.setSpeed(o.custom_speed)
                    } else {
                        if (o.current_speed != o.speed1) {
                            media.setSpeed(o.files_speed[o.current_speed])
                        }
                    }
                }
            }
            if (!y) {
                clearInterval(o.timerInterval);
                o.timerInterval = setInterval(Timer, o.timerTime);
                if (!exist(v.subtitle) && v.sub_upload == 1 && v.sub_upload0 == 1) {
                    v.subtitle = ''
                }
                if (exist(v.subtitle)) {
                    o.actions.Subtitle(v.subtitle)
                }
                if (v.hidevideo == 1) {
                    if (v.nativecontrolsmobile == 1 && o.system.mobile) {} else {
                        if (o.file_type == "youtube") {
                            css(o.mediacontainer, {
                                "top": -3000,
                                "left": -3000
                            })
                        } else {
                            hide2(o.mediacontainer)
                        }
                        v.toolbar.hide = 0
                    }
                }
            }
        }

        function FileType(x) {
            var type = "native";
            if (x) {
                if (x.indexOf(".m3u8") > 0) {
                    type = "hls"
                } else if (x.indexOf(".mpd") > 0) {
                    type = "dash"
                } else if (x.indexOf("w") == 0 && x.indexOf("s") == 1) {
                    type = o.ws
                } else if (x.indexOf('youtube.com/') > -1 || x.indexOf('youtu.be/') > -1) {
                    if (typeof(MediaYoutube) == 'function') {
                        type = "youtube";
                        if (v.youtubeposter == 1) {
                            var y = 'https://img.youtube.com/vi/' + YoutubeID(x) + '/';
                            imageExists(y + 'maxresdefault.jpg', function(z) {
                                z > 100 ? v.poster = y + 'maxresdefault.jpg' : v.poster = y + 'hqdefault.jpg';
                                if (o.playlist_dic) {
                                    o.playlist_dic[o.plid]['poster'] = v.poster
                                }
                                v.autoplay == 1 || o.start ? '' : Poster(v.poster, o.poster, v.poster_scale)
                            })
                        }
                    } else {
                        log("No YouTube")
                    }
                } else if (v.vimeo == 1 && x.indexOf('vimeo.com/') > -1) {
                    type = "vimeo"
                } else if (v.dm == 1 && x.indexOf('dailymotion.com') > -1) {
                    type = "dm"
                } else if (v.pjsframe == 1) {
                    if (typeof(PjsFramed) == 'function') {
                        PjsFramed(x) ? type = "pjs" : ''
                    }
                }
            }
            o.tagvideo = type == "native" || type == "hls" || type == "dash" || type == o.ws;
            return type
        }

        function imageExists(url, callback) {
            var img = new Image();
            img.onload = function() {
                callback(this.height)
            };
            img.src = url
        }

        function CreateMedia(x) {
            o.file_type = FileType(x);
            if (o.tagvideo) {
                media = new MediaVideo(x, o.mediacontainer, false)
            }
            if (o.file_type == "youtube") {
                media = new MediaYoutube(x, o.mediacontainer)
            }
            if (v.vimeo == 1 && o.file_type == "vimeo") {
                media = new MediaVimeo(x, o.mediacontainer)
            }
            if (o.file_type == "pjs") {
                media = new MediaPjs(x)
            }
            if (o.file_type == "dm") {
                media = new MediaDaily(x, o.mediacontainer)
            }
            o.controls ? o.controls.UpdateSettings() : '';
            var t = 0;
            if (exist(v.duration)) {
                if (o.continue && v.timestore == 1 && !o.start) {
                    t = o.continue.flag().t
                }
                setTimeout(function() {
                    o.actions.Duration(t, v.duration)
                }, 100)
            }
        }

        function RemoveMedia() {
            if (media) {
                media.Remove();
                media = null;
                _status = "ended"
            }
            if (media2) {
                media2.Remove();
                media2 = null;
                media2 = undefined;
                o.mediapip.remove();
                o.media2 = null;
                o.mediapip = null
            }
        };
        this.Remove = function() {
            RemoveMedia()
        };
        this.RemoveAll = function() {
            urls = [];
            RemoveMedia()
        };
        this.File = function(x, y, z) {
            File(x, y, z)
        };
        this.Poster = function(x) {
            Poster(x, o.poster, v.poster_scale)
        };
        this.Play = function() {
            if (media) {
                _ended = false;
                _stopped = false;
                if (o.casting) {
                    o.chromecast.Play()
                } else {
                    media.Play();
                    v.posterhide == 1 ? o.actions.HidePoster() : ''
                }
                if (exist(media2)) {
                    media2.Play()
                }
                if (o.channels) {
                    if (o.tagvideo) {
                        if (o.clicktime > 0 && !o.channels.Created()) {
                            o.channels.Update()
                        }
                    } else {
                        o.files_channel = [];
                        o.controls.SettingChanged("channel")
                    }
                }
                if (o.tagvideo && v.volumegain > -1 && !o.gained && !o.system.ios) {
                    if (o.clicktime > 0) {
                        media.Gain()
                    }
                }
                FileTo()
            } else {
                setTimeout(this.Play, 500)
            }
        };

        function FileTo() {
            if (v.fileto > 0 && urls.length > 1) {
                if (Duration() == 0 || v.filetod == 1) {
                    clearTimeout(o.fileTimeout);
                    o.fileTimeout = setTimeout(FileTimeout, v.fileto * 1000)
                }
            }
        }

        function FileTimeout() {
            if (o.play && (Duration() == 0 || v.filetod == 1) && Time() == 0) {
                if (media) {
                    if (media.loaded() == 0 && current_url != urls.length - 1) {
                        onError('File Timeout')
                    }
                }
            }
        }
        this.PipSwitch = function(event) {
            if (o.media2) {
                if (v.pip.movable == 1) {
                    if (o.moving[o.media2] > 2) {
                        return
                    }
                }
                if (event) {
                    event.stopPropagation();
                    window.event ? window.event.cancelBubble = true : ''
                }
                var tmp = media;
                media.ChangePip(true, o.media2);
                media2.ChangePip(false, o.mediacontainer);
                media = media2;
                media2 = tmp;
                media.Play();
                media2.Play();
                js("pip")
            }
        };
        this.reYT = function() {
            media.src(url)
        };
        this.ToolbarHide = function() {
            v.effects == 1 ? o.effects.api("hide") : '';
            o.toolbarhidden = true
        };
        this.ToolbarShow = function() {
            if (v.toolbar.resizeme) {
                v.toolbar.resizeme = false;
                if (o.controls) {
                    o.controls.resizeFromText(1);
                    o.controls.resizetext()
                }
            }
            o.toolbarhidden = false
        };
        this.PipToggle = function() {
            if (o.media2 && o.mediapip) {
                o.mediapip.toggle()
            }
        };
        this.Airplay = function() {
            if (o.tagvideo && o.airplay) {
                o.airplayed = true;
                media.airplay()
            }
        };
        this.PipWebkit = function() {
            if (o.tagvideo && o.pipwebkit) {
                media.pipwebkit()
            }
        };
        this.BeforeVast = function() {
            if (v.vast_poster == 1 && exist(v.vast_posterurl)) {
                if (exist(o.vast_poster)) {
                    o.vast_poster.show()
                } else {
                    if (typeof(PlgnVstPstr) == 'function') {
                        o.vast_poster = new PlgnVstPstr()
                    }
                }
            }
            VstLdTxt();
            if (media) {
                datetime(0);
                media.BeforeVast()
            }
        };
        this.AfterVast = function() {
            o.vast_poster ? o.vast_poster.hide() : '';
            media ? media.AfterVast() : ''
        };
        this.VstLdTxt = function(x) {
            VstLdTxt(x)
        };

        function VstLdTxt(x) {
            if (v.vast_loadtxtd == 1 && exist2(v.vast_loadtxt)) {
                if (exist(o.vast_loadtxt)) {
                    o.vast_loadtxt.show(x)
                } else {
                    if (typeof(PlgnVstLdtx) == 'function') {
                        o.vast_loadtxt = new PlgnVstLdtx()
                    }
                }
            }
        }
        this.Pause = function() {
            if (o.casting) {
                o.chromecast.Pause()
            } else {
                media ? media.Pause() : log("nomedia")
            }
            if (exist(o.media2)) {
                media2.Pause()
            }
        };
        this.Recover = function() {
            _stopped = true;
            o.actions.Seek(0, false);
            exist(o.poster) ? o.actions.ShowPoster() : '';
            File('x')
        };
        this.Toggle = function() {
            media ? media.Toggle() : ''
        };
        this.Seek = function(x) {
            if (media) {
                if (o.casting) {
                    o.chromecast.Seek(x)
                } else {
                    media.Seek(x);
                    if (v.pip.on == 1) {
                        if (media2) {
                            media2.Seek(x)
                        }
                    }
                }
            }
        };
        this.Mute = function() {
            if (media) {
                media.Mute();
                o.casting ? o.chromecast.Mute() : '';
                log("mute")
            }
            if (v.pip.on == 1 && v.pip.nomute == 1) {
                if (media2) {
                    media2.Mute()
                }
            }
        };
        this.Unmute = function() {
            if (media) {
                media.Unmute();
                o.casting ? o.chromecast.Unmute() : '';
                log("unmute")
            }
            if (v.pip.on == 1 && v.pip.nomute == 1) {
                if (media2) {
                    media2.Unmute()
                }
            }
        };
        this.Volume = function(x) {
            media ? media.Volume(x) : '';
            if (v.pip.on == 1) {
                if (v.pip.nomute == 1 && media2) {
                    media2.Volume(x)
                }
            }
            if (o.casting) {
                o.chromecast.Volume(x)
            }
        };
        this.isPlaying = function() {
            return media ? media.isPlaying() : false
        };
        this.isLive = function() {
            return media ? media.isLive() : false
        };
        this.status = function() {
            return _status
        };
        this.ended = function() {
            return _ended
        };
        this.time = function() {
            var x = 0;
            if (media) {
                x = Time();
                if (o.casting) {
                    var y = o.chromecast.Time();
                    y ? x = y : ''
                } else {
                    if (Duration() > 0 && x != Duration()) {
                        o.current_time = x + 0.0001
                    }
                }
                return x
            } else {
                return 0
            }
        };
        this.duration = function() {
            var x = 0;
            if (media) {
                x = Duration();
                x == 0 && exist(v.duration) ? x = v.duration * 1 : '';
                if (o.casting) {
                    var y = o.chromecast.Duration();
                    y ? x = y : ''
                }
            }
            return x
        };
        this.loaded = function() {
            return media ? media.loaded() : 0
        };
        this.flip = function() {
            o.mediascale.flip = o.mediascale.flip ? false : true;
            css(o.mediacontainer, {
                "transform": (o.mediascale.flip ? "scaleX(-1)" : "scaleX(1)")
            })
        };
        this.createposter = function() {
            CreatePoster()
        };
        this.Preload = function() {
            if (o.tagvideo) {
                media.preload()
            }
        };
        this.menufltr = function(x, y) {
            if (x == 'scale') {
                if (y == 1) {
                    Scale(v.settings.scale / 100)
                }
                if (y == 2) {
                    Scale(-v.settings.scale / 100)
                }
                if (y == 3) {
                    o.media.normalscale()
                }
            } else {
                if (o.tagvideo) {
                    if (!o.fltrs[x]) {
                        if (x == 'sepia') {
                            o.fltrs[x] = 0
                        } else {
                            o.fltrs[x] = 1
                        }
                    }
                    if (y == 1) {
                        o.fltrs[x] += v.settings[x] / 100
                    }
                    if (y == 2) {
                        o.fltrs[x] -= v.settings[x] / 100
                    }
                    if (y == 3) {
                        if (x == 'sepia') {
                            o.fltrs[x] = 0
                        } else {
                            o.fltrs[x] = 1
                        }
                    }!o.cftlr ? o.cftlr = [] : '';
                    o.cftlr[x] = x + '(' + parseInt(o.fltrs[x] * 100) + '%) ';
                    var cf = '';
                    for (var i in o.cftlr) {
                        cf += o.cftlr[i]
                    }
                    css(media.tag(), {
                        'filter': cf
                    });
                    o.controls.MenuProc(x)
                }
            }
        };
        this.scale = function(x) {
            Scale(x)
        };

        function Scale(x) {
            if (String(x).indexOf(":") > 0) {
                var y = x.split(":");
                var z0 = o.screen_w / o.screen_h;
                var z1 = o.media.size();
                if (z1.width > 0) {
                    z0 = z1.width / z1.height
                }
                var z = y[0] / y[1];
                if (z0 != z) {
                    if (o.tagvideo) {
                        media.ObjectFit()
                    }
                    var w2 = o.screen_h * z;
                    var x2 = w2 / o.screen_w;
                    var h2 = o.screen_w / z;
                    var y2 = h2 / o.screen_h;
                    if (x2 < 1) {
                        o.mediascale.x0 = o.mediascale.x = parseFloat(x2);
                        o.mediascale.y = 1
                    } else {
                        o.mediascale.x = 1;
                        o.mediascale.y0 = o.mediascale.y = parseFloat(y2)
                    }
                    css(o.mediacontainer, {
                        "transform": "scaleX(" + o.mediascale.x + ") scaleY(" + o.mediascale.y + ")"
                    });
                    o.custom_aspect = x
                }
            } else {
                o.mediascale.x += parseFloat(x);
                o.mediascale.y += parseFloat(x);
                css(o.mediacontainer, {
                    "transform": "scaleX(" + o.mediascale.x + ") scaleY(" + o.mediascale.y + ")"
                })
            }
            if (v.hotkey.scaledrag == 1) {
                if (!o.mediadrag) {
                    if (o.mediascale.x > 0 || o.mediascale.y > 1) {
                        PluginMovable(o.mediacontainer, 'o.dragging');
                        o.mediadrag = true
                    }
                }
                xy00()
            }
            o.controls.MenuProc('scale')
        };
        this.normalscale = function() {
            if (o.tagvideo) {
                media.ObjectFit()
            }
            o.mediascale.x = o.mediascale.x0;
            o.mediascale.y = o.mediascale.y0;
            css(o.mediacontainer, {
                "transform": "scaleX(" + o.mediascale.x + ") scaleY(" + o.mediascale.y + ")"
            });
            o.controls.MenuProc('scale');
            o.custom_aspect = null;
            xy00()
        };

        function xy00() {
            if (o.mediadrag && v.hotkey.scaledrag0 != 1) {
                if (o.mediascale.x == 1 && o.mediascale.y == 1) {
                    css(o.mediacontainer, {
                        "top": 0,
                        "left": 0
                    })
                }
            }
        };
        this.hlsDashSub = function(x, y) {
            media.hlsDashSub(x, y)
        };
        this.currentFile = function() {
            return currentFile()
        };

        function currentFile() {
            return urls ? (urls.length > 0 ? (urls[current_url] ? urls[current_url] : '') : '') : ''
        };
        this.urlsl = function() {
            return urls.length
        };
        this.tag = function() {
            return media ? media.tag() : false
        };
        this.captions = function() {
            if (o.tagvideo) {
                media.captions()
            }
        };
        this.onDash = function() {
            media.onDash()
        };

        function RadioTags() {
            var xhr = XHR(v.tagsurl + '?url=' + urls[current_url]);
            xhr.onload = function() {
                if (this.readyState == 4 && this.status == 200) {
                    if (this.responseText) {
                        v.title = this.responseText;
                        o.actions.Title('title')
                    }
                }
            };
            xhr.send()
        }
    };
    var MediaVideo = function(url, container, pip) {
        var pjstg = createElement(v.hidevideo == 1 ? "audio" : "video");
        var hls_config;
        var pipto = 0;
        var hls;
        var is_hls = false;
        var is_hls2 = false;
        var hls_started = false;
        var hls_created = false;
        var hls_force = -1;
        var dash;
        var dash_created = false;
        var ws;
        var ws_created = false;
        var is_dash = false;
        o.live = false;
        var is_sleep = 0;
        var is_ws = false;
        var error;
        var error_time;
        var unmuteplease = false;
        var pip_quality = -1;
        var pause_before_vast = -1;
        var sleep_timeout;
        var _hlssubtracks;
        var _seekaftervast;
        var urlmse;
        var mimeCodec = 'video/mp4; codecs="avc1.42E01E, mp4a.40.2"';
        var nops = false;
        css(pjstg, {
            'position': 'static',
            'width': '100%',
            'height': '100%',
            'object-fit': 'contain',
            'transition': "filter 0.2s linear",
            'min-height': 'auto',
            'max-height': 'none',
            'min-width': 'auto',
            'max-width': 'none'
        });
        ObjectFit();
        if (o.system.iphone && v.autoplay == 1 && v.autoplaymute == 1) {
            if (!o.start && v.preroll) {
                attr(pjstg, {
                    'playsinline': 1
                })
            } else {
                attr(pjstg, {
                    'muted': 1,
                    'playsinline': 1,
                    'autoplay': 1
                })
            }
        } else {
            if (v.playsinlineonmobile == 1 && o.system.mobile) {
                attr(pjstg, {
                    'playsinline': 1
                })
            }
            if (!o.system.tv) {
                attr(pjstg, {
                    'preload': (v.preload == 1 && v.autoplay == 0 ? 'metadata' : 'none')
                })
            }
        }
        if (v.tagcors == 1) {
            attr(pjstg, {
                "crossorigin": "anonymous",
                "crossOrigin": "anonymous"
            })
        }
        attr(pjstg, {
            'src': url,
            'x-webkit-airplay': 'allow',
            'disableRemotePlayback': 'true'
        });
        if (v.drunchr != 1) {
            attr(pjstg, {
                'disableRemotePlayback': 'true'
            })
        }
        if (v.ynxnopip == 1) {
            attr(pjstg, {
                'pip': 'false'
            })
        }
        if (pip) {
            pjstg.autoplay = true;
            if (v.pip.nomute != 1 || v.autoplay == 1) {
                pjstg.muted = true
            }
        }
        if (v.nativenodownload == 1) {
            attr(pjstg, {
                'controlsList': 'nodownload'
            })
        }
        tagSrc();
        if (v.taginframe == 1) {
            var tagframe = createElement("iframe");
            attr(tagframe, {
                "scrolling": "no",
                "allowfullscreen": "true",
                "allowtransparency": "true",
                "src": ""
            });
            css(tagframe, {
                "position": "absolute",
                "width": "100%",
                "height": "100%",
                "border": 0
            });
            container.appendChild(tagframe);
            var framei = window.setInterval(function() {
                if (tagframe.contentWindow.document.readyState === "complete") {
                    window.clearInterval(framei);
                    css(tagframe.contentDocument.body, {
                        "padding": 0,
                        "margin": 0
                    });
                    tagframe.contentDocument.body.appendChild(pjstg)
                }
            }, 100)
        } else {
            container.appendChild(pjstg)
        }
        if (!exist(url)) {
            url = ''
        }
        if (url.indexOf(".mpd") > 0) {
            is_dash = true;
            if (!o.dash) {
                if (typeof PluginDash !== "undefined") {
                    o.dash = new PluginDash()
                }
            }
            if (exist(o.dash)) {
                if (!exist(window.dashjs)) {
                    o.dash.script()
                } else {
                    CheckDash()
                }
            }
        } else if (((options.hls == 1 && v.playerjscom != 1) || url.indexOf(".m3u8") > 0) && (o.compilation.indexOf("HLS") != -1 || exist(window.Hls))) {
            is_hls = true;
            is_hls2 = true;
            try {
                if (exist(Hls)) {
                    if (!Hls.isSupported() || (o.system.safari && v.nativehlsinsafari == 1 && !o.system.ios) || (o.system.safari && o.system.ios && v.nativehlsios == 1) || (o.system.edge && v.nativehlsinedge == 1)) {
                        log('HLS support ', Hls.isSupported());
                        is_hls = false
                    } else {
                        if (v.preload == 1 || v.autoplay == 1 || v.preloadhls == 1 || pip) {
                            CreateHLS(false)
                        }
                    }
                } else {
                    is_hls = false
                }
            } catch (error) {
                is_hls = false
            }
        } else if (url.indexOf("w") == 0 && url.indexOf("s") == 1 && v.flussonic == 1) {
            is_ws = true;
            CreateWS()
        }
        if (o.system.tv && v.autoplay == 1 && !is_hls && !is_dash && !is_ws) {
            setTimeout(function() {
                o.actions.MediaReady()
            }, 100)
        }
        if (v.channels == 1) {
            exist(o.channels) ? o.channels.Close() : '';
            o.channels = new PlugMediaChannels()
        };
        this.onDash = function() {
            CheckDash()
        };

        function CheckDash() {
            is_dash = true;
            if (MseIsSupported()) {
                if (v.preload == 1 || v.autoplay == 1 || v.preloaddash == 1) {
                    CreateDASH(false)
                }
            } else {
                is_dash = false;
                log("DASH not supported")
            }
        }

        function CreateDASH(x) {
            if (o.dash && !dash_created) {
                o.dash.create(x, pjstg, url, pip);
                exist(window.dashjs) ? dash_created = true : ''
            }
        }

        function CreateHLS(x) {
            log("HLS");
            if (o.files.length > 1) {
                v.hlsquality = 0;
                v.hlsquality_off = true
            } else {
                v.hlsquality_off ? v.hlsquality = 1 : ''
            }
            if (o.audiotracks.length > 1) {
                v.hlsaudio = 0;
                v.hlsaudio_off = true
            } else {
                v.hlsaudio_off ? v.hlsaudio = 1 : ''
            }
            o.hls_subs = false;
            hls_force = -1;
            var dontload = false;
            if (v.preroll && v.hlsvastwait == 1) {
                dontload = true;
                v.hlsvastwait = 0
            }
            hls_config = {
                debug: (v.hlsdebug == 1 && !pip),
                autoStartLoad: (v.preload == 1 || v.autoplay == 1 || pip || x) && !dontload,
                maxBufferLength: 60,
                maxMaxBufferLength: 60,
                manifestLoadingTimeOut: (v.hlsmto > 0 ? v.hlsmto * 1000 : 40000),
                fragLoadingTimeOut: (v.hlsfto > 0 ? v.hlsfto * 1000 : 40000),
                enableWorker: false
            };
            if (v.hlscltps == 1) {
                hls_config.capLevelToPlayerSize = true
            }
            if (v.hlscookies == 1) {
                hls_config['xhrSetup'] = function(xhr, url) {
                    xhr.withCredentials = true
                }
            }
            if (exist(v.hlsconfig)) {
                if (exist(v.hlsconfig.maxBufferLength)) {
                    if (v.hlsconfig.maxBufferLength > 600) {
                        v.hlsconfig.maxBufferLength = 600
                    }
                    v.hlsconfig.maxMaxBufferLength = v.hlsconfig.maxBufferLength
                }
                if (exist(v.hlsconfig.customBuffer)) {
                    v.hlsconfig.maxMaxBufferLength = v.hlsconfig.maxBufferLength = v.hlsconfig.customBuffer
                }
                if (typeof v.hlsconfig == "object") {
                    for (var key in v.hlsconfig) {
                        hls_config[key] = v.hlsconfig[key]
                    }
                }
            }
            hls = new Hls(hls_config);
            js("hls", hls, 1);
            hls.loadSource(url);
            hls.attachMedia(pjstg);
            hls.on(Hls.Events.MEDIA_ATTACHED, function() {
                log("HLS attached")
            });
            hls.on(Hls.Events.MANIFEST_LOADED, function(event, data) {
                !pip ? o.actions.MediaReady() : ''
            });
            hls.on(Hls.Events.MANIFEST_PARSED, function(event, data) {
                if (!pip && v.hlsquality == 1 && HlsLevelsLength() > 1) {
                    HlsQualityLevels();
                    HlsLevel();
                    o.controls ? o.controls.QualityChangedNoHand(o.current_quality) : ''
                }
            });
            hls.on(Hls.Events.LEVEL_SWITCH, function(event, data) {
                HlsLevel()
            });
            hls.on(Hls.Events.LEVEL_SWITCHED, function(event, data) {
                HlsLevel()
            });
            hls.on(Hls.Events.LEVEL_LOADED, function(event, data) {
                if (!pip) {
                    if (data.details.live != o.live) {
                        o.live = data.details.live;
                        o.controls.refresh()
                    }
                    o.live = data.details.live;
                    if (o.live) {
                        log("Live");
                        o.dvr = url.indexOf("?DVR") > -1;
                        if (pjstg.duration > 0 && pjstg.currentTime > 0) {
                            if (pjstg.duration - pjstg.currentTime < 10) {
                                if (o.hls_stuck_time > 0) {
                                    if (o.hls_stuck_time == pjstg.currentTime && o.hls_stuck_duration == pjstg.duration) {
                                        o.stuck++;
                                        if (o.stuck > 2) {
                                            o.stuck = 0;
                                            o.hls_stuck_time = -1;
                                            hls.destroy();
                                            CreateHLS(true);
                                            onEnded()
                                        }
                                    } else {
                                        o.hls_stuck_time = -1
                                    }
                                } else {
                                    o.hls_stuck_time = pjstg.currentTime;
                                    o.hls_stuck_duration = pjstg.duration
                                }
                            }
                        }
                    }
                }
                if (v.hlsquality == 1) {
                    o.current_quality = hls.loadLevel;
                    o.controls ? o.controls.QualityChangedNoHand(o.current_quality) : ''
                }
                HlsUpdateAudio()
            });
            hls.on(Hls.Events.FRAG_CHANGED, function(event, data) {
                if (exist(data.frag) && !pip) {
                    js("fragment", data.frag.relurl)
                }
                if (hls_force > -1) {
                    hls.nextAutoLevel = hls_force;
                    hls_force = -1
                }
                hls_started = true;
                hlsTextTracks()
            });
            hls.on(Hls.Events.FRAG_PARSING_METADATA, function(event, data) {
                js("fragdata", data, 1)
            });
            hls.on(Hls.Events.AUDIO_TRACKS_UPDATED, function(event, data) {
                !pip && v.hlsaudio == 1 ? HlsAudioTracks() : ''
            });
            hls.on(Hls.Events.AUDIO_TRACK_SWITCHING, function(event, data) {
                if (!pip && v.hlsaudio == 1) {
                    HlsAudioTrack()
                }
            });
            if (v.hlssubtracks == 1) {
                _hlssubtracks = new PluginHlsSubtitles(hls, pip)
            } else {
                hls.subtitleDisplay = false
            }
            hls.on(Hls.Events.ERROR, function(event, data) {
                v.log == 1 ? console.log(data) : '';
                js(data.type + 'Hls', data, 0, true);
                o.hlserror = data;
                if (data.fatal) {
                    switch (data.type) {
                        case Hls.ErrorTypes.NETWORK_ERROR:
                            log("HLS fatal network error");
                            if (v.livewakeup == 1) {
                                HlsSleep0()
                            } else {
                                error = data.details + ' (' + data.type + ')';
                                o.seekto > 0 || pip || v.live == 1 || is_ws ? '' : o.seekto = Time();
                                hls.destroy();
                                if (!pip) {
                                    o.media.onError()
                                }
                            }
                            break;
                        case Hls.ErrorTypes.MEDIA_ERROR:
                            log("HLS fatal media error, recover");
                            hls.recoverMediaError();
                            break;
                        default:
                            error = "HLS fatal error, destroy";
                            hls.destroy();
                            !pip ? o.media.onError() : '';
                            break
                    }
                } else {
                    log("HLS ", data.type, data.details, (data.response ? data.response.code : ''));
                    js("hls_error", (data.response ? data.response.code : ''));
                    if (is_sleep > 0) {
                        is_sleep = 2;
                        HlsSleep()
                    }
                }
            });
            hls_created = true
        }

        function HlsLevel() {
            if (!pip && v.hlsquality == 1 && HlsLevelsLength() > 1) {
                if (o.current_quality != hls.loadLevel) {
                    o.current_quality = hls.loadLevel;
                    o.controls ? o.controls.QualityChangedNoHand(o.current_quality) : '';
                    log("HLS Level " + o.current_quality)
                }
                if (exist2(v.forbidden_quality) && o.current_quality > 0) {
                    var fq = v.forbidden_quality.split(",");
                    for (var k = 0; k < fq.length; k++) {
                        if (o.files_quality[o.current_quality].indexOf(fq[k]) > -1) {
                            log('regress quality');
                            hls.currentLevel = o.current_quality - 1;
                            o.current_quality--;
                            break
                        }
                    }
                }
            }
        }

        function CreateWS() {
            if (exist(window.FlussonicMsePlayer)) {
                if (MseIsSupported()) {
                    if (!exist(o.ws)) {
                        o.ws = new PluginWS()
                    }
                    ws = new FlussonicMsePlayer(pjstg, url, existv(v.wsconfig, {
                        debug: true
                    }));
                    ws_created = true
                } else {
                    is_ws = false;
                    log("not supported")
                }
            }
        }

        function hlsTextTracks() {
            Captions()
        };
        this.captions = function() {
            Captions()
        };

        function Captions() {
            if (v.hlscaptions) {
                if (pjstg.textTracks.length > 0) {
                    if (v.captions == 1) {
                        pjstg.textTracks[pjstg.textTracks.length - 1].mode = "showing"
                    } else {
                        pjstg.textTracks[pjstg.textTracks.length - 1].mode = "hidden"
                    }
                    if (!o.captions) {
                        o.captions = true;
                        o.controls.refresh()
                    }
                } else {
                    if (o.captions) {
                        o.captions = false;
                        o.controls.refresh()
                    }
                }
            }
        }

        function HlsSleep0() {
            log("sleep");
            !pip && o.play ? o.actions.Pause() : '';
            o.actions.ShowPoster();
            is_sleep = 1;
            HlsSleep(o.play)
        }

        function HlsSleep(x) {
            if (is_sleep > 0) {
                clearTimeout(sleep_timeout);
                sleep_timeout = setTimeout(HlsLiveWaiting, v.livewakeuptime * 1000)
            }
        }

        function HlsLiveWaiting() {
            if (is_sleep > 0) {
                log("watching");
                if (is_hls) {
                    if (is_sleep == 1) {
                        hls.loadSource(url)
                    }
                    if (is_sleep == 2) {
                        hls.destroy();
                        CreateHLS(true);
                        pjstg.play()
                    }
                } else {
                    attr(pjstg, {
                        'src': url
                    })
                }
            }
        }
        pjstg.addEventListener('loadstart', onLoadStart);
        pjstg.addEventListener('error', onTagError);
        pjstg.addEventListener('ended', onEnded);
        pjstg.addEventListener('play', onPlay);
        pjstg.addEventListener('pause', onPause);
        pjstg.addEventListener('timeupdate', onTimeupdate);
        pjstg.addEventListener('seeking', onSeeking);
        pjstg.addEventListener('seeked', onSeeked);
        pjstg.addEventListener('loadedmetadata', onMeta);
        pjstg.addEventListener('volumechange', onVolume);
        pjstg.addEventListener('waiting', onWaiting);
        pjstg.addEventListener('durationchange', onDuration);
        pjstg.addEventListener('loadeddata', onLoadedData);
        pjstg.addEventListener('enterpictureinpicture', onPipEnter);
        pjstg.addEventListener('leavepictureinpicture', onPipLeave);

        function onLoadStart() {
            if (!is_hls && !is_dash) {
                !pip ? o.actions.MediaReady() : ''
            }
        }

        function onTagError() {
            if (!is_hls && !is_dash) {
                if (pjstg.error) {
                    log(pjstg.error, pjstg.error.code, pjstg.error.message);
                    var x = pjstg.error.code;
                    error = pjstg.error.message;
                    if (error == '') {
                        if (x == 1) {
                            error = "aborted"
                        }
                        if (x == 2) {
                            error = "network"
                        }
                        if (x == 3) {
                            error = "decode"
                        }
                        if (x == 4) {
                            error = "not found"
                        }
                    }
                    log("Video Error: ", error)
                }
                if (is_hls2 && v.livewakeup == 1) {
                    error = undefined;
                    HlsSleep0()
                }
                if (error != undefined || o.system.ios) {
                    onError()
                }
            }
        }

        function onError() {
            !pip ? o.media.onError() : ''
        }

        function onEnded() {
            !pip ? o.media.onEnded() : ''
        }

        function onPlay() {
            if (!o.start && v.preroll) {
                log('wrong play');
                pause();
                o.actions.Play();
                return
            }
            if (is_hls && is_sleep > 0) {} else {
                if (!pip) {
                    var bgl = o.actions.isVastBgLoad() && o.vastfrombg != 1;
                    if (bgl || pause_before_vast == -1) {
                        var x = false;
                        if (is_hls) {
                            if (exist(o.vast) || exist(o.vastloader)) {
                                if (bgl) {} else {
                                    log('pause onplay');
                                    pause();
                                    x = true
                                }
                            }
                        }
                        if (!x) {
                            o.media.onPlay()
                        }
                    }
                }
            }
        }

        function onPause() {
            if (!nops) {
                log("onpause");
                if (o.play && o.actplay && !pjstg.ended && v.unpause == 1 && !o.nativecontrols) {
                    log("unpause");
                    TagPlay()
                } else {
                    !pip && !o.nopause && pjstg.paused ? o.media.onPause() : ''
                }
            }
        }

        function onTimeupdate() {
            !pip ? o.media.onTimeupdate() : '';
            if (pause_before_vast > -1) {
                if (Time() > pause_before_vast) {
                    log('pause ontime', pause_before_vast);
                    pause();
                    pause_before_vast = -1
                }
            }
        }

        function onSeeking() {
            !pip ? o.media.onSeeking() : ''
        }

        function onSeeked() {
            !pip ? o.media.onSeeked() : ''
        }

        function onMeta() {
            if (pip) {
                PipSize()
            } else {
                o.media.onMeta();
                PlayerSize();
                if (is_hls && is_sleep > 0) {
                    is_sleep = 0;
                    log("wake up");
                    hls.startLoad();
                    TagPlay();
                    o.controls.Play()
                }
                if (exist(v.ratio)) {
                    Resize()
                }
            }
        }
        this.ratio = function() {
            return (pjstg.videoWidth / pjstg.videoHeight)
        };

        function PipSize() {
            if (pjstg.videoHeight > 0) {
                css(container, {
                    "height": container.offsetWidth / (pjstg.videoWidth / pjstg.videoHeight) - parseInt(v.pip.border)
                })
            } else {
                if (pipto < 20) {
                    setTimeout(PipSize, 100);
                    pipto++
                }
            }
        }

        function PlayerSize() {
            if (v.changeheight == 1) {
                clearInterval(o.heightInterval);
                o.heightInterval = setInterval(WaitSize, 100);
                WaitSize()
            }
        }

        function WaitSize() {
            if (pjstg) {
                if (pjstg.videoHeight > 0) {
                    o.actions.changeAspect(pjstg.videoWidth / pjstg.videoHeight);
                    clearInterval(o.heightInterval)
                }
            }
        }

        function onDuration() {
            !pip && !is_ws ? o.media.onDuration() : ''
        }

        function onVolume() {
            !pip ? o.media.onVolume() : ''
        }

        function onWaiting() {
            if (is_hls && is_sleep > 0) {} else {
                !pip ? o.media.onWaiting() : ''
            }
        }

        function onLoadedData() {
            o.actions.LoadedData()
        }

        function MseIsSupported() {
            var mediaSource = window.MediaSource = window.MediaSource || window.WebKitMediaSource;
            var sourceBuffer = window.SourceBuffer = window.SourceBuffer || window.WebKitSourceBuffer;
            var isTypeSupported = mediaSource && typeof mediaSource.isTypeSupported === 'function' && mediaSource.isTypeSupported(mimeCodec);
            var sourceBufferValidAPI = !sourceBuffer || sourceBuffer.prototype && typeof sourceBuffer.prototype.appendBuffer === 'function' && typeof sourceBuffer.prototype.remove === 'function';
            return isTypeSupported && sourceBufferValidAPI
        }
        var span05 = "<span style='opacity:0.5'>";

        function HlsQualityLevels() {
            if (!pip && v.hlsquality == 1) {
                var x = hls.levels;
                var q = -1;
                o.files_quality = [];
                if (x.length > 1) {
                    for (var i = 0; i < x.length; i++) {
                        if (exist(x[i].height)) {
                            var y = o.media.renameQualities(x[i], v.nameofhlsquality);
                            if (o.files_quality.indexOf(y) > -1 || v.hlsaddbitrate == 1) {
                                if (exist(x[i].bitrate)) {
                                    var yi = o.files_quality.indexOf(y);
                                    yi > -1 ? o.files_quality[yi] += " " + span05 + " &nbsp;" + parseInt(x[yi].bitrate / 1000) + ' ' + Lang('kbps') + '</span>' : '';
                                    o.files_quality[i] = y + " " + span05 + " &nbsp;" + parseInt(x[i].bitrate / 1000) + ' ' + Lang('kbps') + '</span>'
                                }
                            } else {
                                o.files_quality[i] = y
                            }
                            if (exist(x[i].audioGroupIds)) {
                                o.files_quality_ag[i] = x[i].audioGroupIds[0]
                            }
                        } else if (exist(x[i].name)) {
                            o.files_quality[i] = x[i].name
                        } else {
                            o.files_quality[i] = i
                        }
                        if (exist(v.default_quality) && q == -1) {
                            if (v.default_quality == o.files_quality[i]) {
                                q = i
                            }
                        }
                        if (exist(o.default_quality)) {
                            if (o.default_quality == o.files_quality[i]) {
                                q = i
                            }
                        }
                    }
                    if (v.hlsautoquality == 1) {
                        o.files_quality[x.length] = Lang("auto")
                    } else {
                        hls.autoLevelEnabled = 0;
                        hls.autoLevelCapping = 0
                    }
                    if (v.hlslowquality == 1 || q > -1) {
                        hls.autoLevelCapping = 0;
                        if (v.hlschangequality == "next" || (!o.start && v.preload == 0)) {
                            hls.nextLevel = q
                        } else {
                            if (v.hlschangequality == "current") {
                                hls.currentLevel = q
                            }
                        }
                        o.current_quality = q
                    } else {
                        if (v.hlsautoquality == 1) {
                            o.current_quality = hls.levels.length - 1
                        } else {
                            o.current_quality = hls.firstLevel
                        }
                    }
                    HlsUpdateAudio()
                }
                o.bitrate = existv(hls.levels[o.current_quality].bitrate, 0);
                o.controls ? o.controls.refresh() : ''
            }
        }

        function HlsUpdateAudio() {
            if (o.files_quality_ag.length > 0 && v.hlsaudio == 1) {
                HlsAudioTracks();
                HlsAudioTrack()
            }
        }

        function HlsAudioTracks() {
            if (!pip && v.hlsaudio == 1) {
                var x = hls.audioTracks;
                o.files_audiotrack = [];
                var stop;
                if (x.length > 1) {
                    for (var i = 0; i < x.length; i++) {
                        stop = false;
                        if (exist(x[i].groupId) && o.files_quality_ag.length > 0) {
                            if (x[i].groupId != o.files_quality_ag[o.current_quality]) {
                                for (var j = 0; j < o.files_quality_ag.length; j++) {
                                    if (o.files_quality_ag[j] == x[i].groupId) {
                                        stop = true
                                    }
                                }
                            }
                        }
                        if (!stop) {
                            o.files_audiotrack[i] = exist(x[i].name) ? o.media.renameTracks(x[i].name) : i;
                            if (exist(v.default_audio)) {
                                if (v.default_audio == o.files_audiotrack[i]) {
                                    o.current_audiotrack = i;
                                    hls.audioTrack = i
                                }
                            }
                        }
                    }
                }
            }
        }

        function HlsAudioTrack() {
            if (!pip) {
                var x = hls.audioTracks;
                var y = hls.audioTrack;
                if (y > -1) {
                    if (exist(x[y].groupId)) {
                        if (o.files_quality_ag.length > 0) {
                            if (o.files_quality_ag[o.current_quality] != x[y].groupId) {
                                for (var i = 0; i < x.length; i++) {
                                    if (x[i].name == x[y].name && x[i].groupId == o.files_quality_ag[o.current_quality]) {
                                        hls.audioTrack = i;
                                        y = i;
                                        break
                                    }
                                }
                            }
                        }
                    }
                    o.current_audiotrack = y;
                    log("HLS AudioTrack", o.current_audiotrack);
                    o.controls.AudioTrackChangedNoHand(o.current_audiotrack)
                }
            }
        };

        function Time() {
            if (is_dash) {
                return dash_created ? o.dash.time() : 0
            } else {
                return pjstg.currentTime
            }
        };

        function Duration() {
            var x = pjstg.duration;
            if (is_dash && dash_created) {
                x = o.dash.duration()
            }
            if (exist(v.end)) {
                x = v.end
            }
            return x != Infinity && !isNaN(x) ? x : 0
        }
        this.Play = function() {
            var p = true;
            if (is_hls && !hls_started) {
                if (!hls_created) {
                    CreateHLS(true)
                }
                hls.startLoad()
            }
            if (is_dash && !dash_created) {
                CreateDASH(true);
                p = false
            }
            if (is_ws) {
                if (!ws_created) {
                    CreateWS()
                }
                ws.play();
                p = false
            }
            if (pjstg.style.top == "-2000px") {
                this.AfterVast()
            }
            p ? TagPlay() : ''
        };
        var playtry;

        function TagPlay() {
            if (url != "none") {
                var pp = pjstg.play();
                if (pp !== undefined) {
                    pp.then(function() {}).catch(function(error) {
                        log("playError", error.message);
                        if (error.message.indexOf('source') == -1 && error.message.indexOf('interrupted by') == -1) {
                            if (v.autoplaymute == 1) {
                                log('automute');
                                o.actions.Mute();
                                pjstg.volume = 0;
                                var pp2 = pjstg.play();
                                if (pp2) {
                                    pp2.then(function() {}).catch(function(e) {
                                        log("playError2", e.message);
                                        if (o.system.tv && (is_hls || is_dash)) {} else {
                                            o.controls.Pause();
                                            o.actions.ShowPoster();
                                            js("autoplay_denied")
                                        }
                                    })
                                }
                            } else {
                                o.controls.Pause();
                                o.actions.ShowPoster()
                            }
                        }
                    })
                }
            }
        }
        this.BeforeVast = function() {
            if (o.vastloader || o.vast) {
                if (o.ispipkit) {
                    PipWebkit()
                }
                if (!o.airplayed && o.system.mobile && o.system.webkit) {
                    if (!pjstg.muted) {
                        pjstg.muted = true;
                        unmuteplease = true
                    }
                    css(pjstg, {
                        "position": "absolute",
                        "left": -2000,
                        "top": -2000
                    });
                    pause_before_vast = Time();
                    if (!is_ws) {
                        pjstg.play()
                    }
                    if (pause_before_vast == 0 && o.seekto > 0) {
                        _seekaftervast = o.seekto
                    }
                }
            }
        };
        this.AfterVast = function() {
            if (!o.airplayed && (o.system.mobile || o.system.webkit)) {
                css(pjstg, {
                    "position": "static",
                    "left": 0,
                    "top": 0
                });
                if (exist(v.ratio)) {
                    Resize()
                }
                if (unmuteplease) {
                    !o.muted ? pjstg.muted = false : '';
                    unmuteplease = false
                }
                if (_seekaftervast > 0) {
                    o.seekto = _seekaftervast;
                    _seekaftervast = 0
                }
                pause_before_vast = -1
            }
        };
        this.Pause = function() {
            log('paused');
            pause()
        };

        function pause() {
            if (is_ws) {
                ws.pause()
            } else {
                pjstg.pause()
            }
        };
        this.Toggle = function() {
            !pjstg.paused ? Pause() : TagPlay()
        };
        this.Seek = function(x) {
            if (is_dash && dash_created) {
                o.dash.seek(x)
            } else {
                if (is_hls) {
                    if (v.hlsforce == 1 && x > 0 && isAuto()) {
                        hls_force = hls.currentLevel;
                        hls.nextAutoLevel = 0
                    }
                }
                pjstg.currentTime = x
            }
        };
        this.Mute = function() {
            pjstg.muted = true
        };
        this.Unmute = function() {
            pjstg.muted = false;
            if (o.file_type == "hls" && o.system.ios && v.vast == 1) {
                if (!exist(o.um1)) {
                    nops = true;
                    pjstg.pause();
                    setTimeout(function() {
                        pjstg.play();
                        nops = false
                    }, 10);
                    o.um1 = true
                }
            }
        };
        this.Volume = function(x) {
            pjstg.volume = x
        };
        this.Gain = function() {
            if (o.gainedsource != pjstg) {
                var source;
                var ctx;
                if (o.audiosrc[pjstg]) {
                    source = o.audiosrc[pjstg];
                    ctx = o.audioctx[pjstg]
                } else {
                    window.AudioContext = window.AudioContext || window.webkitAudioContext;
                    if (exist(window.AudioContext)) {
                        try {
                            ctx = new AudioContext();
                            source = ctx.createMediaElementSource(pjstg);
                            o.audiosrc[pjstg] = source;
                            o.audioctx[pjstg] = ctx
                        } catch (e) {
                            log(e)
                        }
                    }
                }
                if (ctx) {
                    var gain = ctx.createGain();
                    gain.gain.value = v.volumegain;
                    source.connect(gain);
                    gain.connect(ctx.destination);
                    o.gained = true;
                    o.gainedsource = pjstg
                }
            }
        };
        this.isPlaying = function() {
            return !pjstg.paused
        };
        this.isLive = function() {
            return v.live == 1 || is_ws ? true : o.live
        };
        this.tag = function() {
            return pjstg
        };
        this.nativeControls = function() {
            attr(pjstg, {
                'controls': '1'
            });
            return true
        };
        this.preload = function() {
            attr(pjstg, {
                'preload': 'metadata'
            });
            if (is_hls && !hls_created) {
                CreateHLS(false)
            }
            if (is_dash && !dash_created) {
                CreateDASH(false)
            }
        };
        this.status = function() {
            var state = "playing";
            if (pjstg.paused) {
                state = "paused"
            }
            if (pjstg.ended) {
                state = "ended"
            }
            return state
        };
        this.ChangePip = function(x, y) {
            pip = x;
            y.appendChild(pjstg);
            container = y;
            if (x) {
                if (v.pip.nomute != 1) {
                    pjstg.muted = true
                } else {
                    if (!o.muted) {
                        pjstg.muted = false
                    }
                }
                PipSize();
                if (o.files_quality.length > 0) {
                    if (is_hls) {
                        pip_quality = o.current_quality;
                        hls.autoLevelCapping = 0;
                        hls.currentLevel = 0
                    }
                }
            } else {
                if (!o.muted && v.pip.nomute != 1) {
                    pjstg.muted = false
                }
                pjstg.volume = v.volume;
                PlayerSize();
                if (o.files_quality.length > 0) {
                    if (is_hls) {
                        hls.autoLevelCapping = -1;
                        if (pip_quality > -1) {
                            pip_quality < hls.levels.length ? hls.nextLevel = pip_quality : ''
                        }
                    }
                }
            }
        };
        this.time = function() {
            return Time()
        };
        this.duration = function() {
            return Duration()
        };
        this.loaded = function() {
            var x = 0;
            if (pjstg.buffered) {
                if (pjstg.buffered.length > 0) {
                    var y = Time();
                    for (var i = 0; i < pjstg.buffered.length; i++) {
                        if ((y >= pjstg.buffered.start(i) || y >= pjstg.buffered.start(i) - 100) && y <= pjstg.buffered.end(i)) {
                            x = pjstg.buffered.end(i)
                        }
                    }
                    x == 0 ? x = pjstg.buffered.end(pjstg.buffered.length - 1) : ''
                }
            }
            if (exist(v.end)) {
                x > v.end ? x = v.end : ''
            }
            return x
        };
        this.auto = function() {
            return isAuto()
        };

        function isAuto() {
            var x = false;
            if (is_hls) {
                if (hls_created) {
                    x = hls.autoLevelEnabled
                }
            } else if (is_dash) {
                if (dash_created) {
                    x = o.dash.auto()
                }
            }
            return x
        }
        this.size = function() {
            return {
                "width": pjstg.videoWidth,
                "height": pjstg.videoHeight
            }
        };
        this.src = function(x) {
            x = x.replace(/\(random\)/g, Math.random());
            url = x;
            o.media_error != 2 ? o.media_error = false : '';
            if (is_dash) {
                if (dash_created) {
                    o.dash.source(x)
                }
            } else if (is_hls) {
                is_hls && hls ? hls.destroy() : '';
                CreateHLS(true);
                CheckPip()
            } else {
                attr(pjstg, {
                    'src': x,
                    'autoplay': 0
                });
                tagSrc();
                pause()
            }
        };

        function tagSrc() {
            if (o.system.safari) {
                var y = pjstg.textTracks;
                if (y) {
                    for (var i = 0; i < y.length; i++) {
                        y[i].mode = "disabled"
                    }
                }
                y = pjstg.audioTracks;
                if (y) {
                    for (i = 0; i < y.length; i++) {
                        y[i].enabled = (i == 0 ? 1 : 0)
                    }
                }
                if (window.WebKitPlaybackTargetAvailabilityEvent) {
                    pjstg.addEventListener('webkitplaybacktargetavailabilitychanged', function(event) {
                        o.airplay = event.availability == "available";
                        !pip ? o.actions.AirplayChanged() : ''
                    });
                    pjstg.addEventListener('webkitcurrentplaybacktargetiswirelesschanged', function(event) {})
                }
            }
            CheckPip();
            if (v.v360 == 1) {
                typeof PjsCheck360 !== "undefined" ? PjsCheck360(url, pjstg, container) : ''
            }
        }
        this.airplay = function() {
            pjstg.webkitShowPlaybackTargetPicker()
        };
        this.pipwebkit = function() {
            PipWebkit()
        };

        function CheckPip() {
            if (o.system.webkit) {
                if (exist(pjstg.webkitSupportsPresentationMode) && !o.system.iphone) {
                    o.pipwebkit = true
                }
                if (document.pictureInPictureEnabled && !pjstg.disablePictureInPicture) {
                    o.pipwebkit = true
                }
            }
        }

        function PipWebkit() {
            if (o.system.safari) {
                if (pjstg.webkitPresentationMode === "picture-in-picture") {
                    pjstg.webkitSetPresentationMode("inline");
                    o.ispipkit = false
                } else {
                    pjstg.webkitSetPresentationMode("picture-in-picture");
                    o.ispipkit = true
                }
            } else {
                if (!document.pictureInPictureElement) {
                    eval('pjstg.requestPictureInPicture().then(p => {o.ispipkit = true;}).catch(error => {o.ispipkit = false;});')
                } else {
                    eval('document.exitPictureInPicture().then(ok =>{o.ispipkit = false;}).catch(error => {});')
                }
            }
        };

        function onPipEnter() {
            o.ispipkit = true
        };

        function onPipLeave() {
            o.ispipkit = false
        };
        this.setDashQuality = function(x) {
            if (dash_created) {
                o.dash.setQuality(x)
            }
        };
        this.setDashAudioTrack = function(x) {
            if (dash_created) {
                if (pjstg.buffered.length > 0) {
                    o.dash.setAudio(x)
                }
            }
        };
        this.setWsQuality = function(x) {
            if (o.ws) {
                o.ws.setTracks(ws, x, -1)
            }
        };
        this.setWsAudioTrack = function(x) {
            if (o.ws) {
                o.ws.setTracks(ws, -1, x)
            }
        };
        this.setHlsQuality = function(x) {
            if (hls_created) {
                var y = parseInt(x);
                if (x == hls.levels.length) {
                    y = -1;
                    hls.autoLevelCapping = -1
                }
                if (v.hlschangequality == "current") {
                    setTimeout(onWaiting, 500);
                    hls.currentLevel = y
                }
                if (v.hlschangequality == "next") {
                    log("HLS next level " + y);
                    hls.nextLevel = y
                }
                if (y == -1) {
                    o.current_quality = hls.loadLevel
                }
                HlsUpdateAudio()
            }
        };
        this.getHLS = function() {
            return hls
        };
        this.getDASH = function() {
            return dash_created ? o.dash.getDash() : false
        };
        this.HlsLevelsLength = function() {
            return HlsLevelsLength()
        };

        function HlsLevelsLength() {
            var x = 0;
            if (hls_created) {
                if (hls.levels) {
                    x = hls.levels.length
                }
            }
            return x
        }
        this.DashLevelsLength = function() {
            return DashLevelsLength()
        };
        this.ObjectFit = function() {
            ObjectFit()
        };

        function ObjectFit() {
            if (pjstg) {
                if (v.covervideo == 1 || v.fill == 1) {
                    if (v.fillvideo == 1 || v.fill == 1) {
                        css(pjstg, {
                            'object-fit': 'fill'
                        })
                    } else {
                        css(pjstg, {
                            'object-fit': 'cover'
                        })
                    }
                } else {
                    css(pjstg, {
                        'object-fit': 'contain'
                    })
                }
            }
        }
        this.resize = function() {
            Resize()
        };

        function Resize() {
            if (v.ratio) {
                apiProcessor('scale', String(v.ratio).replace('/', ':'))
            }
        }

        function DashLevelsLength() {
            var x = 0;
            if (dash_created) {
                x = o.dash.levels()
            }
            return x
        }
        this.setHlsAudioTrack = function(x) {
            if (hls_created) {
                hls.audioTrack = parseInt(x)
            }
        };
        this.hlsDashSub = function(x, y) {
            if (y == "hls" && hls_created && _hlssubtracks) {
                _hlssubtracks.HlsSubTrack(x)
            }
            if (y == "dash" && dash_created) {
                o.dash.subtrack(x)
            }
        };
        this.setSpeed = function(x) {
            if (x) {
                pjstg.playbackRate = x
            }
        };
        this.removeTracks = function() {
            var x = pjstg.childNodes;
            var y = [];
            for (var i = 0; i < x.length; i++) {
                if (x[i].tagName.toLowerCase() == 'track') {
                    x[i].removeEventListener("load", iOSTrackLoaded);
                    y.push(x[i])
                }
            }
            for (var i = 0; i < y.length; i++) {
                pjstg.removeChild(y[i])
            }
        };
        this.addTrack = function(x, y, z) {
            if (x != '') {
                if (x.indexOf(' or ') > 0) {
                    var xx = x.split(' or ');
                    x = xx[0]
                }
                var track = document.createElement('track');
                track.setAttribute('src', x);
                track.setAttribute('label', y);
                track.setAttribute('kind', 'subtitles');
                track.setAttribute('mode', 'showing');
                if (z) {
                    track.setAttribute('default', '')
                }
                pjstg.appendChild(track);
                track.addEventListener("load", iOSTrackLoaded)
            }
        };

        function iOSTrackLoaded(e) {
            if (e.target.label && o.sbt) {
                for (var i = 0; i < o.files_subtitle.length; i++) {
                    if (o.files_subtitle[i] == e.target.label) {
                        o.sbt.SetSubtitle(i)
                    }
                }
            }
        };
        this.errorMessage = function() {
            return error ? error : ''
        };
        this.Remove = function() {
            clearInterval(o.dashInterval);
            is_hls && hls ? hls.destroy() : '';
            is_dash && dash_created ? o.dash.reset() : '';
            is_ws && ws ? ws.stop() : '';
            pjstg.removeEventListener('error', onTagError);
            pjstg.removeEventListener('ended', onEnded);
            pjstg.removeEventListener('play', onPlay);
            pjstg.removeEventListener('pause', onPause);
            pjstg.removeEventListener('timeupdate', onTimeupdate);
            pjstg.removeEventListener('seeking', onSeeking);
            pjstg.removeEventListener('seeked', onSeeked);
            pjstg.removeEventListener('loadedmetadata', onMeta);
            pjstg.removeEventListener('volumechange', onVolume);
            pjstg.removeEventListener('waiting', onWaiting);
            pjstg.removeEventListener('durationchange', onDuration);
            pjstg.removeEventListener('enterpictureinpicture', onPipEnter);
            pjstg.removeEventListener('leavepictureinpicture', onPipLeave);
            pjstg.src = '';
            if (container.tagName == "IFRAME") {
                container.contentDocument.body.removeChild(pjstg)
            } else {
                container.removeChild(pjstg)
            }
            pjstg = null
        }
    };
    var Controls = function() {
        var b = [];
        var butNames = [];
        var butPosition = [];
        var waiting = false;
        var wait_to;
        var toolbarHidden = false;
        var settings;
        var playlist;
        if (o.settings2) {
            o.settings2.hide();
            o.settings2 = null
        }
        var _lastactbut;
        o.files_speed = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 2];
        if (v.settings.customspeeds == 1 && exist(v.settings.speeds)) {
            v.settings.speeds = v.settings.speeds.replace(/\n/ig, '');
            o.files_speed = v.settings.speeds.split(",")
        }
        o.speed1 = o.files_speed.indexOf('1') > -1 ? o.files_speed.indexOf('1') : o.files_speed.indexOf(1);
        o.current_speed == 3 ? o.current_speed = o.speed1 : '';
        for (var i in o.menuproc) {
            if (o.menuproc.hasOwnProperty(i)) {
                !exist(v.settings[i]) ? v.settings[i] = 5 : '';
                o['files_' + i] = ['+ ' + v.settings[i] + '%', '&ndash; ' + v.settings[i] + '%', (o.menuproc[i] * 100 + '%')]
            }
        }
        if (v.toolbar.hidejustfull == 1 && o.system.ios && v.nativefullios == 1) {
            v.toolbar.hide = 0
        }
        var resizeonwidth = false;
        var stretch_width = 0;
        var stretch_width_last = 0;
        var stretch_with_volume = false;
        var firstly = true;
        var uijs;
        var bg = new ControlsBg();
        var settings;
        var order = [];
        var _rights = false;
        var _move_rights = false;
        var _max_order = 0;
        var _rb = [];
        if (v.control_line.position == "controls-right") {
            v.control_line.position = "controls"
        }
        for (var y in v) {
            if (v.hasOwnProperty(y)) {
                if (y.indexOf("control_") == 0 && v[y]) {
                    !exist(v[y].order0) ? v[y].order0 = v[y].order : v[y].order = v[y].order0;
                    order[v[y].order] = y;
                    if (v.control_line.position != "controls") {
                        if (v[y].position == "controls-right") {
                            _rb.push([y, v[y].order]);
                            _rights = true
                        } else {
                            if (v[y].position == "controls" || v[y].position == undefined) {
                                _rights ? _move_rights = true : ''
                            }
                        }
                    }
                    _max_order < v[y].order ? _max_order = v[y].order : ''
                }
            }
        }
        if (_move_rights) {
            _rb.sort(function(a, b) {
                return a[1] - b[1]
            });
            for (var i = 0; i < _rb.length; i++) {
                order[v[_rb[i][0]].order] = null;
                v[_rb[i][0]].order = _max_order + 1;
                _max_order++;
                order[v[_rb[i][0]].order] = _rb[i][0]
            }
        }
        if (v.toolbar.hide == 1 && v.toolbar.hidedown == 1) {
            o.toolbar = createElement("div");
            o.frame.appendChild(o.toolbar);
            css(o.toolbar, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'width': '100%',
                'height': '100%',
                'transition': 'top 0.3s ease-out',
                'pointer-events': 'none'
            })
        }
        var bg2 = createElement("div");
        if (v.toolbar.hide == 1 && v.toolbar.hidedown == 1) {
            o.toolbar.appendChild(bg2)
        } else {
            o.frame.appendChild(bg2)
        }
        css(bg2, {
            'position': 'absolute',
            'left': 0,
            'bottom': 0,
            'width': '100%',
            'height': v.toolbar.h
        });
        bg2.onclick = function() {
            !o.system.mobile ? o.actions.ControlsBgClick() : ''
        };
        if (v.nocontrols == 1) {
            hide2(bg.c());
            hide2(bg2)
        }
        for (var i = 1; i < order.length; i++) {
            if (order[i]) {
                var y = order[i];
                if (y) {
                    var action = v[y].action;
                    if (o.system.mobile) {
                        if (action == "volume" && v[y].customline == "speed") {} else {
                            if (action == "volume" && v.showvolmobile == 1 && o.system.mobile) {
                                v[y].hideoutmute = 0
                            } else {
                                if (action == "volume" || (action == "fullscreen" && v.nativemobile)) {
                                    v[y].on = 0
                                }
                            }
                        }
                    }
                    if (v.nocontrols == 1) {
                        v[y].on = 0
                    }
                    if (v[y].on == 1) {
                        if (action == "line" || action == "volume") {
                            b[y] = new ControlLine(y, action);
                            b[y].Resize(b[y].s("w"))
                        } else {
                            b[y] = new Control(y)
                        }
                        butNames.push(y);
                        if (b[y].g("action") == "title") {
                            if (b[y].s("text") == '') {
                                if (b[y].s("var") != '') {
                                    if (!exist(v[b[y].s("var")])) {
                                        b[y].set("display", false)
                                    }
                                } else {
                                    b[y].set("display", false)
                                }
                            }
                        }
                        if (b[y].g("action") == "custom") {
                            var lu = b[y].s("linkurl");
                            if (lu) {
                                if (lu.indexOf("api:") == 0 && lu.indexOf(",0/1") > 0) {
                                    var z = lu.split(",");
                                    apiProcessor(z[0].substr(4)) == 0 ? b[y].CustomSwitch(0) : ''
                                }
                                if (indOf([lu], "share")) {
                                    o.shareme = true
                                }
                            }
                        }
                        b[y].set("scale", b[y].s("scale"))
                    }
                }
            }
        }
        if (exist(v.settings)) {
            if (typeof(Settings) == 'function') {
                settings = new Settings("settings");
                v.settings.always == 1 ? settings.show() : settings.hide()
            } else {
                o.noset = true
            }
        }
        if (exist(v.playlist)) {
            if (typeof(Settings) == 'function') {
                playlist = new Settings("playlist");
                if (exist(o.playlist)) {
                    playlist.updatePlaylist(o.playlist);
                    if (v.playlist.openplaylistbefore == 0 || !exist(v.playlist.openplaylistbefore)) {
                        v.playlist.always == 0 ? playlist.hide() : ''
                    } else {
                        playlist.show()
                    }
                    if (v.playlist.always2 == 1) {
                        playlist.show()
                    }
                } else {
                    playlist.hide(1)
                }
                PlaylistControls()
            }
        }
        CreateShare();
        CustomTextButs();
        Resize(true);
        ShowOrHide();
        SpeedChanged();
        firstly = false;

        function ControlX(but) {
            var x = 0;
            var to_right = false;
            if (but) {
                if (but.g("action") == 'line') {
                    x = butPosition.left + but.s("marginleft");
                    if (butPosition.rightbs != null) {} else {
                        butPosition.rightbs = []
                    }
                } else {
                    if (butPosition.rightbs != null) {
                        var but_space = but.g("width") + but.s("marginright") + but.s("marginleft");
                        if (HideProof(but)) {
                            but_space = 0
                        }
                        if (but.s("hidden") == 1 && !but.g("show")) {
                            but_space = 0
                        }
                        if (but.s("vertical") > 0) {
                            but_space = 0
                        }
                        x = bg.g("w") - v.toolbar.leftandrightpadding * 1 - but_space + but.g("width") / 2 + but.s("marginleft");
                        var i = 0;
                        butPosition.right -= but_space;
                        for (i = 0; i < butPosition.rightbs.length; i++) {
                            var but2 = b[butPosition.rightbs[i]];
                            if (but2.s("vertical") > 0) {
                                css(but2.c(), {
                                    "left": (but2.g("x0") - but_space)
                                })
                            } else {
                                css(but2.c(), {
                                    "left": (but2.g("x") - but_space)
                                })
                            }
                            but2.set("x0", but2.g("x"))
                        }
                        butPosition.rightbs.push(but.g("key"));
                        but.set('rightside', 1)
                    } else {
                        if (but.s("hidden") == 1 && !but.g("show")) {
                            if (but.g("action") == "volume") {
                                if (but.s("hide") == 1 && but.s("hideoutmute") == 1 && stretch_with_volume) {
                                    stretch_width += but.g("width") + but.s("marginleft") + but.s("marginright");
                                    stretch_with_volume = false
                                }
                            }
                        } else {
                            if (but.s("vertical") > 0) {
                                x = butPosition.left + but.s("marginleft") + but.s("marginright")
                            } else {
                                var stop = false;
                                if (but.g("action") == "volume") {
                                    if (but.s("hide") == 1 && but.s("hideoutmute") == 1) {
                                        if (!o.hidden_volume_over_process && !o.hidden_volume_over) {
                                            stop = true;
                                            stretch_with_volume = false
                                        } else {
                                            if (!stretch_with_volume) {
                                                stretch_width -= but.g("width") + but.s("marginleft") + but.s("marginright");
                                                stretch_with_volume = true
                                            }
                                        }
                                    }
                                }
                                if (HideProof(but)) {
                                    stop = true
                                }
                                if (!stop) {
                                    butPosition.left += but.g("width") / 2 + but.s("marginleft");
                                    x = butPosition.left;
                                    butPosition.left += but.g("width") / 2 + but.s("marginright")
                                } else {
                                    x = butPosition.left
                                }
                            }
                        }
                    }
                }
            }
            return x
        };
        this.NewPl = function() {
            CreateShare()
        };
        this.CrShr = function() {
            CreateShare()
        };

        function CreateShare() {
            if (o.shareme) {
                typeof PluginShare == 'function' ? o.share = new PluginShare() : ''
            }
        }

        function ControlCoordinate(but) {
            var width = o.fullscreen && v.toolbar.stretchonfullscreen == 0 ? o.normal_w : o.screen_w;
            var height = o.screen_h;
            var but_x = 0;
            if (but != bg) {
                but_x = width / 2 + but.s("marginleft") - but.s("marginright")
            }
            var but_y = height / 2;
            var but_w = but.g("width");
            var but_h = but.g("height");
            var position = but.s("position");
            if (position.indexOf("center") > -1) {
                but_x = o.screen_w / 2 + but.s("marginleft") - but.s("marginright")
            }
            if (position.indexOf("top") == 0) {
                but_y = but_h / 2 + (but.s("marginproctop") * o.screen_h / 100)
            }
            if (position.indexOf("bottom") == 0) {
                but_y = o.screen_h - (but == bg ? but_h : but_h / 2) - (but.s("marginprocbottom") * o.screen_h / 100)
            }
            if (position.indexOf("right") > -1) {
                but_x = o.screen_w - but_w / 2 + but.s("marginleft") - but.s("marginright") - (but.s("marginprocright") * o.screen_w / 100)
            }
            if (position.indexOf("left") > -1) {
                but_x = but_w / 2 + but.s("marginleft") - but.s("marginright") + (but.s("marginprocleft") * o.screen_w / 100)
            }
            if (position == "timeline") {
                but_x = -o.timeline_w / 2 + (but.s("marginprocleft") * o.timeline_w / 100) + but.s("marginleft") - but.s("marginright");
                but_y = -o.timeline_h / 2 - (but.s("marginprocbottom") * o.timeline_h / 100) + (but.s("marginproctop") * o.timeline_h / 100)
            }
            if (position.indexOf("controls") > -1) {
                var cx = ControlX(but);
                but_x = (bg ? (bg.c() ? int(bg.c().offsetLeft) : 0) : 0) + cx;
                if (position == "controls-right") {
                    but_x += stretch_width
                }
                if (v.toolbar.position == "top") {
                    but_y = v.toolbar.h / 2 - (v.toolbar_margintop < 0 ? v.toolbar_margintop : 0)
                } else {
                    but_y = height - v.toolbar.h / 2
                }
            }
            return {
                x: but_x,
                y: but_y + but.s("margintop") - but.s("marginbottom")
            }
        }

        function Resize(all) {
            var w = o.fullscreen && v.toolbar.stretchonfullscreen == 0 ? o.normal_w : o.screen_w;
            var h = o.screen_h;
            css(bg.c(), {
                'top': (v.toolbar.position == "top" ? 0 : o.screen_h - v.toolbar.h) - v.toolbar_margintop
            });
            bg.set("y0", (o.screen_h - v.toolbar.h - v.toolbar_margintop));
            if (v.toolbar.stretchonfullscreen == 0 && bg) {
                css(bg.c(), {
                    'width': w,
                    'left': 0,
                    'margin-left': 0
                });
                bg.set("w", w);
                if (o.fullscreen) {
                    css(bg.c(), {
                        'left': '50%',
                        'margin-left': -w / 2
                    })
                }
            }
            butPosition = {
                "left": v.toolbar.leftandrightpadding * 1,
                "right": (bg.g("w") - v.toolbar.leftandrightpadding * 1)
            };
            var bg_hide = false;
            if (!bg.g("show")) {
                bg.set("display", true);
                bg_hide = true
            }
            var key;
            for (var i = 0; i < butNames.length; i++) {
                key = butNames[i];
                if (b[key]) {
                    var cc = ControlCoordinate(b[key]);
                    if (cc) {
                        if (b[key].s("animation") == "position") {
                            if (exist(o.motions[key])) {
                                o.motions[key].XY(b[key].g("x0"), cc.x, b[key].g("y0"), cc.y)
                            }
                        }
                        b[key].set("x0", cc.x);
                        b[key].set("y0", cc.y);
                        if (b[key].s("hidden") == 1 && !b[key].g("show") && !all) {
                            HidePositionControl(b[key])
                        } else {
                            css(b[key].c(), {
                                "position": "absolute",
                                "left": b[key].g("x0"),
                                "top": b[key].g("y0")
                            })
                        }
                    }
                }
            }
            if (bg_hide) {
                bg.set("display", false)
            }
            stretch_width = 0;
            for (key in b) {
                if (b.hasOwnProperty(key)) {
                    if (b[key].s("position") == "controls-right" && b[key].g("action") != "line" && stretch_width > -1) {
                        stretch_width = butPosition.right - butPosition.left
                    }
                    if (b[key].g("action") == "line" && bg) {
                        var line_width;
                        if (b[key].s("customwidth") == 1) {
                            line_width = b[key].s("w")
                        } else {
                            if (b[key].s("position").indexOf("controls") > -1) {
                                line_width = butPosition.right - butPosition.left - b[key].s("marginleft") - b[key].s("marginright");
                                css(b[key].c(), {
                                    "left": (int(bg.c().offsetLeft) + butPosition.left + b[key].s("marginleft") + line_width / 2)
                                });
                                stretch_width = -1
                            } else {
                                line_width = bg.g("w") - b[key].s("marginleft") - b[key].s("marginright");
                                css(b[key].c(), {
                                    "left": (int(bg.c().offsetLeft) + b[key].s("marginleft") + line_width / 2)
                                })
                            }
                        }
                        b[key].set("x0", b[key].g("x"));
                        b[key].Resize(line_width)
                    }
                }
            }
            if (settings) {
                ResizeSettings(settings)
            }
            if (playlist) {
                ResizeSettings(playlist)
            }
            if (resizeonwidth || o.fullscreen || stretch_width_last != stretch_width) {
                ShowOrHide()
            }
        }

        function HidePositionControl(b) {
            var left = 0;
            var top = 0;
            if (b.s("position").indexOf("right") > -1 && b.s("position").indexOf("controls") == -1) {
                left = o.screen_w + b.g("width") + 10
            }
            if (b.s("position").indexOf("left") > -1) {
                left = -b.g("width") - 10
            }
            if (b.s("position").indexOf("top") > -1) {
                top = -b.g("height") * 2
            }
            if (b.s("position").indexOf("bottom") > -1 || b.s("position").indexOf("controls") > -1) {
                top = o.screen_h + b.g("height") + b.g("width") + 10
            }
            if (left > 0) {
                css(b.c(), {
                    "left": left
                })
            }
            if (top > 0) {
                css(b.c(), {
                    "top": top
                })
            }
        }

        function ResizeSettings(x) {
            var top = -2000;
            x.resizePlaylist();
            var y = o.screen_h - v.toolbar.h * (x.s("position").indexOf("top") > -1 ? 1 : 2);
            if (x == playlist && v.change2playlist == 1) {
                y = o.screen_h
            }
            var ymax = y - (o.fullscreen && !o.system.mobile ? (100 + x.s("hmaxk") * 1) : x.s("hmaxk")) - (x == playlist && x.s("hmaxk") * 1 == 0 ? x.s("margintop") : 0);
            ymax < 100 ? ymax = 100 : '';
            css(x.c(), {
                'max-height': ymax
            });
            x.co() ? css(x.co(), {
                'max-height': ymax
            }) : '';
            if (x.g("show")) {
                top = o.screen_h / 2 - x.g("height") / 2 + x.s("margintop") - x.s("marginbottom");
                if (x.s("position").indexOf("top") > -1) {
                    top = x.s("margintop") - x.s("marginbottom")
                }
                if (x.s("position").indexOf("bottom") > -1) {
                    top = o.screen_h - (v.toolbar.position != 'top' ? v.toolbar.h : 0) - x.g("height") + x.s("margintop") - x.s("marginbottom")
                }
                top < 0 ? top = 0 : ''
            }
            if (x.g("key") == "settings" && o.sttx) {
                var sttr = o.screen_w - x.g("width") - x.s("marginright");
                if (o.sttx > sttr) {
                    css(x.c(), {
                        "position": "absolute",
                        "right": x.s("marginright"),
                        "left": "auto",
                        "top": top
                    })
                } else {
                    css(x.c(), {
                        "position": "absolute",
                        "left": o.sttx,
                        "right": "auto",
                        "top": (o.stty < top ? o.stty : top)
                    })
                }
            } else {
                if (x.s("position").indexOf("right") > -1) {
                    css(x.c(), {
                        "position": "absolute",
                        "right": x.s("marginright") - x.s("scrollwidth"),
                        "left": "auto",
                        "top": top
                    })
                } else if (x.s("position").indexOf("left") > -1) {
                    css(x.c(), {
                        "position": "absolute",
                        "left": x.s("marginleft"),
                        "right": "auto",
                        "top": top
                    })
                } else {
                    if (x.g("key") == "playlist" && x.s("floatleft") == 1) {
                        css(x.c(), {
                            "position": "absolute",
                            "left": o.screen_w / 2 - x.g("width") / 2 + x.s("marginleft") / 2 - x.s("marginright") / 2,
                            "top": top
                        })
                    } else {
                        var l = o.screen_w / 2 - x.g("width") / 2 + x.s("marginleft") - x.s("marginright");
                        css(x.c(), {
                            "position": "absolute",
                            "left": (l > 0 ? l : 0),
                            "top": top
                        })
                    }
                }
            }
            x.Arrows()
        };
        this.ControlClick = function(key) {
            var but = b[key];
            var a = but.g("action");
            if (a) {
                var d = new Date();
                o.clicktime = d.getTime();
                if (a && a != "") {
                    Action(but);
                    a == "pause" ? o.actpause = 1 : '';
                    a == "play" ? o.actpause = 0 : ''
                }
            }
        };
        this.toggleControl = function(z, x, y) {
            for (var key in b) {
                if (b.hasOwnProperty(key)) {
                    if (b[key].s(z) == x) {
                        b[key].set(y ? "show2" : "hide2")
                    }
                }
            }
        };
        this.butByS = function(x, s) {
            var y = FindBut(s, x);
            return y
        };

        function Action(but, type) {
            o.acted = true;
            _lastactbut = but;
            var a = but.g("action");
            if (a == "play") {
                o.actions.Play();
                if (o.muted && v.unmuteonplay == 1) {
                    o.actions.Unmute();
                    v.unmuteonplay = 0
                }
                if (v.hotkey.on == 1 && v.hotkey.icons == 1 && v.hotkey.playiconbut == 1) {
                    PluginHotIcon('play', 1)
                }
            } else {
                if (a == "pause") {
                    o.rldplay = 0;
                    o.actions.Pause();
                    if (v.hotkey.on == 1 && v.hotkey.icons == 1 && v.hotkey.playiconbut == 1) {
                        PluginHotIcon('play', 0)
                    }
                }
                if (a == "stop") {
                    o.actions.StopMedia()
                }
            }
            if (a == "back") {
                o.actions.Seek(0, false)
            }
            if (a == "fullscreen") {
                !o.casting ? o.actions.Fullscreen() : ''
            } else {
                if (a == "normalscreen") {
                    o.actions.Normalscreen()
                }
            }
            if (a == "line") {
                var ld = o.media.duration();
                var lt = but.g("click") * ld;
                if (v.delete > 0) {
                    ld -= v.delete;
                    lt = but.g("click") * ld + v.delete
                }
                if (v.seekwindow > 0) {
                    if (v.seekwindow / ld <= 1 - but.g("click")) {
                        return
                    }
                }
                o.actions.Seek(lt, true);
                if (o.continue) {
                    o.continue.write(lt, ld);
                    o.seekto > 0 ? o.seekto = undefined : ''
                }
            }
            if (a == "volume") {
                var x = but.g("click");
                x < 0.02 ? x = 0 : '';
                x > 1 ? x = 1 : '';
                if (but.s("customline") == "speed") {
                    x = parseFloat(x * o.files_speed.slice(-1)[0]).toFixed(1);
                    o.actions.SetSpeed(x, 1)
                } else {
                    if (o.storage && v.volumestore == 1) {
                        localStorage.setItem("pljsvolume", x);
                        if (but.g("click") > 0 || o.system.iphone || v.mutestore == 0) {
                            localStorage.removeItem("pljsmute")
                        } else {
                            localStorage.setItem("pljsmute", 1)
                        }
                    }
                    o.actions.Volume(x)
                }
            }
            if (a == "mute") {
                if (o.storage && !o.system.iphone && v.mutestore == 1) {
                    localStorage.setItem("pljsmute", 1)
                }
                o.actions.Mute();
                if (v.hotkey.icons == 1 && v.hotkey.muteiconbut == 1) {
                    PluginHotIcon('mute', 0)
                }
            } else {
                if (a == "unmute") {
                    if (o.storage) {
                        localStorage.removeItem("pljsmute")
                    }
                    o.actions.Unmute();
                    if (v.hotkey.icons == 1 && v.hotkey.muteiconbut == 1) {
                        PluginHotIcon('mute', 1)
                    }
                }
            }
            if (a.indexOf("time") == 0) {
                but.isOn() ? but.Off() : but.On()
            }
            if (a == "rotate") {
                o.media.Rotate()
            }
            if (a == "scale+") {
                o.media.Scale(0.1)
            }
            if (a == "scale-") {
                o.media.Scale(-0.1)
            }
            if (a == "scale") {
                o.media.Scale(0)
            }
            if (a == "live") {
                apiProcessor("restart");
                but.set("iconopacity", 1);
                but.set("saturate", 1)
            }
            if (a == "share") {
                js("share");
                ShowShare()
            }
            if (a == "settings") {
                o.sttx = undefined;
                if (settings) {
                    if (!settings.g("show")) {
                        settings.show()
                    } else {
                        settings.hide()
                    }
                }
            }
            if (a == "playlist") {
                if (o.overopentimeout == a) {
                    return
                }
                if (exist(v.playlist)) {
                    if (playlist.g("show")) {
                        playlist.hide()
                    } else {
                        setTimeout(function() {
                            playlist.show()
                        }, 100)
                    }
                }
            }
            if (a == "next") {
                o.controls.PlaylistNext()
            }
            if (a == "prev") {
                o.controls.PlaylistPrev()
            }
            if (a == "custom") {
                if (but.s("link") == 1 && but.s("linkurl") != "") {
                    var x = trim(but.s("linkurl"));
                    if (o.overopentimeout == a + x) {
                        return
                    }
                    if (x.indexOf('{time}') > -1) {
                        x = x.replace('{time}', (exist(o.continue) ? o.continue.flag().t : o.media.time()))
                    }
                    if (x.indexOf('{file}') > -1) {
                        x = x.replace('{file}', o.media.currentFile())
                    }
                    if (x.indexOf('{title}') > -1) {
                        x = x.replace('{title}', v.title.replace(/,/ig, " "))
                    }
                    if (x == "airplay") {
                        o.media.Airplay()
                    }
                    if (x.indexOf('skip') == 0) {
                        if (but.s("skip") > 0) {
                            o.actions.Seek(but.s("skip"))
                        }
                    }
                    if (x.indexOf('cancelskip') == 0) {
                        if (o.skpbt) {
                            o.skpbt.cancel()
                        }
                    }
                    if (x == "seektome") {
                        o.actions.Seek(but.s("marginprocleft") * o.media.duration() / 100);
                        !o.play ? o.actions.Play() : ''
                    }
                    but.s("linkpause") == 1 ? o.actions.Pause() : '';
                    var y = x.split(",");
                    if (x.indexOf("api:") == 0) {
                        var z = x.substr(4).split(";");
                        for (var i = 0; i < z.length; i++) {
                            y = z[i].split(",");
                            if (y.length > 1) {
                                if (y[0] == 'seek') {
                                    if (v.hotkey.icons == 1 && v.hotkey.seekiconbut == 1) {
                                        PluginHotIcon('seek', y[1] > 0 ? 1 : 0)
                                    }
                                }
                                apiProcessor(y[0], y[1], but);
                                y[1] == '0/1' || y[1] == '1/0' ? reRightMenu() : ''
                            } else {
                                if (y[0] == "screenshot") {
                                    var ss = apiProcessor(y[0]);
                                    if (ss) {
                                        if (ss.indexOf("data") > -1) {
                                            if (v.ssfly == 1) {
                                                var img = document.createElement('img');
                                                img.setAttribute('src', ss);
                                                css(img, {
                                                    position: "fixed",
                                                    right: (exist(v.ssflyp) ? v.ssflyp : 20),
                                                    bottom: (exist(v.ssflyp) ? v.ssflyp : 20),
                                                    width: 0,
                                                    transition: "width 0.5s cubic-bezier(.75,-0.5,0,1.75)"
                                                });
                                                img.style.zIndex = 1001;
                                                document.body.appendChild(img);
                                                setTimeout(function() {
                                                    css(img, {
                                                        width: (exist(v.ssflyw) ? v.ssflyw : 200)
                                                    })
                                                }, 1);
                                                img.onclick = function() {
                                                    this.parentNode.removeChild(this)
                                                }
                                            }
                                            if (v.ssdown == 1) {
                                                var a = createElement("a");
                                                a.href = ss;
                                                a.download = y[0] + ".jpg";
                                                a.click()
                                            }
                                        }
                                    } else {
                                        log(y[0] + " error")
                                    }
                                } else {
                                    apiProcessor(y[0])
                                }
                            }
                        }
                    } else {
                        if (x.indexOf("js:") == 0) {
                            if (x.indexOf("(") > 0 && x.indexOf(")") > 0) {
                                eval(x.substr(3))
                            } else {
                                eval(y[0].substr(3) + '(' + (exist(y[1]) ? '"' + y[1] + '"' : '') + (exist(y[2]) ? ',"' + y[2] + '"' : '') + ')')
                            }
                        }
                        if (x.indexOf("event:") == 0) {
                            JsEvent(x.substr(6), o.media.time())
                        }
                        if (x.indexOf("share:") == 0 && o.share) {
                            o.share.api(x.substr(6))
                        }
                        if (x.indexOf("effect:") == 0 && o.effects) {
                            apiProcessor("effect", x.substr(7))
                        }
                        if (x.indexOf("http") == 0 || x.indexOf("/") == 0 || x.indexOf("?") == 0 || x.indexOf("url:") == 0) {
                            x.indexOf("url:") == 0 ? x = x.substr(4) : '';
                            window.open(x, but.s("linktarget"))
                        }
                        if (x.indexOf("download") == 0) {
                            o.actions.Download()
                        }
                        if (x == "api:pipwebkit") {
                            o.media.PipWebkit()
                        }
                    }
                    if (x.indexOf("settings#") > -1) {
                        if (settings) {
                            var si = x.substr(9).split(",");
                            if (settings.g("show") && settings.g("open") == si[0]) {
                                o.sttx = undefined;
                                o.stty = undefined;
                                settings.hide()
                            } else {
                                o.sttx = but.g("x") - but.g("width") / 2;
                                o.stty = but.g("y") + but.g("h");
                                for (var i = 0; i < si.length; i++) {
                                    i == 0 ? settings.show() : '';
                                    settings.open(si[i])
                                }
                                playlist ? playlist.plclose() : ''
                            }
                        }
                    }
                    if (x.indexOf("settings:") > -1 && v.settings.combined == 1) {
                        if (!o.settings2) {
                            o.settings2 = new PluginSettings2()
                        }
                        if (v.settings.showovercontrol == 1) {
                            if (type == "over") {
                                o.settings2.show(x)
                            } else {
                                o.settings2.toggle(x)
                            }
                        } else {
                            if (!type) {
                                o.settings2.toggle(x)
                            }
                        }
                    }
                    if (x == "unblock") {
                        o.actions.RemoveCurtain();
                        o.stopkeys = 0;
                        but.set("hide2");
                        var bl = FindBut("linkurl", "block");
                        if (bl) {
                            bl.set("hide2")
                        }
                    }
                    if (x == "block") {
                        but.UpdateText("OK");
                        but.s("linkurl2") ? window.location.href = trim(but.s("linkurl2")) : ''
                    }
                }
            }
        };
        this.title = function(t) {
            var y = false;
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "title") {
                        if (b[x].s("var") == t || t == "title") {
                            if (b[x].s("hide") == 1 && b[x].s("hideonplay") == 1 && o.play) {
                                y = true
                            }
                            if (v[t] == '' || y) {
                                b[x].set("display", false)
                            } else {
                                b[x].set("display", true)
                            }
                            b[x].UpdateText(v[t])
                        }
                    }
                }
            }
            TitlePl()
        };
        this.titlepl = function() {
            TitlePl()
        };
        this.resizetext = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "custom") {
                        if (b[x].s("type") == "text") {
                            b[x].ResizeText()
                        }
                    }
                }
            }
        };

        function TitlePl() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "custom") {
                        if (b[x].s("type") == "text") {
                            b[x].RenewFromTitle(true)
                        }
                    }
                }
            }
        }

        function ShowShare() {
            if (exist(o.share)) {
                o.share.Show()
            }
        }
        this.showShare = function() {
            ShowShare()
        };
        this.updateTitle = function() {
            if (v.title != '') {
                for (var x in b) {
                    if (b.hasOwnProperty(x)) {
                        if (b[x].g("action") == "title") {
                            var y = false;
                            if (!b[x].g("show")) {
                                y = true;
                                b[x].set("display", true)
                            }
                            b[x].UpdateText(v.title);
                            if (y) {
                                b[x].set("display", false)
                            }
                        }
                    }
                }
            }
        };
        this.customTextPl = function() {
            CustomTextButs()
        };

        function CustomTextButs() {
            if (v.customtext) {
                if (typeof(v.customtext) == "object") {
                    for (var x in v.customtext) {
                        if (v.customtext.hasOwnProperty(x)) {
                            CustomText(x, v.customtext[x])
                        }
                    }
                }
            }
        };
        this.customText = function(y, z) {
            CustomText(y, z)
        };

        function CustomText(y, z) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "custom" && b[x].s("type") == "text") {
                        if (b[x].s("dom") == y) {
                            if (!b[x].g("show") || b[x].s("hidden") == 1) {
                                b[x].set("unhidden");
                                b[x].set("display", true)
                            }
                            b[x].CustomText(z)
                        }
                    }
                }
            }
        };
        this.resize = function() {
            Resize()
        };
        this.resize2 = function() {
            Resize(true)
        };
        this.resizeSettings = function() {
            ResizeSettings(settings)
        };
        this.resizePlaylist = function() {
            ResizeSettings(playlist)
        };
        this.Play = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "play") {
                        b[x].On()
                    }
                }
            }
            o.vast_loadtxt ? o.vast_loadtxt.hide() : '';
            if (this.PlaylistVisible() && v.playlist.autohide == 1) {
                this.Playlist()
            }
            o.play = true;
            ShowOrHide()
        };
        this.Pause = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "pause" || b[x].g("action") == "stop") {
                        b[x].Off()
                    }
                }
            }
            if (playlist) {
                if (v.playlist.openplaylistpause == 1 && !playlist.empty()) {
                    playlist.show()
                }
            }
            o.play = false;
            this.StopWaiting();
            ShowOrHide();
            if (v.toolbar.hide == 1 && v.toolbar.hideonpause == 1) {
                HideForce(true)
            }
        };
        this.Mute = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "mute") {
                        b[x].On()
                    }
                    this.Volume(0)
                }
            }
            ShowOrHide()
        };
        this.Unmute = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "unmute") {
                        b[x].Off()
                    }
                }
            }
            if (v.volume < 0.1) {
                v.volume = 0.5;
                o.actions.Volume(v.volume)
            } else {
                this.Volume(v.volume)
            }
            ShowOrHide()
        };
        this.Volume = function(volume, y) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "volume") {
                        if (b[x].s("customline") != "speed") {
                            b[x].UpdatePlay(volume, 1, (y == "no" ? y : true))
                        }
                    }
                    if (b[x].g("action") == "mute") {
                        b[x].UpdateVolume(volume)
                    }
                }
            }
            ShowOrHide()
        };
        this.Fullscreen = function() {
            var bl = FindBut("action", "fullscreen");
            if (bl) {
                bl.On();
                bl.set("scale", bl.s("scale"))
            }
            ShowOrHide();
            resizeonwidth ? setTimeout(ShowOrHide, 500) : '';
            HideInterval()
        };
        this.Normalscreen = function() {
            var bl = FindBut("action", "fullscreen");
            if (bl) {
                bl.Off()
            }
            Resize();
            clearInterval(o.toolbarInterval);
            ShowOrHide()
        };
        this.onEnded = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "play") {
                        b[x].ReplayIcon()
                    }
                }
            }
        };
        this.Review = function() {
            ShowOrHide()
        };

        function ShowOrHide() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") != "buffer") {
                        ShowOrHideProcessor(b[x])
                    }
                }
            }
            ShowOrHideProcessor(bg);
            if (stretch_width_last != stretch_width) {
                stretch_width_last = stretch_width;
                Resize()
            }
            if (v.toolbar.hide == 1 && v.toolbar.hidedown == 1) {
                ToolbarDown(!o.starttimeout && !o.mouseHere && !o.fullscreen && o.play && v.toolbar.hidejustfull != 1 && !o.casting)
            }
        };

        function ShowForce() {
            var show = toolbarHidden && v.toolbar.hidewithoutmoving == 1;
            if (!o.play && v.toolbar.hide == 1 && v.toolbar.hideonpause == 1) {
                show = false
            }
            if (show) {
                for (var x in b) {
                    if (b.hasOwnProperty(x)) {
                        if (b[x].g("action") != "buffer") {
                            ShowOrHideProcessor(b[x], false)
                        }
                    }
                }
                css(o.frame, {
                    "cursor": "default"
                });
                o.fcdef = true;
                ShowOrHideProcessor(bg, false);
                if (bg.g("show")) {
                    ToolbarShow()
                }
                ToolbarDown(false)
            }
        }

        function HideForce() {
            var hide = o.play && v.toolbar.hidewithoutmoving == 1 && !o.mouseDown;
            if (o.controlover && v.toolbar.showovr == 1) {
                hide = false
            }
            if (!o.play && v.toolbar.hide == 1 && v.toolbar.hideonpause == 1) {
                hide = true
            }
            if (settings) {
                if (settings.g("show") && o.setaction) {
                    hide = false
                }
            }
            if (o.casting) {
                hide = false
            }
            if (hide) {
                for (var x in b) {
                    if (b.hasOwnProperty(x)) {
                        if (b[x].g("action") != "buffer") {
                            ShowOrHideProcessor(b[x], true)
                        }
                    }
                }
                ShowOrHideProcessor(bg, true);
                if (!bg.g("show")) {
                    toolbarHidden = true;
                    o.media.ToolbarHide();
                    if (o.play) {
                        css(o.frame, {
                            "cursor": "none"
                        });
                        o.fcdef = false
                    }
                }
                ToolbarDown(true)
            }
        }

        function HideInterval() {
            if (v.toolbar.hidewithoutmoving == 1) {
                if (v.toolbar.hidejustfull == 1 && !o.fullscreen && !o.fullscreen_process) {} else {
                    clearInterval(o.toolbarInterval);
                    o.toolbarInterval = setInterval(HideForce, ((v.toolbar.hideleavetimeout > 0 ? v.toolbar.hideleavetimeout : v.toolbar.hidetimeout) * 1000))
                }
            }
        }

        function ShowOrHideProcessor(but, forcehide) {
            var hide = false;
            var show = false;
            var toolbar_hide = false;
            if (v.toolbar.hide == 1) {
                if (!o.starttimeout && !o.mouseHere && !o.fullscreen && o.play && v.toolbar.hidejustfull != 1 && !o.casting) {
                    hide = true;
                    show = false;
                    toolbar_hide = true
                } else {
                    hide = false;
                    show = true
                }
                if (exist(forcehide) && !o.casting) {
                    hide = forcehide;
                    show = !hide
                }
                if (v.toolbar.hide == 1 && v.toolbar.hidedown == 1 && (but.s("position").indexOf("controls") == 0 || but.s("action") == "line")) {
                    hide = false;
                    show = true
                }
                if (v.toolbar.hideonpause == 1 && !o.play) {
                    hide = true;
                    show = false;
                    toolbar_hide = false
                }
                if (v.toolbar.showuntilmeta == 1 && !o.metadata && o.play) {
                    hide = false;
                    show = true
                }
            } else {
                if (but.s("hide") != 1) {
                    show = true
                }
            }
            if (show && !o.fcdef) {
                css(o.frame, {
                    "cursor": "default"
                });
                o.fcdef = true
            }
            var a = but.g("action");
            if (a == "custom" && but.s("position").indexOf("controls") == -1) {
                hide = false;
                show = true
            }
            if (o.casting) {
                if (a == "line") {
                    if (o.media.duration() == -1) {
                        hide = true;
                        show = false
                    }
                }
            }
            var re_y = false;
            var hp = HideProof(but);
            if (but.s("hide") == 1) {
                if (but.s("hideonleaveandplay") == 1) {
                    if (toolbar_hide || forcehide || (o.play && !o.mouseHere)) {
                        !toolbar_hide && !forcehide ? '' : hp = true
                    }
                }
                if (but.s("hidelap") == 1) {
                    if (o.play && !o.mouseHere) {
                        hp = true
                    }
                }
                if (but.s("hideonwidth") == 1 || but.s("hideoverwidth") == 1 || but.s("hideonfullscreen") == 1) {
                    resizeonwidth = true
                }
            }
            if (hp) {
                hide = true;
                show = false
            } else {
                !hide ? show = true : ''
            }
            if (but.s("action") == "volume") {
                if (but.s("hide") == 1 && but.s("hideoutmute") == 1) {
                    hide = true;
                    show = false;
                    if (!toolbar_hide && (o.hidden_volume_over || o.hidden_volume_over_process) && !forcehide && but.s("hiddenwidth") != 1) {
                        hide = false;
                        show = true
                    } else {
                        re_y = true
                    }
                }
            }
            if (o.nativecontrols || (!o.start && v.toolbar.hide == 1 && v.toolbar.hideuntilstarted == 1) || (!o.metadata && v.toolbar.hide == 1 && v.toolbar.hideuntilmeta == 1)) {
                if (but.s("position").indexOf("controls") > -1 || but.s("position").indexOf("bottom") > -1) {
                    hide = true;
                    show = false
                }
                if (v.toolbar.hidejustfull == 1 && !o.fullscreen) {
                    hide = false;
                    show = true
                }
            }
            if (settings) {
                if (settings.g("show") && v.settings.always != 1) {
                    toolbar_hide = false;
                    forcehide = false
                }
            }
            if (playlist && o.droplist) {
                if (v.playlist.dropopen == 1) {
                    if (o.droplist.Visible()) {
                        return
                    }
                }
            }
            if (a == "share") {
                if (exist(o.share)) {
                    if (o.share.empty()) {
                        hide = true;
                        show = false;
                        but.set("animation", "none")
                    }
                }
            }
            if (a == "playlist" || a == "next" || a == "prev" || but.s("hidewithoutplaylist") == 1) {
                if (playlist) {
                    if (playlist.empty() && but.s("hidewithoutplaylist") != 0) {
                        hide = true;
                        show = false;
                        but.set("animation", "none")
                    }
                } else {
                    hide = true;
                    show = false
                }
            }
            if (o.hideall == 1) {
                hide = true;
                show = false
            }
            if (re_y) {
                var cc = ControlCoordinate(but);
                if (cc) {
                    cc.y > 0 ? but.set("y0", cc.y) : '';
                    css(but.c(), {
                        "position": "absolute",
                        "top": but.g("y0")
                    })
                }
            }
            if (hide) {
                HideControl(but, (firstly ? true : false))
            }
            if (show) {
                ShowControl(but)
            }
            if (but == bg) {
                if (!hide && show) {
                    ToolbarShow();
                    show2(bg2);
                    toolbarHidden = false;
                    uijs == 0 ? js("ui", 1) : '';
                    uijs = 1;
                    o.cut && o.cutted ? o.cut.show() : ''
                }
                if (hide && !show && !o.casting) {
                    o.media.ToolbarHide();
                    SettingsClose();
                    hide2(bg2);
                    toolbarHidden = true;
                    uijs == 1 ? js("ui", 0) : '';
                    uijs = 0;
                    o.cut && o.cutted ? o.cut.hide() : ''
                }
                if (playlist) {
                    if (v.playlist.always == 1 && !playlist.empty()) {
                        if (show || o.nativecontrols) {
                            if (v.playlist.alwaysnotfullscreen == 1 && o.fullscreen) {} else {
                                if (!playlist.g("show")) {
                                    if (v.playlist.alwaysjustpause == 1) {
                                        !o.play ? playlist.show() : ''
                                    } else {
                                        playlist.show()
                                    }
                                }
                            }
                        } else {
                            if (hide && playlist.g("show")) {
                                playlist.hide()
                            }
                        }
                    }
                }
            }
        };

        function HideProof(but) {
            var x = false;
            var a = but.g("action");
            if (but.s("hide") == 1) {
                if (but.s("hideonplay") == 1) {
                    o.play ? x = true : ''
                }
                if (but.s("hideonpause") == 1) {
                    !o.play ? x = true : ''
                }
                if (but.s("hideondesktop") == 1) {
                    o.system.desktop ? x = true : ''
                }
                if (but.s("hideonmobile") == 1) {
                    o.system.mobile ? x = true : ''
                }
                if (but.s("hideoverwidth") == 1) {
                    if (o.screen_w > but.s("hideoverwidthlimit")) {
                        but.set("hiddenwidth", 1);
                        x = true
                    } else {
                        but.set("hiddenwidth", 0)
                    }
                }
                if (but.s("hideunwait") == 1 && !waiting) {
                    x = true;
                    o.wtcntrl = 1
                }
                if (but.s("hideonwidth") == 1) {
                    if (o.screen_w <= but.s("hideonwidthlimit")) {
                        but.set("hiddenwidth", 1);
                        x = true
                    } else {
                        but.set("hiddenwidth", 0)
                    }
                }
                if (but.s("hideafterstart") == 1) {
                    o.start ? x = true : ''
                }
                if (but.s("hideafter") == 1 && but.s("hideaftersec") > 0) {
                    if (o.media.time() >= but.s("hideaftersec")) {
                        x = true
                    }
                }
                if (but.s("hidebefore") == 1 && but.s("hidebeforesec") > 0) {
                    if (o.media.time() < but.s("hidebeforesec")) {
                        x = true
                    }
                }
                if (but.s("hide0timestore") == 1) {
                    if (o.start || !o.continue || o.media.isLive()) {
                        x = true
                    }
                    if (o.continue) {
                        if (o.continue.flag().t == 0) {
                            x = true
                        }
                    }
                }
                if (but.s("hideuntilstarted") == 1) {
                    !o.start ? x = true : ''
                }
                if (but.s("hideuntilto") > 0) {
                    x = true
                }
                if (but.s("hideonvar") == 1) {
                    if (exist(but.s("hidevar"))) {
                        options[but.s("hidevar")] ? x = true : ''
                    }
                }
                if (but.s("hideuntiltext") == 1) {
                    if (!exist(but.s("customtext"))) {
                        x = true
                    }
                }
                if (but.s("hidewovar") == 1) {
                    if (exist(but.s("hidevar2"))) {
                        !options[but.s("hidevar2")] ? x = true : ''
                    }
                }
                if (but.s("hideuntilstartedios") == 1 && o.system.ios) {
                    !o.start || o.newfile ? x = true : ''
                }
                if (but.s("hideuntilended") == 1) {
                    !o.media.ended() ? x = true : ''
                }
                if (but.s("hideonvod") == 1) {
                    !o.media.isLive() ? x = true : ''
                }
                if (but.s("hideonleave") == 1) {
                    !o.mouseHere ? x = true : ''
                }
                if (but.s("hidenormscreen") == 1) {
                    !o.fullscreen ? x = true : ''
                }
                if (but.s("hideonfullscreen") == 1) {
                    o.fullscreen ? x = true : ''
                }
                if (but.s("hideonunmute") == 1) {
                    !o.muted ? x = true : ''
                }
                if (but.s("hideonlive") == 1) {
                    o.media.isLive() && o.media.currentFile().indexOf("?DVR") == -1 ? x = true : ''
                }
                if (but.s("hidewithposter") == 1) {
                    isVisible(o.poster) ? x = true : ''
                }
                if (but.s("hideuntilmeta") == 1) {
                    !o.metadata ? x = true : ''
                }
                if (but.s("hideonmeta") == 1) {
                    o.metadata ? x = true : ''
                }
                if (but.s("hidemini") == 1) {
                    o.mini ? x = true : ''
                }
                if (but.s("hidenomini") == 1) {
                    !o.mini ? x = true : ''
                }
                if (but.s("hideafterclick") == 1) {
                    if (but.g("clicked")) {
                        x = true
                    }
                }
                if (but.s("hidenoab") == 1) {
                    !o.ab ? x = true : ''
                }
                if (but.s("hideab") == 1) {
                    o.ab ? x = true : ''
                }
                if (but.s("hideonyoutube") == 1) {
                    if (v.preload == 1 && v.screenclick == 1) {
                        if (o.file_type == "youtube" && !exist(v.poster) && v.youtubeposter == 0) {
                            if (!o.start || o.media.status() == "ended") {
                                if (v.poster == '') {} else {
                                    x = true
                                }
                            }
                        }
                    }
                }
            }
            if (a == "custom") {
                var lu = but.s("linkurl");
                if (lu) {
                    if (lu == "api:airplay" || lu == "airplay") {
                        if (!o.airplay && !o.airplayed) {
                            x = true
                        }
                    }
                    if (lu == "api:pipwebkit") {
                        if (!o.pipwebkit || (!o.start && v.preload == 0)) {
                            x = true
                        }
                    }
                    if (lu == "api:unfixing") {
                        if (!o.mini) {
                            x = true
                        }
                    }
                    if (lu.indexOf("captions") > -1) {
                        if (!o.captions) {
                            x = true
                        }
                    }
                    if (indOf([lu], "skip") && !indOf([lu], "js:")) {
                        var sk = false;
                        if (exist(v.skip)) {
                            if (!o.skpbt) {
                                typeof PluginSkip == 'function' ? o.skpbt = new PluginSkip() : ''
                            }
                            if (o.skpbt) {
                                sk = o.skpbt.check(but)
                            }
                        }!sk ? x = true : ''
                    }
                }
            }
            if (a == "playlist" || a == "next" || a == "prev") {
                if (playlist) {
                    if (playlist.empty()) {
                        x = true
                    }
                } else {
                    x = true
                }
            }
            if (a == "settings") {
                if (settings) {
                    if (settings.empty()) {
                        x = true;
                        o.file_type != 'hls' ? but.set("animation", "none") : ''
                    }
                } else {
                    x = true
                }
            }
            if (but.g("type") == "text") {
                if (but.g("length") == 0) {
                    x = true
                }
            }
            if (but.g("settings#")) {
                if (!but.g("set#visible")) {
                    x = true
                }
            }
            if (but.s("chromecast") == 1) {
                var cb = document.getElementById("pjs_cast_button_" + v.id);
                if ((o.media.duration() == 0 && o.media.time() == 0) || !o.tagvideo || !isVisible(cb) || !o.cast_available) {
                    x = true
                }
            }
            if (but.s("hidetime") == 1) {
                !x ? but.set("hidetime", 1) : ''
            }
            if (a == "duration") {
                if (o.media.isLive()) {
                    x = true
                }
            }
            if (but.g("key") == "control_start" && o.system.mobile) {
                if (o.nativecontrols && o.system.android) {
                    x = true
                }
            }
            return x
        }

        function HideControl(but, quick) {
            if (but.g("show")) {
                if (o.fullscreen_process || but.s("animation") == "none" || quick) {
                    but.set("display", false)
                } else {
                    HideAnimate(but)
                }
                but.set("show", false)
            }
        };

        function ShowControl(but) {
            if (!but.g("show")) {
                if (but.s("animation") == "none" || o.fullscreen_process) {
                    but.set("display", true);
                    if (o.fullscreen_process && but.g("key") != 'bg') {
                        but.set("opacity", 1)
                    }
                    if (but.g("action") == "volume") {
                        if (o.hidden_volume) {
                            HidePositionControl(but)
                        }
                    }
                } else {
                    ShowAnimate(but)
                }
                if (but.s("action") == "volume") {
                    o.controls.Volume(o.muted ? 0 : v.volume)
                }
                if (but.s("action") == "line") {
                    o.actions.Loading()
                }
                but.set("show", true)
            }
        };

        function HideAnimate(but) {
            killMotion(but.g("key"));
            var m_type = "alpha|";
            var m_to = "0|";
            var hide = 1;
            var a = but.s("animation");
            var p = but.s("position");
            if (a == "scale") {
                m_type += "scale|";
                m_to += "0|"
            }
            if (a == "position") {
                if (p.indexOf("right") > -1 && p.indexOf("controls") == -1) {
                    m_type += "x|";
                    m_to += int(o.screen_w + but.g("width")) + "|"
                }
                if (p.indexOf("left") > -1) {
                    m_type += "x|";
                    m_to += int(-but.g("width")) + "|"
                }
                if (p.indexOf("top") > -1) {
                    m_type += "y|";
                    m_to += "0|" + (-but.g("height")) + "|"
                }
                if (p.indexOf("bottom") > -1 || p.indexOf("controls") > -1 || p == "timeline") {
                    m_type += "y|";
                    if (but.g("action") == "line" || but.g("action") == "volume") {
                        m_to += int(o.screen_h + but.s("h") + (but.s("h") < 20 ? 20 - but.s("h") : 0)) + "|"
                    } else {
                        m_to += int(o.screen_h + but.g("height")) + "|"
                    }
                }
                if (p == "center") {
                    m_type += "scale|";
                    m_to += "0|"
                }
            }
            var m = new Motion({
                "mc": but,
                "me": but.g("key"),
                "type": m_type.substr(0, m_type.length - 1),
                "to": m_to.substr(0, m_to.length - 1),
                "hide": hide
            })
        };

        function ShowAnimate(but) {
            killMotion(but.g("key"));
            var m_type = "";
            var m_to = "";
            var a = but.s("animation");
            var p = but.s("position");
            if (but.g("opacity") != 1) {
                m_type = "alpha|";
                m_to = (but.g("key") == 'bg' ? v.toolbar.a : "1") + "|"
            }
            if (a == "scale") {
                if (but.g("scaleX") != but.s("scale")) {
                    m_type += "scale|";
                    m_to += but.s("scale") + "|"
                }
            }
            if (a == "position") {
                if (p == "center") {
                    if (but.g("scaleX") != but.s("scale")) {
                        m_type += "scale|";
                        m_to += but.s("scale") + "|"
                    }
                } else {
                    if (p.indexOf("controls") > -1) {
                        if (but.g("y") != but.g("y0")) {
                            m_type += "y|";
                            m_to += but.g("y0") + "|"
                        }
                    } else {
                        m_type += "x|y|";
                        m_to += but.g("x0") + "|" + but.g("y0") + "|"
                    }
                }
            }
            if (m_type != "" && m_to != "") {
                var m = new Motion({
                    mc: but,
                    me: but.g("key"),
                    type: m_type.substr(0, m_type.length - 1),
                    to: m_to.substr(0, m_to.length - 1),
                    show: 1
                })
            } else {
                but.set("display", true)
            }
        };
        this.Mouse = function(key, type, quick) {
            var resize = false;
            var stop = false;
            var but = b[key];
            var action = but.g("action");
            var linkurl = but.s("linkurl");
            if (type == "over") {
                if (o.hidden_volume) {
                    if (action == "volume" || action == "mute" || action == "unmute") {
                        o.hidden_volume_over = true;
                        o.hidden_volume_over_process = true;
                        resize = true;
                        ShowOrHide();
                        if (v.control_line.hideonvolume == 1) {
                            var bl = FindBut("action", "line");
                            if (bl) {
                                hide2(bl.c())
                            }
                        }
                    }
                }
                if (settings && v.settings.showovercontrol == 1 && ((action == "settings" || linkurl.indexOf("setting") == 0) || linkurl.indexOf("settings:") == 0)) {
                    clearTimeout(o.settingsovertimer);
                    if (!settings.g("show") || _lastactbut != but) {
                        Action(but, type);
                        o.overopentimeout = action + linkurl;
                        setTimeout(function() {
                            o.overopentimeout = null
                        }, 500)
                    }
                }
                if (playlist && v.playlist.showovercontrol == 1 && action == "playlist") {
                    clearTimeout(o.playlistovertimer);
                    if (!playlist.g("show") || _lastactbut != but) {
                        Action(but, type);
                        o.overopentimeout = action;
                        setTimeout(function() {
                            o.overopentimeout = null
                        }, 500)
                    }
                }
            }
            if (type == "out") {
                if (o.hidden_volume) {
                    if (action == "volume" || action == "mute" || action == "unmute") {
                        o.hidden_volume_over = false;
                        o.hidden_volume_over_process = true;
                        setTimeout(function() {
                            if (!o.hidden_volume_over) {
                                o.hidden_volume_over_process = false;
                                if (!toolbarHidden) {
                                    for (var x in b) {
                                        if (b.hasOwnProperty(x)) {
                                            if (b[x].g("action") == "volume") {
                                                HideControl(b[x]);
                                                Resize()
                                            }
                                            if (b[x].g("action") == "line") {
                                                if (v.control_line.hideonvolume == 1) {
                                                    show2(b[x].c())
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }, 500)
                    }
                }
                if (action == "line") {
                    o.actions.UpdatePlay(1)
                }
                if (v.settings.showovercontrol == 1 && ((action == "settings" || linkurl.indexOf("setting") == 0) || linkurl.indexOf("settings:") == 0)) {
                    clearTimeout(o.settingsovertimer);
                    o.settingsovertimer = setTimeout(function() {
                        if (!o.mouseDown) {
                            SettingsClose(1)
                        }
                    }, (v.settings.showoverto > 0 ? v.settings.showoverto * 1000 : 1000))
                }
                if (playlist && v.playlist.showovercontrol == 1 && action == "playlist") {
                    clearTimeout(o.playlistovertimer);
                    o.playlistovertimer = setTimeout(function() {
                        if (!o.mouseDown) {
                            playlist.g("show") ? playlist.hide(1) : ''
                        }
                    }, (v.playlist.showoverto > 0 ? v.playlist.showoverto * 1000 : 1000))
                }
            }
            if (resize) {
                setTimeout(Resize, 10)
            }
        };
        this.StageLeave = function() {
            if (o.volumewheel && !o.fullscreen && !o.fullscreen_process) {
                o.actions.volumewheel(false);
                o.volumewheel = false
            }
            if (o.poster) {
                if (v.poster_aover > -1 && isVisible(o.poster)) {
                    css(o.poster, {
                        opacity: v.poster_a
                    })
                }
            }
            if (o.play && v.playonhover == 1 && v.pauseonhover != 0) {
                o.actions.Pause()
            }
            if (v.toolbar.hideleavetimeout > 0) {
                clearTimeout(o.leavetimeout);
                o.leavetimeout = setTimeout(ShowOrHide, v.toolbar.hideleavetimeout * 1000)
            } else {
                ShowOrHide()
            }
        };
        this.StageOver = function() {
            if (o.poster) {
                if (v.poster_aover > -1 && isVisible(o.poster)) {
                    css(o.poster, {
                        opacity: v.poster_aover
                    })
                }
            }
            if (!o.play && v.playonhover == 1) {
                o.actions.Play()
            }
            ShowOrHide();
            ToolbarDown(false)
        };
        this.StageMove = function(stage_x, stage_y) {
            var y;
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    y = b[x].g("action");
                    if (y == "line" || y == "volume") {
                        b[x].StageMove(stage_x, stage_y)
                    }
                }
            }
        };
        this.StageMove2 = function() {
            if (v.toolbar.hide == 1) {
                if (v.toolbar.hidejustfull == 1 && !o.fullscreen) {
                    return
                }
                if ((!o.mouseHere || o.system.mobile) && o.media.status() == "playing") {
                    o.mouseHere = true;
                    ShowOrHide();
                    o.system.mobile ? setTimeout(function() {
                        o.mouseHere = false
                    }, 500) : ''
                }
                if (v.toolbar.hidewithoutmoving == 1) {
                    ShowForce();
                    HideInterval()
                }
                ToolbarDown(false)
            }
        };
        this.StageMouseUp = function(stage_x, stage_y) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "line" || b[x].g("action") == "volume") {
                        b[x].StageMouseUp(stage_x, stage_y)
                    }
                }
            }
        };
        this.Played = function(time, duration, upd) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "line") {
                        b[x].UpdatePlay(time, duration, upd)
                    }
                    if (b[x].g("action") == "time") {
                        UpdateTime(b[x], time, duration)
                    }
                    if (b[x].s("rotateplaying") == 1) {
                        b[x].Rotate()
                    }
                    if (b[x].s("svgtmln") == 1) {
                        b[x].Tmln(time, duration)
                    }
                    if (b[x].s("often") == 1) {
                        if (!b[x].g("show") && toolbarHidden) {} else if (b[x].g("show") == HideProof(b[x])) {
                            ShowOrHide()
                        }
                    }
                }
            }
        };

        function ToolbarDown(x) {
            if (v.toolbar.hide == 1) {
                x ? SettingsClose() : '';
                if (v.toolbar.hidedown == 1) {
                    if (!o.play && v.toolbar.hideonpause == 1) {
                        x = true
                    }
                    if (x && !o.toolbarisdown) {
                        css(o.toolbar, {
                            "top": bg.h()
                        })
                    }
                    if (!x && o.toolbarisdown) {
                        css(o.toolbar, {
                            "top": 0
                        })
                    }
                    o.toolbarisdown = x
                }
            }
        }

        function ToolbarShow() {
            toolbarHidden = false;
            o.media.ToolbarShow();
            if (o.resizeonmouse) {
                o.resizeonmouse = false;
                Resize();
                setTimeout(Resize, 300)
            }
        }

        function UpdateTime(x, time, duration) {
            if (v.delete > 0) {
                time -= v.delete;
                duration -= v.delete
            }
            var y = Time(time);
            if (x.s("inversetime") == "1") {
                y = Time(duration - time)
            }
            if (x.s("showduration") == "1") {
                if (x.s("showboth") == "1") {
                    y = y + (duration > 0 ? ' ' + Lang(x.s("separator")) + ' ' + Time(duration) : '')
                } else {
                    time == 0 ? y = Time(duration) : ''
                }
            }
            x.UpdateText(y)
        }
        this.Loaded = function(time, duration) {
            var x = FindBut("action", "line");
            if (x) {
                x.UpdateLoad(time, duration)
            }
        };
        this.Cut = function(y) {
            if (o.media.duration() > 0) {
                var x = FindBut("action", "line");
                if (x) {
                    x.Cut(y)
                }
            }
        };
        this.Waiting = function() {
            if (!waiting) {
                if (v.hidevideo == 1) {
                    clearTimeout(wait_to);
                    wait_to = setTimeout(Waiting, 500)
                } else {
                    Waiting()
                }
            }
        };

        function Waiting() {
            if (!waiting) {
                js("buffering");
                waiting = true;
                var x = FindBut("action", "buffer");
                if (x) {
                    x.Buffer();
                    if (v.posteronwait == 1 && o.play) {
                        setTimeout(WaitPoster, 1000)
                    }
                }
                o.wtcntrl ? ShowOrHide() : ''
            }
        }

        function WaitPoster() {
            if (o.play && waiting) {
                o.actions.ShowPoster()
            }
        }
        this.HideElement = function(y) {
            for (var x in b) {
                if (x == y) {
                    b[x].set("hide2")
                }
            }
        };
        this.StopWaiting = function(time, duration) {
            clearTimeout(wait_to);
            if (waiting) {
                js("buffered");
                var x = FindBut("action", "buffer");
                if (x) {
                    x.BufferStop();
                    if (v.posteronwait == 1 && o.play) {
                        o.actions.HidePoster()
                    }
                }
                waiting = false;
                o.wtcntrl ? ShowOrHide() : ''
            }
        };
        this.volumescroll = function() {
            var x = FindBut("linkurl", "volume scroll");
            if (x) {
                x.set("show2");
                x.UpdateText(Lang('volume') + ' ' + (o.muted ? 0 : Math.ceil(v.volume * 100)) + '%');
                clearTimeout(o.volumescroll);
                o.volumescroll = setTimeout(Volumescrolled, 1000)
            }
        };

        function Volumescrolled() {
            var x = FindBut("linkurl", "volume scroll");
            if (x) {
                x.UpdateText('');
                x.set("hide2");
                clearTimeout(o.volumescroll)
            }
        }
        this.Seek = function(time, duration) {
            if (v.delete > 0) {
                time -= v.delete;
                duration -= v.delete
            }
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "line") {
                        duration > 0 ? b[x].set("click", time / duration) : '';
                        b[x].UpdatePlaySeek()
                    }
                    if (b[x].g("action") == "time") {
                        UpdateTime(b[x], time, duration)
                    }
                    if (b[x].g("action") == "live") {
                        b[x].set("iconopacity", 0.5);
                        b[x].set("saturate", 0)
                    }
                }
            }
        };
        this.Duration = function(time, duration) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "duration") {
                        if (v.delete > 0) {
                            duration -= v.delete
                        }
                        b[x].UpdateText(Time(duration))
                    }
                    if (b[x].g("action") == "line") {
                        b[x].UpdatePlay(time, duration);
                        b[x].PlacePoints(duration)
                    }
                    if (b[x].g("action") == "time") {
                        UpdateTime(b[x], time, duration)
                    }
                }
            }
        };
        this.Settings = function() {
            settings.g("show") ? settings.hide() : settings.show()
        };
        this.SettingsVisible = function() {
            if (settings) {
                if (o.settings2) {
                    return o.settings2.isVisible()
                } else {
                    return settings.g("show") ? true : false
                }
            } else {
                return false
            }
        };
        this.MenuProc = function(x) {
            if (settings) {
                settings.menuproc(x)
            }
        };
        this.SettingsClose = function() {
            SettingsClose()
        };
        this.SettingsTimer = function(x) {
            if (settings) {
                settings.UpdateTimer(x)
            }
        };
        this.SettingsSpeed = function() {
            if (settings) {
                settings.UpdateSpeed()
            }
        };
        this.SettingsExist = function(x) {
            if (settings) {
                return settings.Exist(x)
            }
        };

        function SettingsClose(x) {
            if (settings) {
                settings.g("show") ? settings.hide(x) : ''
            }
            o.settings2 ? o.settings2.hide() : ''
        };
        this.Playlist = function() {
            if (playlist) {
                if (playlist.g("show")) {
                    playlist.hide(1)
                } else {
                    playlist.show()
                }
            }
        };
        this.PlaylistShow = function() {
            if (playlist) {
                setTimeout(function() {
                    playlist.show()
                }, 100)
            }
        };
        this.PlaylistVisible = function() {
            if (playlist) {
                return playlist.g("show") ? true : false
            } else {
                return false
            }
        };
        this.PlaylistG = function(x) {
            return playlist ? playlist.g(x) : ''
        };
        this.UpdatePlaylist = function(x) {
            if (playlist) {
                playlist.updatePlaylist(x)
            }
        };
        this.PreNewPl = function(x) {
            if (playlist) {
                playlist.prenewpl(x)
            }
        };
        this.PlaylistNext = function() {
            if (playlist) {
                playlist.PlaylistNext()
            }
        };
        this.PlaylistHere = function() {
            if (playlist) {
                playlist.PlaylistHere()
            }
        };
        this.PlaylistControls = function() {
            PlaylistControls()
        };

        function PlaylistControls() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "next") {
                        css(b[x].c(), {
                            "opacity": (!playlist.PlaylistNextExist() ? 0.5 : 1)
                        })
                    }
                    if (b[x].g("action") == "prev") {
                        css(b[x].c(), {
                            "opacity": (!playlist.PlaylistPrevExist() ? 0.5 : 1)
                        })
                    }
                }
            }
        }
        this.PlaylistNextExist = function() {
            if (playlist) {
                return playlist.PlaylistNextExist()
            } else {
                return false
            }
        };
        this.PlaylistPrevExist = function() {
            if (playlist) {
                return playlist.PlaylistPrevExist()
            } else {
                return false
            }
        };
        this.PlaylistExist = function() {
            if (playlist) {
                return playlist.PlaylistExist()
            } else {
                return false
            }
        };
        this.PlaylistRewind = function() {
            if (playlist) {
                playlist.PlaylistRewind()
            }
        };
        this.PlaylistPrev = function() {
            if (playlist) {
                playlist.PlaylistPrev()
            }
        };
        this.PlaylistPlayId = function(x) {
            if (x && playlist) {
                playlist.playById(x)
            }
        };
        this.PlaylistOpenId = function(x) {
            if (x && playlist) {
                playlist.openById(x)
            }
        };
        this.PlaylistMove = function(x) {
            if (x && playlist) {
                css(playlist.co(), {
                    "maxHeight": "none",
                    "padding-right": playlist.s("bgpaddingright")
                });
                document.getElementById(x).appendChild(playlist.co());
                hide2(playlist.c())
            }
        };
        this.ShowSettingsBut = function() {};
        this.QualityChanged = function(x) {
            if (settings) {
                settings.SetQuality();
                settings.g("show") ? setTimeout(function() {
                    settings.hide()
                }, 200) : ''
            }
        };
        this.QualityChangedNoHand = function() {
            if (settings) {
                settings.SetQuality()
            }
            if (o.settings2) {
                o.settings2.update()
            }
        };
        this.AirplayChanged = function(x) {
            if (settings) {
                settings.Airplay()
            }
            Resize();
            ShowOrHide()
        };
        this.SettingChanged = function(x) {
            if (settings) {
                settings.SetSetting(x);
                settings.g("show") ? settings.hide() : ''
            }
            if (o.settings2) {
                o.settings2.update()
            }
            x == "speed" ? SpeedChanged() : ''
        };

        function SpeedChanged() {
            if (o.line_speed) {
                var x = parseFloat(o.custom_speed / o.files_speed.slice(-1)[0], 1).toFixed(1);
                for (var i in b) {
                    if (b.hasOwnProperty(i)) {
                        if (b[i].s("customline") == "speed" && o.custom_speed) {
                            b[i].UpdatePlay(x, 1)
                        }
                        if (b[i].s("linkurl") == "api:speed,1.0") {
                            b[i].UpdateVolume(x)
                        }
                    }
                }
            }
        }
        this.AudioTrackChangedNoHand = function(x) {
            if (settings) {
                settings.SetSetting("audiotrack")
            }
            if (o.settings2) {
                o.settings2.update()
            }
        };
        this.SubtitleChanged = function() {
            if (settings) {
                settings.SetSubtitle();
                settings.g("show") ? setTimeout(function() {
                    settings.hide()
                }, 200) : ''
            }
            if (o.settings2) {
                o.settings2.update()
            }
            if (o.casting && o.tagvideo) {
                o.chromecast.Sub()
            }
        };
        this.SubOpt = function() {
            o.settings2 ? o.settings2.hide() : '';
            if (settings) {
                settings.SubOpt()
            }
        };
        this.SettingsN = function(num, display, val) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "settings") {
                        if (b[x].s("hdicon") == 1) {
                            b[x].HdIcon()
                        }
                    }
                    if (b[x].g("action_settings") == "settings#" + num) {
                        b[x].set("set#visible", display);
                        if (b[x].g("type") == "text") {
                            if (val) {
                                b[x].UpdateText(NoSpan(val))
                            }
                        } else {
                            if (v.settings['settings' + num + 'action'] == "subtitle") {
                                if (val == Lang("off")) {
                                    b[x].CustomSwitch(0)
                                } else {
                                    b[x].CustomSwitch(1)
                                }
                            }
                            Resize()
                        }
                        ShowOrHideProcessor(b[x])
                    }
                }
            }
        };
        this.UpdateSettings = function() {
            if (settings) {
                settings.SetQuality();
                settings.SetSetting("audiotrack");
                settings.SetSetting("download")
            }
        };
        this.RenewPoints = function() {
            var x = FindBut("action", "line");
            if (x) {
                x.RenewPoints()
            }
        };
        this.resize = function() {
            Resize();
            if (toolbarHidden) {
                o.resizeonmouse = true
            }
        };
        this.resizeFromText = function(x) {
            if (!toolbarHidden || x == 1) {
                Resize();
                ShowOrHide()
            } else {
                v.toolbar.resizeme = true
            }
        };
        this.startcss = function() {
            var b = FindBut("type", "css");
            if (b) {
                b.setcss()
            }
        };
        this.refresh = function() {
            ShowOrHide();
            Resize();
            ShowOrHide();
            if (o.nativecontrols) {
                hide2(bg2)
            } else {
                !toolbarHidden ? show2(bg2) : ''
            }
        };
        this.KeyDown = function(event) {
            if (pljssglobalid == v.id && v.hotkey.on == 1) {
                var x = event.which;
                var y = false;
                if (x == undefined) {
                    x = event.keyCode
                }
                if (exist(o.vast) || exist(o.pass) || o.stopkeys == 1) {
                    return false
                }
                if (o.play && v.hotkey.onplay == 1) {
                    y = true
                }
                if (((v.hotkey.space == 1 && x == 32) || (v.hotkey.enter == 1 && x == 13)) && (o.focus || o.mouseHere || y)) {
                    if (v.hotkey.icons == 1) {
                        PluginHotIcon('play', o.play ? 0 : 1)
                    }
                    o.actions.Toggle();
                    event.preventDefault();
                    return false
                }!v.hotkey.vol ? v.hotkey.vol = 0.2 : '';
                !v.hotkey.scale ? v.hotkey.scale = 5 : '';
                if (v.hotkey.nums == 1 && (o.focus || y)) {
                    if (o.media.duration() > 0) {
                        for (var i = 48; i < 58; i++) {
                            if (x == i) {
                                o.actions.Seek((o.media.duration() * (x - 48) * 10) / 100, true)
                            }
                        }
                    }
                }
                if (x == 39 && (o.focus || y)) {
                    KeyPlusUp(v.hotkey.leftright)
                }
                if (x == 37 && (o.focus || y)) {
                    KeyPlusDown(v.hotkey.leftright)
                }
                if (x == 38 && (o.focus || y)) {
                    KeyPlusUp(v.hotkey.updown)
                }
                if (x == 40 && (o.focus || y)) {
                    KeyPlusDown(v.hotkey.updown)
                }
                if (x == 187 && (o.focus || y)) {
                    KeyPlusUp(v.hotkey.plusminus)
                }
                if (x == 189 && (o.focus || y)) {
                    KeyPlusDown(v.hotkey.plusminus)
                }
            }
        };

        function FindBut(y, z) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].s(y) == z) {
                        return b[x]
                    }
                }
            }
        }

        function KeyPlusUp(x) {
            if (x == "next") {
                if (o.playlist) {
                    o.controls.PlaylistNext()
                } else {
                    x = "seek"
                }
            }
            if (x == "seek") {
                if (o.media.duration() > 0) {
                    if (o.media.time() + parseFloat(v.hotkey.seek) < o.media.duration()) {
                        o.actions.Seek(o.media.time() + parseFloat(v.hotkey.seek), true)
                    }
                }
            }
            if (x == "volume") {
                o.actions.Volume(parseFloat(v.volume) + parseFloat(v.hotkey.vol));
                event.preventDefault()
            }
            if (x == "scale") {
                o.media.scale(v.hotkey.scale / 100);
                event.preventDefault()
            }
            if (v.hotkey.icons == 1) {
                PluginHotIcon(x, 1)
            }
        }

        function KeyPlusDown(x) {
            if (x == "next") {
                if (o.playlist) {
                    o.controls.PlaylistPrev()
                } else {
                    x = "seek"
                }
            }
            if (x == "seek") {
                if (o.media.duration() > 0 && o.start) {
                    o.actions.Seek((o.media.time() - v.hotkey.seek >= 0 ? o.media.time() - v.hotkey.seek : 0), true)
                }
            }
            if (x == "volume") {
                o.actions.Volume(parseFloat(v.volume) - parseFloat(v.hotkey.vol));
                event.preventDefault()
            }
            if (x == "scale") {
                o.media.scale(-v.hotkey.scale / 100);
                event.preventDefault()
            }
            if (v.hotkey.icons == 1) {
                PluginHotIcon(x, 0)
            }
        };
        this.KeyUp = function(event) {
            if (pljssglobalid == v.id) {
                var x = event.which;
                if (x == undefined) {
                    x = event.keyCode
                }
                if (x == 57) {
                    if (v.log == 1) {}
                }
                if (o.fullscreen && x == 27) {
                    o.actions.Normalscreen()
                }
                if (exist(o.vast) || exist(o.pass)) {
                    return false
                }
                if (v.hotkey.f == 1 && x == 70 && v.hidevideo != 1 && (o.focus || o.mouseHere)) {
                    if (v.hotkey.icons == 1) {
                        PluginHotIcon('fullscreen', o.fullscreen ? 0 : 1)
                    }
                    o.fullscreen ? o.actions.Normalscreen() : o.actions.Fullscreen()
                }
                if (v.hotkey.m == 1 && x == 77 && (o.focus || o.mouseHere)) {
                    if (v.hotkey.icons == 1) {
                        PluginHotIcon('mute', o.muted ? 1 : 0)
                    }
                    o.muted ? o.actions.Unmute() : o.actions.Mute()
                }
            }
        };
        this.Remove = function() {
            clearInterval(o.toolbarInterval);
            for (var x in o) {
                if (x.indexOf("control") == 0 && x.indexOf("Interval") > -1) {
                    clearInterval(o[x])
                }
            }
            for (var i = 0; i < butNames.length; i++) {
                key = butNames[i];
                if (b[key]) {
                    b[key].Remove()
                }
            }
            if (settings) {
                settings.Remove()
            }
            if (playlist) {
                playlist.Remove()
            }
            bg.Remove();
            if (bg2.parentNode == o.frame) {
                o.frame.removeChild(bg2)
            } else {
                o.toolbar ? o.toolbar.removeChild(bg2) : ''
            }
        };
        this.ShowForce = function() {
            ShowForce()
        };
        this.HideForce = function() {
            HideForce();
            ShowOrHide()
        };
        this.HideInterval = function() {
            HideInterval()
        };
        this.ToolbarHidden = function() {
            return toolbarHidden
        }
    };
    var Control = function(key) {
        var i;
        var style = [];
        var w;
        var h;
        var last_text_w = 0;
        var bg;
        var bgcontainer;
        var area;
        var angle = 0;
        var visible = true;
        var selectOpen = false;
        var scaleX = 1;
        var scaleY = 1;
        var tip;
        var tipbg;
        var tiptext;
        var tipcrn;
        var action;
        var actionstt = '';
        var x0;
        var y0;
        var on;
        var over = false;
        var touchmove = false;
        var iconangle = 0;
        var bufferInterval;
        var bufferDeg = 0;
        var rightside = 0;
        var topside = 0;
        var bottomside = 0;
        var noclick = false;
        var zoomed = false;
        var clicked = false;
        var hidden = false;
        var htto;
        var hdicon;
        var imgldd;
        var settingsNumberVisible = false;
        style = UpdateObject(style, default_style.but);
        style = UpdateObject(style, v[key]);
        var actions = [style.action];
        action = actions[0];
        exist(style.action2) ? actions[1] = style.action2 : '';
        exist(style.opposite) ? actions[1] = style.opposite : '';
        exist(style.title) ? style.text = style.title : '';
        if (exist2(style.scalesmall)) {
            o.small ? style.scale = style.scalesmall : ''
        }
        if (action == "share") {
            o.shareme = true
        }
        if (exist(style.linkurl)) {
            if (style.type == "text" && style.linkurl != '') {
                if (exist(v[style.linkurl + 'text'])) {
                    style.text = v[style.linkurl + 'text']
                }
            }
            if (style.linkurl.indexOf("settings#") == 0) {
                actionstt = style.linkurl;
                if (style.tiptext == '' && actionstt.indexOf(",") == -1) {
                    style.tiptext = Lang(v.settings['settings' + actionstt.substr(9) + 'action'])
                }
            }
            if (style.linkurl.indexOf("captions") > -1) {
                v.hlscaptions = true
            }
            if (style.linkurl.indexOf("share:") > -1) {
                o.shareme = true
            }
            if (style.linkurl == "countdown") {
                style.counter = new PluginCountdown(style)
            }
        }
        var tips = style.tiptext ? style.tiptext.split("///") : [];
        if (style.liketext == 1) {
            style.type = "text";
            style.text = TipText(0) + (actions.length > 1 ? '///' + TipText(1) : '');
            if (exist2(style.iconscolor)) {
                style.color = style.iconscolor
            }
        }
        style.it = [];
        style.il = [];
        var _currentIcon = 0;
        var icons = new Array();
        var icon = new Array();
        var iconsover = new Array();
        var iconspress = new Array();
        var iconreplay = 0;
        var replay;
        if (style.type == "text") {
            if (style.dom) {
                if (exist(v[style.dom + 'text'])) {
                    style.text = v[style.dom + 'text']
                }
            }
            if (exist(style.text)) {
                icons[0] = trim(style.text);
                style.lngth = style.text.length;
                var smbls = ['/', '|', '-'];
                smbls.indexOf(style.text.substr(-1)) > -1 ? style.postsmbl = style.text.substr(-1) : '';
                smbls.indexOf(style.text.substr(0, 1)) > -1 ? style.presmbl = style.text.substr(0, 1) : '';
                if (action == "time" || action == "duration") {
                    if (style.text.indexOf('0:') == 0) {
                        style.timeshort = true
                    }
                    if (style.text.split(":").length == 3) {
                        style.with_hours = true
                    } else {
                        if (style.text.indexOf('00:00') > -1) {
                            style.with_min = true
                        }
                    }
                    if (style.dvrtime == 1) {
                        v.dvrtime = 1
                    }
                }
                if (style.inversetime == 1 && style.text.indexOf("-") == 0) {
                    style.minus4back = true
                }
                if (style.text.indexOf("///") > 0 && (action == "custom" || style.liketext == 1)) {
                    style.texts = style.text.split("///");
                    style.text = icons[0] = style.texts[0]
                }
            }
            if (v.fonts == 1) {
                setTimeout(ResizeText, 100);
                setTimeout(ResizeText, 500);
                setTimeout(ResizeText, 1000)
            }
        } else {
            if (exist(style.icon)) {
                icons[0] = style.icon;
                if (icons[0].indexOf("///") > 0 && icons[0].indexOf("base64") == -1) {
                    icons = style.icon.split("///")
                }
                if (exist(style.icon2)) {
                    icons[1] = style.icon2
                }
                if (style.iconsreplay == 1) {
                    if (exist2(style.icon3)) {
                        icons.push(style.icon3);
                        iconreplay = icons.length - 1
                    }
                }
            }
        }
        if (action == "custom") {
            if (style.link2 == 1 && exist(style.linkurl2)) {
                style.linkurl0 = style.linkurl
            }
        }
        var control = createElement("div");
        if (style.position == 'timeline') {
            o.timeline.appendChild(control)
        } else {
            if (style.position.indexOf('controls') > -1 && v.toolbar.hide == 1 && v.toolbar.hidedown == 1) {
                o.toolbar.appendChild(control)
            } else {
                o.frame.appendChild(control)
            }
            if (action == "buffer" && style.ontop2 == 1) {
                control.style.zIndex = 2001
            }
        }
        var bgcontainer = createElement("div");
        control.appendChild(bgcontainer);
        var icns = createElement("div");
        css(icns, {
            "position": "absolute",
            "left": 0,
            "top": 0
        });
        control.appendChild(icns);
        css(control, {
            "position": "absolute",
            "left": 0,
            "top": 0,
            "opacity": 1,
            "fontSize": "14px",
            "lineHeight": "1em"
        });
        if (exist2(style.dom)) {
            attr(control, {
                "id": (v.id + "_" + "control_" + style.dom)
            })
        }
        if (style.rotateplaying == 1) {
            css(icns, {
                "transition": "transform 0.2s linear"
            })
        }
        if (icons.length > 0) {
            for (i = 0; i < icons.length; i++) {
                icon[i] = createElement("div");
                css(icon[i], {
                    "position": "absolute",
                    "top": 0,
                    "left": 0,
                    "pointerEvents": "none",
                    "opacity": style.a,
                    "transition": "opacity 0.1s linear,transform 0.1s linear"
                });
                if (style.type == "pic" && style.src != '') {
                    if (exist2(style.dom)) {
                        attr(icon[i], {
                            "id": (v.id + "_control_" + style.dom + "_icon")
                        });
                        if (v[style.dom + 'src']) {
                            style.src = v[style.dom + 'src']
                        }
                    }
                    if (style.src.indexOf(".png") > -1 || style.src.indexOf(".jpg") > -1 || style.src.indexOf(".gif") > -1 || style.src.indexOf("base64") > -1) {
                        style.src.indexOf("//") == -1 && style.src.indexOf("base64") == -1 ? style.src = '//' + style.src : '';
                        var z = createElement("img");
                        style.loading = 1;
                        z.addEventListener("load", imageLoaded);
                        z.src = style.src;
                        icon[i].appendChild(z);
                        style.w = icon[i].offsetWidth;
                        style.h = icon[i].offsetHeight;
                        if (style.picheight > 0) {
                            css(z, {
                                height: style.picheight
                            })
                        }
                    }
                }
                if (style.type == "text") {
                    css(icon[i], {
                        "color": (style.color),
                        "fontSize": style.fontsize * existv(v.globalfs, 1),
                        "fontFamily": checkFont(style.font),
                        "letter-spacing": style.letterspacing + 'px',
                        "padding": "0 3px 0 3px",
                        "white-space": "nowrap"
                    });
                    if (o.small) {
                        if (exist2(style.fontsizesmall)) {
                            css(icon[i], {
                                "fontSize": style.fontsizesmall * existv(v.globalfs, 1),
                            })
                        }
                    }
                    if (style.click == 1) {
                        if (style.text.indexOf("<a ") > -1 || key == "control_title") {
                            css(icon[i], {
                                "pointerEvents": "auto"
                            })
                        }
                    }
                    if (style.bold == 1) {
                        css(icon[i], {
                            "font-weight": "bold"
                        })
                    }
                    icons[i] == 'live' ? icons[i] = Lang("live") : '';
                    icon[i].innerHTML = Places(icons[i]);
                    setTimeout(Marquee, 100);
                    style.w = icon[i].offsetWidth;
                    style.h = icon[i].offsetHeight;
                    if (exist2(style.dom)) {
                        attr(icon[i], {
                            "id": (v.id + "_control_" + style.dom + "_text")
                        })
                    }
                }
                if (style.type == "css") {
                    o.start ? setTimeout(SetCSS, 200) : ''
                }
                var icn = icons[i].toString();
                if (icn.indexOf('var:') == 0) {
                    icn = existv(window[icn.substr(4)], '')
                }
                var isvg = icn.indexOf('<svg') > -1 || icn.indexOf('<SVG') > -1;
                if (style.type == "svg" && (icn.indexOf('<g>') > -1 || isvg)) {
                    if (action == "mute" || action == "custom") {
                        icn = icn.replace(/pjs_/g, 'pjs_' + v.id + key)
                    }
                    if (icn.indexOf('pointer') > -1) {
                        Clickable(icon[i])
                    }
                    icon[i].innerHTML = (!isvg ? "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" : '') + icn + (!isvg ? "</svg>" : '');
                    icon[i].offsetWidth > 20 ? style.w = icon[i].offsetWidth : '';
                    icon[i].offsetHeight > 20 ? style.h = icon[i].offsetHeight : '';
                    css(icon[i], {
                        "width": style.w,
                        "height": style.h
                    });
                    if (style.iconscolor != -1) {
                        IconsColor(icon, style.iconscolor)
                    }
                    if (exist2(style.dom)) {
                        attr(icon[i], {
                            "id": (v.id + "_control_" + style.dom + "_icon" + i)
                        })
                    }
                }
                icns.appendChild(icon[i]);
                i > 0 ? hide(icon[i]) : ''
            }
            Background();
            if (style.svgtmln == 1) {
                style.tmln = new PlgnCntrlTmln(style, control)
            }
            imgldd ? imageLoaded() : '';
            if (style.linkurl == "chromecast") {
                style.chromecast = 1;
                style.hide = 1;
                o.chromecast ? icon[0].innerHTML = o.chromecast.button(style.iconscolor != -1 ? style.iconscolor : '#ffffff') : '';
                if (o.system.mobile) {
                    icon[0].ontouchstart = onMobOver;
                    icon[0].ontouchend = onOut;
                    icon[0].ontouchmove = onMobMove
                } else {
                    icon[0].onmouseover = onOver;
                    icon[0].onmouseout = onOut;
                    icon[0].onmousemove = onMove
                }
            } else {
                if ((bg.offsetWidth * style.scale < 35 || bg.offsetHeight * style.scale < 35) && style.type != 'text') {
                    ClickArea();
                    Clickable(area)
                } else {
                    Clickable(bg)
                }
            }
            if (action == "custom") {
                var lu = '';
                if (style.link == 1 && exist(style.linkurl)) {
                    lu = style.linkurl;
                    if (lu.indexOf("api:") == 0) {
                        var tmp = lu.substr(4).split(",");
                        if (tmp.length == 2) {
                            var tmp2 = tmp[1].split("/");
                            if (tmp2.length == 2) {
                                tmp[0] == 'hd' ? tmp[0] = "default_quality" : '';
                                if (v[tmp[0]] == tmp2[1]) {
                                    style.a = 1;
                                    css(icon[0], {
                                        "opacity": style.a
                                    })
                                }
                            }
                        }
                    }
                    if (lu == "unblock" || lu == "block") {
                        o.actions.Curtain();
                        control.style.zIndex = 2001;
                        o.stopkeys = 1
                    }
                }
                if ((style.hide == 1 && (style.hideafter == 1 || style.hidebefore == 1)) || lu.indexOf("skip") == 0) {
                    style.often = 1
                }
            }
            if (action == "settings" && style.hdicon == 1) {
                hdicon = new PluginHdIcon(control, bg, style)
            }
            if (style.click == 0) {
                Pnt0(control)
            }
            if (style.loading == 1) {
                hide(bg)
            }
            if (style.tip == 1) {
                CreateTip()
            }
            if (style.position.indexOf("right") > -1) {
                rightside = 1
            }
            if (style.position.indexOf("top") > -1) {
                topside = 1
            }
            if (style.position.indexOf("bottom") > -1 || style.position.indexOf("control") > -1) {
                bottomside = 1
            }
            Resize();
            var t = '';
            if (style.rotation != 0) {
                t += "rotate(" + style.rotation + "deg)"
            }
            if (style.flipx == 1) {
                t += " scaleX(-1)"
            }
            if (style.flipy == 1) {
                t += " scaleY(-1)"
            }
            if (t != '') {
                css(icns, {
                    "transform": t
                })
            }
            if (action == "buffer") {
                BufferStop()
            }
            var tmp = [];
            var i;
            if (action == "playlist") {
                tmp = ['autoplaylist', 'openplaylistafter', 'openplaylistbefore', 'openplaylistpause', 'openplaylistroot', 'playlistrewind'];
                for (i = 0; i < tmp.length; i++) {
                    if (exist(style[tmp[i]]) && !exist(v.playlist[tmp[i]])) {
                        v.playlist[tmp[i]] = style[tmp[i]]
                    }
                }
            }
            if (action == "title") {
                tmp = ['showtitleplaylist', 'addtitleplaylist', 'addtitleplaylistbr'];
                for (i = 0; i < tmp.length; i++) {
                    if (exist(style[tmp[i]]) && !exist(options[tmp[i]])) {
                        v[tmp[i]] = style[tmp[i]]
                    }
                }
            }
            style.tipalways == 1 ? Tip() : '';
            if (action == "custom" && style.on == 0) {
                hide2(control)
            }
            if (style.hide == 1 && style.hideuntilto > 0) {
                setTimeout(Hideuntilto, style.hideuntilto * 1000)
            }
        }

        function Hideuntilto() {
            style.hideuntilto = -1;
            o.controls.refresh()
        }

        function ClickArea() {
            if (area) {
                area.parentNode.removeChild(area)
            }
            area = createElement("div");
            css(area, {
                "position": "absolute",
                "top": 0,
                "left": 0,
                "width": style.type == "pic" ? bg.offsetWidth : (bg.offsetWidth > 35 ? bg.offsetWidth : 35) * style.clickscalex,
                "height": style.type == "pic" ? bg.offsetHeight : (bg.offsetHeight > 35 ? bg.offsetHeight : 35) * style.clickscaley
            });
            style = MarginPadding(style, 'clickmargin', 'clickmargin');
            control.appendChild(area)
        }

        function Clickable(x) {
            if (action.indexOf("time") == 0 && actions.length == 1) {
                style.click = 0
            }
            if (action == "custom" && style.link == 0) {
                style.click = 0
            }
            if (style.click == 1) {
                if (style.hand == 1) {
                    css(x, {
                        "cursor": "pointer"
                    })
                }
                css(x, {
                    "pointerEvents": "auto"
                });
                if (o.system.mobile) {
                    x.addEventListener("touchmove", function(e) {
                        onMobMove(e)
                    });
                    x.addEventListener("touchstart", function(e) {
                        onMobOver(e)
                    });
                    x.addEventListener("touchend", function(e) {
                        onMobOut(e)
                    })
                }
                if (v.desktop == 1 || !o.system.mobile) {
                    x.onclick = onClick
                }
                if (v.toolbar.clickarea == 1 || style.clickarea == 1) {
                    css(x, {
                        "background-color": "#ff0000",
                        "opacity": 0.5
                    })
                }
            } else {
                css(x, {
                    "cursor": "default"
                })
            }
            if (!o.system.mobile) {
                x.onmouseover = onOver;
                x.onmouseout = onOut
            }
            if (style.hidden == 1 || style.tip == 1) {
                x.onmousemove = onMove
            }
        }

        function onMobMove(e) {
            js("touch_" + key);
            e.stopPropagation();
            touchmove = true
        }

        function onMobOver(e) {
            style.mobileover == 1 ? onOver() : '';
            e.stopPropagation()
        }

        function onMobOut(e) {
            e.stopPropagation();
            e.preventDefault();
            style.mobileover == 1 ? onOut() : '';
            if (!touchmove) {
                onClick(e)
            }
            touchmove = false
        }

        function Background() {
            if (bg) {
                bg.parentNode.removeChild(bg)
            }
            bg = createElement("div");
            css(bg, {
                "position": "absolute",
                "top": 0,
                "left": 0
            });
            if (exist2(style.dom)) {
                attr(bg, {
                    "id": (v.id + "_control_" + style.dom + "_bg")
                })
            }
            w = style.w;
            h = style.h;
            style.bgt = -1;
            style.bgl = -1;
            style = MarginPadding(style, 'margin', 'margin');
            style = MarginPadding(style, 'marginproc', 'marginproc');
            if (style.type == "text") {
                w = icon[_currentIcon].offsetWidth;
                h = icon[_currentIcon].offsetHeight;
                if (style.minw > 0) {
                    w < style.minw ? w = style.minw : ''
                }
            }
            style = MarginPadding(style, 'bgpadding', 'bgpadding');
            style = MarginPadding(style, 'iconmargin', 'iconmargin');
            if (exist2(style.dom) && exist(v.custom) && style.action == "custom") {
                if (typeof(v.custom) == 'object') {
                    for (var i = 0; i < Object.keys(v.custom).length; i++) {
                        if (v.custom[i][style.dom]) {
                            if (v.custom[i][style.dom] == "off") {
                                style.on = 0
                            } else {
                                var tmp = v.custom[i][style.dom].split(":");
                                if (tmp[0] == "margin-left") {
                                    if (tmp[1].indexOf("%") > 0) {
                                        style.marginprocleft = parseInt(tmp[1])
                                    } else {
                                        style.marginleft = parseInt(tmp[1])
                                    }
                                }
                            }
                        }
                    }
                }
            }
            style.h = h;
            style.w = w;
            if (style.bg == 1) {
                h = h + style.bgpaddingtop + style.bgpaddingbottom;
                w = w + style.bgpaddingleft + style.bgpaddingright;
                style.h = h;
                style.w = w;
                if (style.type == "text") {
                    style.bgh = icon[0].offsetHeight
                }
            } else {
                style.bga = 0
            }
            css(bg, {
                "width": (style.bgstretch == 1 ? 5000 : w),
                "height": h,
                "borderRadius": (style.bgo * h) / 2,
                "background": style.bgcolor,
                "opacity": style.bga,
                "transition": "opacity .1s linear, background .1s linear, transform .1s linear" + (exist2(style.bgbrovr) ? ', filter .1s linear' : '')
            });
            if (style.type == "pic") {
                css(bg, {
                    "width": w,
                    "height": h,
                    "borderRadius": (style.bgo * h / style.scale) / 2,
                })
            }
            if (style.bglines == 1) {
                Bglines(bg, style.bgcolor, style.bgline1, style.bgline2)
            }
            if (style.bgborder == 1) {
                css(bg, {
                    "border": "1px solid " + style.bgbordercolor
                })
            }
            bgcontainer.appendChild(bg)
        }

        function Resize() {
            var bgt = (-bg.offsetHeight / 2);
            var bgl = (-bg.offsetWidth / 2);
            if (bgt != style.bgt || bgl != style.bgl) {
                css(bg, {
                    "top": (-bg.offsetHeight / 2),
                    "left": (-bg.offsetWidth / 2)
                });
                style.bgt = bgt;
                style.bgl = bgl
            }
            if (area) {
                var x = style.type == "pic" ? bg.offsetWidth : (bg.offsetWidth > 35 ? bg.offsetWidth : 35);
                var y = style.type == "pic" ? bg.offsetHeight : (bg.offsetHeight > 35 ? bg.offsetHeight : 35);
                css(area, {
                    "top": (-y / 2) + style.clickmargintop - style.clickmarginbottom,
                    "left": (-x / 2) + style.clickmarginleft - style.clickmarginright
                })
            }
            for (i = 0; i < icons.length; i++) {
                var it = style.type == "svg" ? Math.round(parseInt(icon[i].style.height)) / 2 : Math.round(icon[i].offsetHeight) / 2;
                var il = style.type == "svg" ? parseInt(icon[i].style.width) / 2 : icon[i].offsetWidth / 2;
                if (it != style.it[i] || il != style.il[i]) {
                    css(icon[i], {
                        "top": -it,
                        "left": -il
                    });
                    if (bg) {
                        css(icon[i], {
                            "top": (int(icon[i].style.top) + style.bgpaddingtop / 2 - style.bgpaddingbottom / 2 + style.iconmargintop / 2 + style.iconmarginbottom / 2),
                            "left": (int(icon[i].style.left) + style.bgpaddingleft / 2 - style.bgpaddingright / 2 + style.iconmarginleft / 2 + style.iconmarginright / 2)
                        })
                    }
                    style.it[i] = it;
                    style.il[i] = il
                }
            }
        }

        function onOver() {
            var i;
            over = true;
            if (style.iconsover == 1) {
                if (on && exist(style.icon2)) {
                    i = 1
                } else {
                    i = 0
                }
                if (replay && iconsover.length > 2) {
                    i = 2
                }
                if (iconsover[i]) {
                    hideAllIcons();
                    show(icon[iconsover[i]])
                }
            }
            if (style.bg == 1) {
                if (style.bgaover != -1) {
                    css(bg, {
                        "opacity": style.bgaover
                    })
                }
                if (style.bgcolorover != -1) {
                    css(bg, {
                        "background": style.bgcolorover
                    })
                }
                if (exist2(style.bgbrovr)) {
                    css(bg, {
                        "filter": "brightness(" + style.bgbrovr + ")"
                    })
                }
            }
            if (style.aover > -1 && !selectOpen) {
                for (i = 0; i < icons.length; i++) {
                    if (icon[i].style.visibility != "hidden") {
                        css(icon[i], {
                            "opacity": style.aover
                        })
                    }
                }
            }
            if (style.iconscolorover != -1) {
                IconsColor(icon, style.iconscolorover)
            }
            if (style.rotateonhover == 1) {
                iconangle = iconangle + 45;
                Rot(icon[0], iconangle)
            }
            if (style.scaleover > style.scale && style.scaleover > -1) {
                scale(style.scaleover)
            }
            if (action == "settings" && o.controls.SettingsVisible()) {} else {
                if (style.tip == 1 && style.tipalways != 1) {
                    var x = tips.length > 1 && !on ? tips[1] : tips[0];
                    if (x) {
                        if (x.indexOf('var:') == 0) {
                            tiptext.innerHTML = window[x.substr(4)];
                            Tip()
                        }
                    }
                    show(tip);
                    css(tip, {
                        "opacity": 1
                    })
                }
            }
            if (action == "mute") {
                o.actions.volumewheel(true);
                o.volumewheel = true
            }
            o.controlover = true;
            o.controls.Mouse(key, "over")
        }

        function onOut() {
            over = false;
            var i;
            if (style.iconsover == 1) {
                if (on && exist(style.icon2)) {
                    i = 1
                } else {
                    i = 0
                }
                if (replay && iconsover.length > 2) {
                    i = 2
                }
                hideAllIcons();
                show(icon[i])
            }
            if (style.bg == 1) {
                if (style.bgaover != -1) {
                    css(bg, {
                        "opacity": style.bga
                    })
                }
                if (style.bgcolorover != -1) {
                    css(bg, {
                        "background": style.bgcolor
                    })
                }
                if (exist2(style.bgbrovr)) {
                    css(bg, {
                        "filter": "brightness(1)"
                    })
                }
            }
            if (style.aover > -1) {
                for (i = 0; i < icons.length; i++) {
                    if (icon[i].style.visibility != "hidden") {
                        css(icon[i], {
                            "opacity": style.a
                        })
                    }
                }
            }
            if (style.scaleover > -1) {
                scale(style.scale)
            }
            if (style.iconscolorover != -1) {
                IconsColor(icon, (style.iconscolor == -1 ? '#ffffff' : style.iconscolor))
            }
            if (action == "mute" && !o.fullscreen) {
                o.actions.volumewheel(false);
                o.volumewheel = false
            }
            TipHide();
            o.controlover = false;
            o.controls ? o.controls.Mouse(key, "out") : ''
        }

        function TipHide() {
            if (style.tip == 1 && style.tipalways != 1) {
                hide(tip);
                css(tip, {
                    "opacity": 0
                })
            }
        }

        function onClick(e) {
            e ? e.cancelBubble = true : '';
            if (!noclick) {
                o.controls.ControlClick(key);
                if (action == "custom") {
                    CustomToogle()
                }
                TipHide();
                if (style.rotateonclick == 1) {
                    iconangle = iconangle + 45;
                    Rot(icon[0], iconangle)
                }
                clicked = true;
                if (style.hideafterclick == 1 || (key == "control_start" && style.hide == 1 && style.hideonplay == 1)) {
                    o.controls.refresh()
                }
            }
        };
        this.Click = function() {
            onClick()
        };

        function CustomToogle() {
            if (icons) {
                if (icons.length > 1) {
                    if (on == true) {
                        show(icon[0]);
                        hide(icon[1])
                    } else {
                        show(icon[1]);
                        hide(icon[0])
                    }
                }
                if (style.tip == 1 && tips.length > 1) {
                    tiptext.innerHTML = o.ni + (on == true ? tips[0] : tips[1]) + o.ni2;
                    Tip()
                }
            }
            if (exist(style.linkurl0)) {
                if (on == true) {
                    style.linkurl = style.linkurl0
                } else {
                    style.linkurl = style.linkurl2
                }
            }
            SwitchText();
            on = on != true;
            if (style.linkurl) {
                if (style.linkurl.indexOf(",0/1") > -1) {
                    js(style.linkurl, on ? 1 : 0)
                }
            }
            if (style.bg == 1 && exist(style.bgcolorlink2)) {
                if (style.bgcolorlink2 != -1) {
                    if (on) {
                        style.bgcolorlink0 = style.bgcolor;
                        style.bgcolor = style.bgcolorlink2
                    } else {
                        style.bgcolor = style.bgcolorlink0
                    }
                    Background();
                    Clickable(bg);
                    Resize();
                    if (style.type == "text") {
                        ResizeText()
                    } else {
                        scale(style.scale)
                    }
                }
            }
        }

        function SwitchText() {
            if (exist(style.texts)) {
                if (style.texts.length > 1) {
                    if (on == true) {
                        UpdateText(style.texts[0])
                    } else {
                        UpdateText(style.texts[1])
                    }
                }
            }
        }

        function ReplayIcon(event) {
            event.cancelBubble = true;
            o.controls.ControlClick(key)
        }

        function hideAllIcons() {
            for (var i = 0; i < icons.length; i++) {
                if (icon[i].style.visibility != "hidden") {
                    css(icon[i], {
                        "opacity": style.a
                    });
                    hide(icon[i])
                }
            }
        }

        function Marquee(text) {
            if (icon[0]) {
                if (icon[0].offsetWidth > o.screen_w - style.marginleft - style.marginright - style.bgpaddingleft - style.bgpaddingright) {
                    if (style.marquee == 1) {
                        if (!text) {
                            text = icon[0].innerHTML
                        }
                        icon[0].innerHTML = '<marquee>' + text + '</marquee>'
                    } else {
                        css(icon[0], {
                            "white-space": "normal"
                        })
                    }
                    css(icon[0], {
                        "width": o.screen_w - style.marginleft - style.marginright - style.bgpaddingleft - style.bgpaddingright
                    })
                }
            }
        }

        function imageLoaded() {
            if (bg) {
                imgldd = false;
                style.loading = 0;
                hide(bg);
                if (icon[0]) {
                    style.w = icon[0].offsetWidth * style.scale;
                    style.h = icon[0].offsetHeight * style.scale;
                    scale(style.scale)
                }
                style.loaded = 0;
                Background();
                ClickArea();
                Clickable(area);
                show(bg);
                Resize();
                o.controls.resize();
                if (!isVisible(control)) {
                    hide2(control)
                }
            } else {
                imgldd = true
            }
        }

        function CancelBubble(event) {
            event.cancelBubble = true
        }

        function onMove() {
            if (!o.system.mobile && !o.controlover) {
                onOver()
            }
            Tip()
        }

        function scale(x) {
            if (x > 0) {
                css(bg, {
                    "transform": "scale(" + x + ")"
                });
                for (i = 0; i < icons.length; i++) {
                    css(icon[i], {
                        "transform": "scale(" + x + ")"
                    })
                }
                if (style.tmln) {
                    style.tmln.scale(x)
                }
                scaleX = x;
                scaleY = x
            }
        }

        function CreateTip() {
            tip = createElement("div");
            css(tip, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'height': 'auto',
                "opacity": 0,
                "transition": "opacity 0.1s linear"
            });
            tipbg = createElement("div");
            style = MarginPadding(style, 'tippadding', 'tippadding');
            style = MarginPadding(style, 'tipmargin', 'tipmargin');
            css(tipbg, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'width': '100%',
                'height': 30,
                'background-color': style.tipbgcolor,
                'opacity': style.tipbga,
                'border-radius': style.tipbgrounding
            });
            tiptext = createElement("div");
            css(tiptext, {
                'position': 'absolute',
                'left': style.tippaddingleft,
                'top': style.tippaddingtop,
                'color': style.tipcolor,
                'font-family': checkFont(style.tipfont),
                'font-size': style.tipfontsize * existv(v.globalfs, 1),
                "letter-spacing": style.tipletterspacing + 'px',
                "line-height": "1"
            });
            if (style.tiptext) {
                if (style.tiptext.indexOf("var:") == 0) {
                    style.tipvar = true
                }
            }
            if (!style.tipvar) {
                css(tiptext, {
                    'white-space': 'nowrap'
                })
            }
            if (style.tippointer == 1) {
                tipcrn = createElement("div");
                tipcrn.innerHTML = '<svg width="8px" height="6px" viewBox="0 0 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon id="Rectangle" stroke="none" fill="#' + style.tipbgcolor.replace("#", "") + '" fill-rule="evenodd" points="0 0 8 0 4 6"></polygon></svg>'
            }
            if (style.tipalways == 1) {
                css(tip, {
                    "opacity": 1
                });
                Clickable(tip)
            } else {
                Pnt0(tip)
            }
            control.appendChild(tip);
            tiptext.innerHTML = o.ni + (style.tiptext == '' ? Lang(action) : tips[0]) + o.ni2;
            tip.appendChild(tipbg);
            tip.appendChild(tiptext);
            if (style.tippointer == 1) {
                tip.appendChild(tipcrn);
                var btm = o.doctype ? '-8px' : '-6px';
                var ps = style.tippointeralign;
                if (!exist(ps)) {
                    ps = ''
                }
                var tp = ps.indexOf("top") > -1;
                if (tp) {
                    Rot(tipcrn, '-180')
                }
                css(tipcrn, {
                    'position': 'absolute',
                    'right': (ps.indexOf("right") > -1 ? 10 * style.scale : 'auto'),
                    'left': (ps.indexOf("left") > -1 ? 10 * style.scale : (ps == '' || ps == 'top' ? '50%' : 'auto')),
                    'margin-left': (ps == '' || ps == 'top' ? '-4px' : 0),
                    'bottom': (tp ? 'auto' : btm),
                    'top': (tp ? btm : 'auto'),
                    'opacity': style.tipbga
                })
            }
            Tip()
        }

        function Tip() {
            if (style.tip == 1) {
                css(tip, {
                    "top": (bottomside == 1 ? -h - tip.offsetHeight + 3 : -tip.offsetHeight / 2) + style.tipmargintop - style.tipmarginbottom,
                    "left": (rightside == 1 ? -tiptext.offsetWidth : (bottomside == 1 ? -w / 2 : +tiptext.offsetWidth)) - (bottomside == 1 ? 0 : tiptext.offsetWidth / 2 + 5) + style.tipmarginleft - style.tipmarginright,
                    "height": style.tippaddingtop + tiptext.offsetHeight + style.tippaddingbottom,
                    "width": style.tippaddingleft + tiptext.offsetWidth + style.tippaddingright
                });
                css(tipbg, {
                    'height': tip.offsetHeight
                });
                tip.style.zIndex = "1000"
            }
        }
        this.c = function() {
            return control
        };
        this.s = function(x) {
            return style[x]
        };
        this.ss = function(x, x2) {
            return exist(style[x]) ? style[x][x2] : false
        };
        this.g = function(x) {
            switch (x) {
                case "width":
                    return w;
                    break;
                case "height":
                    return h;
                    break;
                case "h":
                    return existv(style.bgh, h);
                    break;
                case "x":
                    return int(control.style.left);
                    break;
                case "y":
                    return int(control.style.top);
                    break;
                case "opacity":
                    return control.style.opacity ? control.style.opacity : 1;
                    break;
                case "show":
                    return visible;
                    break;
                case "scaleX":
                    return scaleX;
                    break;
                case "scaleY":
                    return scaleY;
                    break;
                case "action":
                    return action;
                    break;
                case "action_settings":
                    return actionstt;
                    break;
                case "clicked":
                    return clicked;
                    break;
                case "type":
                    return style.type;
                    break;
                case "length":
                    return style.lngth ? style.lngth : 0;
                    break;
                case "key":
                    return key;
                    break;
                case "x0":
                    return x0;
                    break;
                case "y0":
                    return y0;
                    break;
                case "over":
                    return over;
                    break;
                case "settings#":
                    return actionstt.indexOf("settings#") == 0;
                    break;
                case "settings:":
                    return actionstt.indexOf("settings:") == 0;
                    break;
                case "set#visible":
                    return settingsNumberVisible;
                    break;
                default:
                    return false
            }
        };
        this.set = function(k, x) {
            switch (k) {
                case "show":
                    over ? onOut() : '';
                    visible = x;
                    break;
                case "display":
                    DisplayControl(x);
                    break;
                case "show2":
                    show2(control);
                    break;
                case "hide2":
                    hide2(control);
                    break;
                case "unhidden":
                    style.hidden = 0;
                    break;
                case "hidetime":
                    if (style.hidesec > 0 && style.hidden != 1 && !htto) {
                        clearTimeout(htto);
                        htto = setTimeout(function() {
                            hide2(control);
                            style.hidden = 1;
                            htto = undefined
                        }, style.hidesec * 1000)
                    }
                    break;
                case "scale":
                    scale(x);
                    break;
                case "scale0":
                    css(control, {
                        "transform": "scale(0)"
                    });
                    break;
                case "scaleX":
                    css(control, {
                        "transform": "scaleX(" + x + ")"
                    });
                    scaleX = x;
                    break;
                case "scaleY":
                    css(control, {
                        "transform": "scaleY(" + x + ")"
                    });
                    scaleY = x;
                    break;
                case "opacity":
                    css(control, {
                        "opacity": x
                    });
                    break;
                case "iconopacity":
                    css(icon[0], {
                        "opacity": x
                    });
                    break;
                case "saturate":
                    css(icon[0], {
                        "filter": "saturate(" + x + ")"
                    });
                    break;
                case "left":
                    css(control, {
                        "left": x
                    });
                    break;
                case "top":
                    css(control, {
                        "top": x
                    });
                    break;
                case "width":
                    css(control, {
                        "width": x
                    });
                    break;
                case "height":
                    css(control, {
                        "height": x
                    });
                    break;
                case "over_final":
                    style.over_final = x;
                    break;
                case "rightside":
                    rightside = x;
                    break;
                case "set#visible":
                    settingsNumberVisible = x;
                    break;
                case "x":
                    css(control, {
                        "left": x
                    });
                    break;
                case "y":
                    css(control, {
                        "top": x
                    });
                    break;
                case "animation":
                    style.animation = x;
                    break;
                case "skip":
                    style.skip = x;
                    break;
                case "x0":
                    x0 = x;
                    break;
                case "y0":
                    y0 = x;
                    break;
                default:
                    return false
            }
        };

        function DisplayControl(x) {
            if (x && o.system.mobile) {
                noclick = true;
                setTimeout(noClickTimeout, 300)
            }
            if (!x) {
                if (style.iconsreplay == 1 && replay) {
                    hide(icon[iconreplay]);
                    show(icon[0]);
                    replay = false
                }
            }
            if (style.loading == 1) {
                x ? show(control) : hide(control)
            } else {
                if (key == "control_time" || key == "control_duration") {
                    x ? show(control) : hide(control)
                } else {
                    css(control, {
                        "display": (x ? "block" : "none")
                    })
                }
                visible = x;
                x ? show(control) : ''
            }
            if (x && style.resizetxt) {
                style.resizetxt = false;
                setTimeout(ResizeText, 100)
            }
        }

        function noClickTimeout() {
            noclick = false
        }
        this.UpdateText = function(x, y) {
            if (actionstt != '' && (style.text == 'x' || style.text == '1x')) {
                x = x + 'x'
            }
            if (y) {
                x = style.text + x
            }
            UpdateText(x);
            !isVisible(control) ? style.resizetxt = true : ''
        };
        this.CustomText = function(x) {
            style.customtext = x;
            UpdateText(x);
            o.controls ? o.controls.resize() : ''
        };
        this.Rotate = function() {
            Rot(icns, angle);
            angle += 20
        };

        function Rot(x, y) {
            css(x, {
                "transform": "rotate(" + y + "deg)" + (x == icon[0] && !zoomed && scaleX != 1 ? ' scale(' + scaleX + ')' : '')
            })
        };
        this.RenewFromTitle = function(x) {
            if (style.text.indexOf("{title") > -1) {
                UpdateText(style.text)
            }
        };
        this.CustomToogle = function() {
            CustomToogle()
        };

        function UpdateText(text) {
            if (style.type == "text") {
                if (exist(text)) {
                    if (style.with_hours) {
                        if (text.length == 4) {
                            text = (style.timeshort ? '0:0' : '00:0') + text
                        }
                        if (text.length == 5) {
                            text = (style.timeshort ? '0:' : '00:') + text
                        }
                        if (text.length == 7) {
                            text = (style.timeshort ? '' : '0') + text
                        }
                    }
                    if (style.with_min) {
                        if (text.length == 4) {
                            text = '0' + text
                        }
                    }
                    style.lngth = text.length
                }
                text = (style.presmbl ? style.presmbl + (style.minus4back ? '' : ' ') : '') + text + (style.postsmbl ? ' ' + style.postsmbl : '');
                var prevorius_default_w = icon[0].offsetWidth + (style.bg == 1 ? style.bgpaddingtop + style.bgpaddingbottom : 0);
                var prevorius_default_h = icon[0].offsetHeight + (style.bg == 1 ? style.bgpaddingtop + style.bgpaddingbottom : 0);
                icon[0].innerHTML = o.ni + (action == "custom" ? Places(text) : text) + o.ni2;
                if (style.triangle == 1) {
                    icon[0].innerHTML += '<span style="display:inline-block;width:10px"></span><span style="border-top: 3px solid ' + CheckColor(style.color) + ';border-left: 3px solid transparent;border-right: 3px solid transparent;position: absolute;right:3px;top: 50%;margin-top: -1px;"></span>'
                }
                if (action == "title") {
                    css(icon[0], {
                        "width": "auto",
                        "white-space": "nowrap"
                    });
                    Marquee(text)
                }
                style.w = icon[0].offsetWidth + (style.bg == 1 ? style.bgpaddingtop + style.bgpaddingbottom : 0);
                style.h = icon[0].offsetHeight + (style.bg == 1 ? style.bgpaddingtop + style.bgpaddingbottom : 0);
                if (prevorius_default_w != style.w || prevorius_default_h != style.h || (style.w > 0 && last_text_w == 0)) {
                    ResizeText()
                }
                if (icon[0].offsetWidth > 0) {
                    last_text_w = style.w
                } else {
                    actionstt != '' ? hide(icon[0]) : '';
                    if (text != '') {
                        setTimeout(ResizeText, 10)
                    }
                }
            }
        }
        this.ResizeText = function() {
            ResizeText()
        };

        function ResizeText() {
            if (style.type == "text") {
                if (icon[0]) {
                    if (icon[0].offsetWidth > 0) {
                        actionstt != '' ? show(icon[0]) : '';
                        w = style.w = icon[0].offsetWidth;
                        h = style.h = icon[0].offsetHeight;
                        Background();
                        Clickable(bg);
                        Resize();
                        o.controls ? o.controls.resizeFromText() : ''
                    }
                }
            }
        }
        this.UpdateVolume = function(x) {
            if (style.displayvolume == 1) {
                var n = 4;
                if (key == "control_mute") {
                    if (o.system.mobile) {
                        return
                    }
                } else {
                    n = 8
                }
                var y = 'pjs_';
                var z = [];
                for (var i = 1; i < n; i++) {
                    z[i] = document.getElementById(y.concat(v.id, key, 'volume_element', i))
                }
                if (z[1]) {
                    for (var i = 1; i < n; i++) {
                        z[i] ? hide(z[i]) : ''
                    }
                    if (n == 4) {
                        for (var i = 1; i < n; i++) {
                            x > (i / n) && z[i] ? show(z[i]) : ''
                        }
                    } else {
                        for (var i = n; i > 0; i--) {
                            if (x * 1 + (1 / n) >= (i / n) && z[i]) {
                                show(z[i]);
                                break
                            }
                        }
                    }
                }
            }
        };
        this.On = function() {
            if (!on) {
                if (icons) {
                    if (icons.length > 1 && actions.length > 1) {
                        hide(icon[0]);
                        show(icon[1])
                    }
                }
                if (actions.length > 1) {
                    action = actions[1];
                    if (style.tip == 1) {
                        tiptext.innerHTML = TipText(1);
                        Tip()
                    }
                }
                if (style.iconsreplay == 1 && replay) {
                    hide(icon[iconreplay]);
                    replay = false
                }
                SwitchText();
                on = true
            }
        };

        function TipText(x) {
            return o.ni + (style.tiptext == '' ? Lang(actions[x]) : (tips.length > 1 ? tips[x] : tips[0])) + o.ni2
        }
        this.CustomSwitch = function(x) {
            CustomSwitch(x)
        };
        this.Tmln = function(x, y) {
            if (style.tmln) {
                style.tmln.update(x, y)
            }
        };

        function CustomSwitch(x) {
            var y = 'pjs_';
            var z = document.getElementById(y.concat(v.id, key, 'slider'));
            if (z) {
                css(z, {
                    "transition": "transform 0.1s ease-out"
                });
                if (x == 1) {
                    z.style.transform = 'translate(0, 0)'
                } else {
                    z.style.transform = 'translate(-7px, 0)'
                }
            } else {
                if (x == 1) {
                    style.a = 1
                } else {
                    style.a = 0.5
                }
            }
            on = x == 1;
            if (style.tip == 1 && tips.length > 1) {
                tiptext.innerHTML = (on ? tips[0] : tips[1])
            }
            css(icon[0], {
                "opacity": style.a
            })
        };
        this.Off = function() {
            if (on) {
                if (icons) {
                    if (icons.length > 1 && actions.length > 1) {
                        show(icon[0]);
                        hide(icon[1]);
                        css(icon[0], {
                            "opacity": style.a
                        })
                    }
                }
                action = actions[0];
                if (actions.length > 1) {
                    if (style.tip == 1) {
                        tiptext.innerHTML = TipText(0);
                        Tip()
                    }
                }
                SwitchText();
                on = false;
                replay = false
            }
        };
        this.ReplayIcon = function() {
            if (style.iconsreplay == 1) {
                hideAllIcons();
                show(icon[iconreplay]);
                replay = true
            }
        };
        this.Buffer = function() {
            var stop = false;
            if (style.hide == 1 && style.hidewithposter == 1) {
                if (isVisible(o.poster)) {
                    stop = true
                }
            }
            if (!stop) {
                show2(control);
                var items = control.getElementsByTagName("*");
                for (var i = items.length; i--;) {
                    css(items[i], {
                        "animation-play-state": "running"
                    })
                }
                visible = true
            }
        };
        this.BufferStop = function() {
            BufferStop()
        };

        function BufferStop() {
            hide2(control);
            var items = control.getElementsByTagName("*");
            for (var i = items.length; i--;) {
                css(items[i], {
                    "animation-play-state": "paused"
                })
            }
            visible = false
        }
        this.Remove = function() {
            if (icons.length > 0) {
                for (i = 0; i < icons.length; i++) {
                    if (icon[i].parentNode == control) {
                        control.removeChild(icon[i])
                    }
                    icon[i] = null
                }
            }
            if (bg) {
                bg.removeAttribute("onclick");
                bg.removeAttribute("onmouseover");
                bg.removeAttribute("onmouseout");
                bg.parentNode.removeChild(bg);
                bg = null
            }
            if (style.position == 'timeline') {
                o.timeline.removeChild(control)
            } else {
                if (control.parentNode == o.frame) {
                    o.frame.removeChild(control)
                } else {
                    if (o.toolbar) {
                        if (control.parentNode == o.toolbar) {
                            o.toolbar.removeChild(control)
                        }
                    }
                }
            }
            if (tip) {
                control.removeChild(tip)
            }
            control = null
        };
        this.HdIcon = function() {
            hdicon ? hdicon.toggle() : ''
        };
        this.setcss = function() {
            SetCSS()
        };

        function SetCSS() {
            controlCSS(icons[0], style.color, icon[0])
        }

        function Places(x) {
            var z = x + '';
            if (x.indexOf('{time}') > -1 && exist(o.continue)) {
                x = x.replace('{time}', timeFormat(o.continue.flag().t))
            }
            if (x.indexOf('{title') > -1) {
                var y = o.titlestore ? o.titlestore : (v.title ? v.title : '');
                if (x.indexOf('{title2}') > -1 && o.controls) {
                    x = x.replace('{title2}', o.controls.PlaylistG('title2'))
                }
                if (o.butplstart && o.controls) {
                    y = o.controls.PlaylistG('butplstart')
                }
                x = x.replace('{title}', y);
                if (o.butplstart && !o.controls) {
                    setTimeout(UpdateText, 100, z)
                }
            }
            return x
        }

        function IconsColor(icon, clr) {
            for (var i = 0; i < icon.length; i++) {
                SvgColor(icon[i], clr)
            }
            if (style.linkurl == "chromecast") {
                if (o.chromecast) {
                    o.chromecast.Color(icon[0], clr)
                }
            }
        }
    };
    var ControlLine = function(key, action) {
        var i;
        var style = [];
        var w;
        var h;
        var bg;
        var visible = true;
        var x0;
        var y0;
        var scaleX = 1;
        var scaleY = 1;
        var topBg = 0;
        var leftBg = 0;
        var alphas;
        var mouseDown;
        var mouseUp;
        var over;
        var click;
        var handle;
        var _duration_load;
        var _duration_play;
        var _time_load;
        var _time_play;
        var tip;
        var tiptext;
        var tipcrn;
        o.current_thumb = -1;
        var lastTouch;
        var over;
        var onup_to;
        for (i in default_style.but) {
            style[i] = default_style.but[i]
        }
        var action = v[key].action;
        var type = v[key].type;
        for (i in default_style[action]) {
            style[i] = default_style[action][i]
        }
        for (i in v[key]) {
            style[i] = v[key][i]
        }
        style.w = parseInt(style.w);
        style.h = parseInt(style.h);
        style = MarginPadding(style, 'margin', 'margin');
        style = MarginPadding(style, 'marginproc', 'marginproc');
        var control = createElement("div");
        if (v.toolbar.hidedown == 1 && v.toolbar.hide == 1) {
            o.toolbar.appendChild(control)
        } else {
            o.frame.appendChild(control)
        }
        action == "line" ? o.timeline = control : '';
        var _cul = false;
        if (style.customline) {
            if (style.customline != 'volume') {
                _cul = true
            }
        }
        css(control, {
            "position": "absolute",
            "top": 0,
            "left": 0,
            "opacity": 1,
            "fontSize": "14px",
            "lineHeight": "1em"
        });
        if (style.ontop == 1) {
            control.style.zIndex = style.order
        }
        Background();
        var lines = createElement("div");
        css(lines, {
            "position": "absolute",
            "bottom": Math.round(-style.h / 2),
            "left": Math.round(-style.w / 2)
        });
        if (style.roundout == 1) {
            css(lines, {
                "border-radius": style.rounding * style.h / 2,
                "height": style.h,
                "overflow": "hidden",
                "pointer-events": "none"
            })
        }
        if (exist2(style.dom)) {
            attr(control, {
                "id": (v.id + "_control_" + style.dom)
            })
        }
        control.appendChild(lines);
        if (action == 'line' && v.thumbs == 1) {
            CreateThumb()
        }
        if (style.tip == 1) {
            CreateTip()
        }
        var line0 = createElement("div");
        StyleLine(0, line0, 0.3, (style.gradient == 1 ? "linear-gradient(" + CheckColor(style.gradientcolorbg) + ", " + CheckColor(style.colorbg) + ")" : CheckColor(style.colorbg)), style.w, style.abg);
        if (style.customdesign == 1 && exist(style.customdesignsvg)) {
            var svg0 = createElement("div");
            svg0.innerHTML = style.customdesignsvg.replace(/\#FFFFFF/g, CheckColor(style.colorbg));
            line0.appendChild(svg0);
            css(svg0, {
                "position": "absolute",
                "bottom": -Math.round(style.h / 2),
                "left": 0,
                "pointer-events": "none"
            });
            css(line0, {
                "overflow": "hidden",
                "background": "none"
            });
            var x = ["path", "polygon", "polyline", "rect", "ellipse"];
            for (var y = 0; y < x.length; y++) {
                var z = svg0.querySelectorAll("svg " + x[y]);
                if (z.length > 0) {
                    for (var y2 = 0; y2 < z.length; y2++) {
                        z[y2].style.fill = CheckColor(style.colorbg)
                    }
                }
            }
        }
        lines.appendChild(line0);
        var lines1 = [];
        var line1 = createElement("div");
        StyleLine(1, line1, style.linespeed1, (style.gradient == 1 ? "linear-gradient(#" + style.gradientcolorload + ", #" + style.colorload + ")" : style.colorload), 0, style.aload);
        lines.appendChild(line1);
        if (style.aover > 0) {
            var line2 = createElement("div");
            StyleLine(2, line2, style.linespeed2, style.colorover, 0, style.aover);
            lines.appendChild(line2)
        }
        var line3 = createElement("div");
        StyleLine(3, line3, style.linespeed3, (style.gradient == 1 ? "linear-gradient(#" + style.gradientcolor + ", #" + style.color + ")" : style.color), 0, style.a);
        if (style.customdesign == 1 && exist(style.customdesignsvg)) {
            var svg3 = createElement("div");
            svg3.innerHTML = style.customdesignsvg.replace(/\#FFFFFF/g, CheckColor(style.color));
            css(svg3, {
                "position": "absolute",
                "bottom": -Math.round(style.h / 2),
                "left": 0,
                "pointer-events": "none"
            });
            css(line3, {
                "overflow": "hidden",
                "background": "none"
            });
            line3.appendChild(svg3)
        }
        if (style.value == 1) {
            var line3value = createElement("div");
            style = MarginPadding(style, 'valuepadding', 'valuepadding');
            style = MarginPadding(style, 'valuemargin', 'valuemargin');
            css(line3value, {
                "position": "absolute",
                "bottom": style.h / 2,
                "left": 0,
                "pointer-events": "none",
                "font-size": style.valuesize * existv(v.globalfs, 1),
                "color": style.valuecolor,
                "line-height": "100%",
                "padding-top": style.valuepaddingtop,
                "padding-bottom": style.valuepaddingbottom,
                "padding-left": style.valuepaddingleft,
                "padding-right": style.valuepaddingright,
                "margin-top": style.valuemargintop,
                "margin-bottom": style.valuemarginbottom,
                "margin-left": style.valuemarginleft,
                "margin-right": style.valuemarginright,
                "border-radius": (style.valuerounding + "px"),
                "display": "none"
            });
            if (style.valuebg == 1) {
                css(line3value, {
                    "background": CheckColor(style.valuebgcolor)
                })
            }
            line3.appendChild(line3value);
            var l3v_show = false;
            var l3v_left = false
        }
        o.timeline_h = style.h;
        lines.appendChild(line3);
        if (style.pointed == 1) {
            var points = [];
            if (typeof PluginPoints !== "undefined") {
                var pnt = new PluginPoints(control, points, w, style)
            }
        }
        if (style.handle == 1) {
            if (style.handleicon.toString().indexOf('<svg') == -1) {
                style.handleicon == '' ? style.handleicon = "<svg width='20' height='20'><g><ellipse ry='5' rx='5' cy='10' cx='10' fill='#fff'/></g></svg>" : ''
            }
            handle = createElement("div");
            handle.innerHTML = style.handleicon.toString();
            style = MarginPadding(style, 'handlemargin', 'handlemargin');
            css(handle, {
                "position": "absolute",
                "top": -10 + style.handlemargintop - style.handlemarginbottom,
                "left": -1000,
                "pointer-events": "none",
                "height": 20,
                "width": style.handle_width,
                "opacity": style.handlea,
                "transition": "transform 0.1s linear, opacity 0.1s linear"
            });
            if (style.handlehide == 1 || style.handlehideinit == 1) {
                css(handle, {
                    "transform": "scale(0)"
                })
            } else {
                if (style.handlescale != 1) {
                    css(handle, {
                        "transform": "scale(" + style.handlescale + ")"
                    })
                }
            }
            control.appendChild(handle);
            if (style.handlecolor != -1) {
                var x = ["path", "rect", "ellipse"];
                for (var y = 0; y < x.length; y++) {
                    var z = handle.querySelectorAll("svg " + x[y]);
                    if (z.length > 0) {
                        for (var y2 = 0; y2 < z.length; y2++) {
                            z[y2].style.fill = CheckColor(style.handlecolor)
                        }
                    }
                }
            }
            style.handlewidth = handle.offsetWidth
        }
        if (style.rotation != 0) {
            css(control, {
                "transform": "rotate(" + style.rotation + "deg)"
            })
        }
        if (style.hidden == 1) {
            hide(control);
            visible = false
        }
        if (action == "volume") {
            if (style.hide == 1 && style.hideoutmute == 1) {
                o.hidden_volume = true;
                style.hidden = true
            } else {
                o.hidden_volume = false
            }
        }
        style.vertical = 0;
        if (style.rotation != 0) {
            style.rotation2 = Math.abs(style.rotation);
            if (style.rotation2 > 45 && style.rotation2 < 135) {
                style.vertical = 90
            }
            if (style.rotation2 > 225 && style.rotation2 < 315) {
                style.vertical = 270
            }
        }
        if (_cul) {
            o.line_speed = style.customline == "speed";
            w = style.w;
            UpdatePlay(1, o.files_speed.slice(-1)[0], "no")
        }

        function StyleLine(n, x, y, z, _w, _a) {
            css(x, {
                "position": "absolute",
                "bottom": 0,
                "left": 0,
                "width": _w,
                "height": (style['h' + n] > 0 ? style['h' + n] : style.h),
                "background": z ? (z.indexOf("linear") > -1 ? z : CheckColor(z)) : '',
                "border-radius": (style.roundout == 1 ? 1 : style.rounding * style.h / 2),
                "opacity": _a,
                "pointer-events": "none",
                "transition": "transform 0.2s ease-in-out"
            })
        }

        function Background() {
            bg = createElement("div");
            style = MarginPadding(style, 'bgpadding', 'bgpadding');
            var bgh = style.h + style.bgpaddingtop + style.bgpaddingbottom;
            var bgw = style.w + style.bgpaddingleft + style.bgpaddingright;
            if (style.bg == 1) {} else {
                style.bga = 0
            }
            style = MarginPadding(style, 'clickmargin', 'clickmargin');
            if (v.toolbar.clickarea == 1 || style.clickarea == 1) {
                style.bgcolor = '#ff0000';
                style.bg = 1;
                style.bga = 0.5
            }
            css(bg, {
                "position": "absolute",
                "top": 0,
                "left": 0,
                "width": bgw,
                "height": bgh * style.clickscaley,
                "borderRadius": (style.bgo * bgh) / 2,
                "backgroundColor": style.bgcolor,
                "opacity": style.bga,
                "pointerEvents": "auto",
                "transition": "opacity .1s linear, background .1s linear"
            });
            if (style.bgborder == 1) {
                css(bg, {
                    "border": "1px solid #" + style.bgbordercolor
                })
            }
            if (style.click == 1) {
                if (style.hand == 1) {
                    css(bg, {
                        "cursor": "pointer"
                    })
                }
                if (!o.system.mobile || v.desktop == 1) {
                    bg.onclick = onClick;
                    bg.onmouseup = onUp;
                    bg.onmousedown = onDown;
                    bg.onmousemove = onMove
                }
            } else {
                css(bg, {
                    "cursor": "default"
                })
            }
            if (!o.system.mobile) {
                bg.onmouseover = onOver;
                bg.onmousemove = onMove;
                bg.onmouseout = onOut
            }
            if (o.system.mobile) {
                bg.addEventListener("touchstart", function(event) {
                    event.cancelBubble = true;
                    if (!exist(event.clientX) && event.touches.length > 0) {
                        event.clientX = event.touches[0].pageX;
                        event.clientY = event.touches[0].pageY
                    }
                    lastTouch = event;
                    onOver(event);
                    onDown(event)
                });
                bg.addEventListener("touchend", function(event) {
                    event.cancelBubble = true;
                    o.mouseDown = false;
                    onOut(event);
                    onUp(lastTouch)
                });
                bg.addEventListener("click", function(event) {
                    event.cancelBubble = true
                });
                bg.addEventListener("touchmove", function(event) {
                    if (!exist(event.clientX) && event.touches.length > 0) {
                        event.clientX = event.touches[0].pageX;
                        event.clientY = event.touches[0].pageY
                    }
                    lastTouch = event;
                    o.mouseDown = true;
                    onMove(event)
                })
            }
            css(bg, {
                "left": Math.ceil(-style.w / 2 - style.bgpaddingleft)
            });
            css(bg, {
                "top": Math.ceil(-style.h / 2 - style.bgpaddingtop + style.clickmargintop - style.clickmarginbottom)
            });
            control.appendChild(bg)
        }

        function Resize(width) {
            if (width != w) {
                w = width;
                o.timeline_w = w;
                var delta = w / line0.offsetWidth;
                css(bg, {
                    "width": (w + style.bgpaddingleft + style.bgpaddingright),
                    "left": -w / 2 - style.bgpaddingleft,
                });
                css(lines, {
                    "left": -w / 2
                });
                css(line0, {
                    "width": w
                });
                css(lines, {
                    "width": w
                });
                var xx = line1.offsetWidth * delta;
                if (xx > line0.offsetWidth) {
                    xx = line0.offsetWidth
                }
                css(line1, {
                    "width": xx
                });
                var wp = line3.offsetWidth * delta;
                css(line3, {
                    "width": wp
                });
                HandleWidth(wp);
                if (action == "line") {
                    Continue()
                }
                if (style.pointed == 1) {
                    pnt ? pnt.place(w) : ''
                }
                if (o.cut) {
                    o.cut.Resize()
                }
            }
        }

        function HandleWidth(x) {
            if (style.handle == 1) {
                if (x < style.handlewidth / 2 && style.handle_width != 20) {
                    x = style.handlewidth / 2
                }
                if (x > w - style.handlewidth / 2 && style.handle_width != 20) {
                    x = w - style.handlewidth / 2
                }
                var y = x - w / 2 - style.handlewidth / 2 + style.handlemarginleft - style.handlemarginright;
                css(handle, {
                    "left": y
                })
            }
        }

        function ShowHandle() {
            css(handle, {
                "transform": "scale(" + style.handlescale + ")"
            })
        }

        function onOver(event) {
            o.controls.Mouse(key, "over");
            if (style.bg == 1) {
                if (style.bgaover != -1) {
                    var m = new Motion({
                        "mc": bg,
                        "type": "alpha_div",
                        "to": style.bgaover,
                        "time": 0.1,
                        "me": (key + "bg")
                    })
                }
                if (exist2(style.bgcolorover)) {
                    css(bg, {
                        "background-color": style.bgcolorover
                    })
                }
            }
            if (exist2(style.coloroverplay)) {
                css(line3, {
                    "background-color": style.coloroverplay
                })
            }
            if (style.handle == 1) {
                if (style.handleiconsover == 1 && exist(style.handleiconover)) {
                    if (style.handleiconspress == 1 && mouseDown) {} else {
                        handle.innerHTML = "<svg width='" + style.handle_width + "' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + style.handleiconover.toString() + "</svg>"
                    }
                }
                if (style.handlehide == 1) {
                    if (style.handlehideinit == 1 && !o.start) {} else {
                        ShowHandle()
                    }
                } else {
                    if (style.handleaover != -1) {
                        var m2 = new Motion({
                            "mc": handle,
                            "type": "alpha_div",
                            "to": style.handleaover,
                            "time": 0.1,
                            "me": (key + "handle")
                        })
                    }
                }
            }
            if (style.tip == 1 && (o.media.duration() > 0 || action == "volume" || _cul)) {
                ShowTip()
            }
            if (style.expand > 0) {
                css(bg, {
                    "transform": "scaleY(" + ((style.expand - 1) / 5 + 1) + ")"
                });
                LineScale(style.expand)
            }
            if (style.handle == 1 && style.handlemove == 1) {
                HandleWidth(Zoomed(event.clientX) - leftBg)
            }
            if (action == "volume") {
                o.actions.volumewheel(true);
                o.volumewheel = true
            }
            over = true;
            o.controlover = true
        }

        function LineScale(x) {
            css(line0, {
                "transform": "scaleY(" + x + ")"
            });
            css(line1, {
                "transform": "scaleY(" + x + ")"
            });
            line2 ? css(line2, {
                "transform": "scaleY(" + x + ")"
            }) : '';
            css(line3, {
                "transform": "scaleY(" + x + ")"
            })
        }

        function onOut() {
            if (!mouseUp) {
                if (style.aover > 0) {
                    css(line2, {
                        "width": 0
                    })
                }
                if (exist2(style.coloroverplay)) {
                    css(line3, {
                        "background-color": style.color
                    })
                }
                if (style.bg == 1) {
                    if (style.bgaover != -1) {
                        var m = new Motion({
                            "mc": bg,
                            "type": "alpha_div",
                            "to": style.bga,
                            "time": 0.1,
                            "me": (key + "bg")
                        })
                    }
                    if (exist2(style.bgcolorover)) {
                        css(bg, {
                            "background-color": style.bgcolor
                        })
                    }
                }
                if (style.handle == 1) {
                    if (style.handleiconsover == 1 && exist(style.handleiconover)) {
                        if (style.handleiconspress == 1 && mouseDown) {} else {
                            handle.innerHTML = "<svg width='" + style.handle_width + "' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + style.handleicon.toString() + "</svg>"
                        }
                    }
                    if (style.handlehide == 1) {
                        css(handle, {
                            "transform": "scale(0)"
                        })
                    } else {
                        if (style.handleaover != -1) {
                            var m2 = new Motion({
                                "mc": handle,
                                "type": "alpha_div",
                                "to": style.handlea,
                                "time": 0.1,
                                "me": (key + "handle")
                            })
                        }
                    }
                }
                if (style.expand > 0) {
                    css(bg, {
                        "transform": "scaleY(1)"
                    });
                    LineScale(1)
                }
                if (action == "volume" && !o.fullscreen) {
                    o.actions.volumewheel(false);
                    o.volumewheel = false
                }
                o.controls.Mouse(key, "out")
            }
            if (style.pointed == 1 && pnt) {
                pnt.out()
            }
            if (style.tip == 1 && (o.media.duration() > 0 || action == "volume")) {
                HideTip()
            }
            if (o.thumbs_on && action == "line") {
                o.th.hide();
                o.current_thumb = -1
            }
            over = false;
            o.controlover = false
        }

        function onClick(event) {
            event.cancelBubble = true
        }

        function CancelBubble(event) {
            event.cancelBubble = true
        }

        function onUp(event) {
            if (action == "volume") {
                if (o.hidden_volume_over) {
                    mouseUp = true;
                    clearTimeout(onup_to);
                    onup_to = setTimeout(function() {
                        mouseUp = false;
                        onOut()
                    }, 1000)
                }
            }
            EndMove();
            o.mouseDown = false;
            if (style.handle == 1) {
                if (style.handleiconspress == 1 && exist(style.handleiconpress)) {
                    handle.innerHTML = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + style.handleicon.toString() + "</svg>"
                }
            }
            CalculateClick(event.clientX, event.clientY);
            o.controls.ControlClick(key);
            o.controls.StageMouseUp(event.clientX, event.clientY);
            event.cancelBubble = true
        }

        function onDown(event) {
            mouseDown = true;
            if (style.handle == 1) {
                if (style.handleiconspress == 1 && exist(style.handleiconpress)) {
                    handle.innerHTML = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + style.handleiconpress.toString() + "</svg>"
                }
            }
            topBg = findTop(bg);
            leftBg = findLeft(bg);
            CalculateClick(event.clientX, event.clientY);
            UpdatePlay(click, 1, "no")
        }

        function CalculateClick(event_x, event_y) {
            var x;
            event_x = Zoomed(event_x);
            event_y = Zoomed(event_y);
            var xOffset = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);
            var yOffset = Math.max(document.documentElement.scrollTop, document.body.scrollTop);
            if (o.system.mobile) {} else {
                event_y = event_y + yOffset;
                event_x = event_x + xOffset
            }
            if (style.vertical > 0) {
                x = event_y - topBg - style.bgpaddingright;
                click = x / w;
                if (style.vertical == 270) {
                    x = event_y - topBg - style.bgpaddingleft;
                    click = x / w;
                    click = (click - 1) * -1
                }
            } else {
                x = event_x - leftBg - style.bgpaddingleft;
                click = x / w;
                if (style.rotation > 134 && style.rotation < 235) {
                    x = event_x - leftBg - style.bgpaddingright;
                    click = x / w;
                    click = (click - 1) * -1
                }
            }
            click > 1 ? click = 1 : '';
            click < 0 ? click = 0 : ''
        }

        function Zoomed(x) {
            if (o.fzoom > 1) {
                x = x / o.fzoom
            }
            return x
        }
        this.PlacePoints = function() {
            pnt ? pnt.place(w) : ''
        };
        this.RenewPoints = function() {
            pnt ? pnt.update(w) : ''
        };

        function EndMove() {
            mouseDown = false
        }

        function onMove(event) {
            leftBg = findLeft(bg);
            if (style.aover > 0) {
                if (o.start || action != 'line') {
                    css(line2, {
                        "width": Zoomed(event.clientX) - leftBg
                    })
                }
            }
            if (style.tip == 1 && (o.media.duration() > 0 || action == "volume" || _cul)) {
                ShowTip();
                topBg = findTop(bg);
                CalculateClick(event.clientX, event.clientY);
                if (action == "line") {
                    if (v.hlsdvrtime == 1) {
                        if (o.media.isLive() && o.media.currentFile().indexOf("?DVR") > 0) {
                            tiptext.innerHTML = '- ' + timeFormat((1 - click) * o.media.duration(true))
                        } else {
                            tiptext.innerHTML = timeFormat(click * o.media.duration())
                        }
                    } else {
                        var d = o.media.duration();
                        if (v.delete > 0) {
                            d = d - v.delete
                        }
                        var add = '';
                        if (style.pointed == 1 && pnt) {
                            add = pnt.tip(click * d);
                            add != '' ? add = add + '<br>' : ''
                        }
                        tiptext.innerHTML = add + timeFormat(click * d)
                    }
                }
                if (action == "volume" || _cul) {
                    tiptext.innerHTML = TipVol(click)
                }
                Tip(event)
            }
            if (o.thumbs_on && action == "line" && o.th) {
                if (o.media.duration() > 0) {
                    if (style.tip == 0) {
                        topBg = findTop(bg);
                        leftBg = findLeft(bg);
                        CalculateClick(event.clientX, event.clientY)
                    }
                    var left = (-w / 2 + (Zoomed(event.clientX) - leftBg) - v.thumb_width / 2);
                    left > w / 2 - v.thumb_width ? left = w / 2 - v.thumb_width : '';
                    css(o.thumb, {
                        "top": (-v.thumb_height - (v.thumb_bottom > 0 ? v.thumb_bottom * 1 : 5) - v.thumb_border),
                        "left": (left < -w / 2 ? -w / 2 : left)
                    });
                    o.th.time(click * o.media.duration(), Zoomed(event.clientX), leftBg, w)
                }
            }
            if (style.handle == 1 && style.handlemove == 1) {
                HandleWidth(Zoomed(event.clientX) - leftBg)
            }
            if (o.system.mobile) {
                onDown(event)
            }
        }

        function Tip(event, t, l) {
            var left = (-w / 2 + (Zoomed(event.clientX) + document.documentElement.scrollLeft - leftBg) - tiptext.offsetWidth / 2) + (l ? l : 0);
            var left0 = 0;
            if (v.notofh != 1) {
                if (left + w / 2 + tiptext.offsetWidth + 10 > o.screen_w) {
                    left0 = left;
                    left = o.screen_w - w / 2 - tiptext.offsetWidth - 10
                }
                if (left + o.screen_w / 2 < 0) {
                    left0 = left;
                    left = -o.screen_w / 2
                }
            }
            var x = {
                "top": (-tiptext.offsetHeight - style.linetipmarginbottom * 1 - style.tippaddingtop - style.tippaddingbottom) - (style.toptip == 1 ? (style.h / 2) * (style.expand > 0 ? style.expand : 1) : 0) + (t ? t : 0),
                "left": left
            };
            css(tip, x);
            if (style.tippointer == 1) {
                css(tipcrn, {
                    'position': 'absolute',
                    'left': tiptext.offsetWidth / 2 - 4 + (left0 != 0 ? left0 - left : 0),
                    'top': tiptext.offsetHeight - 6
                })
            }
        }
        this.ShowTip = function(e, x, t, l) {
            ShowTip();
            tiptext.innerHTML = x;
            Tip(e, t, l)
        };

        function ShowTip() {
            if (!isVisible(tip) || tip.style.opacity == 0) {
                show(tip);
                css(tip, {
                    "opacity": 1
                })
            }
        }
        this.HideTip = function() {
            HideTip()
        };

        function HideTip() {
            hide(tip);
            css(tip, {
                "opacity": 0
            })
        }
        this.c = function() {
            return control
        };
        this.s = function(key) {
            return style[key]
        };
        this.ss = function(x, x2) {
            return style[x][x2]
        };
        this.g = function(x) {
            switch (x) {
                case "width":
                    return w;
                    break;
                case "offsetwidth":
                    return line0.offsetWidth;
                    break;
                case "height":
                    return style.h;
                    break;
                case "x":
                    return int(control.style.left);
                    break;
                case "y":
                    return int(control.style.top);
                    break;
                case "opacity":
                    return control.style.opacity ? control.style.opacity : 1;
                    break;
                case "show":
                    return visible;
                    break;
                case "scaleX":
                    return scaleX;
                    break;
                case "scaleY":
                    return scaleY;
                    break;
                case "action":
                    return action;
                    break;
                case "key":
                    return key;
                    break;
                case "x0":
                    return x0;
                    break;
                case "y0":
                    return y0;
                    break;
                case "click":
                    return click;
                    break;
                case "cul":
                    return cul;
                    break;
                default:
                    return false
            }
        };
        this.set = function(key, x) {
            switch (key) {
                case "show":
                    visible = x;
                    break;
                case "mouseDown":
                    mouseDown = x;
                    break;
                case "display":
                    action == "line" || style.hide == 1 ? css(control, {
                        "visibility": (x ? "visible" : "hidden")
                    }) : css(control, {
                        "display": (x ? "block" : "none")
                    });
                    visible = x;
                    break;
                case "scaleX":
                    css(control, {
                        "transform": "scaleX(" + x + ")"
                    });
                    scaleX = x;
                    break;
                case "scaleY":
                    css(control, {
                        "transform": "scaleY(" + x + ")"
                    });
                    scaleY = x;
                    break;
                case "opacity":
                    css(control, {
                        "opacity": x
                    });
                    break;
                case "left":
                    css(control, {
                        "left": x
                    });
                    break;
                case "top":
                    css(control, {
                        "top": x
                    });
                    break;
                case "click":
                    click = x;
                    break;
                case "hiddenwidth":
                    style.hiddenwidth = x;
                    break;
                case "width":
                    css(control, {
                        "width": x
                    });
                    break;
                case "height":
                    css(control, {
                        "height": x
                    });
                    break;
                case "over_final":
                    style.roundingver_final = x;
                    break;
                case "x":
                    css(control, {
                        "left": x
                    });
                    break;
                case "y":
                    css(control, {
                        "top": x
                    });
                    break;
                case "x0":
                    x0 = x;
                    break;
                case "y0":
                    y0 = x;
                    break
            }
        };
        this.Resize = function(x) {
            Resize(x)
        };
        this.StageLeave = function(x) {};
        this.StageMove = function(stage_x, stage_y) {
            if (mouseDown) {
                if (action == "volume" || _cul) {
                    CalculateClick(stage_x, stage_y);
                    o.controls.ControlClick(key)
                }
                if (action == "volume") {
                    o.hidden_volume_over = true
                }
                CalculateClick(stage_x, stage_y);
                UpdatePlay(click, 1, "no")
            }
        };
        this.StageMouseUp = function(stage_x, stage_y) {
            if (mouseDown) {
                EndMove();
                mouseDown = false;
                CalculateClick(stage_x, stage_y);
                o.controls.ControlClick(key);
                UpdatePlay(click, 1, "no")
            }
        };

        function UpdatePlay(time, duration, x) {
            time < 0 ? time = 0 : '';
            if (v.delete > 0 && duration > 1) {
                duration = duration - v.delete;
                time = time - v.delete
            }
            if (style.handle == 1 && style.handlehideinit == 1 && style.handlehide != 1) {
                if (!style.handleinit && time > 0) {
                    ShowHandle();
                    style.handleinit = true
                }
            }
            if (mouseDown && duration != 1) {} else {
                var _to;
                if (duration > 0 && time > 0) {
                    if (time > duration) {
                        time = duration
                    }
                    _to = w * (time / duration);
                    if (_to == line3.offsetWidth) {
                        _to = -1
                    }
                } else {
                    _to = 0
                }
                if (_to >= 0) {
                    css(line3, {
                        "width": _to
                    });
                    if (style.handlemove == 1 && over && !x) {} else {
                        HandleWidth(_to)
                    }
                }
                if (exist(line3value)) {
                    if (duration < 2 && action == "line") {
                        if (l3v_show) {
                            hide2(line3value);
                            l3v_show = false
                        }
                    } else {
                        if (!l3v_show) {
                            show2(line3value);
                            l3v_show = true
                        }
                        line3value.innerHTML = action == "line" ? Time(time == 0 ? duration : time) : TipVol(time)
                    }
                }
            }
        };
        this.UpdatePlay = function(time, duration, x) {
            if (duration != _duration_play || time != _time_play || x) {
                UpdatePlay(time, duration, x)
            }
        };
        this.UpdatePlaySeek = function() {
            click > 1 ? click = 1 : '';
            click < 0 ? click = 0 : '';
            css(line3, {
                "width": (click * w)
            })
        };
        this.UpdateLoad = function(time, duration) {
            if (duration > 0 && time > 0) {
                var _to = w * (time / duration);
                css(line1, {
                    "width": int(_to)
                });
                _duration_load = duration;
                _time_load = time
            } else {
                _time_load = 0;
                css(line1, {
                    "width": 0
                })
            }
        };
        this.Cut = function(x) {
            if (style.cut == 1) {
                if (!o.cut) {
                    if (x != 0) {
                        if (typeof PluginCut !== "undefined") {
                            o.cut = new PluginCut(control, style, x);
                            o.cutted = true
                        }
                    }
                } else {
                    if ((!exist(x) || x == 0) && o.cutted) {
                        o.cut.hide();
                        o.cutted = false
                    } else {
                        if (!o.cutted || (exist(x) && x != 1 && x != 0)) {
                            o.cut.restart(x);
                            o.cutted = true
                        }
                    }
                }
            }
        };

        function CreateThumb() {
            o.thumb = createElement("div");
            css(o.thumb, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'width': v.thumb_width,
                'height': v.thumb_height,
                'overflow': 'hidden',
                "pointer-events": "none",
                "background-color": "#000",
                "border-radius": v.thumb_radius + 'px',
                "display": "none"
            });
            o.thumb.id = "pjs_thumbnail_" + v.id;
            if (v.thumb_border == 1) {
                css(o.thumb, {
                    "border": v.thumb_borderwidth + "px solid " + SettingsParser('color', v.thumb_bordercolor)
                })
            }
            if (v.thumb_shadow == 1) {
                css(o.thumb, {
                    "box-shadow": "0px 1px 5px rgba(0,0,0,0.5)"
                })
            }
            o.thumb.style.zIndex = "999";
            control.appendChild(o.thumb)
        }

        function CreateTip() {
            tip = createElement("div");
            css(tip, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'height': 'auto',
                "pointer-events": "none",
                "opacity": 0,
                "transition": "opacity 0.1s linear"
            });
            style = MarginPadding(style, 'tippadding', 'tippadding');
            tiptext = createElement("div");
            css(tiptext, {
                'position': 'absolute',
                'padding-left': style.tippaddingleft,
                'padding-right': style.tippaddingright,
                'padding-top': style.tippaddingtop,
                'padding-bottom': style.tippaddingbottom - 1,
                'text-align': 'center',
                'color': style.tipcolor,
                'font-family': checkFont(style.tipfont),
                'font-size': style.tipfontsize * existv(v.globalfs, 1),
                'letter-spacing': style.tipletterspacing + 'px',
                'line-height': "1",
                'background-color': hex2rgb(style.tipbgcolor, style.tipbga),
                'border-radius': style.tipbgrounding
            });
            style.linetippointer ? style.tippointer = style.linetippointer : '';
            if (style.tippointer == 1) {
                tipcrn = createElement("div");
                tipcrn.innerHTML = '<svg width="8px" height="6px" viewBox="0 0 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon id="Rectangle" stroke="none" fill="' + CheckColor(style.tipbgcolor) + '" fill-rule="evenodd" points="0 0 8 0 4 6"></polygon></svg>'
            }
            control.appendChild(tip);
            tip.appendChild(tiptext);
            if (style.tippointer == 1) {
                tip.appendChild(tipcrn);
                css(tipcrn, {
                    'opacity': style.tipbga
                })
            }
            tip.style.zIndex = "1000"
        };

        function Continue() {
            if (o.continue && v.timestore == 1 && !o.start) {
                var f = o.continue.flag();
                if (f.t && f.d) {
                    UpdatePlay(f.t, f.d)
                }
            }
        };

        function TipVol(x) {
            var y = Math.round(x * 100);
            if (_cul) {
                if (o.line_speed) {
                    return (_cul && exist2(style.tiptext) ? style.tiptext + '&nbsp;' : '') + parseFloat(x * o.files_speed.slice(-1)[0]).toFixed(1)
                }
            }
            return y
        };
        this.Remove = function() {
            control.removeChild(lines);
            if (bg) {
                bg.removeAttribute("onclick");
                bg.removeAttribute("onmouseover");
                bg.removeAttribute("onmouseout");
                bg.parentNode.removeChild(bg);
                bg = null
            }
            if (handle) {
                control.removeChild(handle)
            }
            if (control.parentNode == o.frame) {
                o.frame.removeChild(control)
            } else {
                if (o.toolbar) {
                    if (control.parentNode == o.toolbar) {
                        o.toolbar.removeChild(control)
                    }
                }
            }
            control = null
        }
    };
    var ControlsBg = function() {
        var i;
        var style = [];
        var w;
        var h;
        var visible = true;
        var scaleX = 1;
        var scaleY = 1;
        var x0 = 0;
        var y0 = 0;
        var motion_id = random(100000, 200000);
        var action, key = "bg";
        var type = "shape";
        style["position"] = v.toolbar.position;
        for (var k in v.toolbar) {
            if (v.toolbar.hasOwnProperty(k)) {
                style[k] = v.toolbar[k]
            }
        }
        if (style.show == 0) {
            v.toolbar.h = style.h = 0;
            style.padding = style.margin = "0 0 0 0";
            style.gradient = 0
        }
        style["scale"] = 1;
        style = MarginPadding(style, 'margin', 'margin');
        style = MarginPadding(style, 'marginproc', 'marginproc');
        if (exist(style.paddingtop)) {
            if (style.paddingtop != 20 && style.margin == "-20 0 0 0") {
                style.margintop = style.paddingtop
            }
        }
        var control = createElement("div");
        css(control, {
            'position': 'absolute',
            'left': 0,
            'top': 0,
            'width': (style.stretchonfullscreen == 1 ? '100%' : o.normal_w),
            'height': style.h - (style.position != 'top' ? style.margintop : 0),
            'opacity': style.a,
            'pointer-events': 'none',
            'fontSize': '14px',
            'lineHeight': '1em'
        });
        o.frame.appendChild(control);
        var bg = createElement("div");
        css(bg, {
            'position_': 'absolute',
            'left_': 0,
            'top_': 0,
            'width_': '100%',
            'height': style.h - (style.position != 'top' ? style.marginbottom + style.margintop : 0),
            'display': 'block',
            'margin-left': style.marginleft,
            'margin-right': style.marginright,
            'border-radius': style.rounding
        });
        control.appendChild(bg);
        w = control.offsetWidth;
        v.toolbar_margintop = -style.margintop;
        if (style.gradient == 1) {
            if (style.color == '000000' || v.toolbar.image != '') {
                if (style.position != 'top') {
                    v.toolbar_margintop = 98 - style.h
                }
                var img = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==';
                if (v.toolbar.image.indexOf("data:image") > -1) {
                    img = v.toolbar.image
                }
                css(bg, {
                    'height': style.h + (style.position != 'top' ? v.toolbar_margintop : 0),
                    'background': 'url(' + img + ') repeat-x 50% 100%',
                    'background-size': 'auto'
                })
            } else {
                var bgg = 'to bottom, rgba(' + hex2rgb(style.color) + ',0), rgba(' + hex2rgb(style.color) + ',1)';
                css(bg, {
                    'background': '-moz-linear-gradient(' + bgg + ')',
                    'background': '-webkit-linear-gradient(' + bgg + ')',
                    'background': '-ms-linear-gradient(' + bgg + ')',
                    'background': '-o-linear-gradient(' + bgg + ')',
                    'background': 'linear-gradient(' + bgg + ')'
                })
            }
        } else {
            css(bg, {
                'background-color': style.color
            })
        }
        this.h = function() {
            return style.h - (style.position != 'top' ? style.margintop : 0)
        };
        this.c = function() {
            return control
        };
        this.s = function(key) {
            return style[key]
        };
        this.g = function(x) {
            if (control) {
                switch (x) {
                    case "w":
                        control.offsetWidth > 0 ? w = control.offsetWidth : '';
                        return w;
                        break;
                    case "width":
                        return control.offsetWidth;
                        break;
                    case "height":
                        return control.offsetHeight;
                        break;
                    case "x":
                        return int(control.style.left);
                        break;
                    case "y":
                        return int(control.style.top);
                        break;
                    case "opacity":
                        return control.style.opacity ? control.style.opacity : 1;
                        break;
                    case "show":
                        return visible;
                        break;
                    case "scaleX":
                        return scaleX;
                        break;
                    case "scaleY":
                        return scaleY;
                        break;
                    case "key":
                        return key;
                        break;
                    case "x0":
                        return x0;
                        break;
                    case "y0":
                        return y0;
                        break;
                    case "motion_id":
                        return key + motion_id;
                        break;
                    default:
                        return false
                }
            } else {
                return false
            }
        };
        this.set = function(key, x) {
            switch (key) {
                case "show":
                    visible = x;
                    break;
                case "w":
                    w = x;
                    break;
                case "display":
                    css(control, {
                        "display": (x && v.nocontrols != 1 ? "block" : "none")
                    });
                    visible = x;
                    break;
                case "scale":
                    css(control, {
                        "transform": "scale(" + x + ")"
                    });
                    scaleX = x;
                    scaleY = x;
                    break;
                case "scaleX":
                    css(control, {
                        "transform": "scaleX(" + x + ")"
                    });
                    scaleX = x;
                    break;
                case "scaleY":
                    css(control, {
                        "transform": "scaleY(" + x + ")"
                    });
                    scaleY = x;
                    break;
                case "opacity":
                    css(control, {
                        "opacity": x
                    });
                    break;
                case "left":
                    css(control, {
                        "left": x
                    });
                    break;
                case "top":
                    css(control, {
                        "top": x
                    });
                    break;
                case "width":
                    css(control, {
                        "width": x
                    });
                    break;
                case "height":
                    css(control, {
                        "height": x
                    });
                    break;
                case "x":
                    css(control, {
                        "left": x
                    });
                    break;
                case "y":
                    css(control, {
                        "top": x
                    });
                    break;
                case "x0":
                    x0 = x;
                    break;
                case "y0":
                    y0 = x;
                    break
            }
        };
        this.Remove = function() {
            o.frame.removeChild(control);
            control = null
        }
    };
    if (typeof(options) == "string") {
        optStr()
    }
    o.this = this;
    if (options.id) {
        if (document.getElementById(options.id)) {
            VisibleCheck()
        } else {
            document.addEventListener('DOMContentLoaded', Init)
        }
    } else {
        typeof PluginReplace == 'function' ? PluginReplace() : ''
    }

    function VisibleCheck() {
        if (exist(options.id)) {
            if (document.getElementById(options.id)) {
                if (!isHidden(document.getElementById(options.id)) || options.visible == 1) {
                    options.fast == 1 ? setTimeout(Init, 50) : Init()
                } else {
                    setTimeout(VisibleCheck, 50)
                }
            }
        }
    }

    function Init() {
        for (var i = 0; i < pljssglobal.length; i++) {
            if (exist(pljssglobal[i])) {
                if (pljssglobal[i].api("id") == options.id) {
                    if (pljssglobal[i].api("playing")) {
                        pljssglobal[i].api('stop')
                    }
                } else {
                    if (v.unatpl == 1 && pljssglobal[i].api("v", "autoplay") == 1) {
                        options.autoplay = 0
                    }
                }
            }
        }
        pljssglobal.push(o.this);
        var stop = false;
        if (exist(options.player)) {
            for (var i = 2; i < 10; i++) {
                if (options.player == i && o['u' + i] != '') {
                    v = UpdateObject(v, JSON.parse(decode(o['u' + i])));
                    stop = true
                }
            }
        }
        if (o.u != '' && !stop) {
            v = UpdateObject(v, (typeof o.u != "object" ? JSON.parse(decode(o.u)) : o.u))
        }
        var pstr = v.poster;
        if (typeof(pljscom) != "function") {
            for (var key in options) {
                if (options.hasOwnProperty(key)) {
                    if (key.indexOf("rc_") == 0) {
                        options[key] = null
                    }
                }
            }
        }
        v = UpdateObject(v, options);
        if (v.pstrcnfg == 1 && exist(v.poster) && exist(pstr)) {
            v.poster != '' ? v.poster = pstr : ''
        }
        if ((!exist(v.file) || v.file == '') && v.emptyremove == 1) {
            log('remove');
            return
        }
        if (v.postmessage == 1 || v.pjsframed == 1) {
            window.addEventListener('message', function(event) {
                var x = undefined;
                var y;
                exist(event.data.time) ? x = event.data.time : '';
                exist(event.data.volume) ? x = event.data.volume : '';
                exist(event.data.method) ? y = event.data.method : '';
                exist(event.data.api) ? y = event.data.api : '';
                if (y && v.postmessages) {
                    if (v.postmessages != '') {
                        var pm = v.postmessages.replace(/\s+/ig, '').split(',');
                        if (pm.indexOf(y) == -1) {
                            return
                        }
                    }
                }
                if (v.pjsframed == 1) {
                    if (typeof(PjsFrMsg) == "function") {
                        PjsFrMsg(event)
                    }
                }
                if (y && o.init) {
                    if (exist(event.data.set)) {
                        x = event.data.set
                    }
                    var z = apiProcessor(y, x);
                    window.parent.postMessage({
                        event: y,
                        answer: z
                    }, '*')
                }
            })
        }
        for (var key in o.compilation) {
            if (o.compilation.hasOwnProperty(key)) {
                o.compilation[key] != '' ? o.compilations += o.compilation[key] + ' ' : ''
            }
        }
        log(o.version + ' ' + o.compilations);
        pljssglobalid = v.id;
        o.d = location.hostname;
        o.hs = location.hash;
        if (!v.plstart && indOf([o.hs], '#play-')) {
            v.plstart = o.hs.substr(o.hs.indexOf('#play-') + 6)
        }
        if (parent) {
            var exception = false;
            try {
                if (parent) {
                    if (parent.document) {
                        var frames = parent.document.getElementsByTagName("IFRAME");
                        for (var i = 0; i < frames.length; i++) {
                            if (frames[i].contentWindow === window) {
                                o.parentIframe = frames[i];
                                o.iniframe = true;
                                v.notframe != 1 ? css(o.parentIframe, {
                                    "border": "none"
                                }) : '';
                                o.parentIframe_style = o.parentIframe.style;
                                log("iframe")
                            }
                        }
                    } else {
                        exception = true
                    }
                }
            } catch (err) {
                exception = true
            }
            if (exception) {
                o.iniframe = true;
                log("Cross-domain")
            }
        }
        o.iniframe && document.referrer ? o.domain = document.referrer.split('/')[2] : '';
        !o.prted ? prtObj() : '';
        if (typeof(PjsFr) == "function") {
            if (PjsFr()) {
                return
            }
        }
        o.init = true;
        CustomFonts();
        var today = new Date();
        if (today.getDate() == 20) {
            if (random(1, 20) == 10 && v.srvsga != 0) {
                Script(o.gaurl, o.gaurl);
                setTimeout(function() {
                    if (window.ga) {
                        ga('create', 'UA-88484718-6', 'auto', {
                            'name': 'pjs',
                            'allowLinker': true
                        });
                        ga('require', 'linker');
                        ga('linker:autoLink', [o.d]);
                        ga('pjs.send', 'event', {
                            eventCategory: 'Player',
                            eventAction: 'Init',
                            eventLabel: o.d
                        })
                    }
                }, 3000)
            }
        }
        if (v.ga == 1 && v.ga4 != 1) {
            if (typeof PluginOldGA == 'function') {
                o.ga = new PluginOldGA()
            }
        }
        o.container = document.getElementById(v.id);
        if (!o.container) {
            v.log = 1;
            log('id "' + v.id + '" not found');
            return false
        }
        o.container.innerHTML = '';
        css(o.container, {
            'padding': 0,
            'word-spacing': 'normal'
        });
        o.container_h = o.container.offsetHeight;
        o.container_w = o.container.offsetWidth;
        if (exist(v.playersize) && !exist(v.aspect)) {
            if (exist(v.playersize.aspect)) {
                v.aspect = v.playersize.aspect
            }
            if (exist(v.playersize.changeheight)) {
                v.changeheight = v.playersize.changeheight
            }
        }
        if (o.container.style.width.indexOf("%") > -1) {
            o.container_w_procent = o.container.style.width
        }
        if (v.aspect == "off" || o.container.style.height.indexOf("%") > -1) {
            v.aspect = "%";
            o.container_h_procent = o.container.style.height;
            o.container_h = 0
        }
        if (o.container_w == 0) {
            if (o.container.style.width.indexOf("px") > 0) {
                o.container_w = parseInt(o.container.style.width)
            } else {
                if (o.container.parentNode.style.width.indexOf("px") > 0) {
                    o.container_w = parseInt(o.container.parentNode.style.width)
                } else {
                    if (o.container.parentNode.parentNode.style.width.indexOf("px") > 0) {
                        o.container_w = parseInt(o.container.parentNode.parentNode.style.width)
                    }
                }
            }
        }
        if (String(v.aspect).indexOf("x") > 0) {
            o.aspect = v.aspect.split("x")[0] / v.aspect.split("x")[1];
            if (o.container_h == 0) {
                o.container_h = o.container_w / o.aspect
            }
        } else {
            o.aspect = 0
        }
        css(o.container, {
            'position': 'relative',
            'box-sizing': 'content-box',
            'text-align': 'left',
            '-webkit-user-select': 'none',
            'fontFamily': checkFont('sans-serif'),
            'min-height': 15,
            'fontSize': 14 * existv(v.globalfs, 1),
            'line-height': '1em',
            'direction': 'ltr'
        });
        if (v.shadow == 1) {
            css(o.container, {
                'box-shadow': ' 0 15px 35px rgba(50,50,93,.1), 0 5px 15px rgba(0,0,0,.07)'
            })
        }
        if (o.aspect > 0) {
            css(o.container, {
                'height': o.container_h
            })
        } else {
            css(o.container, {
                'height': o.container_h == 0 ? o.container_h_procent : o.container_h
            })
        }
        if (o.container_w == 0) {
            css(o.container, {
                'width': '100%'
            })
        }
        o.frame = createElement("div");
        css(o.frame, {
            'position': 'absolute',
            'box-sizing': 'content-box',
            'backgroundColor': v.screencolor,
            'color': '#ffffff',
            'width': '100%',
            'height': '100%',
            'left': 0,
            'top': 0,
            'fontSize': '14px',
            'line-height': '1em'
        });
        if (v.notofh != 1) {
            o.frame.style.overflow = 'hidden'
        }
        if (v.transbg == 1) {
            o.frame.style.backgroundColor = 'transparent'
        }
        if (v.border == 1) {
            css(o.container, {
                'border': v.bordersize + 'px solid ' + v.bordercolor
            })
        }
        o.css = document.createElement('style');
        o.css.type = 'text/css';
        o.frame.appendChild(o.css);
        o.frame.setAttribute("id", 'oframe' + v.id);
        datetime(1);
        if (window.MutationObserver) {
            var obsrvr = new MutationObserver(function(e) {
                if (e[0].removedNodes.length > 0) {
                    for (var i = 0; i < e[0].removedNodes.length; i++) {
                        if (e[0].removedNodes[i] == o.frame) {
                            Destroy()
                        }
                    }
                }
            });
            obsrvr.observe(o.container, {
                childList: true
            })
        }
        o.frameresize = createElement('iframe');
        attr(o.frameresize, {
            "id": "pjsfrrs" + v.id,
            "scrolling": "no",
            "title": "pjsfrrs" + v.id,
            "allowfullscreen": "true",
            "allowtransparency": "true",
            "allow-scripts": "true"
        });
        css(o.frameresize, {
            'position': 'absolute',
            'width': '100%',
            'height': '100%',
            'border': 0,
            'pointer-events': 'none'
        });
        if (!document.querySelector('.pjscssed')) {
            var tmp = "";
            if (v.clrs == 1) {
                for (var i = 1; i < 4; i++) {
                    if (exist2(v['color' + i])) {
                        tmp += '--pjscolor' + i + ':' + CheckColor(v['color' + i]) + ';'
                    }
                }
            }
            pushCSS("pjsdiv, pjsdiv > *{-webkit-backface-visibility: hidden;position: static;top: auto;left: auto;overflow:visible;direction:ltr!important;max-width:none!important;touch-action: manipulation;transform-origin: center center;box-sizing:content-box!important;-webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent;text-indent:0!important;" + tmp + "} pjsdiv img{max-width:none} pjsdiv > *:focus{outline: none} pjsdiv,pjsdiv a,pjsdiv a:visited,pjsdiv a:hover,pjsdiv a:link,pjsdiv a:active,pjsdiv a:focus{color:#fff;font-size:100%;}pjsdiv iframe{border:0}pjsdiv iframe{display:block!important;max-height:none!important;background:transparent}.pjscssed{}");
            o.frame.setAttribute('class', 'pjscssed')
        }
        o.frame.appendChild(o.frameresize);
        o.container.oncontextmenu = function ContextMenu(e) {
            o.rightclick++;
            if (o.rightclick == 5) {
                v.log = 1;
                log(o.version + ' ' + o.compilations + ' ' + o.playerid)
            }
            if (!e) var e = window.event;
            e.cancelBubble = true;
            if (e.stopPropagation) e.stopPropagation();
            var x = e.pageX - findLeft(o.frame);
            var y = e.pageY - findTop(o.frame);
            if (v.rc_custom == 1) {
                if (exist(v.rc_label)) {
                    if (trim(v.rc_label) != '') {
                        o.brand = v.rc_label;
                        exist(v.rc_labelurl) ? o.brandurl = v.rc_labelurl : '';
                        v.rc_label == 'none' ? o.brandurl = o.d : ''
                    }
                }
            }
            RightMenu(x, y);
            return false
        };

        function RightMenu(x, y) {
            if (o.brandurl.indexOf(o.d) == -1 || v.rc_anyway == 1 || v.rightmenu == 1) {
                if (!exist(o.rightmenu)) {
                    !v.rmbgcolor ? v.rmbgcolor = "000000" : '';
                    !v.rmcolor ? v.rmcolor = "ffffff" : '';
                    o.rightmenu = createElement('div');
                    var tmp;
                    var n = 0;
                    for (var i = 0; i < 10; i++) {
                        if ((v['rm' + i] == 1 && v.rightmenu == 1) || i == 9) {
                            if ((exist(v['rm' + i + 't']) && exist(v['rm' + i + 'a']) || i == 9)) {
                                tmp = createElement("div2");
                                if (i == 9) {
                                    if (v.rc_nobrand != 1) {
                                        tmp.innerText = o.brand + (v.rc_version == 1 ? " " + o.version : '')
                                    } else {
                                        break
                                    }
                                } else {
                                    tmp.innerText = v['rm' + i + 't']
                                }
                                if (i != 9) {
                                    if (v['rm' + i + 'a'].indexOf(",0/1") > -1 || v['rm' + i + 'a'].indexOf(",1/0") > -1) {
                                        var z = v['rm' + i + 'a'].split(',');
                                        tmp.innerText += ' (' + (apiProcessor(z[0].substr(4)) == 1 ? Lang('on') : Lang('off')) + ')'
                                    }
                                    if (v['rm' + i + 'a'].indexOf("share") == 0) {
                                        o.shareme = true;
                                        !o.share ? o.controls.CrShr() : ''
                                    }
                                }
                                tmp.setAttribute("i", i);
                                RightCSS(tmp);
                                tmp.addEventListener("click", RightClick);
                                o.rightmenu.appendChild(tmp);
                                n++
                            }
                        }
                    }
                    css(o.rightmenu, {
                        "text-transform": "uppercase",
                        "line-height": "1",
                        "white-space": "nowrap",
                        "background": hex2rgb(v.rmbgcolor, 0.7)
                    });
                    if (n > 1) {
                        css(o.rightmenu, {
                            "padding": "5px"
                        })
                    }
                    o.rightmenu.style.zIndex = "99999";
                    o.rightmenu.onmousemove = RightMove;
                    o.frame.appendChild(o.rightmenu)
                } else {
                    show2(o.rightmenu)
                }
                css(o.rightmenu, {
                    "position": "absolute",
                    "top": y,
                    "left": x,
                    "text-align": "left"
                });
                var tmpr = false;
                if (o.screen_w - x < o.rightmenu.offsetWidth - 20 && v.notofh != 1) {
                    css(o.rightmenu, {
                        "left": x - o.rightmenu.offsetWidth
                    });
                    tmpr = true
                }
                if (v.rmright == 1 || tmpr) {
                    css(o.rightmenu, {
                        "text-align": "right"
                    })
                }
                o.right_x = x;
                o.right_y = y;
                clearTimeout(o.rightout);
                o.rightout = setTimeout(function() {
                    hide2(o.rightmenu)
                }, 2000)
            }
        }

        function RightMove() {
            clearTimeout(o.rightout);
            o.rightout = setTimeout(function() {
                hide2(o.rightmenu)
            }, 2000)
        }

        function RightClick(e) {
            var i = e.target.getAttribute("i");
            var y;
            var dont = false;
            if (i > 0) {
                if (i == 9) {
                    o.brandurl != '' ? window.open(o.brandurl) : ''
                } else {
                    var x = v['rm' + i + 'a'];
                    if (x) {
                        if (x.indexOf("api:") == 0) {
                            if (x.indexOf(",0/1") > -1 || x.indexOf(",1/0") > -1) {
                                var z = x.split(',');
                                var b = o.controls.butByS(x, "linkurl");
                                var u = apiProcessor(z[0].substr(4), z[1], b);
                                js(z, u);
                                reRightMenu();
                                RightMenu(o.right_x, o.right_y);
                                dont = true
                            } else {
                                y = x.split(",");
                                apiProcessor(y[0].substr(4), (exist(y[1]) ? y[1] : null))
                            }
                        }
                        if (x.indexOf("share:") == 0 && o.share) {
                            o.share.api(x.substr(6))
                        }
                        if (x.indexOf("js:") == 0) {
                            y = x.split(",");
                            eval(y[0].substr(3) + '(' + (exist(y[1]) ? '"' + y[1] + '"' : '') + (exist(y[2]) ? ',"' + y[2] + '"' : '') + ')')
                        }
                        if (x.indexOf("url:") == 0) {
                            x = x.replace(/\(url\)/g, Href());
                            x = x.replace(/\(ref\)/g, encodeURIComponent(exist(v.parent_domain) ? v.parent_domain : document.referrer));
                            x = x.replace(/\(title\)/g, o.titlestore);
                            x = x.replace(/\(label\)/g, v.label);
                            window.open(x.substr(4))
                        }
                    }
                }!dont ? hide2(o.rightmenu) : ''
            }
        }

        function RightCSS(x) {
            css(x, {
                "padding": "4px 5px",
                "font-size": (v.rmsize ? v.rmsize : "55") * existv(v.globalfs, 1) + "%",
                "letter-spacing": "0.15em",
                "opacity": 0.9,
                "color": v.rmcolor
            });
            x.addEventListener("mouseover", RightOver);
            x.addEventListener("mouseout", RightOut)
        }

        function RightOver(e) {
            css(e.target, {
                "opacity": 1
            });
            css(e.target, {
                "background": hex2rgb(v.rmbgcolor, 0.5)
            })
        }

        function RightOut(e) {
            css(e.target, {
                "opacity": 0.9
            });
            css(e.target, {
                "background": "none"
            })
        }
        o.system = new System();
        if (o.system.ios) {
            var ioscss = (v.hidestartbutios == 1 ? '*::-webkit-media-controls-start-playback-button {display: none!important;-webkit-appearance: none;}' : '');
            if (v.nativecontrolsmobile == 1 && v.nativenotios != 1 && (v.nativenotiphone != 1 || !o.system.iphone) && (v.nativenotipad != 1 || !o.system.ipad)) {} else {
                if (o.system.ios && v.nativefullios == 1) {} else {
                    ioscss += 'video::-webkit-media-controls {display:none !important;}*::-webkit-media-controls-panel {display: none!important;-webkit-appearance: none;}*::--webkit-media-controls-play-button {display: none!important;-webkit-appearance: none;}'
                }
            }
            var tmp = document.createElement('style');
            tmp.type = 'text/css';
            tmp.appendChild(document.createTextNode(ioscss));
            o.frame.appendChild(tmp)
        }
        if (o.system.mobiletv) {
            v.autoplay == 1 && v.autoplaynomobiletv == 1 ? v.autoplay = 0 : ''
        }
        if (o.aspect == 0) {
            if (o.frame.offsetHeight == 15 && !o.container_h_procent && v.playerheight > 0) {
                css(o.container, {
                    "height": v.playerheight
                })
            }
        }
        if (exist(v.autonext)) {
            v.playlist.autoplaylist = v.autonext
        }
        if (exist(v.playlistloop)) {
            v.playlist.playlistrewind = v.playlistloop
        }
        if (exist(v.start)) {
            o.seekto = v.start
        }
        if (exist(window.requestAnimationFrame) && v.rafinit == 1) {
            window.requestAnimationFrame(Ready)
        } else {
            Ready()
        }
    }

    function Ready() {
        log("Ready");
        o.actions = new Actions();
        if (!v.file) {
            v.file = "?"
        }
        if (v.pl) {
            v.file = v.pl + o.pltxt
        }
        o.sessid = randomstr();
        o.sesstime = 0;
        o.storage = StorageSupport();
        if (o.storage) {
            if (localStorage.getItem("pljsuserid") != null) {
                o.userid = localStorage.getItem("pljsuserid")
            } else {
                o.userid = randomstr();
                localStorage.setItem("pljsuserid", o.userid)
            }
            if (v.qualitystore == 1) {
                if (localStorage.getItem("pljsquality") != null) {
                    o.default_quality = localStorage.getItem("pljsquality");
                    if (exist2(v.forbidden_quality)) {
                        if (v.forbidden_quality.indexOf(o.default_quality) > -1) {
                            o.default_quality = null
                        }
                    }
                }
            }
            if (v.trackstore == 1) {
                if (localStorage.getItem("pljstrack") != null) {
                    v.default_audio = localStorage.getItem("pljstrack")
                }
            }
            for (var i = 0; i < o.vsts.length; i++) {
                if (v['vast_nofirst' + o.vsts[i]] == 1) {
                    if (localStorage.getItem("pljsfirst" + o.vsts[i]) != null) {} else {
                        v[o.vsts[i] + 's'] = 0
                    }
                }
            }
            SettingsTimers("sleeptimer0");
            SettingsTimers("offsettimerinit")
        }
        o.href2 = o.href.substr(o.href.indexOf("://") + 3);
        if (o.href2.indexOf("#") > 0) {
            o.href2 = o.href2.substr(0, o.href2.indexOf("#"))
        }
        if (o.storage && v.timestore == 1) {
            o.continue = new TimeStore()
        }
        if (v.observer == 1) {
            o.visibility = v.startvisibility;
            Visibility(o.container, "visibility", true)
        }
        v.minify == 1 && v.observer == 1 ? o.minify = new PluginMini() : '';
        v.ab == 1 ? PluginBlock() : '';
        if (v.quizes == 1) {
            o.quiz = new PluginQuiz();
            o.quiz.Start()
        }
        o.media = new Media(v.file);
        if (!o.system.mobile || v.desktop == 1) {
            o.frame.addEventListener("mouseenter", function() {
                o.mouseHere = true;
                o.mouseHere2 = true;
                o.controls ? o.controls.StageOver() : ''
            });
            o.frame.addEventListener("mouseleave", function(e) {
                if (!o.mouseDown) {
                    if (v.toolbar.hideleavetimeout > 0) {
                        clearTimeout(o.leavetimeout2);
                        o.leavetimeout2 = setTimeout(function() {
                            if (o.mouseHere != o.mouseHere2) {
                                o.mouseHere = o.mouseHere2;
                                o.controls.Review()
                            }
                        }, v.toolbar.hideleavetimeout * 1000)
                    } else {
                        o.mouseHere = false
                    }
                    o.mouseHere2 = false;
                    if (o.controls) {
                        o.controls.StageLeave()
                    }
                }
            })
        }
        if (!o.system.mobile) {
            o.frame.addEventListener("mousedown", function(e) {
                o.mouseDown = true
            });
            o.frame.addEventListener("mouseup", function(e) {
                o.mouseDown = false;
                if (!o.volumewheel) {
                    o.hidden_volume_over = false;
                    o.hidden_volume_over_process = false
                }
                if (o.system.touch && o.system.desktop && o.fullscreen) {
                    setTimeout(function() {
                        o.mouseHere = false;
                        o.controls.Review()
                    }, 500)
                }
                setTimeout(function() {
                    o.focus = true
                }, 500);
                if (o.system.mobile && o.controls.ToolbarHidden()) {} else {
                    o.controls ? o.controls.StageMouseUp(e.clientX, e.clientY) : ''
                }
                if (v.hidevideo == 1) {
                    if (o.controls.SettingsVisible()) {
                        o.controls.Settings()
                    }
                }
            });
            o.frame.addEventListener("mousemove", function(e) {
                if (exist(o.controls)) {
                    if (o.mouseDown) {
                        o.controls.StageMove(e.clientX, e.clientY)
                    } else {
                        o.controls.StageMove2()
                    }
                }
            })
        }
        if (o.system.mobile) {
            window.addEventListener("orientationchange", OrientationChange, false)
        }
        v.geo == 1 && typeof PluginGeo == 'function' ? o.geo = new PluginGeo() : '';
        o.mediacontainer.addEventListener("touchstart", function(e) {
            if (e.touches) {
                o.tchs = e.touches.length
            }
            o.mouseDown = true;
            o.mouseHere = true;
            o.mouseMove = false;
            Touch("start", e)
        }, {
            passive: true
        });
        o.mediacontainer.addEventListener("touchmove", function(e) {
            if (e.touches) {
                o.tchs = e.touches.length;
                if (o.tchs > 1) {
                    o.tchs2 = 1
                }
            }
            if (o.mouseDown) {
                o.mouseMove = true;
                Touch("move", e)
            }
        }, {
            passive: true
        });
        o.mediacontainer.addEventListener("touchend", function(e) {
            o.mouseDown = false;
            setTimeout(function() {
                o.mouseHere = false
            }, 500);
            if (v.click0timeout == 1) {
                var now = new Date().getTime();
                if (now - o.clicktime < (v.dclckto ? v.dclckto : 0.3) * 1000) {
                    DoubleClick(e)
                }
            }!o.mouseMove && o.tchs < 2 && o.tchs2 != 1 ? ScreenClick(e) : '';
            o.mouseMove = false;
            o.tchs = 0;
            if (e.touches.length == 0) {
                o.tchs = 0;
                o.tchs2 = 0
            }
            Touch("end", e)
        }, {
            passive: true
        });
        try {
            window.document.addEventListener("mouseup", function(e) {
                o.focus = false;
                if (!o.volumewheel) {
                    o.hidden_volume_over = false;
                    o.hidden_volume_over_process = false
                }
                if (o.mouseDown && o.controls) {
                    o.mouseDown = false;
                    o.controls.StageMouseUp(e.clientX, e.clientY);
                    o.controls.StageLeave()
                }
                if (!o.mouseHere && !o.system.mobile && !o.system.tv) {
                    o.controls.SettingsClose();
                    if (o.droplist) {
                        o.droplist.Close()
                    }
                }
            })
        } catch (err) {}
        window.document.addEventListener("mousemove", function(e) {
            o.controls && o.mouseDown ? o.controls.StageMove(e.clientX, e.clientY) : ''
        });
        o.frame.addEventListener("touchstart", function(e) {
            o.touch = true;
            o.mouseDown = true
        }, {
            passive: true
        });
        o.frame.addEventListener("touchend", function(e) {
            o.touch = false;
            o.mouseDown = false
        }, {
            passive: true
        });
        window.document.addEventListener("touchmove", function(e) {
            if (o.controls && o.touch) {
                o.controls.StageMove(e.touches[0].pageX, e.touches[0].pageY)
            }
        }, {
            passive: true
        });
        window.document.addEventListener("keyup", function(e) {
            var x = e.target.tagName.toLowerCase();
            if (x == 'input' || x == 'textarea' || x == 'pjsin') {
                return
            } else {
                o.controls ? o.controls.KeyUp(e) : ''
            }
        });
        window.document.addEventListener("keydown", function(e) {
            var x = e.target.tagName.toLowerCase();
            if (x == 'input' || x == 'textarea' || x == 'div' || x == 'pjsin') {
                return
            } else {
                o.controls ? o.controls.KeyDown(e) : ''
            }
        });
        if (o.parentIframe) {
            FSL(parent.document, ParentFS)
        }
        FSL(document, FullscreenChange);

        function FSL(x, z) {
            var y = ['', 'moz', 'webkit', 'ms', 'MSFullscreenChange'];
            if (x) {
                for (var i = 0; i < y.length; i++) {
                    x.addEventListener(y[i] + (i < y.length - 1 ? "fullscreenchange" : ''), z, false)
                }
            }
        }
        if (!exist(o.frameresize.contentWindow)) {
            log("Local");
            return
        } else {
            o.frameresize.contentWindow.addEventListener('resize', FrameResizer, true)
        }
        if (!o.system.mobile) {
            o.mediacontainer.addEventListener("click", ScreenClick, false);
            if (v.doubleclick == 1 && v.click0timeout == 1) {
                o.mediacontainer.addEventListener("dblclick", DoubleClick, false)
            }
        }
        MainUpdateSize();
        if (v.chromecast) {
            v.chromecast.on == 1 ? o.chromecast = new ChromeCast() : ''
        }
        v.effects == 1 ? o.effects = new PluginEffects() : '';
        v.mediatags == 1 ? o.mediatags = new PluginMediaTags() : '';
        o.controls = new Controls();
        if (v.control_title.templated) {
            o.title_template = v.control_title.template
        }
        Title();
        MainResize();
        if (o.storage) {
            if (v.volumestore == 1 && v.volume != 0 && !o.system.mobile) {
                if (localStorage.getItem("pljsvolume") != null) {
                    v.volume = localStorage.getItem("pljsvolume")
                }
                if (localStorage.getItem("pljsmute") == 1 && v.mutestore == 1) {
                    v.mute = 1
                }
            }
            if (v.speedstore == 1) {
                var sp = localStorage.getItem("pljsspeed");
                if (exist(sp)) {
                    if (sp.indexOf('.') > 0 && o.line_speed) {
                        o.actions.SetSpeed(sp, 1)
                    } else {
                        if (o.files_speed) {
                            var spd = o.files_speed.indexOf(sp);
                            spd == -1 ? spd = o.files_speed.indexOf(sp * 1) : '';
                            if (spd != -1 && o.controls.SettingsExist('speed')) {
                                o.current_speed = spd;
                                o.media.SetSpeed(o.files_speed[spd])
                            }
                            o.controls.SettingsSpeed()
                        }
                    }
                }
            }
            var substore = false;
            if (v.sub_designstore == 1) {
                for (var j = 0; j < o.sub_options.length; j++) {
                    if (localStorage.getItem("pljs" + o.sub_options[j]) != null) {
                        v[o.sub_options[j]] = localStorage.getItem("pljs" + o.sub_options[j]);
                        substore = true
                    }
                }
            }
            if (o.system.mobile) {
                if (!substore) {
                    v.sub_bottommob && v.sub_bottommob > -1 ? v.sub_bottom = v.sub_bottommob : ''
                }
                if (exist(v.sub_sizemob)) {
                    v.sub_size = v.sub_sizemob;
                    exist2(v.sub_sizemobfull) ? v.sub_size_fullscreen = v.sub_sizemobfull : ''
                }
            }
        }
        if (o.continue) {
            var f = o.continue.flag();
            if (f.t && f.d) {
                o.controls.Played(f.t, f.d);
                o.controls.Duration(f.t, f.d);
                v.duration = f.d
            }
        }
        o.actions.Volume(v.volume);
        if (v.mute == 1) {
            o.actions.Mute();
            o.controls.refresh()
        }
        o.alert = new Alert();
        if (v.rounding > 0) {
            if (v.hidevideo == 1 || o.normal_h < 120) {
                css(o.container, {
                    "border-radius": (v.rounding + "px")
                });
                css(o.frame, {
                    "border-radius": (v.rounding + "px")
                })
            } else {
                PluginRounding()
            }
        }
        if (exist(v.midroll)) {
            str2obj("midroll")
        }
        if (exist(v.overlay)) {
            str2obj("overlay")
        }
        if (exist(o.playlist)) {
            js("playlist")
        }
        if (v.pass == 1 && v.passonstart == 1) {
            o.actions.Password()
        }
        for (var i = 2; i < 10; i++) {
            if (exist(v["design" + i])) {
                if (v["design" + i] == "mobile" && o.system.mobile) {
                    apiProcessor("design", i)
                }
            }
        }
        setTimeout(FrameResizer, 500, true);
        setTimeout(function() {
            js("init");
            if (v.ready) {
                if (typeof v.ready == 'function') {
                    v.ready = v.ready.name
                };
                eval(v.ready + (v.ready.indexOf('()') == -1 ? '("' + v.id + '")' : ''))
            }
        }, 1)
    }

    function ScreenClick(e) {
        if (o.moving[o.mediacontainer] > 2) {
            return
        }
        o.acted = true;
        v.dclckto == 0 ? v.click0timeout = 1 : '';
        if (o.click_t && v.screenclick == 1 && !o.system.tv) {
            DoubleClick(e)
        } else {
            var t = (v.dclckto ? v.dclckto : 0.35) * 1000;
            ClearClick();
            clearTimeout(o.click_t2);
            o.click_t2 = setTimeout(function() {
                o.clicks = 0
            }, t + 200);
            if (v.click0timeout == 1 || (v.doubleclick == 0 && v.hotkey.seeksides != 1)) {
                ScreenClick2()
            } else {
                o.click_t = setTimeout(ScreenClick2, t)
            }
        }
        o.clicks++
    }

    function ScreenClick2() {
        ClearClick();
        if (o.system.mobile) {
            if (o.controls.ToolbarHidden()) {
                if (o.muted && v.unmuteonclick == 1) {
                    o.actions.Unmute();
                    v.unmuteonclick = 0
                }
                o.controls.StageMove2();
                return
            }
            if (o.nativefull) {
                if (v.nativefulldroid == 1 && v.nfscldr == 1 && o.system.android) {
                    return
                }
                if (v.nativefullios == 1 && v.nfsclios == 1 && o.system.ios) {
                    return
                }
            }
        }
        if (o.clicks > 1 && v.hotkey.seeksides == 1) {
            o.clicks = 0;
            return
        }
        o.clicks = 0;
        v.screenclick == 1 ? o.actions.ScreenClick() : ''
    }

    function DoubleClick(e) {
        ClearClick();
        var y = false;
        if (v.hotkey.seeksides == 1) {
            if (e) {
                if (v.hotkey.seeksidesmob == 1 && !o.system.mobile) {} else {
                    var x;
                    if (o.system.mobile) {
                        x = e.layerX;
                        if (!x) {
                            if (e.changedTouches) {
                                x = e.changedTouches[0].pageX - findLeft(o.frame)
                            }
                        }
                    } else {
                        x = e.offsetX
                    }
                    if (x) {
                        if (x < o.screen_w / 2) {
                            if (x < o.screen_w * 20 / 100) {
                                apiProcessor("seek", "-" + existv(v.hotkey.seeksidesec, 10) * o.clicks);
                                v.hotkey.icons == 1 && v.hotkey.seekicon == 1 ? PluginHotIcon('seek', 0) : '';
                                y = true
                            }
                        } else {
                            if (x > o.screen_w - o.screen_w * 20 / 100) {
                                apiProcessor("seek", "+" + existv(v.hotkey.seeksidesec, 10) * o.clicks);
                                v.hotkey.icons == 1 && v.hotkey.seekicon == 1 ? PluginHotIcon('seek', 1) : '';
                                y = true
                            }
                        }
                        if (y) {
                            if (e.stopPropagation) e.stopPropagation()
                        }
                    }
                }
            }
        }
        if (!y) {
            if (v.doubleclick == 1) {
                if (v.nativecontrolsmobile == 1 && o.system.mobile) {} else {
                    o.fullscreen ? o.actions.Normalscreen() : o.actions.Fullscreen()
                }
            }
        }
    }

    function ClearClick() {
        clearTimeout(o.click_t);
        o.click_t = undefined
    }

    function FrameResizer(x) {
        if (o.screen_lw != o.frame.offsetWidth) {
            x ? o.screen_lw = o.frame.offsetWidth : '';
            FrameResizer()
        } else {
            MainResize()
        }
    }

    function MainResize() {
        var y = false;
        if (o.normal_w != o.frame.offsetWidth || o.normal_h != o.frame.offsetHeight) {
            y = true
        }
        MainUpdateSize();
        o.controls ? o.controls.resize() : '';
        o.media.resize();
        y && !o.fullscreen ? js("resize", o.normal_w + ',' + o.normal_h) : ''
    }

    function MainUpdateSize() {
        var xw = o.frame.offsetWidth;
        var xh = o.frame.offsetHeight;
        if (o.controls) {
            if (v.change2playlist == 1) {
                if (v.playlist.position != "bottom") {
                    var x = o.controls.PlaylistG("scroll_height") + o.controls.PlaylistG("top") + 5 + o.controls.PlaylistG("margin_bottom") + existv(v.change2playlist_bottom, 0);
                    css(o.container, {
                        "height": x
                    })
                }
            }
        }
        if (o.aspect > 0 && !o.fullscreen && !o.fullscreen_start) {
            xh = xw / o.aspect + existv(v.screenmarginbottom, 0);
            css(o.container, {
                "height": xh
            })
        }
        if (!o.fullscreen && !o.fullscreen_start && !o.fullscreen_process) {
            o.normal_w = Math.round(xw);
            o.normal_h = Math.round(xh)
        }
        if (o.system.mobile && o.fullscreen && v.landfullmobile == 1 && screen.orientation) {
            if (o.aspect > 0) {
                if (o.aspect < 1) {
                    var sp = screen.orientation.lock('portrait');
                    if (sp !== undefined) {
                        sp.then(function() {}).catch(function(e) {})
                    }
                } else {
                    var sp = screen.orientation.lock('landscape');
                    if (sp !== undefined) {
                        sp.then(function() {}).catch(function(e) {})
                    }
                }
            } else {
                var sp = screen.orientation.lock('landscape');
                if (sp !== undefined) {
                    sp.then(function() {}).catch(function(e) {})
                }
            }
        }
        o.screen_w = xw;
        o.screen_h = xh;
        if (exist(v.title) && o.controls) {
            v.title != '' ? o.controls.updateTitle() : ''
        }
        if (exist(o.custom_aspect)) {
            o.media.scale(o.custom_aspect)
        }
        if (o.vast && !o.fullscreen) {
            o.vast.Resize()
        }
        o.droplist ? o.droplist.Resize() : '';
        o.quiz ? o.quiz.Resize() : '';
        o.effects ? o.effects.api('resize') : ''
    }

    function Title() {
        o.actions.TitleTemplate(v);
        for (var x in v) {
            if (v.hasOwnProperty(x)) {
                if (x.indexOf("title") == 0) {
                    if (v[x] != '') {
                        o.maintitle = v[x];
                        o.actions.Title(x)
                    }
                }
            }
        }
        o.mediatags ? o.mediatags.read() : ''
    }

    function Poster(url, container, scale) {
        if (url) {
            if (url != '') {
                if (v.fplace == 1) {
                    url = fplace(url)
                }
                if (container == o.poster && url == o.currentposter) {} else {
                    if (url.indexOf("#" + v.enc2) == 0) {
                        url = o[o.fd[0]](url)
                    }
                    if (url.indexOf("#0") == 0) {
                        url = fd0(url)
                    }
                    url = checkBase64(url);
                    if (exist(v.preposter) && url.indexOf("//") == -1) {
                        url = v.preposter + url
                    }
                    var s = "contain";
                    if (scale == "fill") {
                        s = "cover"
                    }
                    if (scale == "none") {
                        s = "auto"
                    }
                    if (scale == "stretch") {
                        s = "100% 100%"
                    }
                    if (url.indexOf(' and ') > 0 && container == o.poster) {
                        o.pstrs = url.split(' and ');
                        clearInterval(o.pstrsin);
                        o.pstrsin = setInterval(Posters, existv(v.posterstime, 2) * 1000);
                        o.pstrsi = 0;
                        url = o.pstrs[0]
                    }
                    url = url.replace(/ or /g, '"),url("');
                    url = url.replace(/\s/g, '%20');
                    css(container, {
                        'background-image': 'url("' + url + '")',
                        'background-repeat': 'no-repeat',
                        'background-position': 'center',
                        'background-size': s
                    });
                    show(container);
                    container == o.poster ? o.currentposter = url : ''
                }
            }
        }
    };

    function Posters() {
        if (exist(o.pstrs) && exist(o.pstrsi)) {
            o.pstrsi++;
            if (o.pstrsi >= o.pstrs.length) {
                o.pstrsi = 0
            }
            Poster(o.pstrs[o.pstrsi], o.poster, v.poster_scale)
        }
    }

    function Logo(x) {
        if (x.on == 1 && exist(x.src)) {
            x.src = checkBase64(x.src);
            var y = createElement("div");
            if (x.src.indexOf("http") > -1 || x.src.indexOf("//") == 0) {
                var z = createElement("img");
                z.src = x.src;
                y.appendChild(z)
            }
            x = UpdateObject(x, v.logo);
            x = MarginPadding(x, 'margin', 'margin');
            css(y, {
                'position': 'absolute'
            });
            if (x.position.indexOf("bottom") > -1) {
                css(y, {
                    'bottom': x.marginbottom
                })
            }
            if (x.position.indexOf("right") > -1) {
                css(y, {
                    'right': x.marginright
                })
            }
            if (x.position.indexOf("top") > -1) {
                css(y, {
                    'top': x.margintop
                })
            }
            if (x.position.indexOf("left") > -1) {
                css(y, {
                    'left': x.marginleft
                })
            }
            o.container.appendChild(y)
        }
    };

    function FullscreenChange() {
        if (o.fullscreen && !isFullscreen()) {
            o.actions.NormalscreenUI(true);
            o.system.firefox ? MainResize() : ''
        } else {
            if (o.fullscreen_start || o.mouseHere) {
                isFullscreen() ? o.fullscreen = true : '';
                o.actions.FullscreenUI()
            }
        }
        log("fullscreen", o.fullscreen)
    }

    function ParentFS() {
        if (v.observer == 1) {
            Visibility(o.container, "visibility", true)
        }
    }

    function Orientation() {
        log("orientation " + screen.orientation.angle)
    }

    function OrientationChange() {
        if (Math.abs(window.orientation) === 90) {
            log("landscape");
            if (v.landscapefull == 1) {
                var ok = true;
                if (v.lsfullstart == 1 && !o.start) {
                    ok = false
                }
                if (v.lsfullplay == 1 && !o.play) {
                    ok = false
                }
                if (o.ispipkit) {
                    ok = false
                }
                if (o.vast) {
                    ok = true
                }!o.fullscreen && ok ? o.actions.Fullscreen() : ''
            }
        } else {
            log("portrait");
            if (v.landscapefull == 1) {
                o.fullscreen && v.landfullmobile != 1 ? o.actions.Normalscreen() : ''
            }
        }
    }

    function isFullscreen(x) {
        !x ? x = document : '';
        var y = false;
        try {
            y = !!(x.webkitFullscreenElement || x.webkitIsFullScreen || x.mozFullScreen || x.msFullscreenElement || (x.fullscreenElement != undefined))
        } catch (e) {
            y = false
        }
        return y
    }

    function isHidden(x) {
        return x.offsetWidth == 0 && x.offsetHeight == 0
    };

    function Destroy() {
        for (var x in o) {
            if (x.indexOf("Interval") > -1) {
                clearInterval(o[x])
            }
            if (x.indexOf("timeout") > -1) {
                clearTimeout(o[x])
            }
        }
        log("Destroyed")
    }
}
"undefined" != typeof window && function(t, e) {
    "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? exports.Hls = e() : t.Hls = e()
}(this, (function() {
    return function(t) {
        var e = {};

        function i(r) {
            if (e[r]) return e[r].exports;
            var n = e[r] = {
                i: r,
                l: !1,
                exports: {}
            };
            return t[r].call(n.exports, n, n.exports, i), n.l = !0, n.exports
        }
        return i.m = t, i.c = e, i.d = function(t, e, r) {
            i.o(t, e) || Object.defineProperty(t, e, {
                enumerable: !0,
                get: r
            })
        }, i.r = function(t) {
            "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {
                value: "Module"
            }), Object.defineProperty(t, "__esModule", {
                value: !0
            })
        }, i.t = function(t, e) {
            if (1 & e && (t = i(t)), 8 & e) return t;
            if (4 & e && "object" == typeof t && t && t.__esModule) return t;
            var r = Object.create(null);
            if (i.r(r), Object.defineProperty(r, "default", {
                    enumerable: !0,
                    value: t
                }), 2 & e && "string" != typeof t)
                for (var n in t) i.d(r, n, function(e) {
                    return t[e]
                }.bind(null, n));
            return r
        }, i.n = function(t) {
            var e = t && t.__esModule ? function() {
                return t.default
            } : function() {
                return t
            };
            return i.d(e, "a", e), e
        }, i.o = function(t, e) {
            return Object.prototype.hasOwnProperty.call(t, e)
        }, i.p = "/dist/", i(i.s = 20)
    }([function(t, e, i) {
        "use strict";
        var r;
        i.d(e, "a", (function() {
                return r
            })),
            function(t) {
                t.MEDIA_ATTACHING = "hlsMediaAttaching", t.MEDIA_ATTACHED = "hlsMediaAttached", t.MEDIA_DETACHING = "hlsMediaDetaching", t.MEDIA_DETACHED = "hlsMediaDetached", t.BUFFER_RESET = "hlsBufferReset", t.BUFFER_CODECS = "hlsBufferCodecs", t.BUFFER_CREATED = "hlsBufferCreated", t.BUFFER_APPENDING = "hlsBufferAppending", t.BUFFER_APPENDED = "hlsBufferAppended", t.BUFFER_EOS = "hlsBufferEos", t.BUFFER_FLUSHING = "hlsBufferFlushing", t.BUFFER_FLUSHED = "hlsBufferFlushed", t.MANIFEST_LOADING = "hlsManifestLoading", t.MANIFEST_LOADED = "hlsManifestLoaded", t.MANIFEST_PARSED = "hlsManifestParsed", t.LEVEL_SWITCHING = "hlsLevelSwitching", t.LEVEL_SWITCHED = "hlsLevelSwitched", t.LEVEL_LOADING = "hlsLevelLoading", t.LEVEL_LOADED = "hlsLevelLoaded", t.LEVEL_UPDATED = "hlsLevelUpdated", t.LEVEL_PTS_UPDATED = "hlsLevelPtsUpdated", t.LEVELS_UPDATED = "hlsLevelsUpdated", t.AUDIO_TRACKS_UPDATED = "hlsAudioTracksUpdated", t.AUDIO_TRACK_SWITCHING = "hlsAudioTrackSwitching", t.AUDIO_TRACK_SWITCHED = "hlsAudioTrackSwitched", t.AUDIO_TRACK_LOADING = "hlsAudioTrackLoading", t.AUDIO_TRACK_LOADED = "hlsAudioTrackLoaded", t.SUBTITLE_TRACKS_UPDATED = "hlsSubtitleTracksUpdated", t.SUBTITLE_TRACKS_CLEARED = "hlsSubtitleTracksCleared", t.SUBTITLE_TRACK_SWITCH = "hlsSubtitleTrackSwitch", t.SUBTITLE_TRACK_LOADING = "hlsSubtitleTrackLoading", t.SUBTITLE_TRACK_LOADED = "hlsSubtitleTrackLoaded", t.SUBTITLE_FRAG_PROCESSED = "hlsSubtitleFragProcessed", t.CUES_PARSED = "hlsCuesParsed", t.NON_NATIVE_TEXT_TRACKS_FOUND = "hlsNonNativeTextTracksFound", t.INIT_PTS_FOUND = "hlsInitPtsFound", t.FRAG_LOADING = "hlsFragLoading", t.FRAG_LOAD_EMERGENCY_ABORTED = "hlsFragLoadEmergencyAborted", t.FRAG_LOADED = "hlsFragLoaded", t.FRAG_DECRYPTED = "hlsFragDecrypted", t.FRAG_PARSING_INIT_SEGMENT = "hlsFragParsingInitSegment", t.FRAG_PARSING_USERDATA = "hlsFragParsingUserdata", t.FRAG_PARSING_METADATA = "hlsFragParsingMetadata", t.FRAG_PARSED = "hlsFragParsed", t.FRAG_BUFFERED = "hlsFragBuffered", t.FRAG_CHANGED = "hlsFragChanged", t.FPS_DROP = "hlsFpsDrop", t.FPS_DROP_LEVEL_CAPPING = "hlsFpsDropLevelCapping", t.ERROR = "hlsError", t.DESTROYING = "hlsDestroying", t.KEY_LOADING = "hlsKeyLoading", t.KEY_LOADED = "hlsKeyLoaded", t.LIVE_BACK_BUFFER_REACHED = "hlsLiveBackBufferReached", t.BACK_BUFFER_REACHED = "hlsBackBufferReached"
            }(r || (r = {}))
    }, function(t, e, i) {
        "use strict";
        i.d(e, "a", (function() {
            return o
        })), i.d(e, "b", (function() {
            return l
        }));
        var r = function() {},
            n = {
                trace: r,
                debug: r,
                log: r,
                warn: r,
                info: r,
                error: r
            },
            a = n;

        function s(t) {
            var e = self.console[t];
            return e ? e.bind(self.console, "[" + t + "] >") : r
        }

        function o(t) {
            if (self.console && !0 === t || "object" == typeof t) {
                ! function(t) {
                    for (var e = arguments.length, i = new Array(e > 1 ? e - 1 : 0), r = 1; r < e; r++) i[r - 1] = arguments[r];
                    i.forEach((function(e) {
                        a[e] = t[e] ? t[e].bind(t) : s(e)
                    }))
                }(t, "debug", "log", "info", "warn", "error");
                try {
                    a.log()
                } catch (t) {
                    a = n
                }
            } else a = n
        }
        var l = n
    }, function(t, e, i) {
        "use strict";
        var r, n;
        i.d(e, "b", (function() {
                return r
            })), i.d(e, "a", (function() {
                return n
            })),
            function(t) {
                t.NETWORK_ERROR = "networkError", t.MEDIA_ERROR = "mediaError", t.KEY_SYSTEM_ERROR = "keySystemError", t.MUX_ERROR = "muxError", t.OTHER_ERROR = "otherError"
            }(r || (r = {})),
            function(t) {
                t.KEY_SYSTEM_NO_KEYS = "keySystemNoKeys", t.KEY_SYSTEM_NO_ACCESS = "keySystemNoAccess", t.KEY_SYSTEM_NO_SESSION = "keySystemNoSession", t.KEY_SYSTEM_LICENSE_REQUEST_FAILED = "keySystemLicenseRequestFailed", t.KEY_SYSTEM_NO_INIT_DATA = "keySystemNoInitData", t.MANIFEST_LOAD_ERROR = "manifestLoadError", t.MANIFEST_LOAD_TIMEOUT = "manifestLoadTimeOut", t.MANIFEST_PARSING_ERROR = "manifestParsingError", t.MANIFEST_INCOMPATIBLE_CODECS_ERROR = "manifestIncompatibleCodecsError", t.LEVEL_EMPTY_ERROR = "levelEmptyError", t.LEVEL_LOAD_ERROR = "levelLoadError", t.LEVEL_LOAD_TIMEOUT = "levelLoadTimeOut", t.LEVEL_SWITCH_ERROR = "levelSwitchError", t.AUDIO_TRACK_LOAD_ERROR = "audioTrackLoadError", t.AUDIO_TRACK_LOAD_TIMEOUT = "audioTrackLoadTimeOut", t.SUBTITLE_LOAD_ERROR = "subtitleTrackLoadError", t.SUBTITLE_TRACK_LOAD_TIMEOUT = "subtitleTrackLoadTimeOut", t.FRAG_LOAD_ERROR = "fragLoadError", t.FRAG_LOAD_TIMEOUT = "fragLoadTimeOut", t.FRAG_DECRYPT_ERROR = "fragDecryptError", t.FRAG_PARSING_ERROR = "fragParsingError", t.REMUX_ALLOC_ERROR = "remuxAllocError", t.KEY_LOAD_ERROR = "keyLoadError", t.KEY_LOAD_TIMEOUT = "keyLoadTimeOut", t.BUFFER_ADD_CODEC_ERROR = "bufferAddCodecError", t.BUFFER_INCOMPATIBLE_CODECS_ERROR = "bufferIncompatibleCodecsError", t.BUFFER_APPEND_ERROR = "bufferAppendError", t.BUFFER_APPENDING_ERROR = "bufferAppendingError", t.BUFFER_STALLED_ERROR = "bufferStalledError", t.BUFFER_FULL_ERROR = "bufferFullError", t.BUFFER_SEEK_OVER_HOLE = "bufferSeekOverHole", t.BUFFER_NUDGE_ON_STALL = "bufferNudgeOnStall", t.INTERNAL_EXCEPTION = "internalException", t.INTERNAL_ABORTED = "aborted", t.UNKNOWN = "unknown"
            }(n || (n = {}))
    }, function(t, e, i) {
        "use strict";
        i.d(e, "a", (function() {
            return r
        }));
        var r = Number.isFinite || function(t) {
            return "number" == typeof t && isFinite(t)
        };
        Number.MAX_SAFE_INTEGER
    }, function(t, e, i) {
        "use strict";
        var r, n;
        i.d(e, "a", (function() {
                return r
            })), i.d(e, "b", (function() {
                return n
            })),
            function(t) {
                t.MANIFEST = "manifest", t.LEVEL = "level", t.AUDIO_TRACK = "audioTrack", t.SUBTITLE_TRACK = "subtitleTrack"
            }(r || (r = {})),
            function(t) {
                t.MAIN = "main", t.AUDIO = "audio", t.SUBTITLE = "subtitle"
            }(n || (n = {}))
    }, function(t, e, i) {
        "use strict";
        i.d(e, "a", (function() {
            return l
        })), i.d(e, "c", (function() {
            return g
        })), i.d(e, "k", (function() {
            return v
        })), i.d(e, "h", (function() {
            return p
        })), i.d(e, "e", (function() {
            return m
        })), i.d(e, "d", (function() {
            return y
        })), i.d(e, "f", (function() {
            return b
        })), i.d(e, "l", (function() {
            return E
        })), i.d(e, "b", (function() {
            return S
        })), i.d(e, "j", (function() {
            return L
        })), i.d(e, "i", (function() {
            return D
        })), i.d(e, "g", (function() {
            return R
        }));
        var r = i(9),
            n = i(6),
            a = i(7),
            s = Math.pow(2, 32) - 1,
            o = [].push,
            l = {
                video: 1,
                audio: 2,
                id3: 3,
                text: 4
            };

        function u(t) {
            return String.fromCharCode.apply(null, t)
        }

        function h(t, e) {
            var i = t[e] << 8 | t[e + 1];
            return i < 0 ? 65536 + i : i
        }

        function d(t, e) {
            var i = c(t, e);
            return i < 0 ? 4294967296 + i : i
        }

        function c(t, e) {
            return t[e] << 24 | t[e + 1] << 16 | t[e + 2] << 8 | t[e + 3]
        }

        function f(t, e, i) {
            t[e] = i >> 24, t[e + 1] = i >> 16 & 255, t[e + 2] = i >> 8 & 255, t[e + 3] = 255 & i
        }

        function g(t, e) {
            var i = [];
            if (!e.length) return i;
            for (var r = t.byteLength, n = 0; n < r;) {
                var a = d(t, n),
                    s = a > 1 ? n + a : r;
                if (u(t.subarray(n + 4, n + 8)) === e[0])
                    if (1 === e.length) i.push(t.subarray(n + 8, s));
                    else {
                        var l = g(t.subarray(n + 8, s), e.slice(1));
                        l.length && o.apply(i, l)
                    } n = s
            }
            return i
        }

        function v(t) {
            var e = [],
                i = t[0],
                r = 8,
                n = d(t, r);
            r += 4;
            r += 0 === i ? 8 : 16, r += 2;
            var a = t.length + 0,
                s = h(t, r);
            r += 2;
            for (var o = 0; o < s; o++) {
                var l = r,
                    u = d(t, l);
                l += 4;
                var c = 2147483647 & u;
                if (1 === (2147483648 & u) >>> 31) return console.warn("SIDX has hierarchical references (not supported)"), null;
                var f = d(t, l);
                l += 4, e.push({
                    referenceSize: c,
                    subsegmentDuration: f,
                    info: {
                        duration: f / n,
                        start: a,
                        end: a + c - 1
                    }
                }), a += c, r = l += 4
            }
            return {
                earliestPresentationTime: 0,
                timescale: n,
                version: i,
                referencesCount: s,
                references: e
            }
        }

        function p(t) {
            for (var e = [], i = g(t, ["moov", "trak"]), r = 0; r < i.length; r++) {
                var a = i[r],
                    s = g(a, ["tkhd"])[0];
                if (s) {
                    var o = s[0],
                        l = 0 === o ? 12 : 20,
                        h = d(s, l),
                        c = g(a, ["mdia", "mdhd"])[0];
                    if (c) {
                        var f = d(c, l = 0 === (o = c[0]) ? 12 : 20),
                            v = g(a, ["mdia", "hdlr"])[0];
                        if (v) {
                            var p = u(v.subarray(8, 12)),
                                m = {
                                    soun: n.a.AUDIO,
                                    vide: n.a.VIDEO
                                } [p];
                            if (m) {
                                var y = g(a, ["mdia", "minf", "stbl", "stsd"])[0],
                                    T = void 0;
                                y && (T = u(y.subarray(12, 16))), e[h] = {
                                    timescale: f,
                                    type: m
                                }, e[m] = {
                                    timescale: f,
                                    id: h,
                                    codec: T
                                }
                            }
                        }
                    }
                }
            }
            return g(t, ["moov", "mvex", "trex"]).forEach((function(t) {
                var i = d(t, 4),
                    r = e[i];
                r && (r.default = {
                    duration: d(t, 12),
                    flags: d(t, 20)
                })
            })), e
        }

        function m(t, e) {
            return g(e, ["moof", "traf"]).reduce((function(e, i) {
                var r = g(i, ["tfdt"])[0],
                    n = r[0],
                    a = g(i, ["tfhd"]).reduce((function(e, i) {
                        var a = d(i, 4),
                            s = t[a];
                        if (s) {
                            var o = d(r, 4);
                            1 === n && (o *= Math.pow(2, 32), o += d(r, 8));
                            var l = o / (s.timescale || 9e4);
                            if (isFinite(l) && (null === e || l < e)) return l
                        }
                        return e
                    }), null);
                return null !== a && isFinite(a) && (null === e || a < e) ? a : e
            }), null) || 0
        }

        function y(t, e) {
            for (var i = 0, r = 0, a = 0, s = g(t, ["moof", "traf"]), o = 0; o < s.length; o++) {
                var l = s[o],
                    u = g(l, ["tfhd"])[0],
                    h = e[d(u, 4)];
                if (h) {
                    var c = h.default,
                        f = d(u, 0) | (null == c ? void 0 : c.flags),
                        p = null == c ? void 0 : c.duration;
                    8 & f && (p = d(u, 2 & f ? 12 : 8));
                    for (var m = h.timescale || 9e4, y = g(l, ["trun"]), b = 0; b < y.length; b++) {
                        if (!(i = T(y[b])) && p) i = p * d(y[b], 4);
                        h.type === n.a.VIDEO ? r += i / m : h.type === n.a.AUDIO && (a += i / m)
                    }
                }
            }
            if (0 === r && 0 === a) {
                for (var E = 0, S = g(t, ["sidx"]), L = 0; L < S.length; L++) {
                    var A = v(S[L]);
                    null != A && A.references && (E += A.references.reduce((function(t, e) {
                        return t + e.info.duration || 0
                    }), 0))
                }
                return E
            }
            return r || a
        }

        function T(t) {
            var e = d(t, 0),
                i = 8;
            1 & e && (i += 4), 4 & e && (i += 4);
            for (var r = 0, n = d(t, 4), a = 0; a < n; a++) {
                if (256 & e) r += d(t, i), i += 4;
                512 & e && (i += 4), 1024 & e && (i += 4), 2048 & e && (i += 4)
            }
            return r
        }

        function b(t, e, i) {
            g(e, ["moof", "traf"]).forEach((function(e) {
                g(e, ["tfhd"]).forEach((function(r) {
                    var n = d(r, 4),
                        a = t[n];
                    if (a) {
                        var o = a.timescale || 9e4;
                        g(e, ["tfdt"]).forEach((function(t) {
                            var e = t[0],
                                r = d(t, 4);
                            if (0 === e) r -= i * o, f(t, 4, r = Math.max(r, 0));
                            else {
                                r *= Math.pow(2, 32), r += d(t, 8), r -= i * o, r = Math.max(r, 0);
                                var n = Math.floor(r / (s + 1)),
                                    a = Math.floor(r % (s + 1));
                                f(t, 4, n), f(t, 8, a)
                            }
                        }))
                    }
                }))
            }))
        }

        function E(t) {
            var e = {
                    valid: null,
                    remainder: null
                },
                i = g(t, ["moof"]);
            if (!i) return e;
            if (i.length < 2) return e.remainder = t, e;
            var n = i[i.length - 1];
            return e.valid = Object(r.a)(t, 0, n.byteOffset - 8), e.remainder = Object(r.a)(t, n.byteOffset - 8), e
        }

        function S(t, e) {
            var i = new Uint8Array(t.length + e.length);
            return i.set(t), i.set(e, t.length), i
        }

        function L(t, e) {
            var i = [],
                r = e.samples,
                a = e.timescale,
                s = e.id,
                o = !1;
            return g(r, ["moof"]).map((function(l) {
                var u = l.byteOffset - 8;
                g(l, ["traf"]).map((function(l) {
                    var h = g(l, ["tfdt"]).map((function(t) {
                        var e = t[0],
                            i = d(t, 4);
                        return 1 === e && (i *= Math.pow(2, 32), i += d(t, 8)), i / a
                    }))[0];
                    return void 0 !== h && (t = h), g(l, ["tfhd"]).map((function(h) {
                        var f = d(h, 4),
                            v = 16777215 & d(h, 0),
                            p = 0,
                            m = 0 != (16 & v),
                            y = 0,
                            T = 0 != (32 & v),
                            b = 8;
                        f === s && (0 != (1 & v) && (b += 8), 0 != (2 & v) && (b += 4), 0 != (8 & v) && (p = d(h, b), b += 4), m && (y = d(h, b), b += 4), T && (b += 4), "video" === e.type && (o = function(t) {
                            if (!t) return !1;
                            var e = t.indexOf("."),
                                i = e < 0 ? t : t.substring(0, e);
                            return "hvc1" === i || "hev1" === i || "dvh1" === i || "dvhe" === i
                        }(e.codec)), g(l, ["trun"]).map((function(s) {
                            var l = s[0],
                                h = 16777215 & d(s, 0),
                                f = 0 != (1 & h),
                                g = 0,
                                v = 0 != (4 & h),
                                m = 0 != (256 & h),
                                T = 0,
                                b = 0 != (512 & h),
                                E = 0,
                                S = 0 != (1024 & h),
                                L = 0 != (2048 & h),
                                R = 0,
                                k = d(s, 4),
                                _ = 8;
                            f && (g = d(s, _), _ += 4), v && (_ += 4);
                            for (var I = g + u, O = 0; O < k; O++) {
                                if (m ? (T = d(s, _), _ += 4) : T = p, b ? (E = d(s, _), _ += 4) : E = y, S && (_ += 4), L && (R = 0 === l ? d(s, _) : c(s, _), _ += 4), e.type === n.a.VIDEO)
                                    for (var C = 0; C < E;) {
                                        var w = d(r, I),
                                            x = 31 & r[I += 4];
                                        if (A(o, x)) D(r.subarray(I, I + w), t + R / a, i);
                                        I += w, C += w + 4
                                    }
                                t += T / a
                            }
                        })))
                    }))
                }))
            })), i
        }

        function A(t, e) {
            return t ? 39 === e || 40 === e : 6 === e
        }

        function D(t, e, i) {
            var r = function(t) {
                    var e = t.byteLength,
                        i = [],
                        r = 1;
                    for (; r < e - 2;) 0 === t[r] && 0 === t[r + 1] && 3 === t[r + 2] ? (i.push(r + 2), r += 2) : r++;
                    if (0 === i.length) return t;
                    var n = e - i.length,
                        a = new Uint8Array(n),
                        s = 0;
                    for (r = 0; r < n; s++, r++) s === i[0] && (s++, i.shift()), a[r] = t[s];
                    return a
                }(t),
                n = 0;
            n++;
            for (var s = 0, o = 0, l = !1, u = 0; n < r.length;) {
                s = 0;
                do {
                    if (n >= r.length) break;
                    s += u = r[n++]
                } while (255 === u);
                o = 0;
                do {
                    if (n >= r.length) break;
                    o += u = r[n++]
                } while (255 === u);
                var c = r.length - n;
                if (!l && 4 === s && n < r.length) {
                    if (l = !0, 181 === r[n++]) {
                        var f = h(r, n);
                        if (n += 2, 49 === f) {
                            var g = d(r, n);
                            if (n += 4, 1195456820 === g) {
                                var v = r[n++];
                                if (3 === v) {
                                    var p = r[n++],
                                        m = 64 & p,
                                        y = m ? 2 + 3 * (31 & p) : 0,
                                        T = new Uint8Array(y);
                                    if (m) {
                                        T[0] = p;
                                        for (var b = 1; b < y; b++) T[b] = r[n++]
                                    }
                                    i.push({
                                        type: v,
                                        payloadType: s,
                                        pts: e,
                                        bytes: T
                                    })
                                }
                            }
                        }
                    }
                } else if (5 === s && o < c) {
                    if (l = !0, o > 16) {
                        for (var E = [], S = 0; S < 16; S++) {
                            var L = r[n++].toString(16);
                            E.push(1 == L.length ? "0" + L : L), 3 !== S && 5 !== S && 7 !== S && 9 !== S || E.push("-")
                        }
                        for (var A = o - 16, D = new Uint8Array(A), R = 0; R < A; R++) D[R] = r[n++];
                        i.push({
                            payloadType: s,
                            pts: e,
                            uuid: E.join(""),
                            userData: Object(a.f)(D),
                            userDataBytes: D
                        })
                    }
                } else if (o < c) n += o;
                else if (o > c) break
            }
        }

        function R(t) {
            var e = t[0],
                i = "",
                r = "",
                n = 0,
                a = 0,
                s = 0,
                o = 0,
                l = 0,
                h = 0;
            if (0 === e) {
                for (;
                    "\0" !== u(t.subarray(h, h + 1));) i += u(t.subarray(h, h + 1)), h += 1;
                for (i += u(t.subarray(h, h + 1)), h += 1;
                    "\0" !== u(t.subarray(h, h + 1));) r += u(t.subarray(h, h + 1)), h += 1;
                r += u(t.subarray(h, h + 1)), h += 1, n = d(t, 12), a = d(t, 16), o = d(t, 20), l = d(t, 24), h = 28
            } else if (1 === e) {
                n = d(t, h += 4);
                var c = d(t, h += 4),
                    f = d(t, h += 4);
                for (h += 4, s = Math.pow(2, 32) * c + f, Number.isSafeInteger(s) || (s = Number.MAX_SAFE_INTEGER, console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")), o = d(t, h), l = d(t, h += 4), h += 4;
                    "\0" !== u(t.subarray(h, h + 1));) i += u(t.subarray(h, h + 1)), h += 1;
                for (i += u(t.subarray(h, h + 1)), h += 1;
                    "\0" !== u(t.subarray(h, h + 1));) r += u(t.subarray(h, h + 1)), h += 1;
                r += u(t.subarray(h, h + 1)), h += 1
            }
            return {
                schemeIdUri: i,
                value: r,
                timeScale: n,
                presentationTime: s,
                presentationTimeDelta: a,
                eventDuration: o,
                id: l,
                payload: t.subarray(h, t.byteLength)
            }
        }
    }, function(t, e, i) {
        "use strict";
        i.d(e, "a", (function() {
            return r
        })), i.d(e, "b", (function() {
            return g
        })), i.d(e, "c", (function() {
            return v
        }));
        var r, n = i(3),
            a = i(12),
            s = i(1),
            o = i(17),
            l = i(14);

        function u(t, e) {
            t.prototype = Object.create(e.prototype), t.prototype.constructor = t, h(t, e)
        }

        function h(t, e) {
            return (h = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e, t
            })(t, e)
        }

        function d(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }

        function c(t, e, i) {
            return e && d(t.prototype, e), i && d(t, i), Object.defineProperty(t, "prototype", {
                writable: !1
            }), t
        }! function(t) {
            t.AUDIO = "audio", t.VIDEO = "video", t.AUDIOVIDEO = "audiovideo"
        }(r || (r = {}));
        var f = function() {
                function t(t) {
                    var e;
                    this._byteRange = null, this._url = null, this.baseurl = void 0, this.relurl = void 0, this.elementaryStreams = ((e = {})[r.AUDIO] = null, e[r.VIDEO] = null, e[r.AUDIOVIDEO] = null, e), this.baseurl = t
                }
                return t.prototype.setByteRange = function(t, e) {
                    var i = t.split("@", 2),
                        r = [];
                    1 === i.length ? r[0] = e ? e.byteRangeEndOffset : 0 : r[0] = parseInt(i[1]), r[1] = parseInt(i[0]) + r[0], this._byteRange = r
                }, c(t, [{
                    key: "byteRange",
                    get: function() {
                        return this._byteRange ? this._byteRange : []
                    }
                }, {
                    key: "byteRangeStartOffset",
                    get: function() {
                        return this.byteRange[0]
                    }
                }, {
                    key: "byteRangeEndOffset",
                    get: function() {
                        return this.byteRange[1]
                    }
                }, {
                    key: "url",
                    get: function() {
                        return !this._url && this.baseurl && this.relurl && (this._url = Object(a.buildAbsoluteURL)(this.baseurl, this.relurl, {
                            alwaysNormalize: !0
                        })), this._url || ""
                    },
                    set: function(t) {
                        this._url = t
                    }
                }]), t
            }(),
            g = function(t) {
                function e(e, i) {
                    var r;
                    return (r = t.call(this, i) || this)._decryptdata = null, r.rawProgramDateTime = null, r.programDateTime = null, r.tagList = [], r.duration = 0, r.sn = 0, r.levelkey = void 0, r.type = void 0, r.loader = null, r.level = -1, r.cc = 0, r.startPTS = void 0, r.endPTS = void 0, r.appendedPTS = void 0, r.startDTS = void 0, r.endDTS = void 0, r.start = 0, r.deltaPTS = void 0, r.maxStartPTS = void 0, r.minEndPTS = void 0, r.stats = new l.a, r.urlId = 0, r.data = void 0, r.bitrateTest = !1, r.title = null, r.initSegment = null, r.type = e, r
                }
                u(e, t);
                var i = e.prototype;
                return i.createInitializationVector = function(t) {
                    for (var e = new Uint8Array(16), i = 12; i < 16; i++) e[i] = t >> 8 * (15 - i) & 255;
                    return e
                }, i.setDecryptDataFromLevelKey = function(t, e) {
                    var i = t;
                    return "AES-128" === (null == t ? void 0 : t.method) && t.uri && !t.iv && ((i = o.a.fromURI(t.uri)).method = t.method, i.iv = this.createInitializationVector(e), i.keyFormat = "identity"), i
                }, i.setElementaryStreamInfo = function(t, e, i, r, n, a) {
                    void 0 === a && (a = !1);
                    var s = this.elementaryStreams,
                        o = s[t];
                    o ? (o.startPTS = Math.min(o.startPTS, e), o.endPTS = Math.max(o.endPTS, i), o.startDTS = Math.min(o.startDTS, r), o.endDTS = Math.max(o.endDTS, n)) : s[t] = {
                        startPTS: e,
                        endPTS: i,
                        startDTS: r,
                        endDTS: n,
                        partial: a
                    }
                }, i.clearElementaryStreamInfo = function() {
                    var t = this.elementaryStreams;
                    t[r.AUDIO] = null, t[r.VIDEO] = null, t[r.AUDIOVIDEO] = null
                }, c(e, [{
                    key: "decryptdata",
                    get: function() {
                        if (!this.levelkey && !this._decryptdata) return null;
                        if (!this._decryptdata && this.levelkey) {
                            var t = this.sn;
                            "number" != typeof t && (this.levelkey && "AES-128" === this.levelkey.method && !this.levelkey.iv && s.b.warn('missing IV for initialization segment with method="' + this.levelkey.method + '" - compliance issue'), t = 0), this._decryptdata = this.setDecryptDataFromLevelKey(this.levelkey, t)
                        }
                        return this._decryptdata
                    }
                }, {
                    key: "end",
                    get: function() {
                        return this.start + this.duration
                    }
                }, {
                    key: "endProgramDateTime",
                    get: function() {
                        if (null === this.programDateTime) return null;
                        if (!Object(n.a)(this.programDateTime)) return null;
                        var t = Object(n.a)(this.duration) ? this.duration : 0;
                        return this.programDateTime + 1e3 * t
                    }
                }, {
                    key: "encrypted",
                    get: function() {
                        var t;
                        return !(null === (t = this.decryptdata) || void 0 === t || !t.keyFormat || !this.decryptdata.uri)
                    }
                }]), e
            }(f),
            v = function(t) {
                function e(e, i, r, n, a) {
                    var s;
                    (s = t.call(this, r) || this).fragOffset = 0, s.duration = 0, s.gap = !1, s.independent = !1, s.relurl = void 0, s.fragment = void 0, s.index = void 0, s.stats = new l.a, s.duration = e.decimalFloatingPoint("DURATION"), s.gap = e.bool("GAP"), s.independent = e.bool("INDEPENDENT"), s.relurl = e.enumeratedString("URI"), s.fragment = i, s.index = n;
                    var o = e.enumeratedString("BYTERANGE");
                    return o && s.setByteRange(o, a), a && (s.fragOffset = a.fragOffset + a.duration), s
                }
                return u(e, t), c(e, [{
                    key: "start",
                    get: function() {
                        return this.fragment.start + this.fragOffset
                    }
                }, {
                    key: "end",
                    get: function() {
                        return this.start + this.duration
                    }
                }, {
                    key: "loaded",
                    get: function() {
                        var t = this.elementaryStreams;
                        return !!(t.audio || t.video || t.audiovideo)
                    }
                }]), e
            }(f)
    }, function(t, e, i) {
        "use strict";
        i.d(e, "b", (function() {
            return s
        })), i.d(e, "a", (function() {
            return l
        })), i.d(e, "d", (function() {
            return u
        })), i.d(e, "e", (function() {
            return h
        })), i.d(e, "c", (function() {
            return c
        })), i.d(e, "f", (function() {
            return y
        }));
        var r, n = function(t, e) {
                return e + 10 <= t.length && 73 === t[e] && 68 === t[e + 1] && 51 === t[e + 2] && t[e + 3] < 255 && t[e + 4] < 255 && t[e + 6] < 128 && t[e + 7] < 128 && t[e + 8] < 128 && t[e + 9] < 128
            },
            a = function(t, e) {
                return e + 10 <= t.length && 51 === t[e] && 68 === t[e + 1] && 73 === t[e + 2] && t[e + 3] < 255 && t[e + 4] < 255 && t[e + 6] < 128 && t[e + 7] < 128 && t[e + 8] < 128 && t[e + 9] < 128
            },
            s = function(t, e) {
                for (var i = e, r = 0; n(t, e);) {
                    r += 10, r += o(t, e + 6), a(t, e + 10) && (r += 10), e += r
                }
                if (r > 0) return t.subarray(i, i + r)
            },
            o = function(t, e) {
                var i = 0;
                return i = (127 & t[e]) << 21, i |= (127 & t[e + 1]) << 14, i |= (127 & t[e + 2]) << 7, i |= 127 & t[e + 3]
            },
            l = function(t, e) {
                return n(t, e) && o(t, e + 6) + 10 <= t.length - e
            },
            u = function(t) {
                for (var e = c(t), i = 0; i < e.length; i++) {
                    var r = e[i];
                    if (h(r)) return m(r)
                }
            },
            h = function(t) {
                return t && "PRIV" === t.key && "com.apple.streaming.transportStreamTimestamp" === t.info
            },
            d = function(t) {
                var e = String.fromCharCode(t[0], t[1], t[2], t[3]),
                    i = o(t, 4);
                return {
                    type: e,
                    size: i,
                    data: t.subarray(10, 10 + i)
                }
            },
            c = function(t) {
                for (var e = 0, i = []; n(t, e);) {
                    for (var r = o(t, e + 6), s = (e += 10) + r; e + 8 < s;) {
                        var l = d(t.subarray(e)),
                            u = f(l);
                        u && i.push(u), e += l.size + 10
                    }
                    a(t, e) && (e += 10)
                }
                return i
            },
            f = function(t) {
                return "PRIV" === t.type ? g(t) : "W" === t.type[0] ? p(t) : v(t)
            },
            g = function(t) {
                if (!(t.size < 2)) {
                    var e = y(t.data, !0),
                        i = new Uint8Array(t.data.subarray(e.length + 1));
                    return {
                        key: t.type,
                        info: e,
                        data: i.buffer
                    }
                }
            },
            v = function(t) {
                if (!(t.size < 2)) {
                    if ("TXXX" === t.type) {
                        var e = 1,
                            i = y(t.data.subarray(e), !0);
                        e += i.length + 1;
                        var r = y(t.data.subarray(e));
                        return {
                            key: t.type,
                            info: i,
                            data: r
                        }
                    }
                    var n = y(t.data.subarray(1));
                    return {
                        key: t.type,
                        data: n
                    }
                }
            },
            p = function(t) {
                if ("WXXX" === t.type) {
                    if (t.size < 2) return;
                    var e = 1,
                        i = y(t.data.subarray(e), !0);
                    e += i.length + 1;
                    var r = y(t.data.subarray(e));
                    return {
                        key: t.type,
                        info: i,
                        data: r
                    }
                }
                var n = y(t.data);
                return {
                    key: t.type,
                    data: n
                }
            },
            m = function(t) {
                if (8 === t.data.byteLength) {
                    var e = new Uint8Array(t.data),
                        i = 1 & e[3],
                        r = (e[4] << 23) + (e[5] << 15) + (e[6] << 7) + e[7];
                    return r /= 45, i && (r += 47721858.84), Math.round(r)
                }
            },
            y = function(t, e) {
                void 0 === e && (e = !1);
                var i = T();
                if (i) {
                    var r = i.decode(t);
                    if (e) {
                        var n = r.indexOf("\0");
                        return -1 !== n ? r.substring(0, n) : r
                    }
                    return r.replace(/\0/g, "")
                }
                for (var a, s, o, l = t.length, u = "", h = 0; h < l;) {
                    if (0 === (a = t[h++]) && e) return u;
                    if (0 !== a && 3 !== a) switch (a >> 4) {
                        case 0:
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                            u += String.fromCharCode(a);
                            break;
                        case 12:
                        case 13:
                            s = t[h++], u += String.fromCharCode((31 & a) << 6 | 63 & s);
                            break;
                        case 14:
                            s = t[h++], o = t[h++], u += String.fromCharCode((15 & a) << 12 | (63 & s) << 6 | (63 & o) << 0)
                    }
                }
                return u
            };

        function T() {
            return r || void 0 === self.TextDecoder || (r = new self.TextDecoder("utf-8")), r
        }
    }, function(t, e, i) {
        "use strict";
        var r;
        i.d(e, "a", (function() {
                return r
            })),
            function(t) {
                t.audioId3 = "org.id3", t.dateRange = "com.apple.quicktime.HLS", t.emsg = "https://aomedia.org/emsg/ID3"
            }(r || (r = {}))
    }, function(t, e, i) {
        "use strict";

        function r(t, e, i) {
            return Uint8Array.prototype.slice ? t.slice(e, i) : new Uint8Array(Array.prototype.slice.call(t, e, i))
        }
        i.d(e, "a", (function() {
            return r
        }))
    }, function(t, e, i) {
        "use strict";
        i.d(e, "c", (function() {
            return it
        })), i.d(e, "d", (function() {
            return nt
        })), i.d(e, "a", (function() {
            return at
        })), i.d(e, "b", (function() {
            return st
        }));
        var r = i(0),
            n = i(2),
            a = i(16),
            s = i(3),
            o = i(7),
            l = i(8);

        function u(t, e) {
            return void 0 === t && (t = ""), void 0 === e && (e = 9e4), {
                type: t,
                id: -1,
                pid: -1,
                inputTimeScale: e,
                sequenceNumber: -1,
                samples: [],
                dropped: 0
            }
        }
        var h = i(5),
            d = i(9),
            c = function() {
                function t() {
                    this._audioTrack = void 0, this._id3Track = void 0, this.frameIndex = 0, this.cachedData = null, this.basePTS = null, this.initPTS = null
                }
                var e = t.prototype;
                return e.resetInitSegment = function(t, e, i, r) {
                    this._id3Track = {
                        type: "id3",
                        id: 3,
                        pid: -1,
                        inputTimeScale: 9e4,
                        sequenceNumber: 0,
                        samples: [],
                        dropped: 0
                    }
                }, e.resetTimeStamp = function(t) {
                    this.initPTS = t, this.resetContiguity()
                }, e.resetContiguity = function() {
                    this.basePTS = null, this.frameIndex = 0
                }, e.canParse = function(t, e) {
                    return !1
                }, e.appendFrame = function(t, e, i) {}, e.demux = function(t, e) {
                    this.cachedData && (t = Object(h.b)(this.cachedData, t), this.cachedData = null);
                    var i, r, n = o.b(t, 0),
                        a = n ? n.length : 0,
                        c = this._audioTrack,
                        g = this._id3Track,
                        v = n ? o.d(n) : void 0,
                        p = t.length;
                    for ((null === this.basePTS || 0 === this.frameIndex && Object(s.a)(v)) && (this.basePTS = f(v, e, this.initPTS)), n && n.length > 0 && g.samples.push({
                            pts: this.basePTS,
                            dts: this.basePTS,
                            data: n,
                            type: l.a.audioId3
                        }), r = this.basePTS; a < p;) {
                        if (this.canParse(t, a)) {
                            var m = this.appendFrame(c, t, a);
                            m ? (this.frameIndex++, r = m.sample.pts, i = a += m.length) : a = p
                        } else o.a(t, a) ? (n = o.b(t, a), g.samples.push({
                            pts: r,
                            dts: r,
                            data: n,
                            type: l.a.audioId3
                        }), i = a += n.length) : a++;
                        if (a === p && i !== p) {
                            var y = Object(d.a)(t, i);
                            this.cachedData ? this.cachedData = Object(h.b)(this.cachedData, y) : this.cachedData = y
                        }
                    }
                    return {
                        audioTrack: c,
                        videoTrack: u(),
                        id3Track: g,
                        textTrack: u()
                    }
                }, e.demuxSampleAes = function(t, e, i) {
                    return Promise.reject(new Error("[" + this + "] This demuxer does not support Sample-AES decryption"))
                }, e.flush = function(t) {
                    var e = this.cachedData;
                    return e && (this.cachedData = null, this.demux(e, 0)), {
                        audioTrack: this._audioTrack,
                        videoTrack: u(),
                        id3Track: this._id3Track,
                        textTrack: u()
                    }
                }, e.destroy = function() {}, t
            }(),
            f = function(t, e, i) {
                return Object(s.a)(t) ? 90 * t : 9e4 * e + (i || 0)
            },
            g = c,
            v = i(1);

        function p(t, e) {
            return 255 === t[e] && 240 == (246 & t[e + 1])
        }

        function m(t, e) {
            return 1 & t[e + 1] ? 7 : 9
        }

        function y(t, e) {
            return (3 & t[e + 3]) << 11 | t[e + 4] << 3 | (224 & t[e + 5]) >>> 5
        }

        function T(t, e) {
            return e + 1 < t.length && p(t, e)
        }

        function b(t, e) {
            if (T(t, e)) {
                var i = m(t, e);
                if (e + i >= t.length) return !1;
                var r = y(t, e);
                if (r <= i) return !1;
                var n = e + r;
                return n === t.length || T(t, n)
            }
            return !1
        }

        function E(t, e, i, a, s) {
            if (!t.samplerate) {
                var o = function(t, e, i, a) {
                    var s, o, l, u, h = navigator.userAgent.toLowerCase(),
                        d = a,
                        c = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];
                    s = 1 + ((192 & e[i + 2]) >>> 6);
                    var f = (60 & e[i + 2]) >>> 2;
                    if (!(f > c.length - 1)) return l = (1 & e[i + 2]) << 2, l |= (192 & e[i + 3]) >>> 6, v.b.log("manifest codec:" + a + ", ADTS type:" + s + ", samplingIndex:" + f), /firefox/i.test(h) ? f >= 6 ? (s = 5, u = new Array(4), o = f - 3) : (s = 2, u = new Array(2), o = f) : -1 !== h.indexOf("android") ? (s = 2, u = new Array(2), o = f) : (s = 5, u = new Array(4), a && (-1 !== a.indexOf("mp4a.40.29") || -1 !== a.indexOf("mp4a.40.5")) || !a && f >= 6 ? o = f - 3 : ((a && -1 !== a.indexOf("mp4a.40.2") && (f >= 6 && 1 === l || /vivaldi/i.test(h)) || !a && 1 === l) && (s = 2, u = new Array(2)), o = f)), u[0] = s << 3, u[0] |= (14 & f) >> 1, u[1] |= (1 & f) << 7, u[1] |= l << 3, 5 === s && (u[1] |= (14 & o) >> 1, u[2] = (1 & o) << 7, u[2] |= 8, u[3] = 0), {
                        config: u,
                        samplerate: c[f],
                        channelCount: l,
                        codec: "mp4a.40." + s,
                        manifestCodec: d
                    };
                    t.trigger(r.a.ERROR, {
                        type: n.b.MEDIA_ERROR,
                        details: n.a.FRAG_PARSING_ERROR,
                        fatal: !0,
                        reason: "invalid ADTS sampling index:" + f
                    })
                }(e, i, a, s);
                if (!o) return;
                t.config = o.config, t.samplerate = o.samplerate, t.channelCount = o.channelCount, t.codec = o.codec, t.manifestCodec = o.manifestCodec, v.b.log("parsed codec:" + t.codec + ", rate:" + o.samplerate + ", channels:" + o.channelCount)
            }
        }

        function S(t) {
            return 9216e4 / t
        }

        function L(t, e, i, r, n) {
            var a, s = r + n * S(t.samplerate),
                o = function(t, e) {
                    var i = m(t, e);
                    if (e + i <= t.length) {
                        var r = y(t, e) - i;
                        if (r > 0) return {
                            headerLength: i,
                            frameLength: r
                        }
                    }
                }(e, i);
            if (o) {
                var l = o.frameLength,
                    u = o.headerLength,
                    h = u + l,
                    d = Math.max(0, i + h - e.length);
                d ? (a = new Uint8Array(h - u)).set(e.subarray(i + u, e.length), 0) : a = e.subarray(i + u, i + h);
                var c = {
                    unit: a,
                    pts: s
                };
                return d || t.samples.push(c), {
                    sample: c,
                    length: h,
                    missing: d
                }
            }
            var f = e.length - i;
            return (a = new Uint8Array(f)).set(e.subarray(i, e.length), 0), {
                sample: {
                    unit: a,
                    pts: s
                },
                length: f,
                missing: -1
            }
        }

        function A(t, e) {
            return (A = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e, t
            })(t, e)
        }
        var D = function(t) {
                var e, i;

                function r(e, i) {
                    var r;
                    return (r = t.call(this) || this).observer = void 0, r.config = void 0, r.observer = e, r.config = i, r
                }
                i = t, (e = r).prototype = Object.create(i.prototype), e.prototype.constructor = e, A(e, i);
                var n = r.prototype;
                return n.resetInitSegment = function(e, i, r, n) {
                    t.prototype.resetInitSegment.call(this, e, i, r, n), this._audioTrack = {
                        container: "audio/adts",
                        type: "audio",
                        id: 2,
                        pid: -1,
                        sequenceNumber: 0,
                        segmentCodec: "aac",
                        samples: [],
                        manifestCodec: i,
                        duration: n,
                        inputTimeScale: 9e4,
                        dropped: 0
                    }
                }, r.probe = function(t) {
                    if (!t) return !1;
                    for (var e = (o.b(t, 0) || []).length, i = t.length; e < i; e++)
                        if (b(t, e)) return v.b.log("ADTS sync word found !"), !0;
                    return !1
                }, n.canParse = function(t, e) {
                    return function(t, e) {
                        return function(t, e) {
                            return e + 5 < t.length
                        }(t, e) && p(t, e) && y(t, e) <= t.length - e
                    }(t, e)
                }, n.appendFrame = function(t, e, i) {
                    E(t, this.observer, e, i, t.manifestCodec);
                    var r = L(t, e, i, this.basePTS, this.frameIndex);
                    if (r && 0 === r.missing) return r
                }, r
            }(g),
            R = /\/emsg[-/]ID3/i,
            k = function() {
                function t(t, e) {
                    this.remainderData = null, this.timeOffset = 0, this.config = void 0, this.videoTrack = void 0, this.audioTrack = void 0, this.id3Track = void 0, this.txtTrack = void 0, this.config = e
                }
                var e = t.prototype;
                return e.resetTimeStamp = function() {}, e.resetInitSegment = function(t, e, i, r) {
                    var n = Object(h.h)(t),
                        a = this.videoTrack = u("video", 1),
                        s = this.audioTrack = u("audio", 1),
                        o = this.txtTrack = u("text", 1);
                    if (this.id3Track = u("id3", 1), this.timeOffset = 0, n.video) {
                        var l = n.video,
                            d = l.id,
                            c = l.timescale,
                            f = l.codec;
                        a.id = d, a.timescale = o.timescale = c, a.codec = f
                    }
                    if (n.audio) {
                        var g = n.audio,
                            v = g.id,
                            p = g.timescale,
                            m = g.codec;
                        s.id = v, s.timescale = p, s.codec = m
                    }
                    o.id = h.a.text, a.sampleDuration = 0, a.duration = s.duration = r
                }, e.resetContiguity = function() {}, t.probe = function(t) {
                    return t = t.length > 16384 ? t.subarray(0, 16384) : t, Object(h.c)(t, ["moof"]).length > 0
                }, e.demux = function(t, e) {
                    this.timeOffset = e;
                    var i = t,
                        r = this.videoTrack,
                        n = this.txtTrack;
                    if (this.config.progressive) {
                        this.remainderData && (i = Object(h.b)(this.remainderData, t));
                        var a = Object(h.l)(i);
                        this.remainderData = a.remainder, r.samples = a.valid || new Uint8Array
                    } else r.samples = i;
                    var s = this.extractID3Track(r, e);
                    return n.samples = Object(h.j)(e, r), {
                        videoTrack: r,
                        audioTrack: this.audioTrack,
                        id3Track: s,
                        textTrack: this.txtTrack
                    }
                }, e.flush = function() {
                    var t = this.timeOffset,
                        e = this.videoTrack,
                        i = this.txtTrack;
                    e.samples = this.remainderData || new Uint8Array, this.remainderData = null;
                    var r = this.extractID3Track(e, this.timeOffset);
                    return i.samples = Object(h.j)(t, e), {
                        videoTrack: e,
                        audioTrack: u(),
                        id3Track: r,
                        textTrack: u()
                    }
                }, e.extractID3Track = function(t, e) {
                    var i = this.id3Track;
                    if (t.samples.length) {
                        var r = Object(h.c)(t.samples, ["emsg"]);
                        r && r.forEach((function(t) {
                            var r = Object(h.g)(t);
                            if (R.test(r.schemeIdUri)) {
                                var n = Object(s.a)(r.presentationTime) ? r.presentationTime / r.timeScale : e + r.presentationTimeDelta / r.timeScale,
                                    a = r.payload;
                                i.samples.push({
                                    data: a,
                                    len: a.byteLength,
                                    dts: n,
                                    pts: n,
                                    type: l.a.emsg
                                })
                            }
                        }))
                    }
                    return i
                }, e.demuxSampleAes = function(t, e, i) {
                    return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))
                }, e.destroy = function() {}, t
            }(),
            _ = null,
            I = [32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160],
            O = [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3],
            C = [
                [0, 72, 144, 12],
                [0, 0, 0, 0],
                [0, 72, 144, 12],
                [0, 144, 144, 12]
            ],
            w = [0, 1, 1, 4];

        function x(t, e, i, r, n) {
            if (!(i + 24 > e.length)) {
                var a = P(e, i);
                if (a && i + a.frameLength <= e.length) {
                    var s = r + n * (9e4 * a.samplesPerFrame / a.sampleRate),
                        o = {
                            unit: e.subarray(i, i + a.frameLength),
                            pts: s,
                            dts: s
                        };
                    return t.config = [], t.channelCount = a.channelCount, t.samplerate = a.sampleRate, t.samples.push(o), {
                        sample: o,
                        length: a.frameLength,
                        missing: 0
                    }
                }
            }
        }

        function P(t, e) {
            var i = t[e + 1] >> 3 & 3,
                r = t[e + 1] >> 1 & 3,
                n = t[e + 2] >> 4 & 15,
                a = t[e + 2] >> 2 & 3;
            if (1 !== i && 0 !== n && 15 !== n && 3 !== a) {
                var s = t[e + 2] >> 1 & 1,
                    o = t[e + 3] >> 6,
                    l = 1e3 * I[14 * (3 === i ? 3 - r : 3 === r ? 3 : 4) + n - 1],
                    u = O[3 * (3 === i ? 0 : 2 === i ? 1 : 2) + a],
                    h = 3 === o ? 1 : 2,
                    d = C[i][r],
                    c = w[r],
                    f = 8 * d * c,
                    g = Math.floor(d * l / u + s) * c;
                if (null === _) {
                    var v = (navigator.userAgent || "").match(/Chrome\/(\d+)/i);
                    _ = v ? parseInt(v[1]) : 0
                }
                return !!_ && _ <= 87 && 2 === r && l >= 224e3 && 0 === o && (t[e + 3] = 128 | t[e + 3]), {
                    sampleRate: u,
                    channelCount: h,
                    frameLength: g,
                    samplesPerFrame: f
                }
            }
        }

        function F(t, e) {
            return 255 === t[e] && 224 == (224 & t[e + 1]) && 0 != (6 & t[e + 1])
        }

        function M(t, e) {
            return e + 1 < t.length && F(t, e)
        }

        function N(t, e) {
            if (e + 1 < t.length && F(t, e)) {
                var i = P(t, e),
                    r = 4;
                null != i && i.frameLength && (r = i.frameLength);
                var n = e + r;
                return n === t.length || M(t, n)
            }
            return !1
        }
        var U = function() {
                function t(t) {
                    this.data = void 0, this.bytesAvailable = void 0, this.word = void 0, this.bitsAvailable = void 0, this.data = t, this.bytesAvailable = t.byteLength, this.word = 0, this.bitsAvailable = 0
                }
                var e = t.prototype;
                return e.loadWord = function() {
                    var t = this.data,
                        e = this.bytesAvailable,
                        i = t.byteLength - e,
                        r = new Uint8Array(4),
                        n = Math.min(4, e);
                    if (0 === n) throw new Error("no bytes available");
                    r.set(t.subarray(i, i + n)), this.word = new DataView(r.buffer).getUint32(0), this.bitsAvailable = 8 * n, this.bytesAvailable -= n
                }, e.skipBits = function(t) {
                    var e;
                    this.bitsAvailable > t ? (this.word <<= t, this.bitsAvailable -= t) : (t -= this.bitsAvailable, t -= (e = t >> 3) >> 3, this.bytesAvailable -= e, this.loadWord(), this.word <<= t, this.bitsAvailable -= t)
                }, e.readBits = function(t) {
                    var e = Math.min(this.bitsAvailable, t),
                        i = this.word >>> 32 - e;
                    return t > 32 && v.b.error("Cannot read more than 32 bits at a time"), this.bitsAvailable -= e, this.bitsAvailable > 0 ? this.word <<= e : this.bytesAvailable > 0 && this.loadWord(), (e = t - e) > 0 && this.bitsAvailable ? i << e | this.readBits(e) : i
                }, e.skipLZ = function() {
                    var t;
                    for (t = 0; t < this.bitsAvailable; ++t)
                        if (0 != (this.word & 2147483648 >>> t)) return this.word <<= t, this.bitsAvailable -= t, t;
                    return this.loadWord(), t + this.skipLZ()
                }, e.skipUEG = function() {
                    this.skipBits(1 + this.skipLZ())
                }, e.skipEG = function() {
                    this.skipBits(1 + this.skipLZ())
                }, e.readUEG = function() {
                    var t = this.skipLZ();
                    return this.readBits(t + 1) - 1
                }, e.readEG = function() {
                    var t = this.readUEG();
                    return 1 & t ? 1 + t >>> 1 : -1 * (t >>> 1)
                }, e.readBoolean = function() {
                    return 1 === this.readBits(1)
                }, e.readUByte = function() {
                    return this.readBits(8)
                }, e.readUShort = function() {
                    return this.readBits(16)
                }, e.readUInt = function() {
                    return this.readBits(32)
                }, e.skipScalingList = function(t) {
                    for (var e = 8, i = 8, r = 0; r < t; r++) 0 !== i && (i = (e + this.readEG() + 256) % 256), e = 0 === i ? e : i
                }, e.readSPS = function() {
                    var t, e, i, r = 0,
                        n = 0,
                        a = 0,
                        s = 0,
                        o = this.readUByte.bind(this),
                        l = this.readBits.bind(this),
                        u = this.readUEG.bind(this),
                        h = this.readBoolean.bind(this),
                        d = this.skipBits.bind(this),
                        c = this.skipEG.bind(this),
                        f = this.skipUEG.bind(this),
                        g = this.skipScalingList.bind(this);
                    o();
                    var v = o();
                    if (l(5), d(3), o(), f(), 100 === v || 110 === v || 122 === v || 244 === v || 44 === v || 83 === v || 86 === v || 118 === v || 128 === v) {
                        var p = u();
                        if (3 === p && d(1), f(), f(), d(1), h())
                            for (e = 3 !== p ? 8 : 12, i = 0; i < e; i++) h() && g(i < 6 ? 16 : 64)
                    }
                    f();
                    var m = u();
                    if (0 === m) u();
                    else if (1 === m)
                        for (d(1), c(), c(), t = u(), i = 0; i < t; i++) c();
                    f(), d(1);
                    var y = u(),
                        T = u(),
                        b = l(1);
                    0 === b && d(1), d(1), h() && (r = u(), n = u(), a = u(), s = u());
                    var E = [1, 1];
                    if (h() && h()) switch (o()) {
                        case 1:
                            E = [1, 1];
                            break;
                        case 2:
                            E = [12, 11];
                            break;
                        case 3:
                            E = [10, 11];
                            break;
                        case 4:
                            E = [16, 11];
                            break;
                        case 5:
                            E = [40, 33];
                            break;
                        case 6:
                            E = [24, 11];
                            break;
                        case 7:
                            E = [20, 11];
                            break;
                        case 8:
                            E = [32, 11];
                            break;
                        case 9:
                            E = [80, 33];
                            break;
                        case 10:
                            E = [18, 11];
                            break;
                        case 11:
                            E = [15, 11];
                            break;
                        case 12:
                            E = [64, 33];
                            break;
                        case 13:
                            E = [160, 99];
                            break;
                        case 14:
                            E = [4, 3];
                            break;
                        case 15:
                            E = [3, 2];
                            break;
                        case 16:
                            E = [2, 1];
                            break;
                        case 255:
                            E = [o() << 8 | o(), o() << 8 | o()]
                    }
                    return {
                        width: Math.ceil(16 * (y + 1) - 2 * r - 2 * n),
                        height: (2 - b) * (T + 1) * 16 - (b ? 2 : 4) * (a + s),
                        pixelRatio: E
                    }
                }, e.readSliceType = function() {
                    return this.readUByte(), this.readUEG(), this.readUEG()
                }, t
            }(),
            B = function() {
                function t(t, e, i) {
                    this.keyData = void 0, this.decrypter = void 0, this.keyData = i, this.decrypter = new a.a(t, e, {
                        removePKCS7Padding: !1
                    })
                }
                var e = t.prototype;
                return e.decryptBuffer = function(t, e) {
                    this.decrypter.decrypt(t, this.keyData.key.buffer, this.keyData.iv.buffer, e)
                }, e.decryptAacSample = function(t, e, i, r) {
                    var n = t[e].unit;
                    if (!(n.length <= 16)) {
                        var a = n.subarray(16, n.length - n.length % 16),
                            s = a.buffer.slice(a.byteOffset, a.byteOffset + a.length),
                            o = this;
                        this.decryptBuffer(s, (function(a) {
                            var s = new Uint8Array(a);
                            n.set(s, 16), r || o.decryptAacSamples(t, e + 1, i)
                        }))
                    }
                }, e.decryptAacSamples = function(t, e, i) {
                    for (;; e++) {
                        if (e >= t.length) return void i();
                        if (!(t[e].unit.length < 32)) {
                            var r = this.decrypter.isSync();
                            if (this.decryptAacSample(t, e, i, r), !r) return
                        }
                    }
                }, e.getAvcEncryptedData = function(t) {
                    for (var e = 16 * Math.floor((t.length - 48) / 160) + 16, i = new Int8Array(e), r = 0, n = 32; n < t.length - 16; n += 160, r += 16) i.set(t.subarray(n, n + 16), r);
                    return i
                }, e.getAvcDecryptedUnit = function(t, e) {
                    for (var i = new Uint8Array(e), r = 0, n = 32; n < t.length - 16; n += 160, r += 16) t.set(i.subarray(r, r + 16), n);
                    return t
                }, e.decryptAvcSample = function(t, e, i, r, n, a) {
                    var s = Y(n.data),
                        o = this.getAvcEncryptedData(s),
                        l = this;
                    this.decryptBuffer(o.buffer, (function(o) {
                        n.data = l.getAvcDecryptedUnit(s, o), a || l.decryptAvcSamples(t, e, i + 1, r)
                    }))
                }, e.decryptAvcSamples = function(t, e, i, r) {
                    if (t instanceof Uint8Array) throw new Error("Cannot decrypt samples of type Uint8Array");
                    for (;; e++, i = 0) {
                        if (e >= t.length) return void r();
                        for (var n = t[e].units; !(i >= n.length); i++) {
                            var a = n[i];
                            if (!(a.data.length <= 48 || 1 !== a.type && 5 !== a.type)) {
                                var s = this.decrypter.isSync();
                                if (this.decryptAvcSample(t, e, i, r, a, s), !s) return
                            }
                        }
                    }
                }, t
            }();

        function G() {
            return (G = Object.assign ? Object.assign.bind() : function(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var i = arguments[e];
                    for (var r in i) Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r])
                }
                return t
            }).apply(this, arguments)
        }

        function j(t, e, i, r) {
            return {
                key: t,
                frame: !1,
                pts: e,
                dts: i,
                units: [],
                debug: r,
                length: 0
            }
        }

        function K(t, e) {
            return (31 & t[e + 10]) << 8 | t[e + 11]
        }

        function H(t, e, i, r) {
            var n = {
                    audio: -1,
                    avc: -1,
                    id3: -1,
                    segmentCodec: "aac"
                },
                a = e + 3 + ((15 & t[e + 1]) << 8 | t[e + 2]) - 4;
            for (e += 12 + ((15 & t[e + 10]) << 8 | t[e + 11]); e < a;) {
                var s = (31 & t[e + 1]) << 8 | t[e + 2];
                switch (t[e]) {
                    case 207:
                        if (!r) {
                            v.b.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");
                            break
                        }
                    case 15:
                        -1 === n.audio && (n.audio = s);
                        break;
                    case 21:
                        -1 === n.id3 && (n.id3 = s);
                        break;
                    case 219:
                        if (!r) {
                            v.b.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");
                            break
                        }
                    case 27:
                        -1 === n.avc && (n.avc = s);
                        break;
                    case 3:
                    case 4:
                        !0 !== i.mpeg && !0 !== i.mp3 ? v.b.log("MPEG audio found, not supported in this browser") : -1 === n.audio && (n.audio = s, n.segmentCodec = "mp3");
                        break;
                    case 36:
                        v.b.warn("Unsupported HEVC stream type found")
                }
                e += 5 + ((15 & t[e + 3]) << 8 | t[e + 4])
            }
            return n
        }

        function V(t) {
            var e, i, r, n, a, s = 0,
                o = t.data;
            if (!t || 0 === t.size) return null;
            for (; o[0].length < 19 && o.length > 1;) {
                var l = new Uint8Array(o[0].length + o[1].length);
                l.set(o[0]), l.set(o[1], o[0].length), o[0] = l, o.splice(1, 1)
            }
            if (1 === ((e = o[0])[0] << 16) + (e[1] << 8) + e[2]) {
                if ((i = (e[4] << 8) + e[5]) && i > t.size - 6) return null;
                var u = e[7];
                192 & u && (n = 536870912 * (14 & e[9]) + 4194304 * (255 & e[10]) + 16384 * (254 & e[11]) + 128 * (255 & e[12]) + (254 & e[13]) / 2, 64 & u ? n - (a = 536870912 * (14 & e[14]) + 4194304 * (255 & e[15]) + 16384 * (254 & e[16]) + 128 * (255 & e[17]) + (254 & e[18]) / 2) > 54e5 && (v.b.warn(Math.round((n - a) / 9e4) + "s delta between PTS and DTS, align them"), n = a) : a = n);
                var h = (r = e[8]) + 9;
                if (t.size <= h) return null;
                t.size -= h;
                for (var d = new Uint8Array(t.size), c = 0, f = o.length; c < f; c++) {
                    var g = (e = o[c]).byteLength;
                    if (h) {
                        if (h > g) {
                            h -= g;
                            continue
                        }
                        e = e.subarray(h), g -= h, h = 0
                    }
                    d.set(e, s), s += g
                }
                return i && (i -= r + 3), {
                    data: d,
                    pts: n,
                    dts: a,
                    len: i
                }
            }
            return null
        }

        function W(t, e) {
            if (t.units.length && t.frame) {
                if (void 0 === t.pts) {
                    var i = e.samples,
                        r = i.length;
                    if (!r) return void e.dropped++;
                    var n = i[r - 1];
                    t.pts = n.pts, t.dts = n.dts
                }
                e.samples.push(t)
            }
            t.debug.length && v.b.log(t.pts + "/" + t.dts + ":" + t.debug)
        }

        function Y(t) {
            for (var e = t.byteLength, i = [], r = 1; r < e - 2;) 0 === t[r] && 0 === t[r + 1] && 3 === t[r + 2] ? (i.push(r + 2), r += 2) : r++;
            if (0 === i.length) return t;
            var n = e - i.length,
                a = new Uint8Array(n),
                s = 0;
            for (r = 0; r < n; s++, r++) s === i[0] && (s++, i.shift()), a[r] = t[s];
            return a
        }
        var q = function() {
            function t(t, e, i) {
                this.observer = void 0, this.config = void 0, this.typeSupported = void 0, this.sampleAes = null, this.pmtParsed = !1, this.audioCodec = void 0, this.videoCodec = void 0, this._duration = 0, this._pmtId = -1, this._avcTrack = void 0, this._audioTrack = void 0, this._id3Track = void 0, this._txtTrack = void 0, this.aacOverFlow = null, this.avcSample = null, this.remainderData = null, this.observer = t, this.config = e, this.typeSupported = i
            }
            t.probe = function(t) {
                return 71 === t[0] && 71 === t[188]
            }, t.createTrack = function(t, e) {
                return {
                    container: "video" === t || "audio" === t ? "video/mp2t" : void 0,
                    type: t,
                    id: h.a[t],
                    pid: -1,
                    inputTimeScale: 9e4,
                    sequenceNumber: 0,
                    samples: [],
                    dropped: 0,
                    duration: "audio" === t ? e : void 0
                }
            };
            var e = t.prototype;
            return e.resetInitSegment = function(e, i, r, n) {
                this.pmtParsed = !1, this._pmtId = -1, this._avcTrack = t.createTrack("video"), this._audioTrack = t.createTrack("audio", n), this._id3Track = t.createTrack("id3"), this._txtTrack = t.createTrack("text"), this._audioTrack.segmentCodec = "aac", this.aacOverFlow = null, this.avcSample = null, this.remainderData = null, this.audioCodec = i, this.videoCodec = r, this._duration = n
            }, e.resetTimeStamp = function() {}, e.resetContiguity = function() {
                var t = this._audioTrack,
                    e = this._avcTrack,
                    i = this._id3Track;
                t && (t.pesData = null), e && (e.pesData = null), i && (i.pesData = null), this.aacOverFlow = null
            }, e.demux = function(t, e, i, a) {
                var s;
                void 0 === i && (i = !1), void 0 === a && (a = !1), i || (this.sampleAes = null);
                var o = this._avcTrack,
                    l = this._audioTrack,
                    u = this._id3Track,
                    d = this._txtTrack,
                    c = o.pid,
                    f = o.pesData,
                    g = l.pid,
                    p = u.pid,
                    m = l.pesData,
                    y = u.pesData,
                    T = null,
                    b = this.pmtParsed,
                    E = this._pmtId,
                    S = t.length;
                if (this.remainderData && (S = (t = Object(h.b)(this.remainderData, t)).length, this.remainderData = null), S < 188 && !a) return this.remainderData = t, {
                    audioTrack: l,
                    videoTrack: o,
                    id3Track: u,
                    textTrack: d
                };
                (S -= S % 188) < t.byteLength && !a && (this.remainderData = new Uint8Array(t.buffer, S, t.buffer.byteLength - S));
                for (var L = 0, A = 0; A < S; A += 188)
                    if (71 === t[A]) {
                        var D = !!(64 & t[A + 1]),
                            R = ((31 & t[A + 1]) << 8) + t[A + 2],
                            k = void 0;
                        if ((48 & t[A + 3]) >> 4 > 1) {
                            if ((k = A + 5 + t[A + 4]) === A + 188) continue
                        } else k = A + 4;
                        switch (R) {
                            case c:
                                D && (f && (s = V(f)) && this.parseAVCPES(o, d, s, !1), f = {
                                    data: [],
                                    size: 0
                                }), f && (f.data.push(t.subarray(k, A + 188)), f.size += A + 188 - k);
                                break;
                            case g:
                                if (D) {
                                    if (m && (s = V(m))) switch (l.segmentCodec) {
                                        case "aac":
                                            this.parseAACPES(l, s);
                                            break;
                                        case "mp3":
                                            this.parseMPEGPES(l, s)
                                    }
                                    m = {
                                        data: [],
                                        size: 0
                                    }
                                }
                                m && (m.data.push(t.subarray(k, A + 188)), m.size += A + 188 - k);
                                break;
                            case p:
                                D && (y && (s = V(y)) && this.parseID3PES(u, s), y = {
                                    data: [],
                                    size: 0
                                }), y && (y.data.push(t.subarray(k, A + 188)), y.size += A + 188 - k);
                                break;
                            case 0:
                                D && (k += t[k] + 1), E = this._pmtId = K(t, k);
                                break;
                            case E:
                                D && (k += t[k] + 1);
                                var _ = H(t, k, this.typeSupported, i);
                                (c = _.avc) > 0 && (o.pid = c), (g = _.audio) > 0 && (l.pid = g, l.segmentCodec = _.segmentCodec), (p = _.id3) > 0 && (u.pid = p), null === T || b || (v.b.log("unknown PID '" + T + "' in TS found"), T = null), b = this.pmtParsed = !0;
                                break;
                            case 17:
                            case 8191:
                                break;
                            default:
                                T = R
                        }
                    } else L++;
                L > 0 && this.observer.emit(r.a.ERROR, r.a.ERROR, {
                    type: n.b.MEDIA_ERROR,
                    details: n.a.FRAG_PARSING_ERROR,
                    fatal: !1,
                    reason: "Found " + L + " TS packet/s that do not start with 0x47"
                }), o.pesData = f, l.pesData = m, u.pesData = y;
                var I = {
                    audioTrack: l,
                    videoTrack: o,
                    id3Track: u,
                    textTrack: d
                };
                return a && this.extractRemainingSamples(I), I
            }, e.flush = function() {
                var t, e = this.remainderData;
                return this.remainderData = null, t = e ? this.demux(e, -1, !1, !0) : {
                    videoTrack: this._avcTrack,
                    audioTrack: this._audioTrack,
                    id3Track: this._id3Track,
                    textTrack: this._txtTrack
                }, this.extractRemainingSamples(t), this.sampleAes ? this.decrypt(t, this.sampleAes) : t
            }, e.extractRemainingSamples = function(t) {
                var e, i = t.audioTrack,
                    r = t.videoTrack,
                    n = t.id3Track,
                    a = t.textTrack,
                    s = r.pesData,
                    o = i.pesData,
                    l = n.pesData;
                if (s && (e = V(s)) ? (this.parseAVCPES(r, a, e, !0), r.pesData = null) : r.pesData = s, o && (e = V(o))) {
                    switch (i.segmentCodec) {
                        case "aac":
                            this.parseAACPES(i, e);
                            break;
                        case "mp3":
                            this.parseMPEGPES(i, e)
                    }
                    i.pesData = null
                } else null != o && o.size && v.b.log("last AAC PES packet truncated,might overlap between fragments"), i.pesData = o;
                l && (e = V(l)) ? (this.parseID3PES(n, e), n.pesData = null) : n.pesData = l
            }, e.demuxSampleAes = function(t, e, i) {
                var r = this.demux(t, i, !0, !this.config.progressive),
                    n = this.sampleAes = new B(this.observer, this.config, e);
                return this.decrypt(r, n)
            }, e.decrypt = function(t, e) {
                return new Promise((function(i) {
                    var r = t.audioTrack,
                        n = t.videoTrack;
                    r.samples && "aac" === r.segmentCodec ? e.decryptAacSamples(r.samples, 0, (function() {
                        n.samples ? e.decryptAvcSamples(n.samples, 0, 0, (function() {
                            i(t)
                        })) : i(t)
                    })) : n.samples && e.decryptAvcSamples(n.samples, 0, 0, (function() {
                        i(t)
                    }))
                }))
            }, e.destroy = function() {
                this._duration = 0
            }, e.parseAVCPES = function(t, e, i, r) {
                var n, a = this,
                    s = this.parseAVCNALu(t, i.data),
                    o = this.avcSample,
                    l = !1;
                i.data = null, o && s.length && !t.audFound && (W(o, t), o = this.avcSample = j(!1, i.pts, i.dts, "")), s.forEach((function(r) {
                    switch (r.type) {
                        case 1:
                            n = !0, o || (o = a.avcSample = j(!0, i.pts, i.dts, "")), o.frame = !0;
                            var s = r.data;
                            if (l && s.length > 4) {
                                var u = new U(s).readSliceType();
                                2 !== u && 4 !== u && 7 !== u && 9 !== u || (o.key = !0)
                            }
                            break;
                        case 5:
                            n = !0, o || (o = a.avcSample = j(!0, i.pts, i.dts, "")), o.key = !0, o.frame = !0;
                            break;
                        case 6:
                            n = !0, Object(h.i)(Y(r.data), i.pts, e.samples);
                            break;
                        case 7:
                            if (n = !0, l = !0, !t.sps) {
                                var d = new U(r.data).readSPS();
                                t.width = d.width, t.height = d.height, t.pixelRatio = d.pixelRatio, t.sps = [r.data], t.duration = a._duration;
                                for (var c = r.data.subarray(1, 4), f = "avc1.", g = 0; g < 3; g++) {
                                    var v = c[g].toString(16);
                                    v.length < 2 && (v = "0" + v), f += v
                                }
                                t.codec = f
                            }
                            break;
                        case 8:
                            n = !0, t.pps || (t.pps = [r.data]);
                            break;
                        case 9:
                            n = !1, t.audFound = !0, o && W(o, t), o = a.avcSample = j(!1, i.pts, i.dts, "");
                            break;
                        case 12:
                            n = !0;
                            break;
                        default:
                            n = !1, o && (o.debug += "unknown NAL " + r.type + " ")
                    }
                    o && n && o.units.push(r)
                })), r && o && (W(o, t), this.avcSample = null)
            }, e.getLastNalUnit = function(t) {
                var e, i, r = this.avcSample;
                if (r && 0 !== r.units.length || (r = t[t.length - 1]), null !== (e = r) && void 0 !== e && e.units) {
                    var n = r.units;
                    i = n[n.length - 1]
                }
                return i
            }, e.parseAVCNALu = function(t, e) {
                var i, r, n = e.byteLength,
                    a = t.naluState || 0,
                    s = a,
                    o = [],
                    l = 0,
                    u = -1,
                    h = 0;
                for (-1 === a && (u = 0, h = 31 & e[0], a = 0, l = 1); l < n;)
                    if (i = e[l++], a)
                        if (1 !== a)
                            if (i)
                                if (1 === i) {
                                    if (u >= 0) {
                                        var d = {
                                            data: e.subarray(u, l - a - 1),
                                            type: h
                                        };
                                        o.push(d)
                                    } else {
                                        var c = this.getLastNalUnit(t.samples);
                                        if (c && (s && l <= 4 - s && c.state && (c.data = c.data.subarray(0, c.data.byteLength - s)), (r = l - a - 1) > 0)) {
                                            var f = new Uint8Array(c.data.byteLength + r);
                                            f.set(c.data, 0), f.set(e.subarray(0, r), c.data.byteLength), c.data = f, c.state = 0
                                        }
                                    }
                                    l < n ? (u = l, h = 31 & e[l], a = 0) : a = -1
                                } else a = 0;
                else a = 3;
                else a = i ? 0 : 2;
                else a = i ? 0 : 1;
                if (u >= 0 && a >= 0) {
                    var g = {
                        data: e.subarray(u, n),
                        type: h,
                        state: a
                    };
                    o.push(g)
                }
                if (0 === o.length) {
                    var v = this.getLastNalUnit(t.samples);
                    if (v) {
                        var p = new Uint8Array(v.data.byteLength + e.byteLength);
                        p.set(v.data, 0), p.set(e, v.data.byteLength), v.data = p
                    }
                }
                return t.naluState = a, o
            }, e.parseAACPES = function(t, e) {
                var i, a, s, o, l, u = 0,
                    h = this.aacOverFlow,
                    d = e.data;
                if (h) {
                    this.aacOverFlow = null;
                    var c = h.missing,
                        f = h.sample.unit.byteLength;
                    if (-1 === c) {
                        var g = new Uint8Array(f + d.byteLength);
                        g.set(h.sample.unit, 0), g.set(d, f), d = g
                    } else {
                        var p = f - c;
                        h.sample.unit.set(d.subarray(0, c), p), t.samples.push(h.sample), u = h.missing
                    }
                }
                for (i = u, a = d.length; i < a - 1 && !T(d, i); i++);
                if (i !== u && (i < a - 1 ? (s = "AAC PES did not start with ADTS header,offset:" + i, o = !1) : (s = "no ADTS header found in AAC PES", o = !0), v.b.warn("parsing error:" + s), this.observer.emit(r.a.ERROR, r.a.ERROR, {
                        type: n.b.MEDIA_ERROR,
                        details: n.a.FRAG_PARSING_ERROR,
                        fatal: o,
                        reason: s
                    }), o)) return;
                if (E(t, this.observer, d, i, this.audioCodec), void 0 !== e.pts) l = e.pts;
                else {
                    if (!h) return void v.b.warn("[tsdemuxer]: AAC PES unknown PTS");
                    var m = S(t.samplerate);
                    l = h.sample.pts + m
                }
                for (var y, b = 0; i < a;) {
                    if (i += (y = L(t, d, i, l, b)).length, y.missing) {
                        this.aacOverFlow = y;
                        break
                    }
                    for (b++; i < a - 1 && !T(d, i); i++);
                }
            }, e.parseMPEGPES = function(t, e) {
                var i = e.data,
                    r = i.length,
                    n = 0,
                    a = 0,
                    s = e.pts;
                if (void 0 !== s)
                    for (; a < r;)
                        if (M(i, a)) {
                            var o = x(t, i, a, s, n);
                            if (!o) break;
                            a += o.length, n++
                        } else a++;
                else v.b.warn("[tsdemuxer]: MPEG PES unknown PTS")
            }, e.parseID3PES = function(t, e) {
                if (void 0 !== e.pts) {
                    var i = G({}, e, {
                        type: this._avcTrack ? l.a.emsg : l.a.audioId3
                    });
                    t.samples.push(i)
                } else v.b.warn("[tsdemuxer]: ID3 PES unknown PTS")
            }, t
        }();

        function z(t, e) {
            return (z = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e, t
            })(t, e)
        }
        var X = function(t) {
                var e, i;

                function r() {
                    return t.apply(this, arguments) || this
                }
                i = t, (e = r).prototype = Object.create(i.prototype), e.prototype.constructor = e, z(e, i);
                var n = r.prototype;
                return n.resetInitSegment = function(e, i, r, n) {
                    t.prototype.resetInitSegment.call(this, e, i, r, n), this._audioTrack = {
                        container: "audio/mpeg",
                        type: "audio",
                        id: 2,
                        pid: -1,
                        sequenceNumber: 0,
                        segmentCodec: "mp3",
                        samples: [],
                        manifestCodec: i,
                        duration: n,
                        inputTimeScale: 9e4,
                        dropped: 0
                    }
                }, r.probe = function(t) {
                    if (!t) return !1;
                    for (var e = (o.b(t, 0) || []).length, i = t.length; e < i; e++)
                        if (N(t, e)) return v.b.log("MPEG Audio sync word found !"), !0;
                    return !1
                }, n.canParse = function(t, e) {
                    return function(t, e) {
                        return F(t, e) && 4 <= t.length - e
                    }(t, e)
                }, n.appendFrame = function(t, e, i) {
                    if (null !== this.basePTS) return x(t, e, i, this.basePTS, this.frameIndex)
                }, r
            }(g),
            Q = i(13),
            $ = i(6);

        function J(t, e) {
            var i = null == t ? void 0 : t.codec;
            return i && i.length > 4 ? i : "hvc1" === i || "hev1" === i ? "hvc1.1.c.L120.90" : "av01" === i ? "av01.0.04M.08" : "avc1" === i || e === $.a.VIDEO ? "avc1.42e01e" : "mp4a.40.5"
        }
        var Z, tt = function() {
            function t() {
                this.emitInitSegment = !1, this.audioCodec = void 0, this.videoCodec = void 0, this.initData = void 0, this.initPTS = void 0, this.initTracks = void 0, this.lastEndTime = null
            }
            var e = t.prototype;
            return e.destroy = function() {}, e.resetTimeStamp = function(t) {
                this.initPTS = t, this.lastEndTime = null
            }, e.resetNextTimestamp = function() {
                this.lastEndTime = null
            }, e.resetInitSegment = function(t, e, i) {
                this.audioCodec = e, this.videoCodec = i, this.generateInitSegment(t), this.emitInitSegment = !0
            }, e.generateInitSegment = function(t) {
                var e = this.audioCodec,
                    i = this.videoCodec;
                if (!t || !t.byteLength) return this.initTracks = void 0, void(this.initData = void 0);
                var r = this.initData = Object(h.h)(t);
                e || (e = J(r.audio, $.a.AUDIO)), i || (i = J(r.video, $.a.VIDEO));
                var n = {};
                r.audio && r.video ? n.audiovideo = {
                    container: "video/mp4",
                    codec: e + "," + i,
                    initSegment: t,
                    id: "main"
                } : r.audio ? n.audio = {
                    container: "audio/mp4",
                    codec: e,
                    initSegment: t,
                    id: "audio"
                } : r.video ? n.video = {
                    container: "video/mp4",
                    codec: i,
                    initSegment: t,
                    id: "main"
                } : v.b.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."), this.initTracks = n
            }, e.remux = function(t, e, i, r, n) {
                var a, o = this.initPTS,
                    l = this.lastEndTime,
                    u = {
                        audio: void 0,
                        video: void 0,
                        text: r,
                        id3: i,
                        initSegment: void 0
                    };
                Object(s.a)(l) || (l = this.lastEndTime = n || 0);
                var d = e.samples;
                if (!d || !d.length) return u;
                var c = {
                        initPTS: void 0,
                        timescale: 1
                    },
                    f = this.initData;
                if (f && f.length || (this.generateInitSegment(d), f = this.initData), !f || !f.length) return v.b.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."), u;
                this.emitInitSegment && (c.tracks = this.initTracks, this.emitInitSegment = !1);
                var g = Object(h.e)(f, d);
                Object(s.a)(o) || (this.initPTS = c.initPTS = o = g - n);
                var p = Object(h.d)(d, f),
                    m = t ? g - o : l,
                    y = m + p;
                Object(h.f)(f, d, o), p > 0 ? this.lastEndTime = y : (v.b.warn("Duration parsed from mp4 should be greater than zero"), this.resetNextTimestamp());
                var T = !!f.audio,
                    b = !!f.video,
                    E = "";
                T && (E += "audio"), b && (E += "video");
                var S = {
                    data1: d,
                    startPTS: m,
                    startDTS: m,
                    endPTS: y,
                    endDTS: y,
                    type: E,
                    hasAudio: T,
                    hasVideo: b,
                    nb: 1,
                    dropped: 0
                };
                u.audio = "audio" === S.type ? S : void 0, u.video = "audio" !== S.type ? S : void 0, u.initSegment = c;
                var L = null != (a = this.initPTS) ? a : 0;
                return u.id3 = Object(Q.b)(i, n, L, L), r.samples.length && (u.text = Object(Q.c)(r, n, L)), u
            }, t
        }();
        try {
            Z = self.performance.now.bind(self.performance)
        } catch (t) {
            v.b.debug("Unable to use Performance API on this environment"), Z = self.Date.now
        }
        var et = [{
                demux: q,
                remux: Q.a
            }, {
                demux: k,
                remux: tt
            }, {
                demux: D,
                remux: Q.a
            }, {
                demux: X,
                remux: Q.a
            }],
            it = function() {
                function t(t, e, i, r, n) {
                    this.observer = void 0, this.typeSupported = void 0, this.config = void 0, this.vendor = void 0, this.id = void 0, this.demuxer = void 0, this.remuxer = void 0, this.decrypter = void 0, this.probe = void 0, this.decryptionPromise = null, this.transmuxConfig = void 0, this.currentTransmuxState = void 0, this.observer = t, this.typeSupported = e, this.config = i, this.vendor = r, this.id = n
                }
                var e = t.prototype;
                return e.configure = function(t) {
                    this.transmuxConfig = t, this.decrypter && this.decrypter.reset()
                }, e.push = function(t, e, i, r) {
                    var n = this,
                        a = i.transmuxing;
                    a.executeStart = Z();
                    var s = new Uint8Array(t),
                        o = this.config,
                        l = this.currentTransmuxState,
                        u = this.transmuxConfig;
                    r && (this.currentTransmuxState = r);
                    var h = r || l,
                        d = h.contiguous,
                        c = h.discontinuity,
                        f = h.trackSwitch,
                        g = h.accurateTimeOffset,
                        v = h.timeOffset,
                        p = h.initSegmentChange,
                        m = u.audioCodec,
                        y = u.videoCodec,
                        T = u.defaultInitPts,
                        b = u.duration,
                        E = u.initSegmentData;
                    (c || f || p) && this.resetInitSegment(E, m, y, b), (c || p) && this.resetInitialTimestamp(T), d || this.resetContiguity();
                    var S = function(t, e) {
                        var i = null;
                        t.byteLength > 0 && null != e && null != e.key && null !== e.iv && null != e.method && (i = e);
                        return i
                    }(s, e);
                    if (S && "AES-128" === S.method) {
                        var L = this.getDecrypter();
                        if (!o.enableSoftwareAES) return this.decryptionPromise = L.webCryptoDecrypt(s, S.key.buffer, S.iv.buffer).then((function(t) {
                            var e = n.push(t, null, i);
                            return n.decryptionPromise = null, e
                        })), this.decryptionPromise;
                        var A = L.softwareDecrypt(s, S.key.buffer, S.iv.buffer);
                        if (!A) return a.executeEnd = Z(), rt(i);
                        s = new Uint8Array(A)
                    }
                    this.needsProbing(s, c, f) && this.configureTransmuxer(s, u);
                    var D = this.transmux(s, S, v, g, i),
                        R = this.currentTransmuxState;
                    return R.contiguous = !0, R.discontinuity = !1, R.trackSwitch = !1, a.executeEnd = Z(), D
                }, e.flush = function(t) {
                    var e = this,
                        i = t.transmuxing;
                    i.executeStart = Z();
                    var a = this.decrypter,
                        s = this.currentTransmuxState,
                        o = this.decryptionPromise;
                    if (o) return o.then((function() {
                        return e.flush(t)
                    }));
                    var l = [],
                        u = s.timeOffset;
                    if (a) {
                        var h = a.flush();
                        h && l.push(this.push(h, null, t))
                    }
                    var d = this.demuxer,
                        c = this.remuxer;
                    if (!d || !c) return this.observer.emit(r.a.ERROR, r.a.ERROR, {
                        type: n.b.MEDIA_ERROR,
                        details: n.a.FRAG_PARSING_ERROR,
                        fatal: !0,
                        reason: "no demux matching with content found"
                    }), i.executeEnd = Z(), [rt(t)];
                    var f = d.flush(u);
                    return nt(f) ? f.then((function(i) {
                        return e.flushRemux(l, i, t), l
                    })) : (this.flushRemux(l, f, t), l)
                }, e.flushRemux = function(t, e, i) {
                    var r = e.audioTrack,
                        n = e.videoTrack,
                        a = e.id3Track,
                        s = e.textTrack,
                        o = this.currentTransmuxState,
                        l = o.accurateTimeOffset,
                        u = o.timeOffset;
                    v.b.log("[transmuxer.ts]: Flushed fragment " + i.sn + (i.part > -1 ? " p: " + i.part : "") + " of level " + i.level);
                    var h = this.remuxer.remux(r, n, a, s, u, l, !0, this.id);
                    t.push({
                        remuxResult: h,
                        chunkMeta: i
                    }), i.transmuxing.executeEnd = Z()
                }, e.resetInitialTimestamp = function(t) {
                    var e = this.demuxer,
                        i = this.remuxer;
                    e && i && (e.resetTimeStamp(t), i.resetTimeStamp(t))
                }, e.resetContiguity = function() {
                    var t = this.demuxer,
                        e = this.remuxer;
                    t && e && (t.resetContiguity(), e.resetNextTimestamp())
                }, e.resetInitSegment = function(t, e, i, r) {
                    var n = this.demuxer,
                        a = this.remuxer;
                    n && a && (n.resetInitSegment(t, e, i, r), a.resetInitSegment(t, e, i))
                }, e.destroy = function() {
                    this.demuxer && (this.demuxer.destroy(), this.demuxer = void 0), this.remuxer && (this.remuxer.destroy(), this.remuxer = void 0)
                }, e.transmux = function(t, e, i, r, n) {
                    return e && "SAMPLE-AES" === e.method ? this.transmuxSampleAes(t, e, i, r, n) : this.transmuxUnencrypted(t, i, r, n)
                }, e.transmuxUnencrypted = function(t, e, i, r) {
                    var n = this.demuxer.demux(t, e, !1, !this.config.progressive),
                        a = n.audioTrack,
                        s = n.videoTrack,
                        o = n.id3Track,
                        l = n.textTrack;
                    return {
                        remuxResult: this.remuxer.remux(a, s, o, l, e, i, !1, this.id),
                        chunkMeta: r
                    }
                }, e.transmuxSampleAes = function(t, e, i, r, n) {
                    var a = this;
                    return this.demuxer.demuxSampleAes(t, e, i).then((function(t) {
                        return {
                            remuxResult: a.remuxer.remux(t.audioTrack, t.videoTrack, t.id3Track, t.textTrack, i, r, !1, a.id),
                            chunkMeta: n
                        }
                    }))
                }, e.configureTransmuxer = function(t, e) {
                    for (var i, r = this.config, n = this.observer, a = this.typeSupported, s = this.vendor, o = e.audioCodec, l = e.defaultInitPts, u = e.duration, h = e.initSegmentData, d = e.videoCodec, c = 0, f = et.length; c < f; c++)
                        if (et[c].demux.probe(t)) {
                            i = et[c];
                            break
                        } i || (v.b.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"), i = {
                        demux: k,
                        remux: tt
                    });
                    var g = this.demuxer,
                        p = this.remuxer,
                        m = i.remux,
                        y = i.demux;
                    p && p instanceof m || (this.remuxer = new m(n, r, a, s)), g && g instanceof y || (this.demuxer = new y(n, r, a), this.probe = y.probe), this.resetInitSegment(h, o, d, u), this.resetInitialTimestamp(l)
                }, e.needsProbing = function(t, e, i) {
                    return !this.demuxer || !this.remuxer || e || i
                }, e.getDecrypter = function() {
                    var t = this.decrypter;
                    return t || (t = this.decrypter = new a.a(this.observer, this.config)), t
                }, t
            }();
        var rt = function(t) {
            return {
                remuxResult: {},
                chunkMeta: t
            }
        };

        function nt(t) {
            return "then" in t && t.then instanceof Function
        }
        var at = function(t, e, i, r, n) {
                this.audioCodec = void 0, this.videoCodec = void 0, this.initSegmentData = void 0, this.duration = void 0, this.defaultInitPts = void 0, this.audioCodec = t, this.videoCodec = e, this.initSegmentData = i, this.duration = r, this.defaultInitPts = n
            },
            st = function(t, e, i, r, n, a) {
                this.discontinuity = void 0, this.contiguous = void 0, this.accurateTimeOffset = void 0, this.trackSwitch = void 0, this.timeOffset = void 0, this.initSegmentChange = void 0, this.discontinuity = t, this.contiguous = e, this.accurateTimeOffset = i, this.trackSwitch = r, this.timeOffset = n, this.initSegmentChange = a
            }
    }, function(t, e, i) {
        "use strict";
        i.d(e, "c", (function() {
            return n
        })), i.d(e, "b", (function() {
            return a
        })), i.d(e, "a", (function() {
            return s
        }));

        function r(t, e, i, r) {
            void 0 === i && (i = 1), void 0 === r && (r = !1);
            var n = t * e * i;
            return r ? Math.round(n) : n
        }

        function n(t, e, i, n) {
            return void 0 === i && (i = 1), void 0 === n && (n = !1), r(t, e, 1 / i, n)
        }

        function a(t, e) {
            return void 0 === e && (e = !1), r(t, 1e3, 1 / 9e4, e)
        }

        function s(t, e) {
            return void 0 === e && (e = 1), r(t, 9e4, 1 / e)
        }
    }, function(t, e, i) {
        var r, n, a, s, o;
        r = /^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/, n = /^(?=([^\/?#]*))\1([^]*)$/, a = /(?:\/|^)\.(?=\/)/g, s = /(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g, o = {
            buildAbsoluteURL: function(t, e, i) {
                if (i = i || {}, t = t.trim(), !(e = e.trim())) {
                    if (!i.alwaysNormalize) return t;
                    var r = o.parseURL(t);
                    if (!r) throw new Error("Error trying to parse base URL.");
                    return r.path = o.normalizePath(r.path), o.buildURLFromParts(r)
                }
                var a = o.parseURL(e);
                if (!a) throw new Error("Error trying to parse relative URL.");
                if (a.scheme) return i.alwaysNormalize ? (a.path = o.normalizePath(a.path), o.buildURLFromParts(a)) : e;
                var s = o.parseURL(t);
                if (!s) throw new Error("Error trying to parse base URL.");
                if (!s.netLoc && s.path && "/" !== s.path[0]) {
                    var l = n.exec(s.path);
                    s.netLoc = l[1], s.path = l[2]
                }
                s.netLoc && !s.path && (s.path = "/");
                var u = {
                    scheme: s.scheme,
                    netLoc: a.netLoc,
                    path: null,
                    params: a.params,
                    query: a.query,
                    fragment: a.fragment
                };
                if (!a.netLoc && (u.netLoc = s.netLoc, "/" !== a.path[0]))
                    if (a.path) {
                        var h = s.path,
                            d = h.substring(0, h.lastIndexOf("/") + 1) + a.path;
                        u.path = o.normalizePath(d)
                    } else u.path = s.path, a.params || (u.params = s.params, a.query || (u.query = s.query));
                return null === u.path && (u.path = i.alwaysNormalize ? o.normalizePath(a.path) : a.path), o.buildURLFromParts(u)
            },
            parseURL: function(t) {
                var e = r.exec(t);
                return e ? {
                    scheme: e[1] || "",
                    netLoc: e[2] || "",
                    path: e[3] || "",
                    params: e[4] || "",
                    query: e[5] || "",
                    fragment: e[6] || ""
                } : null
            },
            normalizePath: function(t) {
                for (t = t.split("").reverse().join("").replace(a, ""); t.length !== (t = t.replace(s, "")).length;);
                return t.split("").reverse().join("")
            },
            buildURLFromParts: function(t) {
                return t.scheme + t.netLoc + t.path + t.params + t.query + t.fragment
            }
        }, t.exports = o
    }, function(t, e, i) {
        "use strict";
        i.d(e, "a", (function() {
            return p
        })), i.d(e, "d", (function() {
            return m
        })), i.d(e, "b", (function() {
            return y
        })), i.d(e, "c", (function() {
            return T
        }));
        var r = i(3),
            n = function() {
                function t() {}
                return t.getSilentFrame = function(t, e) {
                    switch (t) {
                        case "mp4a.40.2":
                            if (1 === e) return new Uint8Array([0, 200, 0, 128, 35, 128]);
                            if (2 === e) return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
                            if (3 === e) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
                            if (4 === e) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56]);
                            if (5 === e) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56]);
                            if (6 === e) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 0, 178, 0, 32, 8, 224]);
                            break;
                        default:
                            if (1 === e) return new Uint8Array([1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                            if (2 === e) return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                            if (3 === e) return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94])
                    }
                }, t
            }(),
            a = Math.pow(2, 32) - 1,
            s = function() {
                function t() {}
                return t.init = function() {
                    var e;
                    for (e in t.types = {
                            avc1: [],
                            avcC: [],
                            btrt: [],
                            dinf: [],
                            dref: [],
                            esds: [],
                            ftyp: [],
                            hdlr: [],
                            mdat: [],
                            mdhd: [],
                            mdia: [],
                            mfhd: [],
                            minf: [],
                            moof: [],
                            moov: [],
                            mp4a: [],
                            ".mp3": [],
                            mvex: [],
                            mvhd: [],
                            pasp: [],
                            sdtp: [],
                            stbl: [],
                            stco: [],
                            stsc: [],
                            stsd: [],
                            stsz: [],
                            stts: [],
                            tfdt: [],
                            tfhd: [],
                            traf: [],
                            trak: [],
                            trun: [],
                            trex: [],
                            tkhd: [],
                            vmhd: [],
                            smhd: []
                        }, t.types) t.types.hasOwnProperty(e) && (t.types[e] = [e.charCodeAt(0), e.charCodeAt(1), e.charCodeAt(2), e.charCodeAt(3)]);
                    var i = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0]),
                        r = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]);
                    t.HDLR_TYPES = {
                        video: i,
                        audio: r
                    };
                    var n = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1]),
                        a = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
                    t.STTS = t.STSC = t.STCO = a, t.STSZ = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), t.VMHD = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]), t.SMHD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), t.STSD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]);
                    var s = new Uint8Array([105, 115, 111, 109]),
                        o = new Uint8Array([97, 118, 99, 49]),
                        l = new Uint8Array([0, 0, 0, 1]);
                    t.FTYP = t.box(t.types.ftyp, s, l, s, o), t.DINF = t.box(t.types.dinf, t.box(t.types.dref, n))
                }, t.box = function(t) {
                    for (var e = 8, i = arguments.length, r = new Array(i > 1 ? i - 1 : 0), n = 1; n < i; n++) r[n - 1] = arguments[n];
                    for (var a = r.length, s = a; a--;) e += r[a].byteLength;
                    var o = new Uint8Array(e);
                    for (o[0] = e >> 24 & 255, o[1] = e >> 16 & 255, o[2] = e >> 8 & 255, o[3] = 255 & e, o.set(t, 4), a = 0, e = 8; a < s; a++) o.set(r[a], e), e += r[a].byteLength;
                    return o
                }, t.hdlr = function(e) {
                    return t.box(t.types.hdlr, t.HDLR_TYPES[e])
                }, t.mdat = function(e) {
                    return t.box(t.types.mdat, e)
                }, t.mdhd = function(e, i) {
                    i *= e;
                    var r = Math.floor(i / (a + 1)),
                        n = Math.floor(i % (a + 1));
                    return t.box(t.types.mdhd, new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e, r >> 24, r >> 16 & 255, r >> 8 & 255, 255 & r, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n, 85, 196, 0, 0]))
                }, t.mdia = function(e) {
                    return t.box(t.types.mdia, t.mdhd(e.timescale, e.duration), t.hdlr(e.type), t.minf(e))
                }, t.mfhd = function(e) {
                    return t.box(t.types.mfhd, new Uint8Array([0, 0, 0, 0, e >> 24, e >> 16 & 255, e >> 8 & 255, 255 & e]))
                }, t.minf = function(e) {
                    return "audio" === e.type ? t.box(t.types.minf, t.box(t.types.smhd, t.SMHD), t.DINF, t.stbl(e)) : t.box(t.types.minf, t.box(t.types.vmhd, t.VMHD), t.DINF, t.stbl(e))
                }, t.moof = function(e, i, r) {
                    return t.box(t.types.moof, t.mfhd(e), t.traf(r, i))
                }, t.moov = function(e) {
                    for (var i = e.length, r = []; i--;) r[i] = t.trak(e[i]);
                    return t.box.apply(null, [t.types.moov, t.mvhd(e[0].timescale, e[0].duration)].concat(r).concat(t.mvex(e)))
                }, t.mvex = function(e) {
                    for (var i = e.length, r = []; i--;) r[i] = t.trex(e[i]);
                    return t.box.apply(null, [t.types.mvex].concat(r))
                }, t.mvhd = function(e, i) {
                    i *= e;
                    var r = Math.floor(i / (a + 1)),
                        n = Math.floor(i % (a + 1)),
                        s = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e, r >> 24, r >> 16 & 255, r >> 8 & 255, 255 & r, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255]);
                    return t.box(t.types.mvhd, s)
                }, t.sdtp = function(e) {
                    var i, r, n = e.samples || [],
                        a = new Uint8Array(4 + n.length);
                    for (i = 0; i < n.length; i++) r = n[i].flags, a[i + 4] = r.dependsOn << 4 | r.isDependedOn << 2 | r.hasRedundancy;
                    return t.box(t.types.sdtp, a)
                }, t.stbl = function(e) {
                    return t.box(t.types.stbl, t.stsd(e), t.box(t.types.stts, t.STTS), t.box(t.types.stsc, t.STSC), t.box(t.types.stsz, t.STSZ), t.box(t.types.stco, t.STCO))
                }, t.avc1 = function(e) {
                    var i, r, n, a = [],
                        s = [];
                    for (i = 0; i < e.sps.length; i++) n = (r = e.sps[i]).byteLength, a.push(n >>> 8 & 255), a.push(255 & n), a = a.concat(Array.prototype.slice.call(r));
                    for (i = 0; i < e.pps.length; i++) n = (r = e.pps[i]).byteLength, s.push(n >>> 8 & 255), s.push(255 & n), s = s.concat(Array.prototype.slice.call(r));
                    var o = t.box(t.types.avcC, new Uint8Array([1, a[3], a[4], a[5], 255, 224 | e.sps.length].concat(a).concat([e.pps.length]).concat(s))),
                        l = e.width,
                        u = e.height,
                        h = e.pixelRatio[0],
                        d = e.pixelRatio[1];
                    return t.box(t.types.avc1, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, l >> 8 & 255, 255 & l, u >> 8 & 255, 255 & u, 0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 18, 100, 97, 105, 108, 121, 109, 111, 116, 105, 111, 110, 47, 104, 108, 115, 46, 106, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17]), o, t.box(t.types.btrt, new Uint8Array([0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192])), t.box(t.types.pasp, new Uint8Array([h >> 24, h >> 16 & 255, h >> 8 & 255, 255 & h, d >> 24, d >> 16 & 255, d >> 8 & 255, 255 & d])))
                }, t.esds = function(t) {
                    var e = t.config.length;
                    return new Uint8Array([0, 0, 0, 0, 3, 23 + e, 0, 1, 0, 4, 15 + e, 64, 21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5].concat([e]).concat(t.config).concat([6, 1, 2]))
                }, t.mp4a = function(e) {
                    var i = e.samplerate;
                    return t.box(t.types.mp4a, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, e.channelCount, 0, 16, 0, 0, 0, 0, i >> 8 & 255, 255 & i, 0, 0]), t.box(t.types.esds, t.esds(e)))
                }, t.mp3 = function(e) {
                    var i = e.samplerate;
                    return t.box(t.types[".mp3"], new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, e.channelCount, 0, 16, 0, 0, 0, 0, i >> 8 & 255, 255 & i, 0, 0]))
                }, t.stsd = function(e) {
                    return "audio" === e.type ? "mp3" === e.segmentCodec && "mp3" === e.codec ? t.box(t.types.stsd, t.STSD, t.mp3(e)) : t.box(t.types.stsd, t.STSD, t.mp4a(e)) : t.box(t.types.stsd, t.STSD, t.avc1(e))
                }, t.tkhd = function(e) {
                    var i = e.id,
                        r = e.duration * e.timescale,
                        n = e.width,
                        s = e.height,
                        o = Math.floor(r / (a + 1)),
                        l = Math.floor(r % (a + 1));
                    return t.box(t.types.tkhd, new Uint8Array([1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, i >> 24 & 255, i >> 16 & 255, i >> 8 & 255, 255 & i, 0, 0, 0, 0, o >> 24, o >> 16 & 255, o >> 8 & 255, 255 & o, l >> 24, l >> 16 & 255, l >> 8 & 255, 255 & l, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, n >> 8 & 255, 255 & n, 0, 0, s >> 8 & 255, 255 & s, 0, 0]))
                }, t.traf = function(e, i) {
                    var r = t.sdtp(e),
                        n = e.id,
                        s = Math.floor(i / (a + 1)),
                        o = Math.floor(i % (a + 1));
                    return t.box(t.types.traf, t.box(t.types.tfhd, new Uint8Array([0, 0, 0, 0, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n])), t.box(t.types.tfdt, new Uint8Array([1, 0, 0, 0, s >> 24, s >> 16 & 255, s >> 8 & 255, 255 & s, o >> 24, o >> 16 & 255, o >> 8 & 255, 255 & o])), t.trun(e, r.length + 16 + 20 + 8 + 16 + 8 + 8), r)
                }, t.trak = function(e) {
                    return e.duration = e.duration || 4294967295, t.box(t.types.trak, t.tkhd(e), t.mdia(e))
                }, t.trex = function(e) {
                    var i = e.id;
                    return t.box(t.types.trex, new Uint8Array([0, 0, 0, 0, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1]))
                }, t.trun = function(e, i) {
                    var r, n, a, s, o, l, u = e.samples || [],
                        h = u.length,
                        d = 12 + 16 * h,
                        c = new Uint8Array(d);
                    for (i += 8 + d, c.set(["video" === e.type ? 1 : 0, 0, 15, 1, h >>> 24 & 255, h >>> 16 & 255, h >>> 8 & 255, 255 & h, i >>> 24 & 255, i >>> 16 & 255, i >>> 8 & 255, 255 & i], 0), r = 0; r < h; r++) a = (n = u[r]).duration, s = n.size, o = n.flags, l = n.cts, c.set([a >>> 24 & 255, a >>> 16 & 255, a >>> 8 & 255, 255 & a, s >>> 24 & 255, s >>> 16 & 255, s >>> 8 & 255, 255 & s, o.isLeading << 2 | o.dependsOn, o.isDependedOn << 6 | o.hasRedundancy << 4 | o.paddingValue << 1 | o.isNonSync, 61440 & o.degradPrio, 15 & o.degradPrio, l >>> 24 & 255, l >>> 16 & 255, l >>> 8 & 255, 255 & l], 12 + 16 * r);
                    return t.box(t.types.trun, c)
                }, t.initSegment = function(e) {
                    t.types || t.init();
                    var i = t.moov(e),
                        r = new Uint8Array(t.FTYP.byteLength + i.byteLength);
                    return r.set(t.FTYP), r.set(i, t.FTYP.byteLength), r
                }, t
            }();
        s.types = void 0, s.HDLR_TYPES = void 0, s.STTS = void 0, s.STSC = void 0, s.STCO = void 0, s.STSZ = void 0, s.VMHD = void 0, s.SMHD = void 0, s.STSD = void 0, s.FTYP = void 0, s.DINF = void 0;
        var o = s,
            l = i(0),
            u = i(2),
            h = i(1),
            d = i(4),
            c = i(11);

        function f() {
            return (f = Object.assign ? Object.assign.bind() : function(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var i = arguments[e];
                    for (var r in i) Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r])
                }
                return t
            }).apply(this, arguments)
        }
        var g = null,
            v = null,
            p = function() {
                function t(t, e, i, r) {
                    if (void 0 === r && (r = ""), this.observer = void 0, this.config = void 0, this.typeSupported = void 0, this.ISGenerated = !1, this._initPTS = void 0, this._initDTS = void 0, this.nextAvcDts = null, this.nextAudioPts = null, this.videoSampleDuration = null, this.isAudioContiguous = !1, this.isVideoContiguous = !1, this.observer = t, this.config = e, this.typeSupported = i, this.ISGenerated = !1, null === g) {
                        var n = (navigator.userAgent || "").match(/Chrome\/(\d+)/i);
                        g = n ? parseInt(n[1]) : 0
                    }
                    if (null === v) {
                        var a = navigator.userAgent.match(/Safari\/(\d+)/i);
                        v = a ? parseInt(a[1]) : 0
                    }
                }
                var e = t.prototype;
                return e.destroy = function() {}, e.resetTimeStamp = function(t) {
                    h.b.log("[mp4-remuxer]: initPTS & initDTS reset"), this._initPTS = this._initDTS = t
                }, e.resetNextTimestamp = function() {
                    h.b.log("[mp4-remuxer]: reset next timestamp"), this.isVideoContiguous = !1, this.isAudioContiguous = !1
                }, e.resetInitSegment = function() {
                    h.b.log("[mp4-remuxer]: ISGenerated flag reset"), this.ISGenerated = !1
                }, e.getVideoStartPts = function(t) {
                    var e = !1,
                        i = t.reduce((function(t, i) {
                            var r = i.pts - t;
                            return r < -4294967296 ? (e = !0, m(t, i.pts)) : r > 0 ? t : i.pts
                        }), t[0].pts);
                    return e && h.b.debug("PTS rollover detected"), i
                }, e.remux = function(t, e, i, r, n, a, s, o) {
                    var l, u, c, f, g, v, p = n,
                        b = n,
                        E = t.pid > -1,
                        S = e.pid > -1,
                        L = e.samples.length,
                        A = t.samples.length > 0,
                        D = s && L > 0 || L > 1;
                    if ((!E || A) && (!S || D) || this.ISGenerated || s) {
                        this.ISGenerated || (c = this.generateIS(t, e, n));
                        var R, k = this.isVideoContiguous,
                            _ = -1;
                        if (D && (_ = function(t) {
                                for (var e = 0; e < t.length; e++)
                                    if (t[e].key) return e;
                                return -1
                            }(e.samples), !k && this.config.forceKeyFrameOnDiscontinuity))
                            if (v = !0, _ > 0) {
                                h.b.warn("[mp4-remuxer]: Dropped " + _ + " out of " + L + " video samples due to a missing keyframe");
                                var I = this.getVideoStartPts(e.samples);
                                e.samples = e.samples.slice(_), e.dropped += _, R = b += (e.samples[0].pts - I) / e.inputTimeScale
                            } else - 1 === _ && (h.b.warn("[mp4-remuxer]: No keyframe found out of " + L + " video samples"), v = !1);
                        if (this.ISGenerated) {
                            if (A && D) {
                                var O = this.getVideoStartPts(e.samples),
                                    C = (m(t.samples[0].pts, O) - O) / e.inputTimeScale;
                                p += Math.max(0, C), b += Math.max(0, -C)
                            }
                            if (A) {
                                if (t.samplerate || (h.b.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"), c = this.generateIS(t, e, n)), u = this.remuxAudio(t, p, this.isAudioContiguous, a, S || D || o === d.b.AUDIO ? b : void 0), D) {
                                    var w = u ? u.endPTS - u.startPTS : 0;
                                    e.inputTimeScale || (h.b.warn("[mp4-remuxer]: regenerate InitSegment as video detected"), c = this.generateIS(t, e, n)), l = this.remuxVideo(e, b, k, w)
                                }
                            } else D && (l = this.remuxVideo(e, b, k, 0));
                            l && (l.firstKeyFrame = _, l.independent = -1 !== _, l.firstKeyFramePTS = R)
                        }
                    }
                    return this.ISGenerated && (i.samples.length && (g = y(i, n, this._initPTS, this._initDTS)), r.samples.length && (f = T(r, n, this._initPTS))), {
                        audio: u,
                        video: l,
                        initSegment: c,
                        independent: v,
                        text: f,
                        id3: g
                    }
                }, e.generateIS = function(t, e, i) {
                    var n, a, s, l = t.samples,
                        u = e.samples,
                        h = this.typeSupported,
                        d = {},
                        c = !Object(r.a)(this._initPTS),
                        f = "audio/mp4";
                    if (c && (n = a = 1 / 0), t.config && l.length) {
                        switch (t.timescale = t.samplerate, t.segmentCodec) {
                            case "mp3":
                                h.mpeg ? (f = "audio/mpeg", t.codec = "") : h.mp3 && (t.codec = "mp3")
                        }
                        d.audio = {
                            id: "audio",
                            container: f,
                            codec: t.codec,
                            initSegment: "mp3" === t.segmentCodec && h.mpeg ? new Uint8Array(0) : o.initSegment([t]),
                            metadata: {
                                channelCount: t.channelCount
                            }
                        }, c && (s = t.inputTimeScale, n = a = l[0].pts - Math.round(s * i))
                    }
                    if (e.sps && e.pps && u.length && (e.timescale = e.inputTimeScale, d.video = {
                            id: "main",
                            container: "video/mp4",
                            codec: e.codec,
                            initSegment: o.initSegment([e]),
                            metadata: {
                                width: e.width,
                                height: e.height
                            }
                        }, c)) {
                        s = e.inputTimeScale;
                        var g = this.getVideoStartPts(u),
                            v = Math.round(s * i);
                        a = Math.min(a, m(u[0].dts, g) - v), n = Math.min(n, g - v)
                    }
                    if (Object.keys(d).length) return this.ISGenerated = !0, c && (this._initPTS = n, this._initDTS = a), {
                        tracks: d,
                        initPTS: n,
                        timescale: s
                    }
                }, e.remuxVideo = function(t, e, i, r) {
                    var n, a, s = t.inputTimeScale,
                        d = t.samples,
                        p = [],
                        y = d.length,
                        T = this._initPTS,
                        E = this.nextAvcDts,
                        S = 8,
                        L = this.videoSampleDuration,
                        A = Number.POSITIVE_INFINITY,
                        D = Number.NEGATIVE_INFINITY,
                        R = !1;
                    i && null !== E || (E = e * s - (d[0].pts - m(d[0].dts, d[0].pts)));
                    for (var k = 0; k < y; k++) {
                        var _ = d[k];
                        _.pts = m(_.pts - T, E), _.dts = m(_.dts - T, E), _.dts < d[k > 0 ? k - 1 : k].dts && (R = !0)
                    }
                    R && d.sort((function(t, e) {
                        var i = t.dts - e.dts,
                            r = t.pts - e.pts;
                        return i || r
                    })), n = d[0].dts;
                    var I = (a = d[d.length - 1].dts) - n,
                        O = I ? Math.round(I / (y - 1)) : L || t.inputTimeScale / 30;
                    if (i) {
                        var C = n - E,
                            w = C > O;
                        if (w || C < -1) {
                            w ? h.b.warn("AVC: " + Object(c.b)(C, !0) + " ms (" + C + "dts) hole between fragments detected, filling it") : h.b.warn("AVC: " + Object(c.b)(-C, !0) + " ms (" + C + "dts) overlapping between fragments detected"), n = E;
                            var x = d[0].pts - C;
                            d[0].dts = n, d[0].pts = x, h.b.log("Video: First PTS/DTS adjusted: " + Object(c.b)(x, !0) + "/" + Object(c.b)(n, !0) + ", delta: " + Object(c.b)(C, !0) + " ms")
                        }
                    }
                    n = Math.max(0, n);
                    for (var P = 0, F = 0, M = 0; M < y; M++) {
                        for (var N = d[M], U = N.units, B = U.length, G = 0, j = 0; j < B; j++) G += U[j].data.length;
                        F += G, P += B, N.length = G, N.dts = Math.max(N.dts, n), A = Math.min(N.pts, A), D = Math.max(N.pts, D)
                    }
                    a = d[y - 1].dts;
                    var K, H = F + 4 * P + 8;
                    try {
                        K = new Uint8Array(H)
                    } catch (t) {
                        return void this.observer.emit(l.a.ERROR, l.a.ERROR, {
                            type: u.b.MUX_ERROR,
                            details: u.a.REMUX_ALLOC_ERROR,
                            fatal: !1,
                            bytes: H,
                            reason: "fail allocating video mdat " + H
                        })
                    }
                    var V = new DataView(K.buffer);
                    V.setUint32(0, H), K.set(o.types.mdat, 4);
                    for (var W = !1, Y = Number.POSITIVE_INFINITY, q = Number.POSITIVE_INFINITY, z = Number.NEGATIVE_INFINITY, X = Number.NEGATIVE_INFINITY, Q = 0; Q < y; Q++) {
                        for (var $ = d[Q], J = $.units, Z = 0, tt = 0, et = J.length; tt < et; tt++) {
                            var it = J[tt],
                                rt = it.data,
                                nt = it.data.byteLength;
                            V.setUint32(S, nt), S += 4, K.set(rt, S), S += nt, Z += 4 + nt
                        }
                        var at = void 0;
                        if (Q < y - 1) L = d[Q + 1].dts - $.dts, at = d[Q + 1].pts - $.pts;
                        else {
                            var st = this.config,
                                ot = Q > 0 ? $.dts - d[Q - 1].dts : O;
                            if (at = Q > 0 ? $.pts - d[Q - 1].pts : O, st.stretchShortVideoTrack && null !== this.nextAudioPts) {
                                var lt = Math.floor(st.maxBufferHole * s),
                                    ut = (r ? A + r * s : this.nextAudioPts) - $.pts;
                                ut > lt ? ((L = ut - ot) < 0 ? L = ot : W = !0, h.b.log("[mp4-remuxer]: It is approximately " + ut / 90 + " ms to the next segment; using duration " + L / 90 + " ms for the last video frame.")) : L = ot
                            } else L = ot
                        }
                        var ht = Math.round($.pts - $.dts);
                        Y = Math.min(Y, L), z = Math.max(z, L), q = Math.min(q, at), X = Math.max(X, at), p.push(new b($.key, L, Z, ht))
                    }
                    if (p.length)
                        if (g) {
                            if (g < 70) {
                                var dt = p[0].flags;
                                dt.dependsOn = 2, dt.isNonSync = 0
                            }
                        } else if (v && X - q < z - Y && O / z < .025 && 0 === p[0].cts) {
                        h.b.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");
                        for (var ct = n, ft = 0, gt = p.length; ft < gt; ft++) {
                            var vt = ct + p[ft].duration,
                                pt = ct + p[ft].cts;
                            if (ft < gt - 1) {
                                var mt = vt + p[ft + 1].cts;
                                p[ft].duration = mt - pt
                            } else p[ft].duration = ft ? p[ft - 1].duration : O;
                            p[ft].cts = 0, ct = vt
                        }
                    }
                    L = W || !L ? O : L, this.nextAvcDts = E = a + L, this.videoSampleDuration = L, this.isVideoContiguous = !0;
                    var yt = {
                        data1: o.moof(t.sequenceNumber++, n, f({}, t, {
                            samples: p
                        })),
                        data2: K,
                        startPTS: A / s,
                        endPTS: (D + L) / s,
                        startDTS: n / s,
                        endDTS: E / s,
                        type: "video",
                        hasAudio: !1,
                        hasVideo: !0,
                        nb: p.length,
                        dropped: t.dropped
                    };
                    return t.samples = [], t.dropped = 0, yt
                }, e.remuxAudio = function(t, e, i, r, a) {
                    var s = t.inputTimeScale,
                        d = s / (t.samplerate ? t.samplerate : s),
                        c = "aac" === t.segmentCodec ? 1024 : 1152,
                        g = c * d,
                        v = this._initPTS,
                        p = "mp3" === t.segmentCodec && this.typeSupported.mpeg,
                        y = [],
                        T = void 0 !== a,
                        E = t.samples,
                        S = p ? 0 : 8,
                        L = this.nextAudioPts || -1,
                        A = e * s;
                    if (this.isAudioContiguous = i = i || E.length && L > 0 && (r && Math.abs(A - L) < 9e3 || Math.abs(m(E[0].pts - v, A) - L) < 20 * g), E.forEach((function(t) {
                            t.pts = m(t.pts - v, A)
                        })), !i || L < 0) {
                        if (!(E = E.filter((function(t) {
                                return t.pts >= 0
                            }))).length) return;
                        L = 0 === a ? 0 : r && !T ? Math.max(0, A) : E[0].pts
                    }
                    if ("aac" === t.segmentCodec)
                        for (var D = this.config.maxAudioFramesDrift, R = 0, k = L; R < E.length; R++) {
                            var _ = E[R],
                                I = _.pts,
                                O = I - k,
                                C = Math.abs(1e3 * O / s);
                            if (O <= -D * g && T) 0 === R && (h.b.warn("Audio frame @ " + (I / s).toFixed(3) + "s overlaps nextAudioPts by " + Math.round(1e3 * O / s) + " ms."), this.nextAudioPts = L = k = I);
                            else if (O >= D * g && C < 1e4 && T) {
                                var w = Math.round(O / g);
                                (k = I - w * g) < 0 && (w--, k += g), 0 === R && (this.nextAudioPts = L = k), h.b.warn("[mp4-remuxer]: Injecting " + w + " audio frame @ " + (k / s).toFixed(3) + "s due to " + Math.round(1e3 * O / s) + " ms gap.");
                                for (var x = 0; x < w; x++) {
                                    var P = Math.max(k, 0),
                                        F = n.getSilentFrame(t.manifestCodec || t.codec, t.channelCount);
                                    F || (h.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."), F = _.unit.subarray()), E.splice(R, 0, {
                                        unit: F,
                                        pts: P
                                    }), k += g, R++
                                }
                            }
                            _.pts = k, k += g
                        }
                    for (var M, N = null, U = null, B = 0, G = E.length; G--;) B += E[G].unit.byteLength;
                    for (var j = 0, K = E.length; j < K; j++) {
                        var H = E[j],
                            V = H.unit,
                            W = H.pts;
                        if (null !== U) {
                            y[j - 1].duration = Math.round((W - U) / d)
                        } else {
                            if (i && "aac" === t.segmentCodec && (W = L), N = W, !(B > 0)) return;
                            B += S;
                            try {
                                M = new Uint8Array(B)
                            } catch (t) {
                                return void this.observer.emit(l.a.ERROR, l.a.ERROR, {
                                    type: u.b.MUX_ERROR,
                                    details: u.a.REMUX_ALLOC_ERROR,
                                    fatal: !1,
                                    bytes: B,
                                    reason: "fail allocating audio mdat " + B
                                })
                            }
                            p || (new DataView(M.buffer).setUint32(0, B), M.set(o.types.mdat, 4))
                        }
                        M.set(V, S);
                        var Y = V.byteLength;
                        S += Y, y.push(new b(!0, c, Y, 0)), U = W
                    }
                    var q = y.length;
                    if (q) {
                        var z = y[y.length - 1];
                        this.nextAudioPts = L = U + d * z.duration;
                        var X = p ? new Uint8Array(0) : o.moof(t.sequenceNumber++, N / d, f({}, t, {
                            samples: y
                        }));
                        t.samples = [];
                        var Q = N / s,
                            $ = L / s,
                            J = {
                                data1: X,
                                data2: M,
                                startPTS: Q,
                                endPTS: $,
                                startDTS: Q,
                                endDTS: $,
                                type: "audio",
                                hasAudio: !0,
                                hasVideo: !1,
                                nb: q
                            };
                        return this.isAudioContiguous = !0, J
                    }
                }, e.remuxEmptyAudio = function(t, e, i, r) {
                    var a = t.inputTimeScale,
                        s = a / (t.samplerate ? t.samplerate : a),
                        o = this.nextAudioPts,
                        l = (null !== o ? o : r.startDTS * a) + this._initDTS,
                        u = r.endDTS * a + this._initDTS,
                        d = 1024 * s,
                        c = Math.ceil((u - l) / d),
                        f = n.getSilentFrame(t.manifestCodec || t.codec, t.channelCount);
                    if (h.b.warn("[mp4-remuxer]: remux empty Audio"), f) {
                        for (var g = [], v = 0; v < c; v++) {
                            var p = l + v * d;
                            g.push({
                                unit: f,
                                pts: p,
                                dts: p
                            })
                        }
                        return t.samples = g, this.remuxAudio(t, e, i, !1)
                    }
                    h.b.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")
                }, t
            }();

        function m(t, e) {
            var i;
            if (null === e) return t;
            for (i = e < t ? -8589934592 : 8589934592; Math.abs(t - e) > 4294967296;) t += i;
            return t
        }

        function y(t, e, i, r) {
            var n = t.samples.length;
            if (n) {
                for (var a = t.inputTimeScale, s = 0; s < n; s++) {
                    var o = t.samples[s];
                    o.pts = m(o.pts - i, e * a) / a, o.dts = m(o.dts - r, e * a) / a
                }
                var l = t.samples;
                return t.samples = [], {
                    samples: l
                }
            }
        }

        function T(t, e, i) {
            var r = t.samples.length;
            if (r) {
                for (var n = t.inputTimeScale, a = 0; a < r; a++) {
                    var s = t.samples[a];
                    s.pts = m(s.pts - i, e * n) / n
                }
                t.samples.sort((function(t, e) {
                    return t.pts - e.pts
                }));
                var o = t.samples;
                return t.samples = [], {
                    samples: o
                }
            }
        }
        var b = function(t, e, i, r) {
                this.size = void 0, this.duration = void 0, this.cts = void 0, this.flags = void 0, this.duration = e, this.size = i, this.cts = r, this.flags = new E(t)
            },
            E = function(t) {
                this.isLeading = 0, this.isDependedOn = 0, this.hasRedundancy = 0, this.degradPrio = 0, this.dependsOn = 1, this.isNonSync = 1, this.dependsOn = t ? 2 : 1, this.isNonSync = t ? 0 : 1
            }
    }, function(t, e, i) {
        "use strict";
        i.d(e, "a", (function() {
            return r
        }));
        var r = function() {
            this.aborted = !1, this.loaded = 0, this.retry = 0, this.total = 0, this.chunkCount = 0, this.bwEstimate = 0, this.loading = {
                start: 0,
                first: 0,
                end: 0
            }, this.parsing = {
                start: 0,
                end: 0
            }, this.buffering = {
                start: 0,
                first: 0,
                end: 0
            }
        }
    }, function(t, e, i) {
        "use strict";
        var r = Object.prototype.hasOwnProperty,
            n = "~";

        function a() {}

        function s(t, e, i) {
            this.fn = t, this.context = e, this.once = i || !1
        }

        function o(t, e, i, r, a) {
            if ("function" != typeof i) throw new TypeError("The listener must be a function");
            var o = new s(i, r || t, a),
                l = n ? n + e : e;
            return t._events[l] ? t._events[l].fn ? t._events[l] = [t._events[l], o] : t._events[l].push(o) : (t._events[l] = o, t._eventsCount++), t
        }

        function l(t, e) {
            0 == --t._eventsCount ? t._events = new a : delete t._events[e]
        }

        function u() {
            this._events = new a, this._eventsCount = 0
        }
        Object.create && (a.prototype = Object.create(null), (new a).__proto__ || (n = !1)), u.prototype.eventNames = function() {
            var t, e, i = [];
            if (0 === this._eventsCount) return i;
            for (e in t = this._events) r.call(t, e) && i.push(n ? e.slice(1) : e);
            return Object.getOwnPropertySymbols ? i.concat(Object.getOwnPropertySymbols(t)) : i
        }, u.prototype.listeners = function(t) {
            var e = n ? n + t : t,
                i = this._events[e];
            if (!i) return [];
            if (i.fn) return [i.fn];
            for (var r = 0, a = i.length, s = new Array(a); r < a; r++) s[r] = i[r].fn;
            return s
        }, u.prototype.listenerCount = function(t) {
            var e = n ? n + t : t,
                i = this._events[e];
            return i ? i.fn ? 1 : i.length : 0
        }, u.prototype.emit = function(t, e, i, r, a, s) {
            var o = n ? n + t : t;
            if (!this._events[o]) return !1;
            var l, u, h = this._events[o],
                d = arguments.length;
            if (h.fn) {
                switch (h.once && this.removeListener(t, h.fn, void 0, !0), d) {
                    case 1:
                        return h.fn.call(h.context), !0;
                    case 2:
                        return h.fn.call(h.context, e), !0;
                    case 3:
                        return h.fn.call(h.context, e, i), !0;
                    case 4:
                        return h.fn.call(h.context, e, i, r), !0;
                    case 5:
                        return h.fn.call(h.context, e, i, r, a), !0;
                    case 6:
                        return h.fn.call(h.context, e, i, r, a, s), !0
                }
                for (u = 1, l = new Array(d - 1); u < d; u++) l[u - 1] = arguments[u];
                h.fn.apply(h.context, l)
            } else {
                var c, f = h.length;
                for (u = 0; u < f; u++) switch (h[u].once && this.removeListener(t, h[u].fn, void 0, !0), d) {
                    case 1:
                        h[u].fn.call(h[u].context);
                        break;
                    case 2:
                        h[u].fn.call(h[u].context, e);
                        break;
                    case 3:
                        h[u].fn.call(h[u].context, e, i);
                        break;
                    case 4:
                        h[u].fn.call(h[u].context, e, i, r);
                        break;
                    default:
                        if (!l)
                            for (c = 1, l = new Array(d - 1); c < d; c++) l[c - 1] = arguments[c];
                        h[u].fn.apply(h[u].context, l)
                }
            }
            return !0
        }, u.prototype.on = function(t, e, i) {
            return o(this, t, e, i, !1)
        }, u.prototype.once = function(t, e, i) {
            return o(this, t, e, i, !0)
        }, u.prototype.removeListener = function(t, e, i, r) {
            var a = n ? n + t : t;
            if (!this._events[a]) return this;
            if (!e) return l(this, a), this;
            var s = this._events[a];
            if (s.fn) s.fn !== e || r && !s.once || i && s.context !== i || l(this, a);
            else {
                for (var o = 0, u = [], h = s.length; o < h; o++)(s[o].fn !== e || r && !s[o].once || i && s[o].context !== i) && u.push(s[o]);
                u.length ? this._events[a] = 1 === u.length ? u[0] : u : l(this, a)
            }
            return this
        }, u.prototype.removeAllListeners = function(t) {
            var e;
            return t ? (e = n ? n + t : t, this._events[e] && l(this, e)) : (this._events = new a, this._eventsCount = 0), this
        }, u.prototype.off = u.prototype.removeListener, u.prototype.addListener = u.prototype.on, u.prefixed = n, u.EventEmitter = u, t.exports = u
    }, function(t, e, i) {
        "use strict";
        i.d(e, "a", (function() {
            return u
        }));
        var r = function() {
                function t(t, e) {
                    this.subtle = void 0, this.aesIV = void 0, this.subtle = t, this.aesIV = e
                }
                return t.prototype.decrypt = function(t, e) {
                    return this.subtle.decrypt({
                        name: "AES-CBC",
                        iv: this.aesIV
                    }, e, t)
                }, t
            }(),
            n = function() {
                function t(t, e) {
                    this.subtle = void 0, this.key = void 0, this.subtle = t, this.key = e
                }
                return t.prototype.expandKey = function() {
                    return this.subtle.importKey("raw", this.key, {
                        name: "AES-CBC"
                    }, !1, ["encrypt", "decrypt"])
                }, t
            }(),
            a = i(9);
        var s = function() {
                function t() {
                    this.rcon = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], this.subMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)], this.invSubMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)], this.sBox = new Uint32Array(256), this.invSBox = new Uint32Array(256), this.key = new Uint32Array(0), this.ksRows = 0, this.keySize = 0, this.keySchedule = void 0, this.invKeySchedule = void 0, this.initTable()
                }
                var e = t.prototype;
                return e.uint8ArrayToUint32Array_ = function(t) {
                    for (var e = new DataView(t), i = new Uint32Array(4), r = 0; r < 4; r++) i[r] = e.getUint32(4 * r);
                    return i
                }, e.initTable = function() {
                    var t = this.sBox,
                        e = this.invSBox,
                        i = this.subMix,
                        r = i[0],
                        n = i[1],
                        a = i[2],
                        s = i[3],
                        o = this.invSubMix,
                        l = o[0],
                        u = o[1],
                        h = o[2],
                        d = o[3],
                        c = new Uint32Array(256),
                        f = 0,
                        g = 0,
                        v = 0;
                    for (v = 0; v < 256; v++) c[v] = v < 128 ? v << 1 : v << 1 ^ 283;
                    for (v = 0; v < 256; v++) {
                        var p = g ^ g << 1 ^ g << 2 ^ g << 3 ^ g << 4;
                        p = p >>> 8 ^ 255 & p ^ 99, t[f] = p, e[p] = f;
                        var m = c[f],
                            y = c[m],
                            T = c[y],
                            b = 257 * c[p] ^ 16843008 * p;
                        r[f] = b << 24 | b >>> 8, n[f] = b << 16 | b >>> 16, a[f] = b << 8 | b >>> 24, s[f] = b, b = 16843009 * T ^ 65537 * y ^ 257 * m ^ 16843008 * f, l[p] = b << 24 | b >>> 8, u[p] = b << 16 | b >>> 16, h[p] = b << 8 | b >>> 24, d[p] = b, f ? (f = m ^ c[c[c[T ^ m]]], g ^= c[c[g]]) : f = g = 1
                    }
                }, e.expandKey = function(t) {
                    for (var e = this.uint8ArrayToUint32Array_(t), i = !0, r = 0; r < e.length && i;) i = e[r] === this.key[r], r++;
                    if (!i) {
                        this.key = e;
                        var n = this.keySize = e.length;
                        if (4 !== n && 6 !== n && 8 !== n) throw new Error("Invalid aes key size=" + n);
                        var a, s, o, l, u = this.ksRows = 4 * (n + 6 + 1),
                            h = this.keySchedule = new Uint32Array(u),
                            d = this.invKeySchedule = new Uint32Array(u),
                            c = this.sBox,
                            f = this.rcon,
                            g = this.invSubMix,
                            v = g[0],
                            p = g[1],
                            m = g[2],
                            y = g[3];
                        for (a = 0; a < u; a++) a < n ? o = h[a] = e[a] : (l = o, a % n == 0 ? (l = c[(l = l << 8 | l >>> 24) >>> 24] << 24 | c[l >>> 16 & 255] << 16 | c[l >>> 8 & 255] << 8 | c[255 & l], l ^= f[a / n | 0] << 24) : n > 6 && a % n == 4 && (l = c[l >>> 24] << 24 | c[l >>> 16 & 255] << 16 | c[l >>> 8 & 255] << 8 | c[255 & l]), h[a] = o = (h[a - n] ^ l) >>> 0);
                        for (s = 0; s < u; s++) a = u - s, l = 3 & s ? h[a] : h[a - 4], d[s] = s < 4 || a <= 4 ? l : v[c[l >>> 24]] ^ p[c[l >>> 16 & 255]] ^ m[c[l >>> 8 & 255]] ^ y[c[255 & l]], d[s] = d[s] >>> 0
                    }
                }, e.networkToHostOrderSwap = function(t) {
                    return t << 24 | (65280 & t) << 8 | (16711680 & t) >> 8 | t >>> 24
                }, e.decrypt = function(t, e, i) {
                    for (var r, n, a, s, o, l, u, h, d, c, f, g, v, p, m = this.keySize + 6, y = this.invKeySchedule, T = this.invSBox, b = this.invSubMix, E = b[0], S = b[1], L = b[2], A = b[3], D = this.uint8ArrayToUint32Array_(i), R = D[0], k = D[1], _ = D[2], I = D[3], O = new Int32Array(t), C = new Int32Array(O.length), w = this.networkToHostOrderSwap; e < O.length;) {
                        for (d = w(O[e]), c = w(O[e + 1]), f = w(O[e + 2]), g = w(O[e + 3]), o = d ^ y[0], l = g ^ y[1], u = f ^ y[2], h = c ^ y[3], v = 4, p = 1; p < m; p++) r = E[o >>> 24] ^ S[l >> 16 & 255] ^ L[u >> 8 & 255] ^ A[255 & h] ^ y[v], n = E[l >>> 24] ^ S[u >> 16 & 255] ^ L[h >> 8 & 255] ^ A[255 & o] ^ y[v + 1], a = E[u >>> 24] ^ S[h >> 16 & 255] ^ L[o >> 8 & 255] ^ A[255 & l] ^ y[v + 2], s = E[h >>> 24] ^ S[o >> 16 & 255] ^ L[l >> 8 & 255] ^ A[255 & u] ^ y[v + 3], o = r, l = n, u = a, h = s, v += 4;
                        r = T[o >>> 24] << 24 ^ T[l >> 16 & 255] << 16 ^ T[u >> 8 & 255] << 8 ^ T[255 & h] ^ y[v], n = T[l >>> 24] << 24 ^ T[u >> 16 & 255] << 16 ^ T[h >> 8 & 255] << 8 ^ T[255 & o] ^ y[v + 1], a = T[u >>> 24] << 24 ^ T[h >> 16 & 255] << 16 ^ T[o >> 8 & 255] << 8 ^ T[255 & l] ^ y[v + 2], s = T[h >>> 24] << 24 ^ T[o >> 16 & 255] << 16 ^ T[l >> 8 & 255] << 8 ^ T[255 & u] ^ y[v + 3], C[e] = w(r ^ R), C[e + 1] = w(s ^ k), C[e + 2] = w(a ^ _), C[e + 3] = w(n ^ I), R = d, k = c, _ = f, I = g, e += 4
                    }
                    return C.buffer
                }, t
            }(),
            o = i(1),
            l = i(5),
            u = function() {
                function t(t, e, i) {
                    var r = (void 0 === i ? {} : i).removePKCS7Padding,
                        n = void 0 === r || r;
                    if (this.logEnabled = !0, this.observer = void 0, this.config = void 0, this.removePKCS7Padding = void 0, this.subtle = null, this.softwareDecrypter = null, this.key = null, this.fastAesKey = null, this.remainderData = null, this.currentIV = null, this.currentResult = null, this.observer = t, this.config = e, this.removePKCS7Padding = n, n) try {
                        var a = self.crypto;
                        a && (this.subtle = a.subtle || a.webkitSubtle)
                    } catch (t) {}
                    null === this.subtle && (this.config.enableSoftwareAES = !0)
                }
                var e = t.prototype;
                return e.destroy = function() {
                    this.observer = null
                }, e.isSync = function() {
                    return this.config.enableSoftwareAES
                }, e.flush = function() {
                    var t = this.currentResult;
                    if (t) {
                        var e, i, r, n = new Uint8Array(t);
                        return this.reset(), this.removePKCS7Padding ? (i = (e = n).byteLength, (r = i && new DataView(e.buffer).getUint8(i - 1)) ? Object(a.a)(e, 0, i - r) : e) : n
                    }
                    this.reset()
                }, e.reset = function() {
                    this.currentResult = null, this.currentIV = null, this.remainderData = null, this.softwareDecrypter && (this.softwareDecrypter = null)
                }, e.decrypt = function(t, e, i, r) {
                    if (this.config.enableSoftwareAES) {
                        this.softwareDecrypt(new Uint8Array(t), e, i);
                        var n = this.flush();
                        n && r(n.buffer)
                    } else this.webCryptoDecrypt(new Uint8Array(t), e, i).then(r)
                }, e.softwareDecrypt = function(t, e, i) {
                    var r = this.currentIV,
                        n = this.currentResult,
                        o = this.remainderData;
                    this.logOnce("JS AES decrypt"), o && (t = Object(l.b)(o, t), this.remainderData = null);
                    var u = this.getValidChunk(t);
                    if (!u.length) return null;
                    r && (i = r);
                    var h = this.softwareDecrypter;
                    h || (h = this.softwareDecrypter = new s), h.expandKey(e);
                    var d = n;
                    return this.currentResult = h.decrypt(u.buffer, 0, i), this.currentIV = Object(a.a)(u, -16).buffer, d || null
                }, e.webCryptoDecrypt = function(t, e, i) {
                    var a = this,
                        s = this.subtle;
                    return this.key === e && this.fastAesKey || (this.key = e, this.fastAesKey = new n(s, e)), this.fastAesKey.expandKey().then((function(e) {
                        return s ? new r(s, i).decrypt(t.buffer, e) : Promise.reject(new Error("web crypto not initialized"))
                    })).catch((function(r) {
                        return a.onWebCryptoError(r, t, e, i)
                    }))
                }, e.onWebCryptoError = function(t, e, i, r) {
                    return o.b.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:", t), this.config.enableSoftwareAES = !0, this.logEnabled = !0, this.softwareDecrypt(e, i, r)
                }, e.getValidChunk = function(t) {
                    var e = t,
                        i = t.length - t.length % 16;
                    return i !== t.length && (e = Object(a.a)(t, 0, i), this.remainderData = Object(a.a)(t, i)), e
                }, e.logOnce = function(t) {
                    this.logEnabled && (o.b.log("[decrypter.ts]: " + t), this.logEnabled = !1)
                }, t
            }()
    }, function(t, e, i) {
        "use strict";
        i.d(e, "a", (function() {
            return a
        }));
        var r = i(12);

        function n(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }
        var a = function() {
            function t(t, e) {
                this._uri = null, this.method = null, this.keyFormat = null, this.keyFormatVersions = null, this.keyID = null, this.key = null, this.iv = null, this._uri = e ? Object(r.buildAbsoluteURL)(t, e, {
                    alwaysNormalize: !0
                }) : t
            }
            var e, i, a;
            return t.fromURL = function(e, i) {
                return new t(e, i)
            }, t.fromURI = function(e) {
                return new t(e)
            }, e = t, (i = [{
                key: "uri",
                get: function() {
                    return this._uri
                }
            }]) && n(e.prototype, i), a && n(e, a), Object.defineProperty(e, "prototype", {
                writable: !1
            }), t
        }()
    }, function(t, e, i) {
        function r(t) {
            var e = {};

            function i(r) {
                if (e[r]) return e[r].exports;
                var n = e[r] = {
                    i: r,
                    l: !1,
                    exports: {}
                };
                return t[r].call(n.exports, n, n.exports, i), n.l = !0, n.exports
            }
            i.m = t, i.c = e, i.i = function(t) {
                return t
            }, i.d = function(t, e, r) {
                i.o(t, e) || Object.defineProperty(t, e, {
                    configurable: !1,
                    enumerable: !0,
                    get: r
                })
            }, i.r = function(t) {
                Object.defineProperty(t, "__esModule", {
                    value: !0
                })
            }, i.n = function(t) {
                var e = t && t.__esModule ? function() {
                    return t.default
                } : function() {
                    return t
                };
                return i.d(e, "a", e), e
            }, i.o = function(t, e) {
                return Object.prototype.hasOwnProperty.call(t, e)
            }, i.p = "/", i.oe = function(t) {
                throw console.error(t), t
            };
            var r = i(i.s = ENTRY_MODULE);
            return r.default || r
        }

        function n(t) {
            return (t + "").replace(/[.?*+^$[\]\\(){}|-]/g, "\\$&")
        }

        function a(t, e, r) {
            var a = {};
            a[r] = [];
            var s = e.toString(),
                o = s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);
            if (!o) return a;
            for (var l, u = o[1], h = new RegExp("(\\\\n|\\W)" + n(u) + "\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)", "g"); l = h.exec(s);) "dll-reference" !== l[3] && a[r].push(l[3]);
            for (h = new RegExp("\\(" + n(u) + '\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)', "g"); l = h.exec(s);) t[l[2]] || (a[r].push(l[1]), t[l[2]] = i(l[1]).m), a[l[2]] = a[l[2]] || [], a[l[2]].push(l[4]);
            for (var d, c = Object.keys(a), f = 0; f < c.length; f++)
                for (var g = 0; g < a[c[f]].length; g++) d = a[c[f]][g], isNaN(1 * d) || (a[c[f]][g] = 1 * a[c[f]][g]);
            return a
        }

        function s(t) {
            return Object.keys(t).reduce((function(e, i) {
                return e || t[i].length > 0
            }), !1)
        }
        t.exports = function(t, e) {
            e = e || {};
            var n = {
                    main: i.m
                },
                o = e.all ? {
                    main: Object.keys(n.main)
                } : function(t, e) {
                    for (var i = {
                            main: [e]
                        }, r = {
                            main: []
                        }, n = {
                            main: {}
                        }; s(i);)
                        for (var o = Object.keys(i), l = 0; l < o.length; l++) {
                            var u = o[l],
                                h = i[u].pop();
                            if (n[u] = n[u] || {}, !n[u][h] && t[u][h]) {
                                n[u][h] = !0, r[u] = r[u] || [], r[u].push(h);
                                for (var d = a(t, t[u][h], u), c = Object.keys(d), f = 0; f < c.length; f++) i[c[f]] = i[c[f]] || [], i[c[f]] = i[c[f]].concat(d[c[f]])
                            }
                        }
                    return r
                }(n, t),
                l = "";
            Object.keys(o).filter((function(t) {
                return "main" !== t
            })).forEach((function(t) {
                for (var e = 0; o[t][e];) e++;
                o[t].push(e), n[t][e] = "(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })", l = l + "var " + t + " = (" + r.toString().replace("ENTRY_MODULE", JSON.stringify(e)) + ")({" + o[t].map((function(e) {
                    return JSON.stringify(e) + ": " + n[t][e].toString()
                })).join(",") + "});\n"
            })), l = l + "new ((" + r.toString().replace("ENTRY_MODULE", JSON.stringify(t)) + ")({" + o.main.map((function(t) {
                return JSON.stringify(t) + ": " + n.main[t].toString()
            })).join(",") + "}))(self);";
            var u = new window.Blob([l], {
                type: "text/javascript"
            });
            if (e.bare) return u;
            var h = (window.URL || window.webkitURL || window.mozURL || window.msURL).createObjectURL(u),
                d = new window.Worker(h);
            return d.objectURL = h, d
        }
    }, function(t, e, i) {
        "use strict";
        i.r(e), i.d(e, "default", (function() {
            return o
        }));
        var r = i(10),
            n = i(0),
            a = i(1),
            s = i(15);

        function o(t) {
            var e = new s.EventEmitter,
                i = function(e, i) {
                    t.postMessage({
                        event: e,
                        data: i
                    })
                };
            e.on(n.a.FRAG_DECRYPTED, i), e.on(n.a.ERROR, i);
            t.addEventListener("message", (function(n) {
                var s = n.data;
                switch (s.cmd) {
                    case "init":
                        var o = JSON.parse(s.config);
                        t.transmuxer = new r.c(e, s.typeSupported, o, s.vendor, s.id), Object(a.a)(o.debug),
                            function() {
                                var t = function(t) {
                                    a.b[t] = function(e) {
                                        i("workerLog", {
                                            logType: t,
                                            message: e
                                        })
                                    }
                                };
                                for (var e in a.b) t(e)
                            }(), i("init", null);
                        break;
                    case "configure":
                        t.transmuxer.configure(s.config);
                        break;
                    case "demux":
                        var u = t.transmuxer.push(s.data, s.decryptdata, s.chunkMeta, s.state);
                        Object(r.d)(u) ? u.then((function(e) {
                            l(t, e)
                        })) : l(t, u);
                        break;
                    case "flush":
                        var d = s.chunkMeta,
                            c = t.transmuxer.flush(d);
                        Object(r.d)(c) ? c.then((function(e) {
                            h(t, e, d)
                        })) : h(t, c, d)
                }
            }))
        }

        function l(t, e) {
            if (!((i = e.remuxResult).audio || i.video || i.text || i.id3 || i.initSegment)) return !1;
            var i, r = [],
                n = e.remuxResult,
                a = n.audio,
                s = n.video;
            return a && u(r, a), s && u(r, s), t.postMessage({
                event: "transmuxComplete",
                data: e
            }, r), !0
        }

        function u(t, e) {
            e.data1 && t.push(e.data1.buffer), e.data2 && t.push(e.data2.buffer)
        }

        function h(t, e, i) {
            e.reduce((function(e, i) {
                return l(t, i) || e
            }), !1) || t.postMessage({
                event: "transmuxComplete",
                data: e[0]
            }), t.postMessage({
                event: "flush",
                data: i
            })
        }
    }, function(t, e, i) {
        "use strict";
        i.r(e), i.d(e, "default", (function() {
            return cr
        }));
        var r, n = i(12),
            a = i(3),
            s = i(0),
            o = i(2),
            l = i(1),
            u = i(5),
            h = /^(\d+)x(\d+)$/,
            d = /\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,
            c = function() {
                function t(e) {
                    for (var i in "string" == typeof e && (e = t.parseAttrList(e)), e) e.hasOwnProperty(i) && (this[i] = e[i])
                }
                var e = t.prototype;
                return e.decimalInteger = function(t) {
                    var e = parseInt(this[t], 10);
                    return e > Number.MAX_SAFE_INTEGER ? 1 / 0 : e
                }, e.hexadecimalInteger = function(t) {
                    if (this[t]) {
                        var e = (this[t] || "0x").slice(2);
                        e = (1 & e.length ? "0" : "") + e;
                        for (var i = new Uint8Array(e.length / 2), r = 0; r < e.length / 2; r++) i[r] = parseInt(e.slice(2 * r, 2 * r + 2), 16);
                        return i
                    }
                    return null
                }, e.hexadecimalIntegerAsNumber = function(t) {
                    var e = parseInt(this[t], 16);
                    return e > Number.MAX_SAFE_INTEGER ? 1 / 0 : e
                }, e.decimalFloatingPoint = function(t) {
                    return parseFloat(this[t])
                }, e.optionalFloat = function(t, e) {
                    var i = this[t];
                    return i ? parseFloat(i) : e
                }, e.enumeratedString = function(t) {
                    return this[t]
                }, e.bool = function(t) {
                    return "YES" === this[t]
                }, e.decimalResolution = function(t) {
                    var e = h.exec(this[t]);
                    if (null !== e) return {
                        width: parseInt(e[1], 10),
                        height: parseInt(e[2], 10)
                    }
                }, t.parseAttrList = function(t) {
                    var e, i = {};
                    for (d.lastIndex = 0; null !== (e = d.exec(t));) {
                        var r = e[2];
                        0 === r.indexOf('"') && r.lastIndexOf('"') === r.length - 1 && (r = r.slice(1, -1)), i[e[1]] = r
                    }
                    return i
                }, t
            }();

        function f() {
            return (f = Object.assign ? Object.assign.bind() : function(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var i = arguments[e];
                    for (var r in i) Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r])
                }
                return t
            }).apply(this, arguments)
        }

        function g(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }! function(t) {
            t.ID = "ID", t.CLASS = "CLASS", t.START_DATE = "START-DATE", t.DURATION = "DURATION", t.END_DATE = "END-DATE", t.END_ON_NEXT = "END-ON-NEXT", t.PLANNED_DURATION = "PLANNED-DURATION", t.SCTE35_OUT = "SCTE35-OUT", t.SCTE35_IN = "SCTE35-IN"
        }(r || (r = {}));
        var v = function() {
                function t(t, e) {
                    if (this.attr = void 0, this._startDate = void 0, this._endDate = void 0, this._badValueForSameId = void 0, e) {
                        var i = e.attr;
                        for (var n in i)
                            if (Object.prototype.hasOwnProperty.call(t, n) && t[n] !== i[n]) {
                                l.b.warn('DATERANGE tag attribute: "' + n + '" does not match for tags with ID: "' + t.ID + '"'), this._badValueForSameId = n;
                                break
                            } t = f(new c({}), i, t)
                    }
                    if (this.attr = t, this._startDate = new Date(t[r.START_DATE]), r.END_DATE in this.attr) {
                        var s = new Date(this.attr[r.END_DATE]);
                        Object(a.a)(s.getTime()) && (this._endDate = s)
                    }
                }
                var e, i, n;
                return e = t, (i = [{
                    key: "id",
                    get: function() {
                        return this.attr.ID
                    }
                }, {
                    key: "class",
                    get: function() {
                        return this.attr.CLASS
                    }
                }, {
                    key: "startDate",
                    get: function() {
                        return this._startDate
                    }
                }, {
                    key: "endDate",
                    get: function() {
                        if (this._endDate) return this._endDate;
                        var t = this.duration;
                        return null !== t ? new Date(this._startDate.getTime() + 1e3 * t) : null
                    }
                }, {
                    key: "duration",
                    get: function() {
                        if (r.DURATION in this.attr) {
                            var t = this.attr.decimalFloatingPoint(r.DURATION);
                            if (Object(a.a)(t)) return t
                        } else if (this._endDate) return (this._endDate.getTime() - this._startDate.getTime()) / 1e3;
                        return null
                    }
                }, {
                    key: "plannedDuration",
                    get: function() {
                        return r.PLANNED_DURATION in this.attr ? this.attr.decimalFloatingPoint(r.PLANNED_DURATION) : null
                    }
                }, {
                    key: "endOnNext",
                    get: function() {
                        return this.attr.bool(r.END_ON_NEXT)
                    }
                }, {
                    key: "isValid",
                    get: function() {
                        return !!this.id && !this._badValueForSameId && Object(a.a)(this.startDate.getTime()) && (null === this.duration || this.duration >= 0) && (!this.endOnNext || !!this.class)
                    }
                }]) && g(e.prototype, i), n && g(e, n), Object.defineProperty(e, "prototype", {
                    writable: !1
                }), t
            }(),
            p = i(6);

        function m(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }
        var y = function() {
                function t(t) {
                    this.PTSKnown = !1, this.alignedSliding = !1, this.averagetargetduration = void 0, this.endCC = 0, this.endSN = 0, this.fragments = void 0, this.fragmentHint = void 0, this.partList = null, this.dateRanges = void 0, this.live = !0, this.ageHeader = 0, this.advancedDateTime = void 0, this.updated = !0, this.advanced = !0, this.availabilityDelay = void 0, this.misses = 0, this.needSidxRanges = !1, this.startCC = 0, this.startSN = 0, this.startTimeOffset = null, this.targetduration = 0, this.totalduration = 0, this.type = null, this.url = void 0, this.m3u8 = "", this.version = null, this.canBlockReload = !1, this.canSkipUntil = 0, this.canSkipDateRanges = !1, this.skippedSegments = 0, this.recentlyRemovedDateranges = void 0, this.partHoldBack = 0, this.holdBack = 0, this.partTarget = 0, this.preloadHint = void 0, this.renditionReports = void 0, this.tuneInGoal = 0, this.deltaUpdateFailed = void 0, this.driftStartTime = 0, this.driftEndTime = 0, this.driftStart = 0, this.driftEnd = 0, this.fragments = [], this.dateRanges = {}, this.url = t
                }
                var e, i, r;
                return t.prototype.reloaded = function(t) {
                    if (!t) return this.advanced = !0, void(this.updated = !0);
                    var e = this.lastPartSn - t.lastPartSn,
                        i = this.lastPartIndex - t.lastPartIndex;
                    this.updated = this.endSN !== t.endSN || !!i || !!e, this.advanced = this.endSN > t.endSN || e > 0 || 0 === e && i > 0, this.updated || this.advanced ? this.misses = Math.floor(.6 * t.misses) : this.misses = t.misses + 1, this.availabilityDelay = t.availabilityDelay
                }, e = t, (i = [{
                    key: "hasProgramDateTime",
                    get: function() {
                        return !!this.fragments.length && Object(a.a)(this.fragments[this.fragments.length - 1].programDateTime)
                    }
                }, {
                    key: "levelTargetDuration",
                    get: function() {
                        return this.averagetargetduration || this.targetduration || 10
                    }
                }, {
                    key: "drift",
                    get: function() {
                        var t = this.driftEndTime - this.driftStartTime;
                        return t > 0 ? 1e3 * (this.driftEnd - this.driftStart) / t : 1
                    }
                }, {
                    key: "edge",
                    get: function() {
                        return this.partEnd || this.fragmentEnd
                    }
                }, {
                    key: "partEnd",
                    get: function() {
                        var t;
                        return null !== (t = this.partList) && void 0 !== t && t.length ? this.partList[this.partList.length - 1].end : this.fragmentEnd
                    }
                }, {
                    key: "fragmentEnd",
                    get: function() {
                        var t;
                        return null !== (t = this.fragments) && void 0 !== t && t.length ? this.fragments[this.fragments.length - 1].end : 0
                    }
                }, {
                    key: "age",
                    get: function() {
                        return this.advancedDateTime ? Math.max(Date.now() - this.advancedDateTime, 0) / 1e3 : 0
                    }
                }, {
                    key: "lastPartIndex",
                    get: function() {
                        var t;
                        return null !== (t = this.partList) && void 0 !== t && t.length ? this.partList[this.partList.length - 1].index : -1
                    }
                }, {
                    key: "lastPartSn",
                    get: function() {
                        var t;
                        return null !== (t = this.partList) && void 0 !== t && t.length ? this.partList[this.partList.length - 1].fragment.sn : this.endSN
                    }
                }]) && m(e.prototype, i), r && m(e, r), Object.defineProperty(e, "prototype", {
                    writable: !1
                }), t
            }(),
            T = i(17),
            b = {
                audio: {
                    a3ds: !0,
                    "ac-3": !0,
                    "ac-4": !0,
                    alac: !0,
                    alaw: !0,
                    dra1: !0,
                    "dts+": !0,
                    "dts-": !0,
                    dtsc: !0,
                    dtse: !0,
                    dtsh: !0,
                    "ec-3": !0,
                    enca: !0,
                    g719: !0,
                    g726: !0,
                    m4ae: !0,
                    mha1: !0,
                    mha2: !0,
                    mhm1: !0,
                    mhm2: !0,
                    mlpa: !0,
                    mp4a: !0,
                    "raw ": !0,
                    Opus: !0,
                    samr: !0,
                    sawb: !0,
                    sawp: !0,
                    sevc: !0,
                    sqcp: !0,
                    ssmv: !0,
                    twos: !0,
                    ulaw: !0
                },
                video: {
                    avc1: !0,
                    avc2: !0,
                    avc3: !0,
                    avc4: !0,
                    avcp: !0,
                    av01: !0,
                    drac: !0,
                    dvav: !0,
                    dvhe: !0,
                    encv: !0,
                    hev1: !0,
                    hvc1: !0,
                    mjp2: !0,
                    mp4v: !0,
                    mvc1: !0,
                    mvc2: !0,
                    mvc3: !0,
                    mvc4: !0,
                    resv: !0,
                    rv60: !0,
                    s263: !0,
                    svc1: !0,
                    svc2: !0,
                    "vc-1": !0,
                    vp08: !0,
                    vp09: !0
                },
                text: {
                    stpp: !0,
                    wvtt: !0
                }
            };

        function E(t, e) {
            return MediaSource.isTypeSupported((e || "video") + '/mp4;codecs="' + t + '"')
        }
        var S = /#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,
            L = /#EXT-X-MEDIA:(.*)/g,
            A = new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source, /(?!#) *(\S[\S ]*)/.source, /#EXT-X-BYTERANGE:*(.+)/.source, /#EXT-X-PROGRAM-DATE-TIME:(.+)/.source, /#.*/.source].join("|"), "g"),
            D = new RegExp([/#(EXTM3U)/.source, /#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source, /#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source, /#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source, /(#)([^:]*):(.*)/.source, /(#)(.*)(?:.*)\r?\n?/.source].join("|")),
            R = /\.(mp4|m4s|m4v|m4a)$/i;
        var k = function() {
            function t() {}
            return t.findGroup = function(t, e) {
                for (var i = 0; i < t.length; i++) {
                    var r = t[i];
                    if (r.id === e) return r
                }
            }, t.convertAVC1ToAVCOTI = function(t) {
                var e = t.split(".");
                if (e.length > 2) {
                    var i = e.shift() + ".";
                    return i += parseInt(e.shift()).toString(16), i += ("000" + parseInt(e.shift()).toString(16)).slice(-4)
                }
                return t
            }, t.resolve = function(t, e) {
                return n.buildAbsoluteURL(e, t, {
                    alwaysNormalize: !0
                })
            }, t.parseMasterPlaylist = function(e, i) {
                var r, n = [],
                    a = {},
                    s = !1;
                for (S.lastIndex = 0; null != (r = S.exec(e));)
                    if (r[1]) {
                        var o = new c(r[1]),
                            l = {
                                attrs: o,
                                bitrate: o.decimalInteger("AVERAGE-BANDWIDTH") || o.decimalInteger("BANDWIDTH"),
                                name: o.NAME,
                                url: t.resolve(r[2], i)
                            },
                            u = o.decimalResolution("RESOLUTION");
                        u && (l.width = u.width, l.height = u.height), _((o.CODECS || "").split(/[ ,]+/).filter((function(t) {
                            return t
                        })), l), l.videoCodec && -1 !== l.videoCodec.indexOf("avc1") && (l.videoCodec = t.convertAVC1ToAVCOTI(l.videoCodec)), n.push(l)
                    } else if (r[3]) {
                    var h = new c(r[3]);
                    h["DATA-ID"] && (s = !0, a[h["DATA-ID"]] = h)
                }
                return {
                    levels: n,
                    sessionData: s ? a : null
                }
            }, t.parseMasterPlaylistMedia = function(e, i, r, n) {
                var a;
                void 0 === n && (n = []);
                var s = [],
                    o = 0;
                for (L.lastIndex = 0; null !== (a = L.exec(e));) {
                    var l = new c(a[1]);
                    if (l.TYPE === r) {
                        var u = {
                            attrs: l,
                            bitrate: 0,
                            id: o++,
                            groupId: l["GROUP-ID"],
                            instreamId: l["INSTREAM-ID"],
                            name: l.NAME || l.LANGUAGE || "",
                            type: r,
                            default: l.bool("DEFAULT"),
                            autoselect: l.bool("AUTOSELECT"),
                            forced: l.bool("FORCED"),
                            lang: l.LANGUAGE,
                            url: l.URI ? t.resolve(l.URI, i) : ""
                        };
                        if (n.length) {
                            var h = t.findGroup(n, u.groupId) || n[0];
                            I(u, h, "audioCodec"), I(u, h, "textCodec")
                        }
                        s.push(u)
                    }
                }
                return s
            }, t.parseLevelPlaylist = function(t, e, i, r, s) {
                var o, u, h, d = new y(e),
                    f = d.fragments,
                    g = null,
                    m = 0,
                    b = 0,
                    E = 0,
                    S = 0,
                    L = null,
                    k = new p.b(r, e),
                    _ = -1,
                    I = !1;
                for (A.lastIndex = 0, d.m3u8 = t; null !== (o = A.exec(t));) {
                    I && (I = !1, (k = new p.b(r, e)).start = E, k.sn = m, k.cc = S, k.level = i, g && (k.initSegment = g, k.rawProgramDateTime = g.rawProgramDateTime, g.rawProgramDateTime = null));
                    var w = o[1];
                    if (w) {
                        k.duration = parseFloat(w);
                        var x = (" " + o[2]).slice(1);
                        k.title = x || null, k.tagList.push(x ? ["INF", w, x] : ["INF", w])
                    } else if (o[3]) Object(a.a)(k.duration) && (k.start = E, h && (k.levelkey = h), k.sn = m, k.level = i, k.cc = S, k.urlId = s, f.push(k), k.relurl = (" " + o[3]).slice(1), O(k, L), L = k, E += k.duration, m++, b = 0, I = !0);
                    else if (o[4]) {
                        var P = (" " + o[4]).slice(1);
                        L ? k.setByteRange(P, L) : k.setByteRange(P)
                    } else if (o[5]) k.rawProgramDateTime = (" " + o[5]).slice(1), k.tagList.push(["PROGRAM-DATE-TIME", k.rawProgramDateTime]), -1 === _ && (_ = f.length);
                    else {
                        if (!(o = o[0].match(D))) {
                            l.b.warn("No matches on slow regex match for level playlist!");
                            continue
                        }
                        for (u = 1; u < o.length && void 0 === o[u]; u++);
                        var F = (" " + o[u]).slice(1),
                            M = (" " + o[u + 1]).slice(1),
                            N = o[u + 2] ? (" " + o[u + 2]).slice(1) : "";
                        switch (F) {
                            case "PLAYLIST-TYPE":
                                d.type = M.toUpperCase();
                                break;
                            case "MEDIA-SEQUENCE":
                                m = d.startSN = parseInt(M);
                                break;
                            case "SKIP":
                                var U = new c(M),
                                    B = U.decimalInteger("SKIPPED-SEGMENTS");
                                if (Object(a.a)(B)) {
                                    d.skippedSegments = B;
                                    for (var G = B; G--;) f.unshift(null);
                                    m += B
                                }
                                var j = U.enumeratedString("RECENTLY-REMOVED-DATERANGES");
                                j && (d.recentlyRemovedDateranges = j.split("\t"));
                                break;
                            case "TARGETDURATION":
                                d.targetduration = parseFloat(M);
                                break;
                            case "VERSION":
                                d.version = parseInt(M);
                                break;
                            case "EXTM3U":
                                break;
                            case "ENDLIST":
                                d.live = !1;
                                break;
                            case "#":
                                (M || N) && k.tagList.push(N ? [M, N] : [M]);
                                break;
                            case "DISCONTINUITY":
                                S++, k.tagList.push(["DIS"]);
                                break;
                            case "GAP":
                                k.tagList.push([F]);
                                break;
                            case "BITRATE":
                                k.tagList.push([F, M]);
                                break;
                            case "DATERANGE":
                                var K = new c(M),
                                    H = new v(K, d.dateRanges[K.ID]);
                                H.isValid || d.skippedSegments ? d.dateRanges[H.id] = H : l.b.warn('Ignoring invalid DATERANGE tag: "' + M + '"'), k.tagList.push(["EXT-X-DATERANGE", M]);
                                break;
                            case "DISCONTINUITY-SEQUENCE":
                                S = parseInt(M);
                                break;
                            case "KEY":
                                var V, W = new c(M),
                                    Y = W.enumeratedString("METHOD"),
                                    q = W.URI,
                                    z = W.hexadecimalInteger("IV"),
                                    X = W.enumeratedString("KEYFORMATVERSIONS"),
                                    Q = W.enumeratedString("KEYID"),
                                    $ = null != (V = W.enumeratedString("KEYFORMAT")) ? V : "identity";
                                if (["com.apple.streamingkeydelivery", "com.microsoft.playready", "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed", "com.widevine"].indexOf($) > -1) {
                                    l.b.warn("Keyformat " + $ + " is not supported from the manifest");
                                    continue
                                }
                                if ("identity" !== $) continue;
                                Y && (h = T.a.fromURL(e, q), q && ["AES-128", "SAMPLE-AES", "SAMPLE-AES-CENC"].indexOf(Y) >= 0 && (h.method = Y, h.keyFormat = $, Q && (h.keyID = Q), X && (h.keyFormatVersions = X), h.iv = z));
                                break;
                            case "START":
                                var J = new c(M).decimalFloatingPoint("TIME-OFFSET");
                                Object(a.a)(J) && (d.startTimeOffset = J);
                                break;
                            case "MAP":
                                var Z = new c(M);
                                if (k.duration) {
                                    var tt = new p.b(r, e);
                                    C(tt, Z, i, h), g = tt, k.initSegment = g, g.rawProgramDateTime && !k.rawProgramDateTime && (k.rawProgramDateTime = g.rawProgramDateTime)
                                } else C(k, Z, i, h), g = k, I = !0;
                                break;
                            case "SERVER-CONTROL":
                                var et = new c(M);
                                d.canBlockReload = et.bool("CAN-BLOCK-RELOAD"), d.canSkipUntil = et.optionalFloat("CAN-SKIP-UNTIL", 0), d.canSkipDateRanges = d.canSkipUntil > 0 && et.bool("CAN-SKIP-DATERANGES"), d.partHoldBack = et.optionalFloat("PART-HOLD-BACK", 0), d.holdBack = et.optionalFloat("HOLD-BACK", 0);
                                break;
                            case "PART-INF":
                                var it = new c(M);
                                d.partTarget = it.decimalFloatingPoint("PART-TARGET");
                                break;
                            case "PART":
                                var rt = d.partList;
                                rt || (rt = d.partList = []);
                                var nt = b > 0 ? rt[rt.length - 1] : void 0,
                                    at = b++,
                                    st = new p.c(new c(M), k, e, at, nt);
                                rt.push(st), k.duration += st.duration;
                                break;
                            case "PRELOAD-HINT":
                                var ot = new c(M);
                                d.preloadHint = ot;
                                break;
                            case "RENDITION-REPORT":
                                var lt = new c(M);
                                d.renditionReports = d.renditionReports || [], d.renditionReports.push(lt);
                                break;
                            default:
                                l.b.warn("line parsed but not handled: " + o)
                        }
                    }
                }
                L && !L.relurl ? (f.pop(), E -= L.duration, d.partList && (d.fragmentHint = L)) : d.partList && (O(k, L), k.cc = S, d.fragmentHint = k);
                var ut = f.length,
                    ht = f[0],
                    dt = f[ut - 1];
                if ((E += d.skippedSegments * d.targetduration) > 0 && ut && dt) {
                    d.averagetargetduration = E / ut;
                    var ct = dt.sn;
                    d.endSN = "initSegment" !== ct ? ct : 0, ht && (d.startCC = ht.cc, ht.initSegment || d.fragments.every((function(t) {
                        return t.relurl && (e = t.relurl, R.test(null != (i = null === (r = n.parseURL(e)) || void 0 === r ? void 0 : r.path) ? i : ""));
                        var e, i, r
                    })) && (l.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"), (k = new p.b(r, e)).relurl = dt.relurl, k.level = i, k.sn = "initSegment", ht.initSegment = k, d.needSidxRanges = !0))
                } else d.endSN = 0, d.startCC = 0;
                return d.fragmentHint && (E += d.fragmentHint.duration), d.totalduration = E, d.endCC = S, _ > 0 && function(t, e) {
                    for (var i = t[e], r = e; r--;) {
                        var n = t[r];
                        if (!n) return;
                        n.programDateTime = i.programDateTime - 1e3 * n.duration, i = n
                    }
                }(f, _), d
            }, t
        }();

        function _(t, e) {
            ["video", "audio", "text"].forEach((function(i) {
                var r = t.filter((function(t) {
                    return function(t, e) {
                        var i = b[e];
                        return !!i && !0 === i[t.slice(0, 4)]
                    }(t, i)
                }));
                if (r.length) {
                    var n = r.filter((function(t) {
                        return 0 === t.lastIndexOf("avc1", 0) || 0 === t.lastIndexOf("mp4a", 0)
                    }));
                    e[i + "Codec"] = n.length > 0 ? n[0] : r[0], t = t.filter((function(t) {
                        return -1 === r.indexOf(t)
                    }))
                }
            })), e.unknownCodecs = t
        }

        function I(t, e, i) {
            var r = e[i];
            r && (t[i] = r)
        }

        function O(t, e) {
            t.rawProgramDateTime ? t.programDateTime = Date.parse(t.rawProgramDateTime) : null != e && e.programDateTime && (t.programDateTime = e.endProgramDateTime), Object(a.a)(t.programDateTime) || (t.programDateTime = null, t.rawProgramDateTime = null)
        }

        function C(t, e, i, r) {
            t.relurl = e.URI, e.BYTERANGE && t.setByteRange(e.BYTERANGE), t.level = i, t.sn = "initSegment", r && (t.levelkey = r), t.initSegment = null
        }
        var w = i(4);

        function x(t, e) {
            var i = t.url;
            return void 0 !== i && 0 !== i.indexOf("data:") || (i = e.url), i
        }
        var P = function() {
                function t(t) {
                    this.hls = void 0, this.loaders = Object.create(null), this.hls = t, this.registerListeners()
                }
                var e = t.prototype;
                return e.startLoad = function(t) {}, e.stopLoad = function() {
                    this.destroyInternalLoaders()
                }, e.registerListeners = function() {
                    var t = this.hls;
                    t.on(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.on(s.a.LEVEL_LOADING, this.onLevelLoading, this), t.on(s.a.AUDIO_TRACK_LOADING, this.onAudioTrackLoading, this), t.on(s.a.SUBTITLE_TRACK_LOADING, this.onSubtitleTrackLoading, this)
                }, e.unregisterListeners = function() {
                    var t = this.hls;
                    t.off(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.off(s.a.LEVEL_LOADING, this.onLevelLoading, this), t.off(s.a.AUDIO_TRACK_LOADING, this.onAudioTrackLoading, this), t.off(s.a.SUBTITLE_TRACK_LOADING, this.onSubtitleTrackLoading, this)
                }, e.createInternalLoader = function(t) {
                    var e = this.hls.config,
                        i = e.pLoader,
                        r = e.loader,
                        n = new(i || r)(e);
                    return t.loader = n, this.loaders[t.type] = n, n
                }, e.getInternalLoader = function(t) {
                    return this.loaders[t.type]
                }, e.resetInternalLoader = function(t) {
                    this.loaders[t] && delete this.loaders[t]
                }, e.destroyInternalLoaders = function() {
                    for (var t in this.loaders) {
                        var e = this.loaders[t];
                        e && e.destroy(), this.resetInternalLoader(t)
                    }
                }, e.destroy = function() {
                    this.unregisterListeners(), this.destroyInternalLoaders()
                }, e.onManifestLoading = function(t, e) {
                    var i = e.url;
                    this.load({
                        id: null,
                        groupId: null,
                        level: 0,
                        responseType: "text",
                        type: w.a.MANIFEST,
                        url: i,
                        deliveryDirectives: null
                    })
                }, e.onLevelLoading = function(t, e) {
                    var i = e.id,
                        r = e.level,
                        n = e.url,
                        a = e.deliveryDirectives;
                    this.load({
                        id: i,
                        groupId: null,
                        level: r,
                        responseType: "text",
                        type: w.a.LEVEL,
                        url: n,
                        deliveryDirectives: a
                    })
                }, e.onAudioTrackLoading = function(t, e) {
                    var i = e.id,
                        r = e.groupId,
                        n = e.url,
                        a = e.deliveryDirectives;
                    this.load({
                        id: i,
                        groupId: r,
                        level: null,
                        responseType: "text",
                        type: w.a.AUDIO_TRACK,
                        url: n,
                        deliveryDirectives: a
                    })
                }, e.onSubtitleTrackLoading = function(t, e) {
                    var i = e.id,
                        r = e.groupId,
                        n = e.url,
                        a = e.deliveryDirectives;
                    this.load({
                        id: i,
                        groupId: r,
                        level: null,
                        responseType: "text",
                        type: w.a.SUBTITLE_TRACK,
                        url: n,
                        deliveryDirectives: a
                    })
                }, e.load = function(t) {
                    var e, i, r, n, a, s, o = this.hls.config,
                        u = this.getInternalLoader(t);
                    if (u) {
                        var h = u.context;
                        if (h && h.url === t.url) return void l.b.trace("[playlist-loader]: playlist request ongoing");
                        l.b.log("[playlist-loader]: aborting previous loader for type: " + t.type), u.abort()
                    }
                    switch (t.type) {
                        case w.a.MANIFEST:
                            i = o.manifestLoadingMaxRetry, r = o.manifestLoadingTimeOut, n = o.manifestLoadingRetryDelay, a = o.manifestLoadingMaxRetryTimeout;
                            break;
                        case w.a.LEVEL:
                        case w.a.AUDIO_TRACK:
                        case w.a.SUBTITLE_TRACK:
                            i = 0, r = o.levelLoadingTimeOut;
                            break;
                        default:
                            i = o.levelLoadingMaxRetry, r = o.levelLoadingTimeOut, n = o.levelLoadingRetryDelay, a = o.levelLoadingMaxRetryTimeout
                    }
                    if ((u = this.createInternalLoader(t), null !== (e = t.deliveryDirectives) && void 0 !== e && e.part) && (t.type === w.a.LEVEL && null !== t.level ? s = this.hls.levels[t.level].details : t.type === w.a.AUDIO_TRACK && null !== t.id ? s = this.hls.audioTracks[t.id].details : t.type === w.a.SUBTITLE_TRACK && null !== t.id && (s = this.hls.subtitleTracks[t.id].details), s)) {
                        var d = s.partTarget,
                            c = s.targetduration;
                        d && c && (r = Math.min(1e3 * Math.max(3 * d, .8 * c), r))
                    }
                    var f = {
                            timeout: r,
                            maxRetry: i,
                            retryDelay: n,
                            maxRetryDelay: a,
                            highWaterMark: 0
                        },
                        g = {
                            onSuccess: this.loadsuccess.bind(this),
                            onError: this.loaderror.bind(this),
                            onTimeout: this.loadtimeout.bind(this)
                        };
                    u.load(t, f, g)
                }, e.loadsuccess = function(t, e, i, r) {
                    if (void 0 === r && (r = null), i.isSidxRequest) return this.handleSidxRequest(t, i), void this.handlePlaylistLoaded(t, e, i, r);
                    this.resetInternalLoader(i.type);
                    var n = t.data;
                    0 === n.indexOf("#EXTM3U") ? (e.parsing.start = performance.now(), n.indexOf("#EXTINF:") > 0 || n.indexOf("#EXT-X-TARGETDURATION:") > 0 ? this.handleTrackOrLevelPlaylist(t, e, i, r) : this.handleMasterPlaylist(t, e, i, r)) : this.handleManifestParsingError(t, i, "no EXTM3U delimiter", r)
                }, e.loaderror = function(t, e, i) {
                    void 0 === i && (i = null), this.handleNetworkError(e, i, !1, t)
                }, e.loadtimeout = function(t, e, i) {
                    void 0 === i && (i = null), this.handleNetworkError(e, i, !0)
                }, e.handleMasterPlaylist = function(t, e, i, r) {
                    var n = this.hls,
                        a = t.data,
                        o = x(t, i),
                        u = k.parseMasterPlaylist(a, o),
                        h = u.levels,
                        d = u.sessionData;
                    if (h.length) {
                        var f = h.map((function(t) {
                                return {
                                    id: t.attrs.AUDIO,
                                    audioCodec: t.audioCodec
                                }
                            })),
                            g = h.map((function(t) {
                                return {
                                    id: t.attrs.SUBTITLES,
                                    textCodec: t.textCodec
                                }
                            })),
                            v = k.parseMasterPlaylistMedia(a, o, "AUDIO", f),
                            p = k.parseMasterPlaylistMedia(a, o, "SUBTITLES", g),
                            m = k.parseMasterPlaylistMedia(a, o, "CLOSED-CAPTIONS");
                        if (v.length) v.some((function(t) {
                            return !t.url
                        })) || !h[0].audioCodec || h[0].attrs.AUDIO || (l.b.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"), v.unshift({
                            type: "main",
                            name: "main",
                            default: !1,
                            autoselect: !1,
                            forced: !1,
                            id: -1,
                            attrs: new c({}),
                            bitrate: 0,
                            url: ""
                        }));
                        n.trigger(s.a.MANIFEST_LOADED, {
                            levels: h,
                            audioTracks: v,
                            subtitles: p,
                            captions: m,
                            url: o,
                            stats: e,
                            networkDetails: r,
                            sessionData: d
                        })
                    } else this.handleManifestParsingError(t, i, "no level found in manifest", r)
                }, e.handleTrackOrLevelPlaylist = function(t, e, i, r) {
                    var n = this.hls,
                        l = i.id,
                        u = i.level,
                        h = i.type,
                        d = x(t, i),
                        f = Object(a.a)(l) ? l : 0,
                        g = Object(a.a)(u) ? u : f,
                        v = function(t) {
                            switch (t.type) {
                                case w.a.AUDIO_TRACK:
                                    return w.b.AUDIO;
                                case w.a.SUBTITLE_TRACK:
                                    return w.b.SUBTITLE;
                                default:
                                    return w.b.MAIN
                            }
                        }(i),
                        p = k.parseLevelPlaylist(t.data, d, g, v, f);
                    if (p.fragments.length) {
                        if (h === w.a.MANIFEST) {
                            var m = {
                                attrs: new c({}),
                                bitrate: 0,
                                details: p,
                                name: "",
                                url: d
                            };
                            n.trigger(s.a.MANIFEST_LOADED, {
                                levels: [m],
                                audioTracks: [],
                                url: d,
                                stats: e,
                                networkDetails: r,
                                sessionData: null
                            })
                        }
                        if (e.parsing.end = performance.now(), p.needSidxRanges) {
                            var y, T = null === (y = p.fragments[0].initSegment) || void 0 === y ? void 0 : y.url;
                            this.load({
                                url: T,
                                isSidxRequest: !0,
                                type: h,
                                level: u,
                                levelDetails: p,
                                id: l,
                                groupId: null,
                                rangeStart: 0,
                                rangeEnd: 2048,
                                responseType: "arraybuffer",
                                deliveryDirectives: null
                            })
                        } else i.levelDetails = p, this.handlePlaylistLoaded(t, e, i, r)
                    } else n.trigger(s.a.ERROR, {
                        type: o.b.NETWORK_ERROR,
                        details: o.a.LEVEL_EMPTY_ERROR,
                        fatal: !1,
                        url: d,
                        reason: "no fragments found in level",
                        level: "number" == typeof i.level ? i.level : void 0
                    })
                }, e.handleSidxRequest = function(t, e) {
                    var i = new Uint8Array(t.data),
                        r = Object(u.c)(i, ["sidx"])[0];
                    if (r) {
                        var n = Object(u.k)(r);
                        if (n) {
                            var a = n.references,
                                s = e.levelDetails;
                            a.forEach((function(t, e) {
                                var r = t.info,
                                    n = s.fragments[e];
                                if (0 === n.byteRange.length && n.setByteRange(String(1 + r.end - r.start) + "@" + String(r.start)), n.initSegment) {
                                    var a = Object(u.c)(i, ["moov"])[0],
                                        o = a ? a.length : null;
                                    n.initSegment.setByteRange(String(o) + "@0")
                                }
                            }))
                        }
                    }
                }, e.handleManifestParsingError = function(t, e, i, r) {
                    this.hls.trigger(s.a.ERROR, {
                        type: o.b.NETWORK_ERROR,
                        details: o.a.MANIFEST_PARSING_ERROR,
                        fatal: e.type === w.a.MANIFEST,
                        url: t.url,
                        reason: i,
                        response: t,
                        context: e,
                        networkDetails: r
                    })
                }, e.handleNetworkError = function(t, e, i, r) {
                    void 0 === i && (i = !1), l.b.warn("[playlist-loader]: A network " + (i ? "timeout" : "error") + " occurred while loading " + t.type + " level: " + t.level + " id: " + t.id + ' group-id: "' + t.groupId + '"');
                    var n = o.a.UNKNOWN,
                        a = !1,
                        u = this.getInternalLoader(t);
                    switch (t.type) {
                        case w.a.MANIFEST:
                            n = i ? o.a.MANIFEST_LOAD_TIMEOUT : o.a.MANIFEST_LOAD_ERROR, a = !0;
                            break;
                        case w.a.LEVEL:
                            n = i ? o.a.LEVEL_LOAD_TIMEOUT : o.a.LEVEL_LOAD_ERROR, a = !1;
                            break;
                        case w.a.AUDIO_TRACK:
                            n = i ? o.a.AUDIO_TRACK_LOAD_TIMEOUT : o.a.AUDIO_TRACK_LOAD_ERROR, a = !1;
                            break;
                        case w.a.SUBTITLE_TRACK:
                            n = i ? o.a.SUBTITLE_TRACK_LOAD_TIMEOUT : o.a.SUBTITLE_LOAD_ERROR, a = !1
                    }
                    u && this.resetInternalLoader(t.type);
                    var h = {
                        type: o.b.NETWORK_ERROR,
                        details: n,
                        fatal: a,
                        url: t.url,
                        loader: u,
                        context: t,
                        networkDetails: e
                    };
                    r && (h.response = r), this.hls.trigger(s.a.ERROR, h)
                }, e.handlePlaylistLoaded = function(t, e, i, r) {
                    var n = i.type,
                        a = i.level,
                        o = i.id,
                        l = i.groupId,
                        u = i.loader,
                        h = i.levelDetails,
                        d = i.deliveryDirectives;
                    if (null != h && h.targetduration) {
                        if (u) switch (h.live && (u.getCacheAge && (h.ageHeader = u.getCacheAge() || 0), u.getCacheAge && !isNaN(h.ageHeader) || (h.ageHeader = 0)), n) {
                            case w.a.MANIFEST:
                            case w.a.LEVEL:
                                this.hls.trigger(s.a.LEVEL_LOADED, {
                                    details: h,
                                    level: a || 0,
                                    id: o || 0,
                                    stats: e,
                                    networkDetails: r,
                                    deliveryDirectives: d
                                });
                                break;
                            case w.a.AUDIO_TRACK:
                                this.hls.trigger(s.a.AUDIO_TRACK_LOADED, {
                                    details: h,
                                    id: o || 0,
                                    groupId: l || "",
                                    stats: e,
                                    networkDetails: r,
                                    deliveryDirectives: d
                                });
                                break;
                            case w.a.SUBTITLE_TRACK:
                                this.hls.trigger(s.a.SUBTITLE_TRACK_LOADED, {
                                    details: h,
                                    id: o || 0,
                                    groupId: l || "",
                                    stats: e,
                                    networkDetails: r,
                                    deliveryDirectives: d
                                })
                        }
                    } else this.handleManifestParsingError(t, i, "invalid target duration", r)
                }, t
            }(),
            F = function() {
                function t(t) {
                    this.hls = void 0, this.loaders = {}, this.decryptkey = null, this.decrypturl = null, this.hls = t, this.registerListeners()
                }
                var e = t.prototype;
                return e.startLoad = function(t) {}, e.stopLoad = function() {
                    this.destroyInternalLoaders()
                }, e.registerListeners = function() {
                    this.hls.on(s.a.KEY_LOADING, this.onKeyLoading, this)
                }, e.unregisterListeners = function() {
                    this.hls.off(s.a.KEY_LOADING, this.onKeyLoading)
                }, e.destroyInternalLoaders = function() {
                    for (var t in this.loaders) {
                        var e = this.loaders[t];
                        e && e.destroy()
                    }
                    this.loaders = {}
                }, e.destroy = function() {
                    this.unregisterListeners(), this.destroyInternalLoaders()
                }, e.onKeyLoading = function(t, e) {
                    var i = e.frag,
                        r = i.type,
                        n = this.loaders[r];
                    if (i.decryptdata) {
                        var a = i.decryptdata.uri;
                        if (a !== this.decrypturl || null === this.decryptkey) {
                            var o = this.hls.config;
                            if (n && (l.b.warn("abort previous key loader for type:" + r), n.abort()), !a) return void l.b.warn("key uri is falsy");
                            var u = o.loader,
                                h = i.loader = this.loaders[r] = new u(o);
                            this.decrypturl = a, this.decryptkey = null;
                            var d = {
                                    url: a,
                                    frag: i,
                                    responseType: "arraybuffer"
                                },
                                c = {
                                    timeout: o.fragLoadingTimeOut,
                                    maxRetry: 0,
                                    retryDelay: o.fragLoadingRetryDelay,
                                    maxRetryDelay: o.fragLoadingMaxRetryTimeout,
                                    highWaterMark: 0
                                },
                                f = {
                                    onSuccess: this.loadsuccess.bind(this),
                                    onError: this.loaderror.bind(this),
                                    onTimeout: this.loadtimeout.bind(this)
                                };
                            h.load(d, c, f)
                        } else this.decryptkey && (i.decryptdata.key = this.decryptkey, this.hls.trigger(s.a.KEY_LOADED, {
                            frag: i
                        }))
                    } else l.b.warn("Missing decryption data on fragment in onKeyLoading")
                }, e.loadsuccess = function(t, e, i) {
                    var r = i.frag;
                    r.decryptdata ? (this.decryptkey = r.decryptdata.key = new Uint8Array(t.data), r.loader = null, delete this.loaders[r.type], this.hls.trigger(s.a.KEY_LOADED, {
                        frag: r
                    })) : l.b.error("after key load, decryptdata unset")
                }, e.loaderror = function(t, e) {
                    var i = e.frag,
                        r = i.loader;
                    r && r.abort(), delete this.loaders[i.type], this.hls.trigger(s.a.ERROR, {
                        type: o.b.NETWORK_ERROR,
                        details: o.a.KEY_LOAD_ERROR,
                        fatal: !1,
                        frag: i,
                        response: t
                    })
                }, e.loadtimeout = function(t, e) {
                    var i = e.frag,
                        r = i.loader;
                    r && r.abort(), delete this.loaders[i.type], this.hls.trigger(s.a.ERROR, {
                        type: o.b.NETWORK_ERROR,
                        details: o.a.KEY_LOAD_TIMEOUT,
                        fatal: !1,
                        frag: i
                    })
                }, t
            }();

        function M(t, e) {
            var i;
            try {
                i = new Event("addtrack")
            } catch (t) {
                (i = document.createEvent("Event")).initEvent("addtrack", !1, !1)
            }
            i.track = t, e.dispatchEvent(i)
        }

        function N(t, e) {
            var i = t.mode;
            if ("disabled" === i && (t.mode = "hidden"), t.cues && !t.cues.getCueById(e.id)) try {
                if (t.addCue(e), !t.cues.getCueById(e.id)) throw new Error("addCue is failed for: " + e)
            } catch (i) {
                l.b.debug("[texttrack-utils]: " + i);
                var r = new self.TextTrackCue(e.startTime, e.endTime, e.text);
                r.id = e.id, t.addCue(r)
            }
            "disabled" === i && (t.mode = i)
        }

        function U(t) {
            var e = t.mode;
            if ("disabled" === e && (t.mode = "hidden"), t.cues)
                for (var i = t.cues.length; i--;) t.removeCue(t.cues[i]);
            "disabled" === e && (t.mode = e)
        }

        function B(t, e, i, r) {
            var n = t.mode;
            if ("disabled" === n && (t.mode = "hidden"), t.cues && t.cues.length > 0)
                for (var a = function(t, e, i) {
                        var r = [],
                            n = function(t, e) {
                                if (e < t[0].startTime) return 0;
                                var i = t.length - 1;
                                if (e > t[i].endTime) return -1;
                                var r = 0,
                                    n = i;
                                for (; r <= n;) {
                                    var a = Math.floor((n + r) / 2);
                                    if (e < t[a].startTime) n = a - 1;
                                    else {
                                        if (!(e > t[a].startTime && r < i)) return a;
                                        r = a + 1
                                    }
                                }
                                return t[r].startTime - e < e - t[n].startTime ? r : n
                            }(t, e);
                        if (n > -1)
                            for (var a = n, s = t.length; a < s; a++) {
                                var o = t[a];
                                if (o.startTime >= e && o.endTime <= i) r.push(o);
                                else if (o.startTime > i) return r
                            }
                        return r
                    }(t.cues, e, i), s = 0; s < a.length; s++) r && !r(a[s]) || t.removeCue(a[s]);
            "disabled" === n && (t.mode = n)
        }
        var G = i(7),
            j = i(8);

        function K() {
            return self.WebKitDataCue || self.VTTCue || self.TextTrackCue
        }

        function H(t, e) {
            return t.getTime() / 1e3 - e
        }
        var V = function() {
            function t(t) {
                this.hls = void 0, this.id3Track = null, this.media = null, this.dateRangeCuesAppended = {}, this.hls = t, this._registerListeners()
            }
            var e = t.prototype;
            return e.destroy = function() {
                this._unregisterListeners(), this.id3Track = null, this.media = null, this.dateRangeCuesAppended = {}, this.hls = null
            }, e._registerListeners = function() {
                var t = this.hls;
                t.on(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), t.on(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.on(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.on(s.a.FRAG_PARSING_METADATA, this.onFragParsingMetadata, this), t.on(s.a.BUFFER_FLUSHING, this.onBufferFlushing, this), t.on(s.a.LEVEL_UPDATED, this.onLevelUpdated, this)
            }, e._unregisterListeners = function() {
                var t = this.hls;
                t.off(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), t.off(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.off(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.off(s.a.FRAG_PARSING_METADATA, this.onFragParsingMetadata, this), t.off(s.a.BUFFER_FLUSHING, this.onBufferFlushing, this), t.off(s.a.LEVEL_UPDATED, this.onLevelUpdated, this)
            }, e.onMediaAttached = function(t, e) {
                this.media = e.media
            }, e.onMediaDetaching = function() {
                this.id3Track && (U(this.id3Track), this.id3Track = null, this.media = null, this.dateRangeCuesAppended = {})
            }, e.onManifestLoading = function() {
                this.dateRangeCuesAppended = {}
            }, e.createTrack = function(t) {
                var e = this.getID3Track(t.textTracks);
                return e.mode = "hidden", e
            }, e.getID3Track = function(t) {
                if (this.media) {
                    for (var e = 0; e < t.length; e++) {
                        var i = t[e];
                        if ("metadata" === i.kind && "id3" === i.label) return M(i, this.media), i
                    }
                    return this.media.addTextTrack("metadata", "id3")
                }
            }, e.onFragParsingMetadata = function(t, e) {
                if (this.media) {
                    var i = this.hls.config,
                        r = i.enableEmsgMetadataCues,
                        n = i.enableID3MetadataCues;
                    if (r || n) {
                        var a = e.frag,
                            s = e.samples,
                            o = e.details;
                        this.id3Track || (this.id3Track = this.createTrack(this.media));
                        for (var l = o.edge || a.end, u = K(), h = !1, d = {}, c = 0; c < s.length; c++) {
                            var f = s[c].type;
                            if ((f !== j.a.emsg || r) && n) {
                                var g = G.c(s[c].data);
                                if (g) {
                                    var v = s[c].pts,
                                        p = l;
                                    p - v <= 0 && (p = v + .25);
                                    for (var m = 0; m < g.length; m++) {
                                        var y = g[m];
                                        if (!G.e(y)) {
                                            var T = new u(v, p, "");
                                            T.value = y, f && (T.type = f), this.id3Track.addCue(T), d[y.key] = null, h = !0
                                        }
                                    }
                                }
                            }
                        }
                        h && this.updateId3CueEnds(d)
                    }
                }
            }, e.updateId3CueEnds = function(t) {
                var e, i = null === (e = this.id3Track) || void 0 === e ? void 0 : e.cues;
                if (i)
                    for (var r = i.length; r--;) {
                        var n, a = i[r],
                            s = null === (n = a.value) || void 0 === n ? void 0 : n.key;
                        if (s && s in t) {
                            var o = t[s];
                            o && a.endTime !== o && (a.endTime = o), t[s] = a.startTime
                        }
                    }
            }, e.onBufferFlushing = function(t, e) {
                var i = e.startOffset,
                    r = e.endOffset,
                    n = e.type,
                    a = this.id3Track,
                    s = this.hls;
                if (s) {
                    var o = s.config,
                        l = o.enableEmsgMetadataCues,
                        u = o.enableID3MetadataCues;
                    if (a && (l || u)) B(a, i, r, "audio" === n ? function(t) {
                        return t.type === j.a.audioId3 && u
                    } : "video" === n ? function(t) {
                        return t.type === j.a.emsg && l
                    } : function(t) {
                        return t.type === j.a.audioId3 && u || t.type === j.a.emsg && l
                    })
                }
            }, e.onLevelUpdated = function(t, e) {
                var i = this,
                    n = e.details;
                if (this.media && n.hasProgramDateTime && this.hls.config.enableDateRangeMetadataCues) {
                    var s = this.dateRangeCuesAppended,
                        o = this.id3Track,
                        l = n.dateRanges,
                        u = Object.keys(l);
                    if (o)
                        for (var h = Object.keys(s).filter((function(t) {
                                return !u.includes(t)
                            })), d = function(t) {
                                var e = h[t];
                                Object.keys(s[e].cues).forEach((function(t) {
                                    o.removeCue(s[e].cues[t])
                                })), delete s[e]
                            }, c = h.length; c--;) d(c);
                    var f = n.fragments[n.fragments.length - 1];
                    if (0 !== u.length && Object(a.a)(null == f ? void 0 : f.programDateTime)) {
                        this.id3Track || (this.id3Track = this.createTrack(this.media));
                        for (var g = f.programDateTime / 1e3 - f.start, v = n.edge || f.end, p = K(), m = function(t) {
                                var e = u[t],
                                    n = l[e],
                                    a = s[e],
                                    o = (null == a ? void 0 : a.cues) || {},
                                    h = (null == a ? void 0 : a.durationKnown) || !1,
                                    d = H(n.startDate, g),
                                    c = v,
                                    f = n.endDate;
                                if (f) c = H(f, g), h = !0;
                                else if (n.endOnNext && !h) {
                                    var m = u.reduce((function(t, e) {
                                        var i = l[e];
                                        return i.class === n.class && i.id !== e && i.startDate > n.startDate && t.push(i), t
                                    }), []).sort((function(t, e) {
                                        return t.startDate.getTime() - e.startDate.getTime()
                                    }))[0];
                                    m && (c = H(m.startDate, g), h = !0)
                                }
                                for (var y, T = Object.keys(n.attr), b = 0; b < T.length; b++) {
                                    var E = T[b];
                                    if (E !== r.ID && E !== r.CLASS && E !== r.START_DATE && E !== r.DURATION && E !== r.END_DATE && E !== r.END_ON_NEXT) {
                                        var S = o[E];
                                        if (S) h && !a.durationKnown && (S.endTime = c);
                                        else {
                                            var L = n.attr[E];
                                            S = new p(d, c, ""), E !== r.SCTE35_OUT && E !== r.SCTE35_IN || (y = L, L = Uint8Array.from(y.replace(/^0x/, "").replace(/([\da-fA-F]{2}) ?/g, "0x$1 ").replace(/ +$/, "").split(" ")).buffer), S.value = {
                                                key: E,
                                                data: L
                                            }, S.type = j.a.dateRange, i.id3Track.addCue(S), o[E] = S
                                        }
                                    }
                                }
                                s[e] = {
                                    cues: o,
                                    dateRange: n,
                                    durationKnown: h
                                }
                            }, y = 0; y < u.length; y++) m(y)
                    }
                }
            }, t
        }();

        function W(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }
        var Y, q = function() {
            function t(t) {
                var e = this;
                this.hls = void 0, this.config = void 0, this.media = null, this.levelDetails = null, this.currentTime = 0, this.stallCount = 0, this._latency = null, this.timeupdateHandler = function() {
                    return e.timeupdate()
                }, this.hls = t, this.config = t.config, this.registerListeners()
            }
            var e, i, r, n = t.prototype;
            return n.destroy = function() {
                this.unregisterListeners(), this.onMediaDetaching(), this.levelDetails = null, this.hls = this.timeupdateHandler = null
            }, n.registerListeners = function() {
                this.hls.on(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), this.hls.on(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), this.hls.on(s.a.MANIFEST_LOADING, this.onManifestLoading, this), this.hls.on(s.a.LEVEL_UPDATED, this.onLevelUpdated, this), this.hls.on(s.a.ERROR, this.onError, this)
            }, n.unregisterListeners = function() {
                this.hls.off(s.a.MEDIA_ATTACHED, this.onMediaAttached), this.hls.off(s.a.MEDIA_DETACHING, this.onMediaDetaching), this.hls.off(s.a.MANIFEST_LOADING, this.onManifestLoading), this.hls.off(s.a.LEVEL_UPDATED, this.onLevelUpdated), this.hls.off(s.a.ERROR, this.onError)
            }, n.onMediaAttached = function(t, e) {
                this.media = e.media, this.media.addEventListener("timeupdate", this.timeupdateHandler)
            }, n.onMediaDetaching = function() {
                this.media && (this.media.removeEventListener("timeupdate", this.timeupdateHandler), this.media = null)
            }, n.onManifestLoading = function() {
                this.levelDetails = null, this._latency = null, this.stallCount = 0
            }, n.onLevelUpdated = function(t, e) {
                var i = e.details;
                this.levelDetails = i, i.advanced && this.timeupdate(), !i.live && this.media && this.media.removeEventListener("timeupdate", this.timeupdateHandler)
            }, n.onError = function(t, e) {
                e.details === o.a.BUFFER_STALLED_ERROR && (this.stallCount++, l.b.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))
            }, n.timeupdate = function() {
                var t = this.media,
                    e = this.levelDetails;
                if (t && e) {
                    this.currentTime = t.currentTime;
                    var i = this.computeLatency();
                    if (null !== i) {
                        this._latency = i;
                        var r = this.config,
                            n = r.lowLatencyMode,
                            a = r.maxLiveSyncPlaybackRate;
                        if (n && 1 !== a) {
                            var s = this.targetLatency;
                            if (null !== s) {
                                var o = i - s,
                                    l = o < Math.min(this.maxLatency, s + e.targetduration);
                                if (e.live && l && o > .05 && this.forwardBufferLength > 1) {
                                    var u = Math.min(2, Math.max(1, a)),
                                        h = Math.round(2 / (1 + Math.exp(-.75 * o - this.edgeStalled)) * 20) / 20;
                                    t.playbackRate = Math.min(u, Math.max(1, h))
                                } else 1 !== t.playbackRate && 0 !== t.playbackRate && (t.playbackRate = 1)
                            }
                        }
                    }
                }
            }, n.estimateLiveEdge = function() {
                var t = this.levelDetails;
                return null === t ? null : t.edge + t.age
            }, n.computeLatency = function() {
                var t = this.estimateLiveEdge();
                return null === t ? null : t - this.currentTime
            }, e = t, (i = [{
                key: "latency",
                get: function() {
                    return this._latency || 0
                }
            }, {
                key: "maxLatency",
                get: function() {
                    var t = this.config,
                        e = this.levelDetails;
                    return void 0 !== t.liveMaxLatencyDuration ? t.liveMaxLatencyDuration : e ? t.liveMaxLatencyDurationCount * e.targetduration : 0
                }
            }, {
                key: "targetLatency",
                get: function() {
                    var t = this.levelDetails;
                    if (null === t) return null;
                    var e = t.holdBack,
                        i = t.partHoldBack,
                        r = t.targetduration,
                        n = this.config,
                        a = n.liveSyncDuration,
                        s = n.liveSyncDurationCount,
                        o = n.lowLatencyMode,
                        l = this.hls.userConfig,
                        u = o && i || e;
                    (l.liveSyncDuration || l.liveSyncDurationCount || 0 === u) && (u = void 0 !== a ? a : s * r);
                    var h = r;
                    return u + Math.min(1 * this.stallCount, h)
                }
            }, {
                key: "liveSyncPosition",
                get: function() {
                    var t = this.estimateLiveEdge(),
                        e = this.targetLatency,
                        i = this.levelDetails;
                    if (null === t || null === e || null === i) return null;
                    var r = i.edge,
                        n = t - e - this.edgeStalled,
                        a = r - i.totalduration,
                        s = r - (this.config.lowLatencyMode && i.partTarget || i.targetduration);
                    return Math.min(Math.max(a, n), s)
                }
            }, {
                key: "drift",
                get: function() {
                    var t = this.levelDetails;
                    return null === t ? 1 : t.drift
                }
            }, {
                key: "edgeStalled",
                get: function() {
                    var t = this.levelDetails;
                    if (null === t) return 0;
                    var e = 3 * (this.config.lowLatencyMode && t.partTarget || t.targetduration);
                    return Math.max(t.age - e, 0)
                }
            }, {
                key: "forwardBufferLength",
                get: function() {
                    var t = this.media,
                        e = this.levelDetails;
                    if (!t || !e) return 0;
                    var i = t.buffered.length;
                    return (i ? t.buffered.end(i - 1) : e.edge) - this.currentTime
                }
            }]) && W(e.prototype, i), r && W(e, r), Object.defineProperty(e, "prototype", {
                writable: !1
            }), t
        }();

        function z(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }! function(t) {
            t.No = "", t.Yes = "YES", t.v2 = "v2"
        }(Y || (Y = {}));
        var X = function() {
                function t(t, e, i) {
                    this.msn = void 0, this.part = void 0, this.skip = void 0, this.msn = t, this.part = e, this.skip = i
                }
                return t.prototype.addDirectives = function(t) {
                    var e = new self.URL(t);
                    return void 0 !== this.msn && e.searchParams.set("_HLS_msn", this.msn.toString()), void 0 !== this.part && e.searchParams.set("_HLS_part", this.part.toString()), this.skip && e.searchParams.set("_HLS_skip", this.skip), e.toString()
                }, t
            }(),
            Q = function() {
                function t(t) {
                    this.attrs = void 0, this.audioCodec = void 0, this.bitrate = void 0, this.codecSet = void 0, this.height = void 0, this.id = void 0, this.name = void 0, this.videoCodec = void 0, this.width = void 0, this.unknownCodecs = void 0, this.audioGroupIds = void 0, this.details = void 0, this.fragmentError = 0, this.loadError = 0, this.loaded = void 0, this.realBitrate = 0, this.textGroupIds = void 0, this.url = void 0, this._urlId = 0, this.url = [t.url], this.attrs = t.attrs, this.bitrate = t.bitrate, t.details && (this.details = t.details), this.id = t.id || 0, this.name = t.name, this.width = t.width || 0, this.height = t.height || 0, this.audioCodec = t.audioCodec, this.videoCodec = t.videoCodec, this.unknownCodecs = t.unknownCodecs, this.codecSet = [t.videoCodec, t.audioCodec].filter((function(t) {
                        return t
                    })).join(",").replace(/\.[^.,]+/g, "")
                }
                var e, i, r;
                return e = t, (i = [{
                    key: "maxBitrate",
                    get: function() {
                        return Math.max(this.realBitrate, this.bitrate)
                    }
                }, {
                    key: "uri",
                    get: function() {
                        return this.url[this._urlId] || ""
                    }
                }, {
                    key: "urlId",
                    get: function() {
                        return this._urlId
                    },
                    set: function(t) {
                        var e = t % this.url.length;
                        this._urlId !== e && (this.details = void 0, this._urlId = e)
                    }
                }]) && z(e.prototype, i), r && z(e, r), Object.defineProperty(e, "prototype", {
                    writable: !1
                }), t
            }();

        function $() {
            return ($ = Object.assign ? Object.assign.bind() : function(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var i = arguments[e];
                    for (var r in i) Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r])
                }
                return t
            }).apply(this, arguments)
        }

        function J(t, e, i) {
            switch (e) {
                case "audio":
                    t.audioGroupIds || (t.audioGroupIds = []), t.audioGroupIds.push(i);
                    break;
                case "text":
                    t.textGroupIds || (t.textGroupIds = []), t.textGroupIds.push(i)
            }
        }

        function Z(t) {
            var e = {};
            t.forEach((function(t) {
                var i = t.groupId || "";
                t.id = e[i] = e[i] || 0, e[i]++
            }))
        }

        function tt(t, e) {
            var i = e.startPTS;
            if (Object(a.a)(i)) {
                var r, n = 0;
                e.sn > t.sn ? (n = i - t.start, r = t) : (n = t.start - i, r = e), r.duration !== n && (r.duration = n)
            } else if (e.sn > t.sn) {
                t.cc === e.cc && t.minEndPTS ? e.start = t.start + (t.minEndPTS - t.start) : e.start = t.start + t.duration
            } else e.start = Math.max(t.start - e.duration, 0)
        }

        function et(t, e, i, r, n, s) {
            r - i <= 0 && (l.b.warn("Fragment should have a positive duration", e), r = i + e.duration, s = n + e.duration);
            var o = i,
                u = r,
                h = e.startPTS,
                d = e.endPTS;
            if (Object(a.a)(h)) {
                var c = Math.abs(h - i);
                Object(a.a)(e.deltaPTS) ? e.deltaPTS = Math.max(c, e.deltaPTS) : e.deltaPTS = c, o = Math.max(i, h), i = Math.min(i, h), n = Math.min(n, e.startDTS), u = Math.min(r, d), r = Math.max(r, d), s = Math.max(s, e.endDTS)
            }
            e.duration = r - i;
            var f = i - e.start;
            e.appendedPTS = r, e.start = e.startPTS = i, e.maxStartPTS = o, e.startDTS = n, e.endPTS = r, e.minEndPTS = u, e.endDTS = s;
            var g, v = e.sn;
            if (!t || v < t.startSN || v > t.endSN) return 0;
            var p = v - t.startSN,
                m = t.fragments;
            for (m[p] = e, g = p; g > 0; g--) tt(m[g], m[g - 1]);
            for (g = p; g < m.length - 1; g++) tt(m[g], m[g + 1]);
            return t.fragmentHint && tt(m[m.length - 1], t.fragmentHint), t.PTSKnown = t.alignedSliding = !0, f
        }

        function it(t, e) {
            for (var i = null, r = t.fragments, n = r.length - 1; n >= 0; n--) {
                var s = r[n].initSegment;
                if (s) {
                    i = s;
                    break
                }
            }
            t.fragmentHint && delete t.fragmentHint.endPTS;
            var o, u = 0;
            (function(t, e, i) {
                for (var r = e.skippedSegments, n = Math.max(t.startSN, e.startSN) - e.startSN, a = (t.fragmentHint ? 1 : 0) + (r ? e.endSN : Math.min(t.endSN, e.endSN)) - e.startSN, s = e.startSN - t.startSN, o = e.fragmentHint ? e.fragments.concat(e.fragmentHint) : e.fragments, l = t.fragmentHint ? t.fragments.concat(t.fragmentHint) : t.fragments, u = n; u <= a; u++) {
                    var h = l[s + u],
                        d = o[u];
                    r && !d && u < r && (d = e.fragments[u] = h), h && d && i(h, d)
                }
            }(t, e, (function(t, r) {
                t.relurl && (u = t.cc - r.cc), Object(a.a)(t.startPTS) && Object(a.a)(t.endPTS) && (r.start = r.startPTS = t.startPTS, r.startDTS = t.startDTS, r.appendedPTS = t.appendedPTS, r.maxStartPTS = t.maxStartPTS, r.endPTS = t.endPTS, r.endDTS = t.endDTS, r.minEndPTS = t.minEndPTS, r.duration = t.endPTS - t.startPTS, r.duration && (o = r), e.PTSKnown = e.alignedSliding = !0), r.elementaryStreams = t.elementaryStreams, r.loader = t.loader, r.stats = t.stats, r.urlId = t.urlId, t.initSegment && (r.initSegment = t.initSegment, i = t.initSegment)
            })), i) && (e.fragmentHint ? e.fragments.concat(e.fragmentHint) : e.fragments).forEach((function(t) {
                var e;
                t.initSegment && t.initSegment.relurl !== (null === (e = i) || void 0 === e ? void 0 : e.relurl) || (t.initSegment = i)
            }));
            if (e.skippedSegments)
                if (e.deltaUpdateFailed = e.fragments.some((function(t) {
                        return !t
                    })), e.deltaUpdateFailed) {
                    l.b.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");
                    for (var h = e.skippedSegments; h--;) e.fragments.shift();
                    e.startSN = e.fragments[0].sn, e.startCC = e.fragments[0].cc
                } else e.canSkipDateRanges && (e.dateRanges = function(t, e, i) {
                    var r = $({}, t);
                    i && i.forEach((function(t) {
                        delete r[t]
                    }));
                    return Object.keys(e).forEach((function(t) {
                        var i = new v(e[t].attr, r[t]);
                        i.isValid ? r[t] = i : l.b.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "' + JSON.stringify(e[t].attr) + '"')
                    })), r
                }(t.dateRanges, e.dateRanges, e.recentlyRemovedDateranges));
            var d = e.fragments;
            if (u) {
                l.b.warn("discontinuity sliding from playlist, take drift into account");
                for (var c = 0; c < d.length; c++) d[c].cc += u
            }
            e.skippedSegments && (e.startCC = e.fragments[0].cc),
                function(t, e, i) {
                    if (t && e)
                        for (var r = 0, n = 0, a = t.length; n <= a; n++) {
                            var s = t[n],
                                o = e[n + r];
                            s && o && s.index === o.index && s.fragment.sn === o.fragment.sn ? i(s, o) : r--
                        }
                }(t.partList, e.partList, (function(t, e) {
                    e.elementaryStreams = t.elementaryStreams, e.stats = t.stats
                })), o ? et(e, o, o.startPTS, o.endPTS, o.startDTS, o.endDTS) : rt(t, e), d.length && (e.totalduration = e.edge - d[0].start), e.driftStartTime = t.driftStartTime, e.driftStart = t.driftStart;
            var f = e.advancedDateTime;
            if (e.advanced && f) {
                var g = e.edge;
                e.driftStart || (e.driftStartTime = f, e.driftStart = g), e.driftEndTime = f, e.driftEnd = g
            } else e.driftEndTime = t.driftEndTime, e.driftEnd = t.driftEnd, e.advancedDateTime = t.advancedDateTime
        }

        function rt(t, e) {
            var i = e.startSN + e.skippedSegments - t.startSN,
                r = t.fragments;
            i < 0 || i >= r.length || nt(e, r[i].start)
        }

        function nt(t, e) {
            if (e) {
                for (var i = t.fragments, r = t.skippedSegments; r < i.length; r++) i[r].start += e;
                t.fragmentHint && (t.fragmentHint.start += e)
            }
        }
        var at = function() {
            function t(t, e) {
                this.hls = void 0, this.timer = -1, this.canLoad = !1, this.retryCount = 0, this.log = void 0, this.warn = void 0, this.log = l.b.log.bind(l.b, e + ":"), this.warn = l.b.warn.bind(l.b, e + ":"), this.hls = t
            }
            var e = t.prototype;
            return e.destroy = function() {
                this.clearTimer(), this.hls = this.log = this.warn = null
            }, e.onError = function(t, e) {
                e.fatal && e.type === o.b.NETWORK_ERROR && this.clearTimer()
            }, e.clearTimer = function() {
                clearTimeout(this.timer), this.timer = -1
            }, e.startLoad = function() {
                this.canLoad = !0, this.retryCount = 0, this.loadPlaylist()
            }, e.stopLoad = function() {
                this.canLoad = !1, this.clearTimer()
            }, e.switchParams = function(t, e) {
                var i = null == e ? void 0 : e.renditionReports;
                if (i)
                    for (var r = 0; r < i.length; r++) {
                        var n = i[r],
                            s = "" + n.URI;
                        if (s === t.slice(-s.length)) {
                            var o = parseInt(n["LAST-MSN"]),
                                l = parseInt(n["LAST-PART"]);
                            if (e && this.hls.config.lowLatencyMode) {
                                var u = Math.min(e.age - e.partTarget, e.targetduration);
                                void 0 !== l && u > e.partTarget && (l += 1)
                            }
                            if (Object(a.a)(o)) return new X(o, Object(a.a)(l) ? l : void 0, Y.No)
                        }
                    }
            }, e.loadPlaylist = function(t) {}, e.shouldLoadTrack = function(t) {
                return this.canLoad && t && !!t.url && (!t.details || t.details.live)
            }, e.playlistLoaded = function(t, e, i) {
                var r = this,
                    n = e.details,
                    a = e.stats,
                    s = a.loading.end ? Math.max(0, self.performance.now() - a.loading.end) : 0;
                if (n.advancedDateTime = Date.now() - s, n.live || null != i && i.live) {
                    if (n.reloaded(i), i && this.log("live playlist " + t + " " + (n.advanced ? "REFRESHED " + n.lastPartSn + "-" + n.lastPartIndex : "MISSED")), i && n.fragments.length > 0 && it(i, n), !this.canLoad || !n.live) return;
                    var o, l = void 0,
                        u = void 0;
                    if (n.canBlockReload && n.endSN && n.advanced) {
                        var h = this.hls.config.lowLatencyMode,
                            d = n.lastPartSn,
                            c = n.endSN,
                            f = n.lastPartIndex,
                            g = d === c; - 1 !== f ? (l = g ? c + 1 : d, u = g ? h ? 0 : f : f + 1) : l = c + 1;
                        var v = n.age,
                            p = v + n.ageHeader,
                            m = Math.min(p - n.partTarget, 1.5 * n.targetduration);
                        if (m > 0) {
                            if (i && m > i.tuneInGoal) this.warn("CDN Tune-in goal increased from: " + i.tuneInGoal + " to: " + m + " with playlist age: " + n.age), m = 0;
                            else {
                                var y = Math.floor(m / n.targetduration);
                                if (l += y, void 0 !== u) u += Math.round(m % n.targetduration / n.partTarget);
                                this.log("CDN Tune-in age: " + n.ageHeader + "s last advanced " + v.toFixed(2) + "s goal: " + m + " skip sn " + y + " to part " + u)
                            }
                            n.tuneInGoal = m
                        }
                        if (o = this.getDeliveryDirectives(n, e.deliveryDirectives, l, u), h || !g) return void this.loadPlaylist(o)
                    } else o = this.getDeliveryDirectives(n, e.deliveryDirectives, l, u);
                    var T = function(t, e) {
                        var i, r = 1e3 * t.levelTargetDuration,
                            n = r / 2,
                            a = t.age,
                            s = a > 0 && a < 3 * r,
                            o = e.loading.end - e.loading.start,
                            l = t.availabilityDelay;
                        if (!1 === t.updated)
                            if (s) {
                                var u = 333 * t.misses;
                                i = Math.max(Math.min(n, 2 * o), u), t.availabilityDelay = (t.availabilityDelay || 0) + i
                            } else i = n;
                        else s ? (l = Math.min(l || r / 2, a), t.availabilityDelay = l, i = l + r - a) : i = r - o;
                        return Math.round(i)
                    }(n, a);
                    void 0 !== l && n.canBlockReload && (T -= n.partTarget || 1), this.log("reload live playlist " + t + " in " + Math.round(T) + " ms"), this.timer = self.setTimeout((function() {
                        return r.loadPlaylist(o)
                    }), T)
                } else this.clearTimer()
            }, e.getDeliveryDirectives = function(t, e, i, r) {
                var n = function(t, e) {
                    var i = t.canSkipUntil,
                        r = t.canSkipDateRanges,
                        n = t.endSN;
                    return i && (void 0 !== e ? e - n : 0) < i ? r ? Y.v2 : Y.Yes : Y.No
                }(t, i);
                return null != e && e.skip && t.deltaUpdateFailed && (i = e.msn, r = e.part, n = Y.No), new X(i, r, n)
            }, e.retryLoadingOrFail = function(t) {
                var e, i = this,
                    r = this.hls.config,
                    n = this.retryCount < r.levelLoadingMaxRetry;
                if (n)
                    if (this.retryCount++, t.details.indexOf("LoadTimeOut") > -1 && null !== (e = t.context) && void 0 !== e && e.deliveryDirectives) this.warn("retry playlist loading #" + this.retryCount + ' after "' + t.details + '"'), this.loadPlaylist();
                    else {
                        var a = Math.min(Math.pow(2, this.retryCount) * r.levelLoadingRetryDelay, r.levelLoadingMaxRetryTimeout);
                        this.timer = self.setTimeout((function() {
                            return i.loadPlaylist()
                        }), a), this.warn("retry playlist loading #" + this.retryCount + " in " + a + ' ms after "' + t.details + '"')
                    }
                else this.warn('cannot recover from error "' + t.details + '"'), this.clearTimer(), t.fatal = !0;
                return n
            }, t
        }();

        function st() {
            return (st = Object.assign ? Object.assign.bind() : function(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var i = arguments[e];
                    for (var r in i) Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r])
                }
                return t
            }).apply(this, arguments)
        }

        function ot(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }

        function lt(t, e) {
            return (lt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e, t
            })(t, e)
        }
        var ut, ht = /chrome|firefox/.test(navigator.userAgent.toLowerCase()),
            dt = function(t) {
                var e, i;

                function r(e) {
                    var i;
                    return (i = t.call(this, e, "[level-controller]") || this)._levels = [], i._firstLevel = -1, i._startLevel = void 0, i.currentLevelIndex = -1, i.manualLevelIndex = -1, i.onParsedComplete = void 0, i._registerListeners(), i
                }
                i = t, (e = r).prototype = Object.create(i.prototype), e.prototype.constructor = e, lt(e, i);
                var n, a, l, u = r.prototype;
                return u._registerListeners = function() {
                    var t = this.hls;
                    t.on(s.a.MANIFEST_LOADED, this.onManifestLoaded, this), t.on(s.a.LEVEL_LOADED, this.onLevelLoaded, this), t.on(s.a.AUDIO_TRACK_SWITCHED, this.onAudioTrackSwitched, this), t.on(s.a.FRAG_LOADED, this.onFragLoaded, this), t.on(s.a.ERROR, this.onError, this)
                }, u._unregisterListeners = function() {
                    var t = this.hls;
                    t.off(s.a.MANIFEST_LOADED, this.onManifestLoaded, this), t.off(s.a.LEVEL_LOADED, this.onLevelLoaded, this), t.off(s.a.AUDIO_TRACK_SWITCHED, this.onAudioTrackSwitched, this), t.off(s.a.FRAG_LOADED, this.onFragLoaded, this), t.off(s.a.ERROR, this.onError, this)
                }, u.destroy = function() {
                    this._unregisterListeners(), this.manualLevelIndex = -1, this._levels.length = 0, t.prototype.destroy.call(this)
                }, u.startLoad = function() {
                    this._levels.forEach((function(t) {
                        t.loadError = 0
                    })), t.prototype.startLoad.call(this)
                }, u.onManifestLoaded = function(t, e) {
                    var i, r, n = [],
                        a = [],
                        l = [],
                        u = {},
                        h = !1,
                        d = !1,
                        c = !1;
                    if (e.levels.forEach((function(t) {
                            var e = t.attrs;
                            h = h || !(!t.width || !t.height), d = d || !!t.videoCodec, c = c || !!t.audioCodec, ht && t.audioCodec && -1 !== t.audioCodec.indexOf("mp4a.40.34") && (t.audioCodec = void 0);
                            var i = t.bitrate + "-" + t.attrs.RESOLUTION + "-" + t.attrs.CODECS;
                            (r = u[i]) ? r.url.push(t.url): (r = new Q(t), u[i] = r, n.push(r)), e && (e.AUDIO && J(r, "audio", e.AUDIO), e.SUBTITLES && J(r, "text", e.SUBTITLES))
                        })), (h || d) && c && (n = n.filter((function(t) {
                            var e = t.videoCodec,
                                i = t.width,
                                r = t.height;
                            return !!e || !(!i || !r)
                        }))), n = n.filter((function(t) {
                            var e = t.audioCodec,
                                i = t.videoCodec;
                            return (!e || E(e, "audio")) && (!i || E(i, "video"))
                        })), e.audioTracks && Z(a = e.audioTracks.filter((function(t) {
                            return !t.audioCodec || E(t.audioCodec, "audio")
                        }))), e.subtitles && Z(l = e.subtitles), n.length > 0) {
                        i = n[0].bitrate, n.sort((function(t, e) {
                            return t.bitrate - e.bitrate
                        })), this._levels = n;
                        for (var f = 0; f < n.length; f++)
                            if (n[f].bitrate === i) {
                                this._firstLevel = f, this.log("manifest loaded, " + n.length + " level(s) found, first bitrate: " + i);
                                break
                            } var g = c && !d,
                            v = {
                                levels: n,
                                audioTracks: a,
                                subtitleTracks: l,
                                firstLevel: this._firstLevel,
                                stats: e.stats,
                                audio: c,
                                video: d,
                                altAudio: !g && a.some((function(t) {
                                    return !!t.url
                                }))
                            };
                        this.hls.trigger(s.a.MANIFEST_PARSED, v), (this.hls.config.autoStartLoad || this.hls.forceStartLoad) && this.hls.startLoad(this.hls.config.startPosition)
                    } else this.hls.trigger(s.a.ERROR, {
                        type: o.b.MEDIA_ERROR,
                        details: o.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,
                        fatal: !0,
                        url: e.url,
                        reason: "no level with compatible codecs found in manifest"
                    })
                }, u.onError = function(e, i) {
                    var r;
                    if (t.prototype.onError.call(this, e, i), !i.fatal) {
                        var n = i.context,
                            a = this._levels[this.currentLevelIndex];
                        if (n && (n.type === w.a.AUDIO_TRACK && a.audioGroupIds && n.groupId === a.audioGroupIds[a.urlId] || n.type === w.a.SUBTITLE_TRACK && a.textGroupIds && n.groupId === a.textGroupIds[a.urlId])) this.redundantFailover(this.currentLevelIndex);
                        else {
                            var s, l = !1,
                                u = !0;
                            switch (i.details) {
                                case o.a.FRAG_LOAD_ERROR:
                                case o.a.FRAG_LOAD_TIMEOUT:
                                case o.a.KEY_LOAD_ERROR:
                                case o.a.KEY_LOAD_TIMEOUT:
                                    if (i.frag) {
                                        var h = i.frag.type === w.b.MAIN ? i.frag.level : this.currentLevelIndex,
                                            d = this._levels[h];
                                        d ? (d.fragmentError++, d.fragmentError > this.hls.config.fragLoadingMaxRetry && (s = h)) : s = h
                                    }
                                    break;
                                case o.a.LEVEL_LOAD_ERROR:
                                case o.a.LEVEL_LOAD_TIMEOUT:
                                    n && (n.deliveryDirectives && (u = !1), s = n.level), l = !0;
                                    break;
                                case o.a.REMUX_ALLOC_ERROR:
                                    s = null != (r = i.level) ? r : this.currentLevelIndex, l = !0
                            }
                            void 0 !== s && this.recoverLevel(i, s, l, u)
                        }
                    }
                }, u.recoverLevel = function(t, e, i, r) {
                    var n = t.details,
                        a = this._levels[e];
                    if (a.loadError++, i) {
                        if (!this.retryLoadingOrFail(t)) return void(this.currentLevelIndex = -1);
                        t.levelRetry = !0
                    }
                    if (r) {
                        var s = a.url.length;
                        if (s > 1 && a.loadError < s) t.levelRetry = !0, this.redundantFailover(e);
                        else if (-1 === this.manualLevelIndex) {
                            for (var o = -1, l = this._levels, u = l.length; u--;) {
                                var h = (u + this.currentLevelIndex) % l.length;
                                if (h !== this.currentLevelIndex && 0 === l[h].loadError) {
                                    o = h;
                                    break
                                }
                            }
                            o > -1 && this.currentLevelIndex !== o && (this.warn(n + ": switch to " + o), t.levelRetry = !0, this.hls.nextAutoLevel = o)
                        }
                    }
                }, u.redundantFailover = function(t) {
                    var e = this._levels[t],
                        i = e.url.length;
                    if (i > 1) {
                        var r = (e.urlId + 1) % i;
                        this.warn("Switching to redundant URL-id " + r), this._levels.forEach((function(t) {
                            t.urlId = r
                        })), this.level = t
                    }
                }, u.onFragLoaded = function(t, e) {
                    var i = e.frag;
                    if (void 0 !== i && i.type === w.b.MAIN) {
                        var r = this._levels[i.level];
                        void 0 !== r && (r.fragmentError = 0, r.loadError = 0)
                    }
                }, u.onLevelLoaded = function(t, e) {
                    var i, r, n = e.level,
                        a = e.details,
                        s = this._levels[n];
                    if (!s) return this.warn("Invalid level index " + n), void(null !== (r = e.deliveryDirectives) && void 0 !== r && r.skip && (a.deltaUpdateFailed = !0));
                    n === this.currentLevelIndex ? (0 === s.fragmentError && (s.loadError = 0, this.retryCount = 0), this.playlistLoaded(n, e, s.details)) : null !== (i = e.deliveryDirectives) && void 0 !== i && i.skip && (a.deltaUpdateFailed = !0)
                }, u.onAudioTrackSwitched = function(t, e) {
                    var i = this.hls.levels[this.currentLevelIndex];
                    if (i && i.audioGroupIds) {
                        for (var r = -1, n = this.hls.audioTracks[e.id].groupId, a = 0; a < i.audioGroupIds.length; a++)
                            if (i.audioGroupIds[a] === n) {
                                r = a;
                                break
                            } r !== i.urlId && (i.urlId = r, this.startLoad())
                    }
                }, u.loadPlaylist = function(t) {
                    var e = this.currentLevelIndex,
                        i = this._levels[e];
                    if (this.canLoad && i && i.url.length > 0) {
                        var r = i.urlId,
                            n = i.url[r];
                        if (t) try {
                            n = t.addDirectives(n)
                        } catch (t) {
                            this.warn("Could not construct new URL with HLS Delivery Directives: " + t)
                        }
                        this.log("Attempt loading level index " + e + (t ? " at sn " + t.msn + " part " + t.part : "") + " with URL-id " + r + " " + n), this.clearTimer(), this.hls.trigger(s.a.LEVEL_LOADING, {
                            url: n,
                            level: e,
                            id: r,
                            deliveryDirectives: t || null
                        })
                    }
                }, u.removeLevel = function(t, e) {
                    var i = function(t, i) {
                            return i !== e
                        },
                        r = this._levels.filter((function(r, n) {
                            return n !== t || r.url.length > 1 && void 0 !== e && (r.url = r.url.filter(i), r.audioGroupIds && (r.audioGroupIds = r.audioGroupIds.filter(i)), r.textGroupIds && (r.textGroupIds = r.textGroupIds.filter(i)), r.urlId = 0, !0)
                        })).map((function(t, e) {
                            var i = t.details;
                            return null != i && i.fragments && i.fragments.forEach((function(t) {
                                t.level = e
                            })), t
                        }));
                    this._levels = r, this.hls.trigger(s.a.LEVELS_UPDATED, {
                        levels: r
                    })
                }, n = r, (a = [{
                    key: "levels",
                    get: function() {
                        return 0 === this._levels.length ? null : this._levels
                    }
                }, {
                    key: "level",
                    get: function() {
                        return this.currentLevelIndex
                    },
                    set: function(t) {
                        var e, i = this._levels;
                        if (0 !== i.length && (this.currentLevelIndex !== t || null === (e = i[t]) || void 0 === e || !e.details)) {
                            if (t < 0 || t >= i.length) {
                                var r = t < 0;
                                if (this.hls.trigger(s.a.ERROR, {
                                        type: o.b.OTHER_ERROR,
                                        details: o.a.LEVEL_SWITCH_ERROR,
                                        level: t,
                                        fatal: r,
                                        reason: "invalid level idx"
                                    }), r) return;
                                t = Math.min(t, i.length - 1)
                            }
                            this.clearTimer();
                            var n = this.currentLevelIndex,
                                a = i[n],
                                l = i[t];
                            this.log("switching to level " + t + " from " + n), this.currentLevelIndex = t;
                            var u = st({}, l, {
                                level: t,
                                maxBitrate: l.maxBitrate,
                                uri: l.uri,
                                urlId: l.urlId
                            });
                            delete u._urlId, this.hls.trigger(s.a.LEVEL_SWITCHING, u);
                            var h = l.details;
                            if (!h || h.live) {
                                var d = this.switchParams(l.uri, null == a ? void 0 : a.details);
                                this.loadPlaylist(d)
                            }
                        }
                    }
                }, {
                    key: "manualLevel",
                    get: function() {
                        return this.manualLevelIndex
                    },
                    set: function(t) {
                        this.manualLevelIndex = t, void 0 === this._startLevel && (this._startLevel = t), -1 !== t && (this.level = t)
                    }
                }, {
                    key: "firstLevel",
                    get: function() {
                        return this._firstLevel
                    },
                    set: function(t) {
                        this._firstLevel = t
                    }
                }, {
                    key: "startLevel",
                    get: function() {
                        if (void 0 === this._startLevel) {
                            var t = this.hls.config.startLevel;
                            return void 0 !== t ? t : this._firstLevel
                        }
                        return this._startLevel
                    },
                    set: function(t) {
                        this._startLevel = t
                    }
                }, {
                    key: "nextLoadLevel",
                    get: function() {
                        return -1 !== this.manualLevelIndex ? this.manualLevelIndex : this.hls.nextAutoLevel
                    },
                    set: function(t) {
                        this.level = t, -1 === this.manualLevelIndex && (this.hls.nextAutoLevel = t)
                    }
                }]) && ot(n.prototype, a), l && ot(n, l), Object.defineProperty(n, "prototype", {
                    writable: !1
                }), r
            }(at);
        ! function(t) {
            t.NOT_LOADED = "NOT_LOADED", t.APPENDING = "APPENDING", t.PARTIAL = "PARTIAL", t.OK = "OK"
        }(ut || (ut = {}));
        var ct = function() {
            function t(t) {
                this.activeFragment = null, this.activeParts = null, this.fragments = Object.create(null), this.timeRanges = Object.create(null), this.bufferPadding = .2, this.hls = void 0, this.hls = t, this._registerListeners()
            }
            var e = t.prototype;
            return e._registerListeners = function() {
                var t = this.hls;
                t.on(s.a.BUFFER_APPENDED, this.onBufferAppended, this), t.on(s.a.FRAG_BUFFERED, this.onFragBuffered, this), t.on(s.a.FRAG_LOADED, this.onFragLoaded, this)
            }, e._unregisterListeners = function() {
                var t = this.hls;
                t.off(s.a.BUFFER_APPENDED, this.onBufferAppended, this), t.off(s.a.FRAG_BUFFERED, this.onFragBuffered, this), t.off(s.a.FRAG_LOADED, this.onFragLoaded, this)
            }, e.destroy = function() {
                this._unregisterListeners(), this.fragments = this.timeRanges = null
            }, e.getAppendedFrag = function(t, e) {
                if (e === w.b.MAIN) {
                    var i = this.activeFragment,
                        r = this.activeParts;
                    if (!i) return null;
                    if (r)
                        for (var n = r.length; n--;) {
                            var a = r[n],
                                s = a ? a.end : i.appendedPTS;
                            if (a.start <= t && void 0 !== s && t <= s) return n > 9 && (this.activeParts = r.slice(n - 9)), a
                        } else if (i.start <= t && void 0 !== i.appendedPTS && t <= i.appendedPTS) return i
                }
                return this.getBufferedFrag(t, e)
            }, e.getBufferedFrag = function(t, e) {
                for (var i = this.fragments, r = Object.keys(i), n = r.length; n--;) {
                    var a = i[r[n]];
                    if ((null == a ? void 0 : a.body.type) === e && a.buffered) {
                        var s = a.body;
                        if (s.start <= t && t <= s.end) return s
                    }
                }
                return null
            }, e.detectEvictedFragments = function(t, e, i) {
                var r = this;
                Object.keys(this.fragments).forEach((function(n) {
                    var a = r.fragments[n];
                    if (a)
                        if (a.buffered) {
                            var s = a.range[t];
                            s && s.time.some((function(t) {
                                var i = !r.isTimeBuffered(t.startPTS, t.endPTS, e);
                                return i && r.removeFragment(a.body), i
                            }))
                        } else a.body.type === i && r.removeFragment(a.body)
                }))
            }, e.detectPartialFragments = function(t) {
                var e = this,
                    i = this.timeRanges,
                    r = t.frag,
                    n = t.part;
                if (i && "initSegment" !== r.sn) {
                    var a = gt(r),
                        s = this.fragments[a];
                    s && (Object.keys(i).forEach((function(t) {
                        var a = r.elementaryStreams[t];
                        if (a) {
                            var o = i[t],
                                l = null !== n || !0 === a.partial;
                            s.range[t] = e.getBufferedTimes(r, n, l, o)
                        }
                    })), s.loaded = null, Object.keys(s.range).length ? s.buffered = !0 : this.removeFragment(s.body))
                }
            }, e.fragBuffered = function(t) {
                var e = gt(t),
                    i = this.fragments[e];
                i && (i.loaded = null, i.buffered = !0)
            }, e.getBufferedTimes = function(t, e, i, r) {
                for (var n = {
                        time: [],
                        partial: i
                    }, a = e ? e.start : t.start, s = e ? e.end : t.end, o = t.minEndPTS || s, l = t.maxStartPTS || a, u = 0; u < r.length; u++) {
                    var h = r.start(u) - this.bufferPadding,
                        d = r.end(u) + this.bufferPadding;
                    if (l >= h && o <= d) {
                        n.time.push({
                            startPTS: Math.max(a, r.start(u)),
                            endPTS: Math.min(s, r.end(u))
                        });
                        break
                    }
                    if (a < d && s > h) n.partial = !0, n.time.push({
                        startPTS: Math.max(a, r.start(u)),
                        endPTS: Math.min(s, r.end(u))
                    });
                    else if (s <= h) break
                }
                return n
            }, e.getPartialFragment = function(t) {
                var e, i, r, n = null,
                    a = 0,
                    s = this.bufferPadding,
                    o = this.fragments;
                return Object.keys(o).forEach((function(l) {
                    var u = o[l];
                    u && ft(u) && (i = u.body.start - s, r = u.body.end + s, t >= i && t <= r && (e = Math.min(t - i, r - t), a <= e && (n = u.body, a = e)))
                })), n
            }, e.getState = function(t) {
                var e = gt(t),
                    i = this.fragments[e];
                return i ? i.buffered ? ft(i) ? ut.PARTIAL : ut.OK : ut.APPENDING : ut.NOT_LOADED
            }, e.isTimeBuffered = function(t, e, i) {
                for (var r, n, a = 0; a < i.length; a++) {
                    if (r = i.start(a) - this.bufferPadding, n = i.end(a) + this.bufferPadding, t >= r && e <= n) return !0;
                    if (e <= r) return !1
                }
                return !1
            }, e.onFragLoaded = function(t, e) {
                var i = e.frag,
                    r = e.part;
                if ("initSegment" !== i.sn && !i.bitrateTest && !r) {
                    var n = gt(i);
                    this.fragments[n] = {
                        body: i,
                        loaded: e,
                        buffered: !1,
                        range: Object.create(null)
                    }
                }
            }, e.onBufferAppended = function(t, e) {
                var i = this,
                    r = e.frag,
                    n = e.part,
                    a = e.timeRanges;
                if (r.type === w.b.MAIN)
                    if (this.activeFragment = r, n) {
                        var s = this.activeParts;
                        s || (this.activeParts = s = []), s.push(n)
                    } else this.activeParts = null;
                this.timeRanges = a, Object.keys(a).forEach((function(t) {
                    var e = a[t];
                    if (i.detectEvictedFragments(t, e), !n)
                        for (var s = 0; s < e.length; s++) r.appendedPTS = Math.max(e.end(s), r.appendedPTS || 0)
                }))
            }, e.onFragBuffered = function(t, e) {
                this.detectPartialFragments(e)
            }, e.hasFragment = function(t) {
                var e = gt(t);
                return !!this.fragments[e]
            }, e.removeFragmentsInRange = function(t, e, i) {
                var r = this;
                Object.keys(this.fragments).forEach((function(n) {
                    var a = r.fragments[n];
                    if (a && a.buffered) {
                        var s = a.body;
                        s.type === i && s.start < e && s.end > t && r.removeFragment(s)
                    }
                }))
            }, e.removeFragment = function(t) {
                var e = gt(t);
                t.stats.loaded = 0, t.clearElementaryStreamInfo(), delete this.fragments[e]
            }, e.removeAllFragments = function() {
                this.fragments = Object.create(null), this.activeFragment = null, this.activeParts = null
            }, t
        }();

        function ft(t) {
            var e, i;
            return t.buffered && ((null === (e = t.range.video) || void 0 === e ? void 0 : e.partial) || (null === (i = t.range.audio) || void 0 === i ? void 0 : i.partial))
        }

        function gt(t) {
            return t.type + "_" + t.level + "_" + t.urlId + "_" + t.sn
        }
        var vt = function() {
                function t() {
                    this._boundTick = void 0, this._tickTimer = null, this._tickInterval = null, this._tickCallCount = 0, this._boundTick = this.tick.bind(this)
                }
                var e = t.prototype;
                return e.destroy = function() {
                    this.onHandlerDestroying(), this.onHandlerDestroyed()
                }, e.onHandlerDestroying = function() {
                    this.clearNextTick(), this.clearInterval()
                }, e.onHandlerDestroyed = function() {}, e.hasInterval = function() {
                    return !!this._tickInterval
                }, e.hasNextTick = function() {
                    return !!this._tickTimer
                }, e.setInterval = function(t) {
                    return !this._tickInterval && (this._tickInterval = self.setInterval(this._boundTick, t), !0)
                }, e.clearInterval = function() {
                    return !!this._tickInterval && (self.clearInterval(this._tickInterval), this._tickInterval = null, !0)
                }, e.clearNextTick = function() {
                    return !!this._tickTimer && (self.clearTimeout(this._tickTimer), this._tickTimer = null, !0)
                }, e.tick = function() {
                    this._tickCallCount++, 1 === this._tickCallCount && (this.doTick(), this._tickCallCount > 1 && this.tickImmediate(), this._tickCallCount = 0)
                }, e.tickImmediate = function() {
                    this.clearNextTick(), this._tickTimer = self.setTimeout(this._boundTick, 0)
                }, e.doTick = function() {}, t
            }(),
            pt = {
                length: 0,
                start: function() {
                    return 0
                },
                end: function() {
                    return 0
                }
            },
            mt = function() {
                function t() {}
                return t.isBuffered = function(e, i) {
                    try {
                        if (e)
                            for (var r = t.getBuffered(e), n = 0; n < r.length; n++)
                                if (i >= r.start(n) && i <= r.end(n)) return !0
                    } catch (t) {}
                    return !1
                }, t.bufferInfo = function(e, i, r) {
                    try {
                        if (e) {
                            var n, a = t.getBuffered(e),
                                s = [];
                            for (n = 0; n < a.length; n++) s.push({
                                start: a.start(n),
                                end: a.end(n)
                            });
                            return this.bufferedInfo(s, i, r)
                        }
                    } catch (t) {}
                    return {
                        len: 0,
                        start: i,
                        end: i,
                        nextStart: void 0
                    }
                }, t.bufferedInfo = function(t, e, i) {
                    e = Math.max(0, e), t.sort((function(t, e) {
                        var i = t.start - e.start;
                        return i || e.end - t.end
                    }));
                    var r = [];
                    if (i)
                        for (var n = 0; n < t.length; n++) {
                            var a = r.length;
                            if (a) {
                                var s = r[a - 1].end;
                                t[n].start - s < i ? t[n].end > s && (r[a - 1].end = t[n].end) : r.push(t[n])
                            } else r.push(t[n])
                        } else r = t;
                    for (var o, l = 0, u = e, h = e, d = 0; d < r.length; d++) {
                        var c = r[d].start,
                            f = r[d].end;
                        if (e + i >= c && e < f) u = c, l = (h = f) - e;
                        else if (e + i < c) {
                            o = c;
                            break
                        }
                    }
                    return {
                        len: l,
                        start: u || 0,
                        end: h || 0,
                        nextStart: o
                    }
                }, t.getBuffered = function(t) {
                    try {
                        return t.buffered
                    } catch (t) {
                        return l.b.log("failed to get media.buffered", t), pt
                    }
                }, t
            }(),
            yt = function(t, e, i, r, n, a) {
                void 0 === r && (r = 0), void 0 === n && (n = -1), void 0 === a && (a = !1), this.level = void 0, this.sn = void 0, this.part = void 0, this.id = void 0, this.size = void 0, this.partial = void 0, this.transmuxing = {
                    start: 0,
                    executeStart: 0,
                    executeEnd: 0,
                    end: 0
                }, this.buffering = {
                    audio: {
                        start: 0,
                        executeStart: 0,
                        executeEnd: 0,
                        end: 0
                    },
                    video: {
                        start: 0,
                        executeStart: 0,
                        executeEnd: 0,
                        end: 0
                    },
                    audiovideo: {
                        start: 0,
                        executeStart: 0,
                        executeEnd: 0,
                        end: 0
                    }
                }, this.level = t, this.sn = e, this.id = i, this.size = r, this.part = n, this.partial = a
            };

        function Tt(t, e) {
            if (t) {
                var i = t.start + e;
                t.start = t.startPTS = i, t.endPTS = i + t.duration
            }
        }

        function bt(t, e) {
            for (var i = e.fragments, r = 0, n = i.length; r < n; r++) Tt(i[r], t);
            e.fragmentHint && Tt(e.fragmentHint, t), e.alignedSliding = !0
        }

        function Et(t, e, i) {
            e && (! function(t, e, i) {
                if (function(t, e, i) {
                        return !(!e.details || !(i.endCC > i.startCC || t && t.cc < i.startCC))
                    }(t, i, e)) {
                    var r = function(t, e) {
                        var i = t.fragments,
                            r = e.fragments;
                        if (r.length && i.length) {
                            var n = function(t, e) {
                                for (var i = null, r = 0, n = t.length; r < n; r++) {
                                    var a = t[r];
                                    if (a && a.cc === e) {
                                        i = a;
                                        break
                                    }
                                }
                                return i
                            }(i, r[0].cc);
                            if (n && (!n || n.startPTS)) return n;
                            l.b.log("No frag in previous level to align on")
                        } else l.b.log("No fragments to align")
                    }(i.details, e);
                    r && Object(a.a)(r.start) && (l.b.log("Adjusting PTS using last level due to CC increase within current level " + e.url), bt(r.start, e))
                }
            }(t, i, e), !i.alignedSliding && e.details && function(t, e) {
                if (!e.fragments.length || !t.hasProgramDateTime || !e.hasProgramDateTime) return;
                var i = e.fragments[0].programDateTime,
                    r = t.fragments[0].programDateTime,
                    n = (r - i) / 1e3 + e.fragments[0].start;
                n && Object(a.a)(n) && (l.b.log("Adjusting PTS using programDateTime delta " + (r - i) + "ms, sliding:" + n.toFixed(3) + " " + t.url + " "), bt(n, t))
            }(i, e.details), i.alignedSliding || !e.details || i.skippedSegments || rt(e.details, i))
        }

        function St(t, e) {
            var i = t.programDateTime;
            if (i) {
                var r = (i - e) / 1e3;
                t.start = t.startPTS = r, t.endPTS = r + t.duration
            }
        }

        function Lt(t, e) {
            if (e.fragments.length && t.hasProgramDateTime && e.hasProgramDateTime) {
                var i = e.fragments[0].programDateTime - 1e3 * e.fragments[0].start;
                t.fragments.forEach((function(t) {
                    St(t, i)
                })), t.fragmentHint && St(t.fragmentHint, i), t.alignedSliding = !0
            }
        }
        var At = {
            search: function(t, e) {
                for (var i = 0, r = t.length - 1, n = null, a = null; i <= r;) {
                    var s = e(a = t[n = (i + r) / 2 | 0]);
                    if (s > 0) i = n + 1;
                    else {
                        if (!(s < 0)) return a;
                        r = n - 1
                    }
                }
                return null
            }
        };

        function Dt(t, e, i, r) {
            void 0 === i && (i = 0), void 0 === r && (r = 0);
            var n = null;
            if (t ? n = e[t.sn - e[0].sn + 1] || null : 0 === i && 0 === e[0].start && (n = e[0]), n && 0 === Rt(i, r, n)) return n;
            var a = At.search(e, Rt.bind(null, i, r));
            return a || n
        }

        function Rt(t, e, i) {
            void 0 === t && (t = 0), void 0 === e && (e = 0);
            var r = Math.min(e, i.duration + (i.deltaPTS ? i.deltaPTS : 0));
            return i.start + i.duration - r <= t ? 1 : i.start - r > t && i.start ? -1 : 0
        }

        function kt(t, e, i) {
            var r = 1e3 * Math.min(e, i.duration + (i.deltaPTS ? i.deltaPTS : 0));
            return (i.endProgramDateTime || 0) - r > t
        }

        function _t(t) {
            var e = "function" == typeof Map ? new Map : void 0;
            return (_t = function(t) {
                if (null === t || (i = t, -1 === Function.toString.call(i).indexOf("[native code]"))) return t;
                var i;
                if ("function" != typeof t) throw new TypeError("Super expression must either be null or a function");
                if (void 0 !== e) {
                    if (e.has(t)) return e.get(t);
                    e.set(t, r)
                }

                function r() {
                    return It(t, arguments, wt(this).constructor)
                }
                return r.prototype = Object.create(t.prototype, {
                    constructor: {
                        value: r,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), Ct(r, t)
            })(t)
        }

        function It(t, e, i) {
            return (It = Ot() ? Reflect.construct.bind() : function(t, e, i) {
                var r = [null];
                r.push.apply(r, e);
                var n = new(Function.bind.apply(t, r));
                return i && Ct(n, i.prototype), n
            }).apply(null, arguments)
        }

        function Ot() {
            if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
            if (Reflect.construct.sham) return !1;
            if ("function" == typeof Proxy) return !0;
            try {
                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}))), !0
            } catch (t) {
                return !1
            }
        }

        function Ct(t, e) {
            return (Ct = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e, t
            })(t, e)
        }

        function wt(t) {
            return (wt = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
                return t.__proto__ || Object.getPrototypeOf(t)
            })(t)
        }
        var xt = Math.pow(2, 17),
            Pt = function() {
                function t(t) {
                    this.config = void 0, this.loader = null, this.partLoadTimeout = -1, this.config = t
                }
                var e = t.prototype;
                return e.destroy = function() {
                    this.loader && (this.loader.destroy(), this.loader = null)
                }, e.abort = function() {
                    this.loader && this.loader.abort()
                }, e.load = function(t, e) {
                    var i = this,
                        r = t.url;
                    if (!r) return Promise.reject(new Mt({
                        type: o.b.NETWORK_ERROR,
                        details: o.a.FRAG_LOAD_ERROR,
                        fatal: !1,
                        frag: t,
                        networkDetails: null
                    }, "Fragment does not have a " + (r ? "part list" : "url")));
                    this.abort();
                    var n = this.config,
                        a = n.fLoader,
                        s = n.loader;
                    return new Promise((function(r, l) {
                        i.loader && i.loader.destroy();
                        var u = i.loader = t.loader = a ? new a(n) : new s(n),
                            h = Ft(t),
                            d = {
                                timeout: n.fragLoadingTimeOut,
                                maxRetry: 0,
                                retryDelay: 0,
                                maxRetryDelay: n.fragLoadingMaxRetryTimeout,
                                highWaterMark: "initSegment" === t.sn ? 1 / 0 : xt
                            };
                        t.stats = u.stats, u.load(h, d, {
                            onSuccess: function(e, n, a, s) {
                                i.resetLoader(t, u), r({
                                    frag: t,
                                    part: null,
                                    payload: e.data,
                                    networkDetails: s
                                })
                            },
                            onError: function(e, r, n) {
                                i.resetLoader(t, u), l(new Mt({
                                    type: o.b.NETWORK_ERROR,
                                    details: o.a.FRAG_LOAD_ERROR,
                                    fatal: !1,
                                    frag: t,
                                    response: e,
                                    networkDetails: n
                                }))
                            },
                            onAbort: function(e, r, n) {
                                i.resetLoader(t, u), l(new Mt({
                                    type: o.b.NETWORK_ERROR,
                                    details: o.a.INTERNAL_ABORTED,
                                    fatal: !1,
                                    frag: t,
                                    networkDetails: n
                                }))
                            },
                            onTimeout: function(e, r, n) {
                                i.resetLoader(t, u), l(new Mt({
                                    type: o.b.NETWORK_ERROR,
                                    details: o.a.FRAG_LOAD_TIMEOUT,
                                    fatal: !1,
                                    frag: t,
                                    networkDetails: n
                                }))
                            },
                            onProgress: function(i, r, n, a) {
                                e && e({
                                    frag: t,
                                    part: null,
                                    payload: n,
                                    networkDetails: a
                                })
                            }
                        })
                    }))
                }, e.loadPart = function(t, e, i) {
                    var r = this;
                    this.abort();
                    var n = this.config,
                        a = n.fLoader,
                        s = n.loader;
                    return new Promise((function(l, u) {
                        r.loader && r.loader.destroy();
                        var h = r.loader = t.loader = a ? new a(n) : new s(n),
                            d = Ft(t, e),
                            c = {
                                timeout: n.fragLoadingTimeOut,
                                maxRetry: 0,
                                retryDelay: 0,
                                maxRetryDelay: n.fragLoadingMaxRetryTimeout,
                                highWaterMark: xt
                            };
                        e.stats = h.stats, h.load(d, c, {
                            onSuccess: function(n, a, s, o) {
                                r.resetLoader(t, h), r.updateStatsFromPart(t, e);
                                var u = {
                                    frag: t,
                                    part: e,
                                    payload: n.data,
                                    networkDetails: o
                                };
                                i(u), l(u)
                            },
                            onError: function(i, n, a) {
                                r.resetLoader(t, h), u(new Mt({
                                    type: o.b.NETWORK_ERROR,
                                    details: o.a.FRAG_LOAD_ERROR,
                                    fatal: !1,
                                    frag: t,
                                    part: e,
                                    response: i,
                                    networkDetails: a
                                }))
                            },
                            onAbort: function(i, n, a) {
                                t.stats.aborted = e.stats.aborted, r.resetLoader(t, h), u(new Mt({
                                    type: o.b.NETWORK_ERROR,
                                    details: o.a.INTERNAL_ABORTED,
                                    fatal: !1,
                                    frag: t,
                                    part: e,
                                    networkDetails: a
                                }))
                            },
                            onTimeout: function(i, n, a) {
                                r.resetLoader(t, h), u(new Mt({
                                    type: o.b.NETWORK_ERROR,
                                    details: o.a.FRAG_LOAD_TIMEOUT,
                                    fatal: !1,
                                    frag: t,
                                    part: e,
                                    networkDetails: a
                                }))
                            }
                        })
                    }))
                }, e.updateStatsFromPart = function(t, e) {
                    var i = t.stats,
                        r = e.stats,
                        n = r.total;
                    if (i.loaded += r.loaded, n) {
                        var a = Math.round(t.duration / e.duration),
                            s = Math.min(Math.round(i.loaded / n), a),
                            o = (a - s) * Math.round(i.loaded / s);
                        i.total = i.loaded + o
                    } else i.total = Math.max(i.loaded, i.total);
                    var l = i.loading,
                        u = r.loading;
                    l.start ? l.first += u.first - u.start : (l.start = u.start, l.first = u.first), l.end = u.end
                }, e.resetLoader = function(t, e) {
                    t.loader = null, this.loader === e && (self.clearTimeout(this.partLoadTimeout), this.loader = null), e.destroy()
                }, t
            }();

        function Ft(t, e) {
            void 0 === e && (e = null);
            var i = e || t,
                r = {
                    frag: t,
                    part: e,
                    responseType: "arraybuffer",
                    url: i.url,
                    headers: {},
                    rangeStart: 0,
                    rangeEnd: 0
                },
                n = i.byteRangeStartOffset,
                s = i.byteRangeEndOffset;
            return Object(a.a)(n) && Object(a.a)(s) && (r.rangeStart = n, r.rangeEnd = s), r
        }
        var Mt = function(t) {
                var e, i;

                function r(e) {
                    for (var i, r = arguments.length, n = new Array(r > 1 ? r - 1 : 0), a = 1; a < r; a++) n[a - 1] = arguments[a];
                    return (i = t.call.apply(t, [this].concat(n)) || this).data = void 0, i.data = e, i
                }
                return i = t, (e = r).prototype = Object.create(i.prototype), e.prototype.constructor = e, Ct(e, i), r
            }(_t(Error)),
            Nt = i(16),
            Ut = {
                toString: function(t) {
                    for (var e = "", i = t.length, r = 0; r < i; r++) e += "[" + t.start(r).toFixed(3) + "," + t.end(r).toFixed(3) + "]";
                    return e
                }
            };

        function Bt(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }

        function Gt(t) {
            if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return t
        }

        function jt(t, e) {
            return (jt = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e, t
            })(t, e)
        }
        var Kt = "STOPPED",
            Ht = "IDLE",
            Vt = "KEY_LOADING",
            Wt = "FRAG_LOADING",
            Yt = "FRAG_LOADING_WAITING_RETRY",
            qt = "WAITING_TRACK",
            zt = "PARSING",
            Xt = "PARSED",
            Qt = "ENDED",
            $t = "ERROR",
            Jt = "WAITING_INIT_PTS",
            Zt = "WAITING_LEVEL",
            te = function(t) {
                var e, i;

                function r(e, i, r) {
                    var n;
                    return (n = t.call(this) || this).hls = void 0, n.fragPrevious = null, n.fragCurrent = null, n.fragmentTracker = void 0, n.transmuxer = null, n._state = Kt, n.media = null, n.mediaBuffer = null, n.config = void 0, n.bitrateTest = !1, n.lastCurrentTime = 0, n.nextLoadPosition = 0, n.startPosition = 0, n.loadedmetadata = !1, n.fragLoadError = 0, n.retryDate = 0, n.levels = null, n.fragmentLoader = void 0, n.levelLastLoaded = null, n.startFragRequested = !1, n.decrypter = void 0, n.initPTS = [], n.onvseeking = null, n.onvended = null, n.logPrefix = "", n.log = void 0, n.warn = void 0, n.logPrefix = r, n.log = l.b.log.bind(l.b, r + ":"), n.warn = l.b.warn.bind(l.b, r + ":"), n.hls = e, n.fragmentLoader = new Pt(e.config), n.fragmentTracker = i, n.config = e.config, n.decrypter = new Nt.a(e, e.config), e.on(s.a.KEY_LOADED, n.onKeyLoaded, Gt(n)), e.on(s.a.LEVEL_SWITCHING, n.onLevelSwitching, Gt(n)), n
                }
                i = t, (e = r).prototype = Object.create(i.prototype), e.prototype.constructor = e, jt(e, i);
                var n, h, d, c = r.prototype;
                return c.doTick = function() {
                    this.onTickEnd()
                }, c.onTickEnd = function() {}, c.startLoad = function(t) {}, c.stopLoad = function() {
                    this.fragmentLoader.abort();
                    var t = this.fragCurrent;
                    t && this.fragmentTracker.removeFragment(t), this.resetTransmuxer(), this.fragCurrent = null, this.fragPrevious = null, this.clearInterval(), this.clearNextTick(), this.state = Kt
                }, c._streamEnded = function(t, e) {
                    var i = this.fragCurrent,
                        r = this.fragmentTracker;
                    if (!e.live && i && this.media && i.sn >= e.endSN && !t.nextStart) {
                        var n = e.partList;
                        if (null != n && n.length) {
                            var a = n[n.length - 1];
                            return mt.isBuffered(this.media, a.start + a.duration / 2)
                        }
                        var s = r.getState(i);
                        return s === ut.PARTIAL || s === ut.OK
                    }
                    return !1
                }, c.onMediaAttached = function(t, e) {
                    var i = this.media = this.mediaBuffer = e.media;
                    this.onvseeking = this.onMediaSeeking.bind(this), this.onvended = this.onMediaEnded.bind(this), i.addEventListener("seeking", this.onvseeking), i.addEventListener("ended", this.onvended);
                    var r = this.config;
                    this.levels && r.autoStartLoad && this.state === Kt && this.startLoad(r.startPosition)
                }, c.onMediaDetaching = function() {
                    var t = this.media;
                    null != t && t.ended && (this.log("MSE detaching and video ended, reset startPosition"), this.startPosition = this.lastCurrentTime = 0), t && this.onvseeking && this.onvended && (t.removeEventListener("seeking", this.onvseeking), t.removeEventListener("ended", this.onvended), this.onvseeking = this.onvended = null), this.media = this.mediaBuffer = null, this.loadedmetadata = !1, this.fragmentTracker.removeAllFragments(), this.stopLoad()
                }, c.onMediaSeeking = function() {
                    var t = this.config,
                        e = this.fragCurrent,
                        i = this.media,
                        r = this.mediaBuffer,
                        n = this.state,
                        s = i ? i.currentTime : 0,
                        o = mt.bufferInfo(r || i, s, t.maxBufferHole);
                    if (this.log("media seeking to " + (Object(a.a)(s) ? s.toFixed(3) : s) + ", state: " + n), n === Qt) this.resetLoadingState();
                    else if (e && !o.len) {
                        var l = t.maxFragLookUpTolerance,
                            u = e.start - l,
                            h = s > e.start + e.duration + l;
                        (s < u || h) && (h && e.loader && (this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"), e.loader.abort()), this.resetLoadingState())
                    }
                    i && (this.lastCurrentTime = s), this.loadedmetadata || o.len || (this.nextLoadPosition = this.startPosition = s), this.tickImmediate()
                }, c.onMediaEnded = function() {
                    this.startPosition = this.lastCurrentTime = 0
                }, c.onKeyLoaded = function(t, e) {
                    if (this.state === Vt && e.frag === this.fragCurrent && this.levels) {
                        this.state = Ht;
                        var i = this.levels[e.frag.level].details;
                        i && this.loadFragment(e.frag, i, e.frag.start)
                    }
                }, c.onLevelSwitching = function(t, e) {
                    this.fragLoadError = 0
                }, c.onHandlerDestroying = function() {
                    this.stopLoad(), t.prototype.onHandlerDestroying.call(this)
                }, c.onHandlerDestroyed = function() {
                    this.state = Kt, this.hls.off(s.a.KEY_LOADED, this.onKeyLoaded, this), this.hls.off(s.a.LEVEL_SWITCHING, this.onLevelSwitching, this), this.fragmentLoader && this.fragmentLoader.destroy(), this.decrypter && this.decrypter.destroy(), this.hls = this.log = this.warn = this.decrypter = this.fragmentLoader = this.fragmentTracker = null, t.prototype.onHandlerDestroyed.call(this)
                }, c.loadKey = function(t, e) {
                    this.log("Loading key for " + t.sn + " of [" + e.startSN + "-" + e.endSN + "], " + ("[stream-controller]" === this.logPrefix ? "level" : "track") + " " + t.level), this.state = Vt, this.fragCurrent = t, this.hls.trigger(s.a.KEY_LOADING, {
                        frag: t
                    })
                }, c.loadFragment = function(t, e, i) {
                    this._loadFragForPlayback(t, e, i)
                }, c._loadFragForPlayback = function(t, e, i) {
                    var r = this;
                    this._doFragLoad(t, e, i, (function(e) {
                        if (r.fragContextChanged(t)) return r.warn("Fragment " + t.sn + (e.part ? " p: " + e.part.index : "") + " of level " + t.level + " was dropped during download."), void r.fragmentTracker.removeFragment(t);
                        t.stats.chunkCount++, r._handleFragmentLoadProgress(e)
                    })).then((function(e) {
                        if (e) {
                            r.fragLoadError = 0;
                            var i = r.state;
                            r.fragContextChanged(t) ? (i === Wt || !r.fragCurrent && i === zt) && (r.fragmentTracker.removeFragment(t), r.state = Ht) : ("payload" in e && (r.log("Loaded fragment " + t.sn + " of level " + t.level), r.hls.trigger(s.a.FRAG_LOADED, e)), r._handleFragmentLoadComplete(e))
                        }
                    })).catch((function(e) {
                        r.state !== Kt && r.state !== $t && (r.warn(e), r.resetFragmentLoading(t))
                    }))
                }, c.flushMainBuffer = function(t, e, i) {
                    if (void 0 === i && (i = null), t - e) {
                        var r = {
                            startOffset: t,
                            endOffset: e,
                            type: i
                        };
                        this.fragLoadError = 0, this.hls.trigger(s.a.BUFFER_FLUSHING, r)
                    }
                }, c._loadInitSegment = function(t) {
                    var e = this;
                    this._doFragLoad(t).then((function(i) {
                        if (!i || e.fragContextChanged(t) || !e.levels) throw new Error("init load aborted");
                        return i
                    })).then((function(i) {
                        var r = e.hls,
                            n = i.payload,
                            a = t.decryptdata;
                        if (n && n.byteLength > 0 && a && a.key && a.iv && "AES-128" === a.method) {
                            var o = self.performance.now();
                            return e.decrypter.webCryptoDecrypt(new Uint8Array(n), a.key.buffer, a.iv.buffer).then((function(e) {
                                var n = self.performance.now();
                                return r.trigger(s.a.FRAG_DECRYPTED, {
                                    frag: t,
                                    payload: e,
                                    stats: {
                                        tstart: o,
                                        tdecrypt: n
                                    }
                                }), i.payload = e, i
                            }))
                        }
                        return i
                    })).then((function(i) {
                        var r = e.fragCurrent,
                            n = e.hls,
                            a = e.levels;
                        if (!a) throw new Error("init load aborted, missing levels");
                        a[t.level].details;
                        var o = t.stats;
                        e.state = Ht, e.fragLoadError = 0, t.data = new Uint8Array(i.payload), o.parsing.start = o.buffering.start = self.performance.now(), o.parsing.end = o.buffering.end = self.performance.now(), i.frag === r && n.trigger(s.a.FRAG_BUFFERED, {
                            stats: o,
                            frag: r,
                            part: null,
                            id: t.type
                        }), e.tick()
                    })).catch((function(i) {
                        e.state !== Kt && e.state !== $t && (e.warn(i), e.resetFragmentLoading(t))
                    }))
                }, c.fragContextChanged = function(t) {
                    var e = this.fragCurrent;
                    return !t || !e || t.level !== e.level || t.sn !== e.sn || t.urlId !== e.urlId
                }, c.fragBufferedComplete = function(t, e) {
                    var i = this.mediaBuffer ? this.mediaBuffer : this.media;
                    this.log("Buffered " + t.type + " sn: " + t.sn + (e ? " part: " + e.index : "") + " of " + ("[stream-controller]" === this.logPrefix ? "level" : "track") + " " + t.level + " " + (i ? Ut.toString(mt.getBuffered(i)) : "(detached)")), this.state = Ht, i && (!this.loadedmetadata && i.buffered.length && this.fragCurrent === this.fragPrevious && (this.loadedmetadata = !0, this.seekToStartPos()), this.tick())
                }, c.seekToStartPos = function() {}, c._handleFragmentLoadComplete = function(t) {
                    var e = this.transmuxer;
                    if (e) {
                        var i = t.frag,
                            r = t.part,
                            n = t.partsLoaded,
                            a = !n || 0 === n.length || n.some((function(t) {
                                return !t
                            })),
                            s = new yt(i.level, i.sn, i.stats.chunkCount + 1, 0, r ? r.index : -1, !a);
                        e.flush(s)
                    }
                }, c._handleFragmentLoadProgress = function(t) {}, c._doFragLoad = function(t, e, i, r) {
                    var n = this;
                    if (void 0 === i && (i = null), !this.levels) throw new Error("frag load aborted, missing levels");
                    if (i = Math.max(t.start, i || 0), this.config.lowLatencyMode && e) {
                        var o = e.partList;
                        if (o && r) {
                            i > t.end && e.fragmentHint && (t = e.fragmentHint);
                            var l = this.getNextPart(o, t, i);
                            if (l > -1) {
                                var u = o[l];
                                return this.log("Loading part sn: " + t.sn + " p: " + u.index + " cc: " + t.cc + " of playlist [" + e.startSN + "-" + e.endSN + "] parts [0-" + l + "-" + (o.length - 1) + "] " + ("[stream-controller]" === this.logPrefix ? "level" : "track") + ": " + t.level + ", target: " + parseFloat(i.toFixed(3))), this.nextLoadPosition = u.start + u.duration, this.state = Wt, this.hls.trigger(s.a.FRAG_LOADING, {
                                    frag: t,
                                    part: o[l],
                                    targetBufferTime: i
                                }), this.doFragPartsLoad(t, o, l, r).catch((function(t) {
                                    return n.handleFragLoadError(t)
                                }))
                            }
                            if (!t.url || this.loadedEndOfParts(o, i)) return Promise.resolve(null)
                        }
                    }
                    return this.log("Loading fragment " + t.sn + " cc: " + t.cc + " " + (e ? "of [" + e.startSN + "-" + e.endSN + "] " : "") + ("[stream-controller]" === this.logPrefix ? "level" : "track") + ": " + t.level + ", target: " + parseFloat(i.toFixed(3))), Object(a.a)(t.sn) && !this.bitrateTest && (this.nextLoadPosition = t.start + t.duration), this.state = Wt, this.hls.trigger(s.a.FRAG_LOADING, {
                        frag: t,
                        targetBufferTime: i
                    }), this.fragmentLoader.load(t, r).catch((function(t) {
                        return n.handleFragLoadError(t)
                    }))
                }, c.doFragPartsLoad = function(t, e, i, r) {
                    var n = this;
                    return new Promise((function(a, o) {
                        var l = [];
                        ! function i(u) {
                            var h = e[u];
                            n.fragmentLoader.loadPart(t, h, r).then((function(r) {
                                l[h.index] = r;
                                var o = r.part;
                                n.hls.trigger(s.a.FRAG_LOADED, r);
                                var d = e[u + 1];
                                if (!d || d.fragment !== t) return a({
                                    frag: t,
                                    part: o,
                                    partsLoaded: l
                                });
                                i(u + 1)
                            })).catch(o)
                        }(i)
                    }))
                }, c.handleFragLoadError = function(t) {
                    var e = t.data;
                    return e && e.details === o.a.INTERNAL_ABORTED ? this.handleFragLoadAborted(e.frag, e.part) : this.hls.trigger(s.a.ERROR, e), null
                }, c._handleTransmuxerFlush = function(t) {
                    var e = this.getCurrentContext(t);
                    if (e && this.state === zt) {
                        var i = e.frag,
                            r = e.part,
                            n = e.level,
                            a = self.performance.now();
                        i.stats.parsing.end = a, r && (r.stats.parsing.end = a), this.updateLevelTiming(i, r, n, t.partial)
                    } else this.fragCurrent || (this.state = Ht)
                }, c.getCurrentContext = function(t) {
                    var e = this.levels,
                        i = t.level,
                        r = t.sn,
                        n = t.part;
                    if (!e || !e[i]) return this.warn("Levels object was unset while buffering fragment " + r + " of level " + i + ". The current chunk will not be buffered."), null;
                    var a = e[i],
                        s = n > -1 ? function(t, e, i) {
                            if (!t || !t.details) return null;
                            var r = t.details.partList;
                            if (r)
                                for (var n = r.length; n--;) {
                                    var a = r[n];
                                    if (a.index === i && a.fragment.sn === e) return a
                                }
                            return null
                        }(a, r, n) : null,
                        o = s ? s.fragment : function(t, e, i) {
                            if (!t || !t.details) return null;
                            var r = t.details,
                                n = r.fragments[e - r.startSN];
                            return n || ((n = r.fragmentHint) && n.sn === e ? n : e < r.startSN && i && i.sn === e ? i : null)
                        }(a, r, this.fragCurrent);
                    return o ? {
                        frag: o,
                        part: s,
                        level: a
                    } : null
                }, c.bufferFragmentData = function(t, e, i, r) {
                    if (t && this.state === zt) {
                        var n = t.data1,
                            a = t.data2,
                            o = n;
                        if (n && a && (o = Object(u.b)(n, a)), o && o.length) {
                            var l = {
                                type: t.type,
                                frag: e,
                                part: i,
                                chunkMeta: r,
                                parent: e.type,
                                data: o
                            };
                            this.hls.trigger(s.a.BUFFER_APPENDING, l), t.dropped && t.independent && !i && this.flushBufferGap(e)
                        }
                    }
                }, c.flushBufferGap = function(t) {
                    var e = this.media;
                    if (e)
                        if (mt.isBuffered(e, e.currentTime)) {
                            var i = e.currentTime,
                                r = mt.bufferInfo(e, i, 0),
                                n = t.duration,
                                a = Math.min(2 * this.config.maxFragLookUpTolerance, .25 * n),
                                s = Math.max(Math.min(t.start - a, r.end - a), i + a);
                            t.start - s > a && this.flushMainBuffer(s, t.start)
                        } else this.flushMainBuffer(0, t.start)
                }, c.getFwdBufferInfo = function(t, e) {
                    var i = this.config,
                        r = this.getLoadPosition();
                    if (!Object(a.a)(r)) return null;
                    var n = mt.bufferInfo(t, r, i.maxBufferHole);
                    if (0 === n.len && void 0 !== n.nextStart) {
                        var s = this.fragmentTracker.getBufferedFrag(r, e);
                        if (s && n.nextStart < s.end) return mt.bufferInfo(t, r, Math.max(n.nextStart, i.maxBufferHole))
                    }
                    return n
                }, c.getMaxBufferLength = function(t) {
                    var e, i = this.config;
                    return e = t ? Math.max(8 * i.maxBufferSize / t, i.maxBufferLength) : i.maxBufferLength, Math.min(e, i.maxMaxBufferLength)
                }, c.reduceMaxBufferLength = function(t) {
                    var e = this.config,
                        i = t || e.maxBufferLength;
                    return e.maxMaxBufferLength >= i && (e.maxMaxBufferLength /= 2, this.warn("Reduce max buffer length to " + e.maxMaxBufferLength + "s"), !0)
                }, c.getNextFragment = function(t, e) {
                    var i = e.fragments,
                        r = i.length;
                    if (!r) return null;
                    var n, a = this.config,
                        s = i[0].start;
                    if (e.live) {
                        var o = a.initialLiveManifestSize;
                        if (r < o) return this.warn("Not enough fragments to start playback (have: " + r + ", need: " + o + ")"), null;
                        e.PTSKnown || this.startFragRequested || -1 !== this.startPosition || (n = this.getInitialLiveFragment(e, i), this.startPosition = n ? this.hls.liveSyncPosition || n.start : t)
                    } else t <= s && (n = i[0]);
                    if (!n) {
                        var l = a.lowLatencyMode ? e.partEnd : e.fragmentEnd;
                        n = this.getFragmentAtPosition(t, l, e)
                    }
                    return this.mapToInitFragWhenRequired(n)
                }, c.mapToInitFragWhenRequired = function(t) {
                    return null == t || !t.initSegment || null != t && t.initSegment.data || this.bitrateTest ? t : t.initSegment
                }, c.getNextPart = function(t, e, i) {
                    for (var r = -1, n = !1, a = !0, s = 0, o = t.length; s < o; s++) {
                        var l = t[s];
                        if (a = a && !l.independent, r > -1 && i < l.start) break;
                        var u = l.loaded;
                        !u && (n || l.independent || a) && l.fragment === e && (r = s), n = u
                    }
                    return r
                }, c.loadedEndOfParts = function(t, e) {
                    var i = t[t.length - 1];
                    return i && e > i.start && i.loaded
                }, c.getInitialLiveFragment = function(t, e) {
                    var i = this.fragPrevious,
                        r = null;
                    if (i) {
                        if (t.hasProgramDateTime && (this.log("Live playlist, switching playlist, load frag with same PDT: " + i.programDateTime), r = function(t, e, i) {
                                if (null === e || !Array.isArray(t) || !t.length || !Object(a.a)(e)) return null;
                                if (e < (t[0].programDateTime || 0)) return null;
                                if (e >= (t[t.length - 1].endProgramDateTime || 0)) return null;
                                i = i || 0;
                                for (var r = 0; r < t.length; ++r) {
                                    var n = t[r];
                                    if (kt(e, i, n)) return n
                                }
                                return null
                            }(e, i.endProgramDateTime, this.config.maxFragLookUpTolerance)), !r) {
                            var n = i.sn + 1;
                            if (n >= t.startSN && n <= t.endSN) {
                                var s = e[n - t.startSN];
                                i.cc === s.cc && (r = s, this.log("Live playlist, switching playlist, load frag with next SN: " + r.sn))
                            }
                            r || (r = function(t, e) {
                                return At.search(t, (function(t) {
                                    return t.cc < e ? 1 : t.cc > e ? -1 : 0
                                }))
                            }(e, i.cc)) && this.log("Live playlist, switching playlist, load frag with same CC: " + r.sn)
                        }
                    } else {
                        var o = this.hls.liveSyncPosition;
                        null !== o && (r = this.getFragmentAtPosition(o, this.bitrateTest ? t.fragmentEnd : t.edge, t))
                    }
                    return r
                }, c.getFragmentAtPosition = function(t, e, i) {
                    var r, n = this.config,
                        a = this.fragPrevious,
                        s = i.fragments,
                        o = i.endSN,
                        l = i.fragmentHint,
                        u = n.maxFragLookUpTolerance,
                        h = !!(n.lowLatencyMode && i.partList && l);
                    (h && l && !this.bitrateTest && (s = s.concat(l), o = l.sn), t < e) ? r = Dt(a, s, t, t > e - u ? 0 : u): r = s[s.length - 1];
                    if (r) {
                        var d = r.sn - i.startSN;
                        if (a && r.sn === a.sn && !h)
                            if (a && r.level === a.level) {
                                var c = s[d + 1];
                                r.sn < o && this.fragmentTracker.getState(c) !== ut.OK ? (this.log("SN " + r.sn + " just loaded, load next one: " + c.sn), r = c) : r = null
                            }
                    }
                    return r
                }, c.synchronizeToLiveEdge = function(t) {
                    var e = this.config,
                        i = this.media;
                    if (i) {
                        var r = this.hls.liveSyncPosition,
                            n = i.currentTime,
                            a = t.fragments[0].start,
                            s = t.edge,
                            o = n >= a - e.maxFragLookUpTolerance && n <= s;
                        if (null !== r && i.duration > r && (n < r || !o)) {
                            var l = void 0 !== e.liveMaxLatencyDuration ? e.liveMaxLatencyDuration : e.liveMaxLatencyDurationCount * t.targetduration;
                            (!o && i.readyState < 4 || n < s - l) && (this.loadedmetadata || (this.nextLoadPosition = r), i.readyState && (this.warn("Playback: " + n.toFixed(3) + " is located too far from the end of live sliding playlist: " + s + ", reset currentTime to : " + r.toFixed(3)), i.currentTime = r))
                        }
                    }
                }, c.alignPlaylists = function(t, e) {
                    var i = this.levels,
                        r = this.levelLastLoaded,
                        n = this.fragPrevious,
                        s = null !== r ? i[r] : null,
                        o = t.fragments.length;
                    if (!o) return this.warn("No fragments in live playlist"), 0;
                    var l = t.fragments[0].start,
                        u = !e,
                        h = t.alignedSliding && Object(a.a)(l);
                    if (u || !h && !l) {
                        Et(n, s, t);
                        var d = t.fragments[0].start;
                        return this.log("Live playlist sliding: " + d.toFixed(2) + " start-sn: " + (e ? e.startSN : "na") + "->" + t.startSN + " prev-sn: " + (n ? n.sn : "na") + " fragments: " + o), d
                    }
                    return l
                }, c.waitForCdnTuneIn = function(t) {
                    return t.live && t.canBlockReload && t.partTarget && t.tuneInGoal > Math.max(t.partHoldBack, 3 * t.partTarget)
                }, c.setStartPosition = function(t, e) {
                    var i = this.startPosition;
                    if (i < e && (i = -1), -1 === i || -1 === this.lastCurrentTime) {
                        var r = t.startTimeOffset;
                        Object(a.a)(r) ? (i = e + r, r < 0 && (i += t.totalduration), i = Math.min(Math.max(e, i), e + t.totalduration), this.log("Start time offset " + r + " found in playlist, adjust startPosition to " + i), this.startPosition = i) : t.live ? i = this.hls.liveSyncPosition || e : this.startPosition = i = 0, this.lastCurrentTime = i
                    }
                    this.nextLoadPosition = i
                }, c.getLoadPosition = function() {
                    var t = this.media,
                        e = 0;
                    return this.loadedmetadata && t ? e = t.currentTime : this.nextLoadPosition && (e = this.nextLoadPosition), e
                }, c.handleFragLoadAborted = function(t, e) {
                    this.transmuxer && "initSegment" !== t.sn && t.stats.aborted && (this.warn("Fragment " + t.sn + (e ? " part" + e.index : "") + " of level " + t.level + " was aborted"), this.resetFragmentLoading(t))
                }, c.resetFragmentLoading = function(t) {
                    this.fragCurrent && (this.fragContextChanged(t) || this.state === Yt) || (this.state = Ht)
                }, c.onFragmentOrKeyLoadError = function(t, e) {
                    if (!e.fatal) {
                        var i = e.frag;
                        if (i && i.type === t) {
                            this.fragCurrent;
                            var r = this.config;
                            if (this.fragLoadError + 1 <= r.fragLoadingMaxRetry) {
                                this.loadedmetadata || (this.startFragRequested = !1, this.nextLoadPosition = this.startPosition);
                                var n = Math.min(Math.pow(2, this.fragLoadError) * r.fragLoadingRetryDelay, r.fragLoadingMaxRetryTimeout);
                                this.warn("Fragment " + i.sn + " of " + t + " " + i.level + " failed to load, retrying in " + n + "ms"), this.retryDate = self.performance.now() + n, this.fragLoadError++, this.state = Yt
                            } else e.levelRetry ? (t === w.b.AUDIO && (this.fragCurrent = null), this.fragLoadError = 0, this.state = Ht) : (l.b.error(e.details + " reaches max retry, redispatch as fatal ..."), e.fatal = !0, this.hls.stopLoad(), this.state = $t)
                        }
                    }
                }, c.afterBufferFlushed = function(t, e, i) {
                    if (t) {
                        var r = mt.getBuffered(t);
                        this.fragmentTracker.detectEvictedFragments(e, r, i), this.state === Qt && this.resetLoadingState()
                    }
                }, c.resetLoadingState = function() {
                    this.fragCurrent = null, this.fragPrevious = null, this.state = Ht
                }, c.resetStartWhenNotLoaded = function(t) {
                    if (!this.loadedmetadata) {
                        this.startFragRequested = !1;
                        var e = this.levels ? this.levels[t].details : null;
                        null != e && e.live ? (this.startPosition = -1, this.setStartPosition(e, 0), this.resetLoadingState()) : this.nextLoadPosition = this.startPosition
                    }
                }, c.updateLevelTiming = function(t, e, i, r) {
                    var n = this,
                        a = i.details;
                    Object.keys(t.elementaryStreams).reduce((function(e, o) {
                        var l = t.elementaryStreams[o];
                        if (l) {
                            var u = l.endPTS - l.startPTS;
                            if (u <= 0) return n.warn("Could not parse fragment " + t.sn + " " + o + " duration reliably (" + u + ")"), e || !1;
                            var h = r ? 0 : et(a, t, l.startPTS, l.endPTS, l.startDTS, l.endDTS);
                            return n.hls.trigger(s.a.LEVEL_PTS_UPDATED, {
                                details: a,
                                level: i,
                                drift: h,
                                type: o,
                                frag: t,
                                start: l.startPTS,
                                end: l.endPTS
                            }), !0
                        }
                        return e
                    }), !1) || (this.warn("Found no media in fragment " + t.sn + " of level " + i.id + " resetting transmuxer to fallback to playlist timing"), this.resetTransmuxer()), this.state = Xt, this.hls.trigger(s.a.FRAG_PARSED, {
                        frag: t,
                        part: e
                    })
                }, c.resetTransmuxer = function() {
                    this.transmuxer && (this.transmuxer.destroy(), this.transmuxer = null)
                }, n = r, (h = [{
                    key: "state",
                    get: function() {
                        return this._state
                    },
                    set: function(t) {
                        var e = this._state;
                        e !== t && (this._state = t, this.log(e + "->" + t))
                    }
                }]) && Bt(n.prototype, h), d && Bt(n, d), Object.defineProperty(n, "prototype", {
                    writable: !1
                }), r
            }(vt);

        function ee() {
            return self.MediaSource || self.WebKitMediaSource
        }

        function ie() {
            return self.SourceBuffer || self.WebKitSourceBuffer
        }
        var re = i(18),
            ne = i(10),
            ae = i(15),
            se = ee() || {
                isTypeSupported: function() {
                    return !1
                }
            },
            oe = function() {
                function t(t, e, i, r) {
                    var n = this;
                    this.hls = void 0, this.id = void 0, this.observer = void 0, this.frag = null, this.part = null, this.worker = void 0, this.onwmsg = void 0, this.transmuxer = null, this.onTransmuxComplete = void 0, this.onFlush = void 0, this.hls = t, this.id = e, this.onTransmuxComplete = i, this.onFlush = r;
                    var a = t.config,
                        u = function(e, i) {
                            (i = i || {}).frag = n.frag, i.id = n.id, t.trigger(e, i)
                        };
                    this.observer = new ae.EventEmitter, this.observer.on(s.a.FRAG_DECRYPTED, u), this.observer.on(s.a.ERROR, u);
                    var h = {
                            mp4: se.isTypeSupported("video/mp4"),
                            mpeg: se.isTypeSupported("audio/mpeg"),
                            mp3: se.isTypeSupported('audio/mp4; codecs="mp3"')
                        },
                        d = navigator.vendor;
                    if (a.enableWorker && "undefined" != typeof Worker) {
                        var c;
                        l.b.log("demuxing in webworker");
                        try {
                            c = this.worker = re(19), this.onwmsg = this.onWorkerMessage.bind(this), c.addEventListener("message", this.onwmsg), c.onerror = function(e) {
                                t.trigger(s.a.ERROR, {
                                    type: o.b.OTHER_ERROR,
                                    details: o.a.INTERNAL_EXCEPTION,
                                    fatal: !0,
                                    event: "demuxerWorker",
                                    error: new Error(e.message + "  (" + e.filename + ":" + e.lineno + ")")
                                })
                            }, c.postMessage({
                                cmd: "init",
                                typeSupported: h,
                                vendor: d,
                                id: e,
                                config: JSON.stringify(a)
                            })
                        } catch (t) {
                            l.b.warn("Error in worker:", t), l.b.error("Error while initializing DemuxerWorker, fallback to inline"), c && self.URL.revokeObjectURL(c.objectURL), this.transmuxer = new ne.c(this.observer, h, a, d, e), this.worker = null
                        }
                    } else this.transmuxer = new ne.c(this.observer, h, a, d, e)
                }
                var e = t.prototype;
                return e.destroy = function() {
                    var t = this.worker;
                    if (t) t.removeEventListener("message", this.onwmsg), t.terminate(), this.worker = null, this.onwmsg = void 0;
                    else {
                        var e = this.transmuxer;
                        e && (e.destroy(), this.transmuxer = null)
                    }
                    var i = this.observer;
                    i && i.removeAllListeners(), this.frag = null, this.observer = null, this.hls = null
                }, e.push = function(t, e, i, r, n, a, s, o, u, h) {
                    var d, c, f = this;
                    u.transmuxing.start = self.performance.now();
                    var g = this.transmuxer,
                        v = this.worker,
                        p = a ? a.start : n.start,
                        m = n.decryptdata,
                        y = this.frag,
                        T = !(y && n.cc === y.cc),
                        b = !(y && u.level === y.level),
                        E = y ? u.sn - y.sn : -1,
                        S = this.part ? u.part - this.part.index : -1,
                        L = 0 === E && u.id > 1 && u.id === (null == y ? void 0 : y.stats.chunkCount),
                        A = !b && (1 === E || 0 === E && (1 === S || L && S <= 0)),
                        D = self.performance.now();
                    (b || E || 0 === n.stats.parsing.start) && (n.stats.parsing.start = D), !a || !S && A || (a.stats.parsing.start = D);
                    var R = !(y && (null === (d = n.initSegment) || void 0 === d ? void 0 : d.url) === (null === (c = y.initSegment) || void 0 === c ? void 0 : c.url)),
                        k = new ne.b(T, A, o, b, p, R);
                    if (!A || T || R) {
                        l.b.log("[transmuxer-interface, " + n.type + "]: Starting new transmux session for sn: " + u.sn + " p: " + u.part + " level: " + u.level + " id: " + u.id + "\n        discontinuity: " + T + "\n        trackSwitch: " + b + "\n        contiguous: " + A + "\n        accurateTimeOffset: " + o + "\n        timeOffset: " + p + "\n        initSegmentChange: " + R);
                        var _ = new ne.a(i, r, e, s, h);
                        this.configureTransmuxer(_)
                    }
                    if (this.frag = n, this.part = a, v) v.postMessage({
                        cmd: "demux",
                        data: t,
                        decryptdata: m,
                        chunkMeta: u,
                        state: k
                    }, t instanceof ArrayBuffer ? [t] : []);
                    else if (g) {
                        var I = g.push(t, m, u, k);
                        Object(ne.d)(I) ? I.then((function(t) {
                            f.handleTransmuxComplete(t)
                        })) : this.handleTransmuxComplete(I)
                    }
                }, e.flush = function(t) {
                    var e = this;
                    t.transmuxing.start = self.performance.now();
                    var i = this.transmuxer,
                        r = this.worker;
                    if (r) r.postMessage({
                        cmd: "flush",
                        chunkMeta: t
                    });
                    else if (i) {
                        var n = i.flush(t);
                        Object(ne.d)(n) ? n.then((function(i) {
                            e.handleFlushResult(i, t)
                        })) : this.handleFlushResult(n, t)
                    }
                }, e.handleFlushResult = function(t, e) {
                    var i = this;
                    t.forEach((function(t) {
                        i.handleTransmuxComplete(t)
                    })), this.onFlush(e)
                }, e.onWorkerMessage = function(t) {
                    var e = t.data,
                        i = this.hls;
                    switch (e.event) {
                        case "init":
                            self.URL.revokeObjectURL(this.worker.objectURL);
                            break;
                        case "transmuxComplete":
                            this.handleTransmuxComplete(e.data);
                            break;
                        case "flush":
                            this.onFlush(e.data);
                            break;
                        case "workerLog":
                            l.b[e.data.logType] && l.b[e.data.logType](e.data.message);
                            break;
                        default:
                            e.data = e.data || {}, e.data.frag = this.frag, e.data.id = this.id, i.trigger(e.event, e.data)
                    }
                }, e.configureTransmuxer = function(t) {
                    var e = this.worker,
                        i = this.transmuxer;
                    e ? e.postMessage({
                        cmd: "configure",
                        config: t
                    }) : i && i.configure(t)
                }, e.handleTransmuxComplete = function(t) {
                    t.chunkMeta.transmuxing.end = self.performance.now(), this.onTransmuxComplete(t)
                }, t
            }(),
            le = function() {
                function t(t, e, i, r) {
                    this.config = void 0, this.media = null, this.fragmentTracker = void 0, this.hls = void 0, this.nudgeRetry = 0, this.stallReported = !1, this.stalled = null, this.moved = !1, this.seeking = !1, this.config = t, this.media = e, this.fragmentTracker = i, this.hls = r
                }
                var e = t.prototype;
                return e.destroy = function() {
                    this.media = null, this.hls = this.fragmentTracker = null
                }, e.poll = function(t, e) {
                    var i = this.config,
                        r = this.media,
                        n = this.stalled;
                    if (null !== r) {
                        var a = r.currentTime,
                            s = r.seeking,
                            o = this.seeking && !s,
                            u = !this.seeking && s;
                        if (this.seeking = s, a === t) {
                            if ((u || o) && (this.stalled = null), !(r.paused && !s || r.ended || 0 === r.playbackRate) && mt.getBuffered(r).length) {
                                var h = mt.bufferInfo(r, a, 0),
                                    d = h.len > 0,
                                    c = h.nextStart || 0;
                                if (d || c) {
                                    if (s) {
                                        var f = h.len > 2,
                                            g = !c || e && e.start <= a || c - a > 2 && !this.fragmentTracker.getPartialFragment(a);
                                        if (f || g) return;
                                        this.moved = !1
                                    }
                                    if (!this.moved && null !== this.stalled) {
                                        var v, p = Math.max(c, h.start || 0) - a,
                                            m = this.hls.levels ? this.hls.levels[this.hls.currentLevel] : null,
                                            y = (null == m || null === (v = m.details) || void 0 === v ? void 0 : v.live) ? 2 * m.details.targetduration : 2;
                                        if (p > 0 && p <= y) return void this._trySkipBufferHole(null)
                                    }
                                    var T = self.performance.now();
                                    if (null !== n) {
                                        var b = T - n;
                                        if (s || !(b >= 250) || (this._reportStall(h), this.media)) {
                                            var E = mt.bufferInfo(r, a, i.maxBufferHole);
                                            this._tryFixBufferStall(E, b)
                                        }
                                    } else this.stalled = T
                                }
                            }
                        } else if (this.moved = !0, null !== n) {
                            if (this.stallReported) {
                                var S = self.performance.now() - n;
                                l.b.warn("playback not stuck anymore @" + a + ", after " + Math.round(S) + "ms"), this.stallReported = !1
                            }
                            this.stalled = null, this.nudgeRetry = 0
                        }
                    }
                }, e._tryFixBufferStall = function(t, e) {
                    var i = this.config,
                        r = this.fragmentTracker,
                        n = this.media;
                    if (null !== n) {
                        var a = n.currentTime,
                            s = r.getPartialFragment(a);
                        if (s)
                            if (this._trySkipBufferHole(s) || !this.media) return;
                        t.len > i.maxBufferHole && e > 1e3 * i.highBufferWatchdogPeriod && (l.b.warn("Trying to nudge playhead over buffer-hole"), this.stalled = null, this._tryNudgeBuffer())
                    }
                }, e._reportStall = function(t) {
                    var e = this.hls,
                        i = this.media;
                    !this.stallReported && i && (this.stallReported = !0, l.b.warn("Playback stalling at @" + i.currentTime + " due to low buffer (" + JSON.stringify(t) + ")"), e.trigger(s.a.ERROR, {
                        type: o.b.MEDIA_ERROR,
                        details: o.a.BUFFER_STALLED_ERROR,
                        fatal: !1,
                        buffer: t.len
                    }))
                }, e._trySkipBufferHole = function(t) {
                    var e = this.config,
                        i = this.hls,
                        r = this.media;
                    if (null === r) return 0;
                    for (var n = r.currentTime, a = 0, u = mt.getBuffered(r), h = 0; h < u.length; h++) {
                        var d = u.start(h);
                        if (n + e.maxBufferHole >= a && n < d) {
                            var c = Math.max(d + .05, r.currentTime + .1);
                            return l.b.warn("skipping hole, adjusting currentTime from " + n + " to " + c), this.moved = !0, this.stalled = null, r.currentTime = c, t && i.trigger(s.a.ERROR, {
                                type: o.b.MEDIA_ERROR,
                                details: o.a.BUFFER_SEEK_OVER_HOLE,
                                fatal: !1,
                                reason: "fragment loaded with buffer holes, seeking from " + n + " to " + c,
                                frag: t
                            }), c
                        }
                        a = u.end(h)
                    }
                    return 0
                }, e._tryNudgeBuffer = function() {
                    var t = this.config,
                        e = this.hls,
                        i = this.media,
                        r = this.nudgeRetry;
                    if (null !== i) {
                        var n = i.currentTime;
                        if (this.nudgeRetry++, r < t.nudgeMaxRetry) {
                            var a = n + (r + 1) * t.nudgeOffset;
                            l.b.warn("Nudging 'currentTime' from " + n + " to " + a), i.currentTime = a, e.trigger(s.a.ERROR, {
                                type: o.b.MEDIA_ERROR,
                                details: o.a.BUFFER_NUDGE_ON_STALL,
                                fatal: !1
                            })
                        } else l.b.error("Playhead still not moving while enough data buffered @" + n + " after " + t.nudgeMaxRetry + " nudges"), e.trigger(s.a.ERROR, {
                            type: o.b.MEDIA_ERROR,
                            details: o.a.BUFFER_STALLED_ERROR,
                            fatal: !0
                        })
                    }
                }, t
            }();

        function ue(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }

        function he(t, e) {
            return (he = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e, t
            })(t, e)
        }
        var de = function(t) {
                var e, i;

                function r(e, i) {
                    var r;
                    return (r = t.call(this, e, i, "[stream-controller]") || this).audioCodecSwap = !1, r.gapController = null, r.level = -1, r._forceStartLoad = !1, r.altAudio = !1, r.audioOnly = !1, r.fragPlaying = null, r.onvplaying = null, r.onvseeked = null, r.fragLastKbps = 0, r.couldBacktrack = !1, r.backtrackFragment = null, r.audioCodecSwitch = !1, r.videoBuffer = null, r._registerListeners(), r
                }
                i = t, (e = r).prototype = Object.create(i.prototype), e.prototype.constructor = e, he(e, i);
                var n, l, u, h = r.prototype;
                return h._registerListeners = function() {
                    var t = this.hls;
                    t.on(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), t.on(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.on(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.on(s.a.MANIFEST_PARSED, this.onManifestParsed, this), t.on(s.a.LEVEL_LOADING, this.onLevelLoading, this), t.on(s.a.LEVEL_LOADED, this.onLevelLoaded, this), t.on(s.a.FRAG_LOAD_EMERGENCY_ABORTED, this.onFragLoadEmergencyAborted, this), t.on(s.a.ERROR, this.onError, this), t.on(s.a.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this), t.on(s.a.AUDIO_TRACK_SWITCHED, this.onAudioTrackSwitched, this), t.on(s.a.BUFFER_CREATED, this.onBufferCreated, this), t.on(s.a.BUFFER_FLUSHED, this.onBufferFlushed, this), t.on(s.a.LEVELS_UPDATED, this.onLevelsUpdated, this), t.on(s.a.FRAG_BUFFERED, this.onFragBuffered, this)
                }, h._unregisterListeners = function() {
                    var t = this.hls;
                    t.off(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), t.off(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.off(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.off(s.a.MANIFEST_PARSED, this.onManifestParsed, this), t.off(s.a.LEVEL_LOADED, this.onLevelLoaded, this), t.off(s.a.FRAG_LOAD_EMERGENCY_ABORTED, this.onFragLoadEmergencyAborted, this), t.off(s.a.ERROR, this.onError, this), t.off(s.a.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this), t.off(s.a.AUDIO_TRACK_SWITCHED, this.onAudioTrackSwitched, this), t.off(s.a.BUFFER_CREATED, this.onBufferCreated, this), t.off(s.a.BUFFER_FLUSHED, this.onBufferFlushed, this), t.off(s.a.LEVELS_UPDATED, this.onLevelsUpdated, this), t.off(s.a.FRAG_BUFFERED, this.onFragBuffered, this)
                }, h.onHandlerDestroying = function() {
                    this._unregisterListeners(), this.onMediaDetaching()
                }, h.startLoad = function(t) {
                    if (this.levels) {
                        var e = this.lastCurrentTime,
                            i = this.hls;
                        if (this.stopLoad(), this.setInterval(100), this.level = -1, this.fragLoadError = 0, !this.startFragRequested) {
                            var r = i.startLevel; - 1 === r && (i.config.testBandwidth && this.levels.length > 1 ? (r = 0, this.bitrateTest = !0) : r = i.nextAutoLevel), this.level = i.nextLoadLevel = r, this.loadedmetadata = !1
                        }
                        e > 0 && -1 === t && (this.log("Override startPosition with lastCurrentTime @" + e.toFixed(3)), t = e), this.state = Ht, this.nextLoadPosition = this.startPosition = this.lastCurrentTime = t, this.tick()
                    } else this._forceStartLoad = !0, this.state = Kt
                }, h.stopLoad = function() {
                    this._forceStartLoad = !1, t.prototype.stopLoad.call(this)
                }, h.doTick = function() {
                    switch (this.state) {
                        case Ht:
                            this.doTickIdle();
                            break;
                        case Zt:
                            var t, e = this.levels,
                                i = this.level,
                                r = null == e || null === (t = e[i]) || void 0 === t ? void 0 : t.details;
                            if (r && (!r.live || this.levelLastLoaded === this.level)) {
                                if (this.waitForCdnTuneIn(r)) break;
                                this.state = Ht;
                                break
                            }
                            break;
                        case Yt:
                            var n, a = self.performance.now(),
                                s = this.retryDate;
                            (!s || a >= s || null !== (n = this.media) && void 0 !== n && n.seeking) && (this.log("retryDate reached, switch back to IDLE state"), this.resetStartWhenNotLoaded(this.level), this.state = Ht)
                    }
                    this.onTickEnd()
                }, h.onTickEnd = function() {
                    t.prototype.onTickEnd.call(this), this.checkBuffer(), this.checkFragmentChanged()
                }, h.doTickIdle = function() {
                    var t, e, i = this.hls,
                        r = this.levelLastLoaded,
                        n = this.levels,
                        a = this.media,
                        o = i.config,
                        l = i.nextLoadLevel;
                    if (null !== r && (a || !this.startFragRequested && o.startFragPrefetch) && (!this.altAudio || !this.audioOnly) && n && n[l]) {
                        var u = n[l];
                        this.level = i.nextLoadLevel = l;
                        var h = u.details;
                        if (!h || this.state === Zt || h.live && this.levelLastLoaded !== l) this.state = Zt;
                        else {
                            var d = this.getMainFwdBufferInfo();
                            if (null !== d)
                                if (!(d.len >= this.getMaxBufferLength(u.maxBitrate))) {
                                    if (this._streamEnded(d, h)) {
                                        var c = {};
                                        return this.altAudio && (c.type = "video"), this.hls.trigger(s.a.BUFFER_EOS, c), void(this.state = Qt)
                                    }
                                    this.backtrackFragment && this.backtrackFragment.start > d.end && (this.backtrackFragment = null);
                                    var f = this.backtrackFragment ? this.backtrackFragment.start : d.end,
                                        g = this.getNextFragment(f, h);
                                    if (this.couldBacktrack && !this.fragPrevious && g && "initSegment" !== g.sn && this.fragmentTracker.getState(g) !== ut.OK) {
                                        var v, m = (null != (v = this.backtrackFragment) ? v : g).sn - h.startSN,
                                            y = h.fragments[m - 1];
                                        y && g.cc === y.cc && (g = y, this.fragmentTracker.removeFragment(y))
                                    } else this.backtrackFragment && d.len && (this.backtrackFragment = null);
                                    if (g && this.fragmentTracker.getState(g) === ut.OK && this.nextLoadPosition > f) {
                                        var T = this.audioOnly && !this.altAudio ? p.a.AUDIO : p.a.VIDEO;
                                        a && this.afterBufferFlushed(a, T, w.b.MAIN), g = this.getNextFragment(this.nextLoadPosition, h)
                                    }
                                    g && (!g.initSegment || g.initSegment.data || this.bitrateTest || (g = g.initSegment), "identity" !== (null === (t = g.decryptdata) || void 0 === t ? void 0 : t.keyFormat) || null !== (e = g.decryptdata) && void 0 !== e && e.key ? this.loadFragment(g, h, f) : this.loadKey(g, h))
                                }
                        }
                    }
                }, h.loadFragment = function(e, i, r) {
                    var n, a = this.fragmentTracker.getState(e);
                    this.fragCurrent = e, a === ut.NOT_LOADED ? "initSegment" === e.sn ? this._loadInitSegment(e) : this.bitrateTest ? (this.log("Fragment " + e.sn + " of level " + e.level + " is being downloaded to test bitrate and will not be buffered"), this._loadBitrateTestFrag(e)) : (this.startFragRequested = !0, t.prototype.loadFragment.call(this, e, i, r)) : a === ut.APPENDING ? this.reduceMaxBufferLength(e.duration) && this.fragmentTracker.removeFragment(e) : 0 === (null === (n = this.media) || void 0 === n ? void 0 : n.buffered.length) && this.fragmentTracker.removeAllFragments()
                }, h.getAppendedFrag = function(t) {
                    var e = this.fragmentTracker.getAppendedFrag(t, w.b.MAIN);
                    return e && "fragment" in e ? e.fragment : e
                }, h.getBufferedFrag = function(t) {
                    return this.fragmentTracker.getBufferedFrag(t, w.b.MAIN)
                }, h.followingBufferedFrag = function(t) {
                    return t ? this.getBufferedFrag(t.end + .5) : null
                }, h.immediateLevelSwitch = function() {
                    this.abortCurrentFrag(), this.flushMainBuffer(0, Number.POSITIVE_INFINITY)
                }, h.nextLevelSwitch = function() {
                    var t = this.levels,
                        e = this.media;
                    if (null != e && e.readyState) {
                        var i, r = this.getAppendedFrag(e.currentTime);
                        if (r && r.start > 1 && this.flushMainBuffer(0, r.start - 1), !e.paused && t) {
                            var n = t[this.hls.nextLoadLevel],
                                a = this.fragLastKbps;
                            i = a && this.fragCurrent ? this.fragCurrent.duration * n.maxBitrate / (1e3 * a) + 1 : 0
                        } else i = 0;
                        var s = this.getBufferedFrag(e.currentTime + i);
                        if (s) {
                            var o = this.followingBufferedFrag(s);
                            if (o) {
                                this.abortCurrentFrag();
                                var l = o.maxStartPTS ? o.maxStartPTS : o.start,
                                    u = o.duration,
                                    h = Math.max(s.end, l + Math.min(Math.max(u - this.config.maxFragLookUpTolerance, .5 * u), .75 * u));
                                this.flushMainBuffer(h, Number.POSITIVE_INFINITY)
                            }
                        }
                    }
                }, h.abortCurrentFrag = function() {
                    var t = this.fragCurrent;
                    switch (this.fragCurrent = null, this.backtrackFragment = null, null != t && t.loader && t.loader.abort(), this.state) {
                        case Vt:
                        case Wt:
                        case Yt:
                        case zt:
                        case Xt:
                            this.state = Ht
                    }
                    this.nextLoadPosition = this.getLoadPosition()
                }, h.flushMainBuffer = function(e, i) {
                    t.prototype.flushMainBuffer.call(this, e, i, this.altAudio ? "video" : null)
                }, h.onMediaAttached = function(e, i) {
                    t.prototype.onMediaAttached.call(this, e, i);
                    var r = i.media;
                    this.onvplaying = this.onMediaPlaying.bind(this), this.onvseeked = this.onMediaSeeked.bind(this), r.addEventListener("playing", this.onvplaying), r.addEventListener("seeked", this.onvseeked), this.gapController = new le(this.config, r, this.fragmentTracker, this.hls)
                }, h.onMediaDetaching = function() {
                    var e = this.media;
                    e && this.onvplaying && this.onvseeked && (e.removeEventListener("playing", this.onvplaying), e.removeEventListener("seeked", this.onvseeked), this.onvplaying = this.onvseeked = null, this.videoBuffer = null), this.fragPlaying = null, this.gapController && (this.gapController.destroy(), this.gapController = null), t.prototype.onMediaDetaching.call(this)
                }, h.onMediaPlaying = function() {
                    this.tick()
                }, h.onMediaSeeked = function() {
                    var t = this.media,
                        e = t ? t.currentTime : null;
                    Object(a.a)(e) && this.log("Media seeked to " + e.toFixed(3)), this.tick()
                }, h.onManifestLoading = function() {
                    this.log("Trigger BUFFER_RESET"), this.hls.trigger(s.a.BUFFER_RESET, void 0), this.fragmentTracker.removeAllFragments(), this.couldBacktrack = !1, this.startPosition = this.lastCurrentTime = 0, this.fragPlaying = null, this.backtrackFragment = null
                }, h.onManifestParsed = function(t, e) {
                    var i, r, n, a = !1,
                        s = !1;
                    e.levels.forEach((function(t) {
                        (i = t.audioCodec) && (-1 !== i.indexOf("mp4a.40.2") && (a = !0), -1 !== i.indexOf("mp4a.40.5") && (s = !0))
                    })), this.audioCodecSwitch = a && s && !("function" == typeof(null == (n = ie()) || null === (r = n.prototype) || void 0 === r ? void 0 : r.changeType)), this.audioCodecSwitch && this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"), this.levels = e.levels, this.startFragRequested = !1
                }, h.onLevelLoading = function(t, e) {
                    var i = this.levels;
                    if (i && this.state === Ht) {
                        var r = i[e.level];
                        (!r.details || r.details.live && this.levelLastLoaded !== e.level || this.waitForCdnTuneIn(r.details)) && (this.state = Zt)
                    }
                }, h.onLevelLoaded = function(t, e) {
                    var i, r = this.levels,
                        n = e.level,
                        a = e.details,
                        o = a.totalduration;
                    if (r) {
                        this.log("Level " + n + " loaded [" + a.startSN + "," + a.endSN + "], cc [" + a.startCC + ", " + a.endCC + "] duration:" + o);
                        var l = this.fragCurrent;
                        !l || this.state !== Wt && this.state !== Yt || l.level !== e.level && l.loader && (this.state = Ht, this.backtrackFragment = null, l.loader.abort());
                        var u = r[n],
                            h = 0;
                        if (a.live || null !== (i = u.details) && void 0 !== i && i.live) {
                            if (a.fragments[0] || (a.deltaUpdateFailed = !0), a.deltaUpdateFailed) return;
                            h = this.alignPlaylists(a, u.details)
                        }
                        if (u.details = a, this.levelLastLoaded = n, this.hls.trigger(s.a.LEVEL_UPDATED, {
                                details: a,
                                level: n
                            }), this.state === Zt) {
                            if (this.waitForCdnTuneIn(a)) return;
                            this.state = Ht
                        }
                        this.startFragRequested ? a.live && this.synchronizeToLiveEdge(a) : this.setStartPosition(a, h), this.tick()
                    } else this.warn("Levels were reset while loading level " + n)
                }, h._handleFragmentLoadProgress = function(t) {
                    var e, i = t.frag,
                        r = t.part,
                        n = t.payload,
                        a = this.levels;
                    if (a) {
                        var s = a[i.level],
                            o = s.details;
                        if (o) {
                            var l = s.videoCodec,
                                u = o.PTSKnown || !o.live,
                                h = null === (e = i.initSegment) || void 0 === e ? void 0 : e.data,
                                d = this._getAudioCodec(s),
                                c = this.transmuxer = this.transmuxer || new oe(this.hls, w.b.MAIN, this._handleTransmuxComplete.bind(this), this._handleTransmuxerFlush.bind(this)),
                                f = r ? r.index : -1,
                                g = -1 !== f,
                                v = new yt(i.level, i.sn, i.stats.chunkCount, n.byteLength, f, g),
                                p = this.initPTS[i.cc];
                            c.push(n, h, d, l, i, r, o.totalduration, u, v, p)
                        } else this.warn("Dropping fragment " + i.sn + " of level " + i.level + " after level details were reset")
                    } else this.warn("Levels were reset while fragment load was in progress. Fragment " + i.sn + " of level " + i.level + " will not be buffered")
                }, h.onAudioTrackSwitching = function(t, e) {
                    var i = this.altAudio,
                        r = !!e.url,
                        n = e.id;
                    if (!r) {
                        if (this.mediaBuffer !== this.media) {
                            this.log("Switching on main audio, use media.buffered to schedule main fragment loading"), this.mediaBuffer = this.media;
                            var a = this.fragCurrent;
                            null != a && a.loader && (this.log("Switching to main audio track, cancel main fragment load"), a.loader.abort()), this.resetTransmuxer(), this.resetLoadingState()
                        } else this.audioOnly && this.resetTransmuxer();
                        var o = this.hls;
                        i && o.trigger(s.a.BUFFER_FLUSHING, {
                            startOffset: 0,
                            endOffset: Number.POSITIVE_INFINITY,
                            type: "audio"
                        }), o.trigger(s.a.AUDIO_TRACK_SWITCHED, {
                            id: n
                        })
                    }
                }, h.onAudioTrackSwitched = function(t, e) {
                    var i = e.id,
                        r = !!this.hls.audioTracks[i].url;
                    if (r) {
                        var n = this.videoBuffer;
                        n && this.mediaBuffer !== n && (this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"), this.mediaBuffer = n)
                    }
                    this.altAudio = r, this.tick()
                }, h.onBufferCreated = function(t, e) {
                    var i, r, n = e.tracks,
                        a = !1;
                    for (var s in n) {
                        var o = n[s];
                        if ("main" === o.id) {
                            if (r = s, i = o, "video" === s) {
                                var l = n[s];
                                l && (this.videoBuffer = l.buffer)
                            }
                        } else a = !0
                    }
                    a && i ? (this.log("Alternate track found, use " + r + ".buffered to schedule main fragment loading"), this.mediaBuffer = i.buffer) : this.mediaBuffer = this.media
                }, h.onFragBuffered = function(t, e) {
                    var i = e.frag,
                        r = e.part;
                    if (!i || i.type === w.b.MAIN) {
                        if (this.fragContextChanged(i)) return this.warn("Fragment " + i.sn + (r ? " p: " + r.index : "") + " of level " + i.level + " finished buffering, but was aborted. state: " + this.state), void(this.state === Xt && (this.state = Ht));
                        var n = r ? r.stats : i.stats;
                        this.fragLastKbps = Math.round(8 * n.total / (n.buffering.end - n.loading.first)), "initSegment" !== i.sn && (this.fragPrevious = i), this.fragBufferedComplete(i, r)
                    }
                }, h.onError = function(t, e) {
                    switch (e.details) {
                        case o.a.FRAG_LOAD_ERROR:
                        case o.a.FRAG_LOAD_TIMEOUT:
                        case o.a.KEY_LOAD_ERROR:
                        case o.a.KEY_LOAD_TIMEOUT:
                            this.onFragmentOrKeyLoadError(w.b.MAIN, e);
                            break;
                        case o.a.LEVEL_LOAD_ERROR:
                        case o.a.LEVEL_LOAD_TIMEOUT:
                            this.state !== $t && (e.fatal ? (this.warn("" + e.details), this.state = $t) : e.levelRetry || this.state !== Zt || (this.state = Ht));
                            break;
                        case o.a.BUFFER_FULL_ERROR:
                            if ("main" === e.parent && (this.state === zt || this.state === Xt)) {
                                var i = !0,
                                    r = this.getFwdBufferInfo(this.media, w.b.MAIN);
                                r && r.len > .5 && (i = !this.reduceMaxBufferLength(r.len)), i && (this.warn("buffer full error also media.currentTime is not buffered, flush main"), this.immediateLevelSwitch()), this.resetLoadingState()
                            }
                    }
                }, h.checkBuffer = function() {
                    var t = this.media,
                        e = this.gapController;
                    if (t && e && t.readyState) {
                        if (this.loadedmetadata || !mt.getBuffered(t).length) {
                            var i = this.state !== Ht ? this.fragCurrent : null;
                            e.poll(this.lastCurrentTime, i)
                        }
                        this.lastCurrentTime = t.currentTime
                    }
                }, h.onFragLoadEmergencyAborted = function() {
                    this.state = Ht, this.loadedmetadata || (this.startFragRequested = !1, this.nextLoadPosition = this.startPosition), this.tickImmediate()
                }, h.onBufferFlushed = function(t, e) {
                    var i = e.type;
                    if (i !== p.a.AUDIO || this.audioOnly && !this.altAudio) {
                        var r = (i === p.a.VIDEO ? this.videoBuffer : this.mediaBuffer) || this.media;
                        this.afterBufferFlushed(r, i, w.b.MAIN)
                    }
                }, h.onLevelsUpdated = function(t, e) {
                    this.levels = e.levels
                }, h.swapAudioCodec = function() {
                    this.audioCodecSwap = !this.audioCodecSwap
                }, h.seekToStartPos = function() {
                    var t = this.media;
                    if (t) {
                        var e = t.currentTime,
                            i = this.startPosition;
                        if (i >= 0 && e < i) {
                            if (t.seeking) return void this.log("could not seek to " + i + ", already seeking at " + e);
                            var r = mt.getBuffered(t),
                                n = (r.length ? r.start(0) : 0) - i;
                            n > 0 && (n < this.config.maxBufferHole || n < this.config.maxFragLookUpTolerance) && (this.log("adjusting start position by " + n + " to match buffer start"), i += n, this.startPosition = i), this.log("seek to target start position " + i + " from current time " + e), t.currentTime = i
                        }
                    }
                }, h._getAudioCodec = function(t) {
                    var e = this.config.defaultAudioCodec || t.audioCodec;
                    return this.audioCodecSwap && e && (this.log("Swapping audio codec"), e = -1 !== e.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5"), e
                }, h._loadBitrateTestFrag = function(t) {
                    var e = this;
                    t.bitrateTest = !0, this._doFragLoad(t).then((function(i) {
                        var r = e.hls;
                        if (i && !r.nextLoadLevel && !e.fragContextChanged(t)) {
                            e.fragLoadError = 0, e.state = Ht, e.startFragRequested = !1, e.bitrateTest = !1;
                            var n = t.stats;
                            n.parsing.start = n.parsing.end = n.buffering.start = n.buffering.end = self.performance.now(), r.trigger(s.a.FRAG_LOADED, i), t.bitrateTest = !1
                        }
                    }))
                }, h._handleTransmuxComplete = function(t) {
                    var e, i = "main",
                        r = this.hls,
                        n = t.remuxResult,
                        o = t.chunkMeta,
                        l = this.getCurrentContext(o);
                    if (!l) return this.warn("The loading context changed while buffering fragment " + o.sn + " of level " + o.level + ". This chunk will not be buffered."), void this.resetStartWhenNotLoaded(o.level);
                    var u = l.frag,
                        h = l.part,
                        d = l.level,
                        c = n.video,
                        f = n.text,
                        g = n.id3,
                        v = n.initSegment,
                        m = d.details,
                        y = this.altAudio ? void 0 : n.audio;
                    if (!this.fragContextChanged(u)) {
                        if (this.state = zt, v) {
                            v.tracks && (this._bufferInitSegment(d, v.tracks, u, o), r.trigger(s.a.FRAG_PARSING_INIT_SEGMENT, {
                                frag: u,
                                id: i,
                                tracks: v.tracks
                            }));
                            var T = v.initPTS,
                                b = v.timescale;
                            Object(a.a)(T) && (this.initPTS[u.cc] = T, r.trigger(s.a.INIT_PTS_FOUND, {
                                frag: u,
                                id: i,
                                initPTS: T,
                                timescale: b
                            }))
                        }
                        if (c && !1 !== n.independent) {
                            if (m) {
                                var E = c.startPTS,
                                    S = c.endPTS,
                                    L = c.startDTS,
                                    A = c.endDTS;
                                if (h) h.elementaryStreams[c.type] = {
                                    startPTS: E,
                                    endPTS: S,
                                    startDTS: L,
                                    endDTS: A
                                };
                                else if (c.firstKeyFrame && c.independent && (this.couldBacktrack = !0), c.dropped && c.independent) {
                                    var D = this.getMainFwdBufferInfo();
                                    if ((D ? D.end : this.getLoadPosition()) + this.config.maxBufferHole < (c.firstKeyFramePTS ? c.firstKeyFramePTS : E) - this.config.maxBufferHole) return void this.backtrack(u);
                                    u.setElementaryStreamInfo(c.type, u.start, S, u.start, A, !0)
                                }
                                u.setElementaryStreamInfo(c.type, E, S, L, A), this.backtrackFragment && (this.backtrackFragment = u), this.bufferFragmentData(c, u, h, o)
                            }
                        } else if (!1 === n.independent) return void this.backtrack(u);
                        if (y) {
                            var R = y.startPTS,
                                k = y.endPTS,
                                _ = y.startDTS,
                                I = y.endDTS;
                            h && (h.elementaryStreams[p.a.AUDIO] = {
                                startPTS: R,
                                endPTS: k,
                                startDTS: _,
                                endDTS: I
                            }), u.setElementaryStreamInfo(p.a.AUDIO, R, k, _, I), this.bufferFragmentData(y, u, h, o)
                        }
                        if (m && null != g && null !== (e = g.samples) && void 0 !== e && e.length) {
                            var O = {
                                id: i,
                                frag: u,
                                details: m,
                                samples: g.samples
                            };
                            r.trigger(s.a.FRAG_PARSING_METADATA, O)
                        }
                        if (m && f) {
                            var C = {
                                id: i,
                                frag: u,
                                details: m,
                                samples: f.samples
                            };
                            r.trigger(s.a.FRAG_PARSING_USERDATA, C)
                        }
                    }
                }, h._bufferInitSegment = function(t, e, i, r) {
                    var n = this;
                    if (this.state === zt) {
                        this.audioOnly = !!e.audio && !e.video, this.altAudio && !this.audioOnly && delete e.audio;
                        var a = e.audio,
                            o = e.video,
                            l = e.audiovideo;
                        if (a) {
                            var u = t.audioCodec,
                                h = navigator.userAgent.toLowerCase();
                            this.audioCodecSwitch && (u && (u = -1 !== u.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5"), 1 !== a.metadata.channelCount && -1 === h.indexOf("firefox") && (u = "mp4a.40.5")), -1 !== h.indexOf("android") && "audio/mpeg" !== a.container && (u = "mp4a.40.2", this.log("Android: force audio codec to " + u)), t.audioCodec && t.audioCodec !== u && this.log('Swapping manifest audio codec "' + t.audioCodec + '" for "' + u + '"'), a.levelCodec = u, a.id = "main", this.log("Init audio buffer, container:" + a.container + ", codecs[selected/level/parsed]=[" + (u || "") + "/" + (t.audioCodec || "") + "/" + a.codec + "]")
                        }
                        o && (o.levelCodec = t.videoCodec, o.id = "main", this.log("Init video buffer, container:" + o.container + ", codecs[level/parsed]=[" + (t.videoCodec || "") + "/" + o.codec + "]")), l && this.log("Init audiovideo buffer, container:" + l.container + ", codecs[level/parsed]=[" + (t.attrs.CODECS || "") + "/" + l.codec + "]"), this.hls.trigger(s.a.BUFFER_CODECS, e), Object.keys(e).forEach((function(t) {
                            var a = e[t].initSegment;
                            null != a && a.byteLength && n.hls.trigger(s.a.BUFFER_APPENDING, {
                                type: t,
                                data: a,
                                frag: i,
                                part: null,
                                chunkMeta: r,
                                parent: i.type
                            })
                        })), this.tick()
                    }
                }, h.getMainFwdBufferInfo = function() {
                    return this.getFwdBufferInfo(this.mediaBuffer ? this.mediaBuffer : this.media, w.b.MAIN)
                }, h.backtrack = function(t) {
                    this.couldBacktrack = !0, this.backtrackFragment = t, this.resetTransmuxer(), this.flushBufferGap(t), this.fragmentTracker.removeFragment(t), this.fragPrevious = null, this.nextLoadPosition = t.start, this.state = Ht
                }, h.checkFragmentChanged = function() {
                    var t = this.media,
                        e = null;
                    if (t && t.readyState > 1 && !1 === t.seeking) {
                        var i = t.currentTime;
                        if (mt.isBuffered(t, i) ? e = this.getAppendedFrag(i) : mt.isBuffered(t, i + .1) && (e = this.getAppendedFrag(i + .1)), e) {
                            this.backtrackFragment = null;
                            var r = this.fragPlaying,
                                n = e.level;
                            r && e.sn === r.sn && r.level === n && e.urlId === r.urlId || (this.hls.trigger(s.a.FRAG_CHANGED, {
                                frag: e
                            }), r && r.level === n || this.hls.trigger(s.a.LEVEL_SWITCHED, {
                                level: n
                            }), this.fragPlaying = e)
                        }
                    }
                }, n = r, (l = [{
                    key: "nextLevel",
                    get: function() {
                        var t = this.nextBufferedFrag;
                        return t ? t.level : -1
                    }
                }, {
                    key: "currentFrag",
                    get: function() {
                        var t = this.media;
                        return t ? this.fragPlaying || this.getAppendedFrag(t.currentTime) : null
                    }
                }, {
                    key: "currentProgramDateTime",
                    get: function() {
                        var t = this.media;
                        if (t) {
                            var e = t.currentTime,
                                i = this.currentFrag;
                            if (i && Object(a.a)(e) && Object(a.a)(i.programDateTime)) {
                                var r = i.programDateTime + 1e3 * (e - i.start);
                                return new Date(r)
                            }
                        }
                        return null
                    }
                }, {
                    key: "currentLevel",
                    get: function() {
                        var t = this.currentFrag;
                        return t ? t.level : -1
                    }
                }, {
                    key: "nextBufferedFrag",
                    get: function() {
                        var t = this.currentFrag;
                        return t ? this.followingBufferedFrag(t) : null
                    }
                }, {
                    key: "forceStartLoad",
                    get: function() {
                        return this._forceStartLoad
                    }
                }]) && ue(n.prototype, l), u && ue(n, u), Object.defineProperty(n, "prototype", {
                    writable: !1
                }), r
            }(te),
            ce = function() {
                function t(t, e, i) {
                    void 0 === e && (e = 0), void 0 === i && (i = 0), this.halfLife = void 0, this.alpha_ = void 0, this.estimate_ = void 0, this.totalWeight_ = void 0, this.halfLife = t, this.alpha_ = t ? Math.exp(Math.log(.5) / t) : 0, this.estimate_ = e, this.totalWeight_ = i
                }
                var e = t.prototype;
                return e.sample = function(t, e) {
                    var i = Math.pow(this.alpha_, t);
                    this.estimate_ = e * (1 - i) + i * this.estimate_, this.totalWeight_ += t
                }, e.getTotalWeight = function() {
                    return this.totalWeight_
                }, e.getEstimate = function() {
                    if (this.alpha_) {
                        var t = 1 - Math.pow(this.alpha_, this.totalWeight_);
                        if (t) return this.estimate_ / t
                    }
                    return this.estimate_
                }, t
            }(),
            fe = function() {
                function t(t, e, i) {
                    this.defaultEstimate_ = void 0, this.minWeight_ = void 0, this.minDelayMs_ = void 0, this.slow_ = void 0, this.fast_ = void 0, this.defaultEstimate_ = i, this.minWeight_ = .001, this.minDelayMs_ = 50, this.slow_ = new ce(t), this.fast_ = new ce(e)
                }
                var e = t.prototype;
                return e.update = function(t, e) {
                    var i = this.slow_,
                        r = this.fast_;
                    this.slow_.halfLife !== t && (this.slow_ = new ce(t, i.getEstimate(), i.getTotalWeight())), this.fast_.halfLife !== e && (this.fast_ = new ce(e, r.getEstimate(), r.getTotalWeight()))
                }, e.sample = function(t, e) {
                    var i = (t = Math.max(t, this.minDelayMs_)) / 1e3,
                        r = 8 * e / i;
                    this.fast_.sample(i, r), this.slow_.sample(i, r)
                }, e.canEstimate = function() {
                    var t = this.fast_;
                    return t && t.getTotalWeight() >= this.minWeight_
                }, e.getEstimate = function() {
                    return this.canEstimate() ? Math.min(this.fast_.getEstimate(), this.slow_.getEstimate()) : this.defaultEstimate_
                }, e.destroy = function() {}, t
            }();

        function ge(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }
        var ve = function() {
                function t(t) {
                    this.hls = void 0, this.lastLoadedFragLevel = 0, this._nextAutoLevel = -1, this.timer = void 0, this.onCheck = this._abandonRulesCheck.bind(this), this.fragCurrent = null, this.partCurrent = null, this.bitrateTestDelay = 0, this.bwEstimator = void 0, this.hls = t;
                    var e = t.config;
                    this.bwEstimator = new fe(e.abrEwmaSlowVoD, e.abrEwmaFastVoD, e.abrEwmaDefaultEstimate), this.registerListeners()
                }
                var e, i, r, n = t.prototype;
                return n.registerListeners = function() {
                    var t = this.hls;
                    t.on(s.a.FRAG_LOADING, this.onFragLoading, this), t.on(s.a.FRAG_LOADED, this.onFragLoaded, this), t.on(s.a.FRAG_BUFFERED, this.onFragBuffered, this), t.on(s.a.LEVEL_LOADED, this.onLevelLoaded, this), t.on(s.a.ERROR, this.onError, this)
                }, n.unregisterListeners = function() {
                    var t = this.hls;
                    t.off(s.a.FRAG_LOADING, this.onFragLoading, this), t.off(s.a.FRAG_LOADED, this.onFragLoaded, this), t.off(s.a.FRAG_BUFFERED, this.onFragBuffered, this), t.off(s.a.LEVEL_LOADED, this.onLevelLoaded, this), t.off(s.a.ERROR, this.onError, this)
                }, n.destroy = function() {
                    this.unregisterListeners(), this.clearTimer(), this.hls = this.onCheck = null, this.fragCurrent = this.partCurrent = null
                }, n.onFragLoading = function(t, e) {
                    var i, r = e.frag;
                    r.type === w.b.MAIN && (this.timer || (this.fragCurrent = r, this.partCurrent = null != (i = e.part) ? i : null, this.timer = self.setInterval(this.onCheck, 100)))
                }, n.onLevelLoaded = function(t, e) {
                    var i = this.hls.config;
                    e.details.live ? this.bwEstimator.update(i.abrEwmaSlowLive, i.abrEwmaFastLive) : this.bwEstimator.update(i.abrEwmaSlowVoD, i.abrEwmaFastVoD)
                }, n._abandonRulesCheck = function() {
                    var t = this.fragCurrent,
                        e = this.partCurrent,
                        i = this.hls,
                        r = i.autoLevelEnabled,
                        n = i.config,
                        o = i.media;
                    if (t && o) {
                        var u = e ? e.stats : t.stats,
                            h = e ? e.duration : t.duration;
                        if (u.aborted) return l.b.warn("frag loader destroy or aborted, disarm abandonRules"), this.clearTimer(), void(this._nextAutoLevel = -1);
                        if (r && !o.paused && o.playbackRate && o.readyState) {
                            var d = performance.now() - u.loading.start,
                                c = Math.abs(o.playbackRate);
                            if (!(d <= 500 * h / c)) {
                                var f = i.levels,
                                    g = i.minAutoLevel,
                                    v = f[t.level],
                                    p = u.total || Math.max(u.loaded, Math.round(h * v.maxBitrate / 8)),
                                    m = Math.max(1, u.bwEstimate ? u.bwEstimate / 8 : 1e3 * u.loaded / d),
                                    y = (p - u.loaded) / m,
                                    T = o.currentTime,
                                    b = (mt.bufferInfo(o, T, n.maxBufferHole).end - T) / c;
                                if (!(b >= 2 * h / c || y <= b)) {
                                    var E, S = Number.POSITIVE_INFINITY;
                                    for (E = t.level - 1; E > g; E--) {
                                        if ((S = h * f[E].maxBitrate / (6.4 * m)) < b) break
                                    }
                                    if (!(S >= y)) {
                                        var L = this.bwEstimator.getEstimate();
                                        l.b.warn("Fragment " + t.sn + (e ? " part " + e.index : "") + " of level " + t.level + " is loading too slowly and will cause an underbuffer; aborting and switching to level " + E + "\n      Current BW estimate: " + (Object(a.a)(L) ? (L / 1024).toFixed(3) : "Unknown") + " Kb/s\n      Estimated load time for current fragment: " + y.toFixed(3) + " s\n      Estimated load time for the next fragment: " + S.toFixed(3) + " s\n      Time to underbuffer: " + b.toFixed(3) + " s"), i.nextLoadLevel = E, this.bwEstimator.sample(d, u.loaded), this.clearTimer(), t.loader && (this.fragCurrent = this.partCurrent = null, t.loader.abort()), i.trigger(s.a.FRAG_LOAD_EMERGENCY_ABORTED, {
                                            frag: t,
                                            part: e,
                                            stats: u
                                        })
                                    }
                                }
                            }
                        }
                    }
                }, n.onFragLoaded = function(t, e) {
                    var i = e.frag,
                        r = e.part;
                    if (i.type === w.b.MAIN && Object(a.a)(i.sn)) {
                        var n = r ? r.stats : i.stats,
                            o = r ? r.duration : i.duration;
                        if (this.clearTimer(), this.lastLoadedFragLevel = i.level, this._nextAutoLevel = -1, this.hls.config.abrMaxWithRealBitrate) {
                            var l = this.hls.levels[i.level],
                                u = (l.loaded ? l.loaded.bytes : 0) + n.loaded,
                                h = (l.loaded ? l.loaded.duration : 0) + o;
                            l.loaded = {
                                bytes: u,
                                duration: h
                            }, l.realBitrate = Math.round(8 * u / h)
                        }
                        if (i.bitrateTest) {
                            var d = {
                                stats: n,
                                frag: i,
                                part: r,
                                id: i.type
                            };
                            this.onFragBuffered(s.a.FRAG_BUFFERED, d)
                        }
                    }
                }, n.onFragBuffered = function(t, e) {
                    var i = e.frag,
                        r = e.part,
                        n = r ? r.stats : i.stats;
                    if (!n.aborted && i.type === w.b.MAIN && "initSegment" !== i.sn) {
                        var a = n.parsing.end - n.loading.start;
                        this.bwEstimator.sample(a, n.loaded), n.bwEstimate = this.bwEstimator.getEstimate(), i.bitrateTest ? this.bitrateTestDelay = a / 1e3 : this.bitrateTestDelay = 0
                    }
                }, n.onError = function(t, e) {
                    switch (e.details) {
                        case o.a.FRAG_LOAD_ERROR:
                        case o.a.FRAG_LOAD_TIMEOUT:
                            this.clearTimer()
                    }
                }, n.clearTimer = function() {
                    self.clearInterval(this.timer), this.timer = void 0
                }, n.getNextABRAutoLevel = function() {
                    var t = this.fragCurrent,
                        e = this.partCurrent,
                        i = this.hls,
                        r = i.maxAutoLevel,
                        n = i.config,
                        a = i.minAutoLevel,
                        s = i.media,
                        o = e ? e.duration : t ? t.duration : 0,
                        u = s ? s.currentTime : 0,
                        h = s && 0 !== s.playbackRate ? Math.abs(s.playbackRate) : 1,
                        d = this.bwEstimator ? this.bwEstimator.getEstimate() : n.abrEwmaDefaultEstimate,
                        c = (mt.bufferInfo(s, u, n.maxBufferHole).end - u) / h,
                        f = this.findBestLevel(d, a, r, c, n.abrBandWidthFactor, n.abrBandWidthUpFactor);
                    if (f >= 0) return f;
                    l.b.trace((c ? "rebuffering expected" : "buffer is empty") + ", finding optimal quality level");
                    var g = o ? Math.min(o, n.maxStarvationDelay) : n.maxStarvationDelay,
                        v = n.abrBandWidthFactor,
                        p = n.abrBandWidthUpFactor;
                    if (!c) {
                        var m = this.bitrateTestDelay;
                        if (m) g = (o ? Math.min(o, n.maxLoadingDelay) : n.maxLoadingDelay) - m, l.b.trace("bitrate test took " + Math.round(1e3 * m) + "ms, set first fragment max fetchDuration to " + Math.round(1e3 * g) + " ms"), v = p = 1
                    }
                    return f = this.findBestLevel(d, a, r, c + g, v, p), Math.max(f, 0)
                }, n.findBestLevel = function(t, e, i, r, n, a) {
                    for (var s, o = this.fragCurrent, u = this.partCurrent, h = this.lastLoadedFragLevel, d = this.hls.levels, c = d[h], f = !(null == c || null === (s = c.details) || void 0 === s || !s.live), g = null == c ? void 0 : c.codecSet, v = u ? u.duration : o ? o.duration : 0, p = i; p >= e; p--) {
                        var m = d[p];
                        if (m && (!g || m.codecSet === g)) {
                            var y = m.details,
                                T = (u ? null == y ? void 0 : y.partTarget : null == y ? void 0 : y.averagetargetduration) || v,
                                b = void 0;
                            b = p <= h ? n * t : a * t;
                            var E = d[p].maxBitrate,
                                S = E * T / b;
                            if (l.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: " + p + "/" + Math.round(b) + "/" + E + "/" + T + "/" + r + "/" + S), b > E && (!S || f && !this.bitrateTestDelay || S < r)) return p
                        }
                    }
                    return -1
                }, e = t, (i = [{
                    key: "nextAutoLevel",
                    get: function() {
                        var t = this._nextAutoLevel,
                            e = this.bwEstimator;
                        if (-1 !== t && !e.canEstimate()) return t;
                        var i = this.getNextABRAutoLevel();
                        return -1 !== t && this.hls.levels[i].loadError ? t : (-1 !== t && (i = Math.min(t, i)), i)
                    },
                    set: function(t) {
                        this._nextAutoLevel = t
                    }
                }]) && ge(e.prototype, i), r && ge(e, r), Object.defineProperty(e, "prototype", {
                    writable: !1
                }), t
            }(),
            pe = function() {
                function t() {
                    this.chunks = [], this.dataLength = 0
                }
                var e = t.prototype;
                return e.push = function(t) {
                    this.chunks.push(t), this.dataLength += t.length
                }, e.flush = function() {
                    var t, e = this.chunks,
                        i = this.dataLength;
                    return e.length ? (t = 1 === e.length ? e[0] : function(t, e) {
                        for (var i = new Uint8Array(e), r = 0, n = 0; n < t.length; n++) {
                            var a = t[n];
                            i.set(a, r), r += a.length
                        }
                        return i
                    }(e, i), this.reset(), t) : new Uint8Array(0)
                }, e.reset = function() {
                    this.chunks.length = 0, this.dataLength = 0
                }, t
            }();

        function me() {
            return (me = Object.assign ? Object.assign.bind() : function(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var i = arguments[e];
                    for (var r in i) Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r])
                }
                return t
            }).apply(this, arguments)
        }

        function ye(t, e) {
            return (ye = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e, t
            })(t, e)
        }
        var Te = function(t) {
            var e, i;

            function r(e, i) {
                var r;
                return (r = t.call(this, e, i, "[audio-stream-controller]") || this).videoBuffer = null, r.videoTrackCC = -1, r.waitingVideoCC = -1, r.audioSwitch = !1, r.trackId = -1, r.waitingData = null, r.mainDetails = null, r.bufferFlushed = !1, r.cachedTrackLoadedData = null, r._registerListeners(), r
            }
            i = t, (e = r).prototype = Object.create(i.prototype), e.prototype.constructor = e, ye(e, i);
            var n = r.prototype;
            return n.onHandlerDestroying = function() {
                this._unregisterListeners(), this.mainDetails = null
            }, n._registerListeners = function() {
                var t = this.hls;
                t.on(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), t.on(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.on(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.on(s.a.LEVEL_LOADED, this.onLevelLoaded, this), t.on(s.a.AUDIO_TRACKS_UPDATED, this.onAudioTracksUpdated, this), t.on(s.a.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this), t.on(s.a.AUDIO_TRACK_LOADED, this.onAudioTrackLoaded, this), t.on(s.a.ERROR, this.onError, this), t.on(s.a.BUFFER_RESET, this.onBufferReset, this), t.on(s.a.BUFFER_CREATED, this.onBufferCreated, this), t.on(s.a.BUFFER_FLUSHED, this.onBufferFlushed, this), t.on(s.a.INIT_PTS_FOUND, this.onInitPtsFound, this), t.on(s.a.FRAG_BUFFERED, this.onFragBuffered, this)
            }, n._unregisterListeners = function() {
                var t = this.hls;
                t.off(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), t.off(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.off(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.off(s.a.LEVEL_LOADED, this.onLevelLoaded, this), t.off(s.a.AUDIO_TRACKS_UPDATED, this.onAudioTracksUpdated, this), t.off(s.a.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this), t.off(s.a.AUDIO_TRACK_LOADED, this.onAudioTrackLoaded, this), t.off(s.a.ERROR, this.onError, this), t.off(s.a.BUFFER_RESET, this.onBufferReset, this), t.off(s.a.BUFFER_CREATED, this.onBufferCreated, this), t.off(s.a.BUFFER_FLUSHED, this.onBufferFlushed, this), t.off(s.a.INIT_PTS_FOUND, this.onInitPtsFound, this), t.off(s.a.FRAG_BUFFERED, this.onFragBuffered, this)
            }, n.onInitPtsFound = function(t, e) {
                var i = e.frag,
                    r = e.id,
                    n = e.initPTS;
                if ("main" === r) {
                    var a = i.cc;
                    this.initPTS[i.cc] = n, this.log("InitPTS for cc: " + a + " found from main: " + n), this.videoTrackCC = a, this.state === Jt && this.tick()
                }
            }, n.startLoad = function(t) {
                if (!this.levels) return this.startPosition = t, void(this.state = Kt);
                var e = this.lastCurrentTime;
                this.stopLoad(), this.setInterval(100), this.fragLoadError = 0, e > 0 && -1 === t ? (this.log("Override startPosition with lastCurrentTime @" + e.toFixed(3)), t = e, this.state = Ht) : (this.loadedmetadata = !1, this.state = qt), this.nextLoadPosition = this.startPosition = this.lastCurrentTime = t, this.tick()
            }, n.doTick = function() {
                switch (this.state) {
                    case Ht:
                        this.doTickIdle();
                        break;
                    case qt:
                        var e, i = this.levels,
                            r = this.trackId,
                            n = null == i || null === (e = i[r]) || void 0 === e ? void 0 : e.details;
                        if (n) {
                            if (this.waitForCdnTuneIn(n)) break;
                            this.state = Jt
                        }
                        break;
                    case Yt:
                        var a, s = performance.now(),
                            o = this.retryDate;
                        (!o || s >= o || null !== (a = this.media) && void 0 !== a && a.seeking) && (this.log("RetryDate reached, switch back to IDLE state"), this.resetStartWhenNotLoaded(this.trackId), this.state = Ht);
                        break;
                    case Jt:
                        var l = this.waitingData;
                        if (l) {
                            var u = l.frag,
                                h = l.part,
                                d = l.cache,
                                c = l.complete;
                            if (void 0 !== this.initPTS[u.cc]) {
                                this.waitingData = null, this.waitingVideoCC = -1, this.state = Wt;
                                var f = {
                                    frag: u,
                                    part: h,
                                    payload: d.flush(),
                                    networkDetails: null
                                };
                                this._handleFragmentLoadProgress(f), c && t.prototype._handleFragmentLoadComplete.call(this, f)
                            } else if (this.videoTrackCC !== this.waitingVideoCC) this.log("Waiting fragment cc (" + u.cc + ") cancelled because video is at cc " + this.videoTrackCC), this.clearWaitingFragment();
                            else {
                                var g = this.getLoadPosition(),
                                    v = mt.bufferInfo(this.mediaBuffer, g, this.config.maxBufferHole);
                                Rt(v.end, this.config.maxFragLookUpTolerance, u) < 0 && (this.log("Waiting fragment cc (" + u.cc + ") @ " + u.start + " cancelled because another fragment at " + v.end + " is needed"), this.clearWaitingFragment())
                            }
                        } else this.state = Ht
                }
                this.onTickEnd()
            }, n.clearWaitingFragment = function() {
                var t = this.waitingData;
                t && (this.fragmentTracker.removeFragment(t.frag), this.waitingData = null, this.waitingVideoCC = -1, this.state = Ht)
            }, n.resetLoadingState = function() {
                this.clearWaitingFragment(), t.prototype.resetLoadingState.call(this)
            }, n.onTickEnd = function() {
                var t = this.media;
                if (t && t.readyState) {
                    var e = (this.mediaBuffer ? this.mediaBuffer : t).buffered;
                    !this.loadedmetadata && e.length && (this.loadedmetadata = !0), this.lastCurrentTime = t.currentTime
                }
            }, n.doTickIdle = function() {
                var t, e, i = this.hls,
                    r = this.levels,
                    n = this.media,
                    a = this.trackId,
                    o = i.config;
                if (r && r[a] && (n || !this.startFragRequested && o.startFragPrefetch)) {
                    var l = r[a].details;
                    if (!l || l.live && this.levelLastLoaded !== a || this.waitForCdnTuneIn(l)) this.state = qt;
                    else {
                        var u = this.mediaBuffer ? this.mediaBuffer : this.media;
                        this.bufferFlushed && u && (this.bufferFlushed = !1, this.afterBufferFlushed(u, p.a.AUDIO, w.b.AUDIO));
                        var h = this.getFwdBufferInfo(u, w.b.AUDIO);
                        if (null !== h) {
                            var d = this.getFwdBufferInfo(this.videoBuffer ? this.videoBuffer : this.media, w.b.MAIN),
                                c = h.len,
                                f = this.getMaxBufferLength(null == d ? void 0 : d.len),
                                g = this.audioSwitch;
                            if (!(c >= f) || g) {
                                if (!g && this._streamEnded(h, l)) return i.trigger(s.a.BUFFER_EOS, {
                                    type: "audio"
                                }), void(this.state = Qt);
                                var v = l.fragments[0].start,
                                    m = h.end;
                                if (g && n) {
                                    var y = this.getLoadPosition();
                                    m = y, l.PTSKnown && y < v && (h.end > v || h.nextStart) && (this.log("Alt audio track ahead of main track, seek to start of alt audio track"), n.currentTime = v + .05)
                                }
                                if (!(d && m > d.end + l.targetduration) && (d && d.len || !h.len)) {
                                    var T = this.getNextFragment(m, l);
                                    T ? "identity" !== (null === (t = T.decryptdata) || void 0 === t ? void 0 : t.keyFormat) || null !== (e = T.decryptdata) && void 0 !== e && e.key ? this.loadFragment(T, l, m) : this.loadKey(T, l) : this.bufferFlushed = !0
                                }
                            }
                        }
                    }
                }
            }, n.getMaxBufferLength = function(e) {
                var i = t.prototype.getMaxBufferLength.call(this);
                return e ? Math.max(i, e) : i
            }, n.onMediaDetaching = function() {
                this.videoBuffer = null, t.prototype.onMediaDetaching.call(this)
            }, n.onAudioTracksUpdated = function(t, e) {
                var i = e.audioTracks;
                this.resetTransmuxer(), this.levels = i.map((function(t) {
                    return new Q(t)
                }))
            }, n.onAudioTrackSwitching = function(t, e) {
                var i = !!e.url;
                this.trackId = e.id;
                var r = this.fragCurrent;
                null != r && r.loader && r.loader.abort(), this.fragCurrent = null, this.clearWaitingFragment(), i ? this.setInterval(100) : this.resetTransmuxer(), i ? (this.audioSwitch = !0, this.state = Ht) : this.state = Kt, this.tick()
            }, n.onManifestLoading = function() {
                this.mainDetails = null, this.fragmentTracker.removeAllFragments(), this.startPosition = this.lastCurrentTime = 0, this.bufferFlushed = !1
            }, n.onLevelLoaded = function(t, e) {
                this.mainDetails = e.details, null !== this.cachedTrackLoadedData && (this.hls.trigger(s.a.AUDIO_TRACK_LOADED, this.cachedTrackLoadedData), this.cachedTrackLoadedData = null)
            }, n.onAudioTrackLoaded = function(t, e) {
                var i;
                if (null != this.mainDetails) {
                    var r = this.levels,
                        n = e.details,
                        a = e.id;
                    if (r) {
                        this.log("Track " + a + " loaded [" + n.startSN + "," + n.endSN + "],duration:" + n.totalduration);
                        var s = r[a],
                            o = 0;
                        if (n.live || null !== (i = s.details) && void 0 !== i && i.live) {
                            var l = this.mainDetails;
                            if (n.fragments[0] || (n.deltaUpdateFailed = !0), n.deltaUpdateFailed || !l) return;
                            !s.details && n.hasProgramDateTime && l.hasProgramDateTime ? (Lt(n, l), o = n.fragments[0].start) : o = this.alignPlaylists(n, s.details)
                        }
                        s.details = n, this.levelLastLoaded = a, this.startFragRequested || !this.mainDetails && n.live || this.setStartPosition(s.details, o), this.state !== qt || this.waitForCdnTuneIn(n) || (this.state = Ht), this.tick()
                    } else this.warn("Audio tracks were reset while loading level " + a)
                } else this.cachedTrackLoadedData = e
            }, n._handleFragmentLoadProgress = function(t) {
                var e, i = t.frag,
                    r = t.part,
                    n = t.payload,
                    a = this.config,
                    s = this.trackId,
                    o = this.levels;
                if (o) {
                    var l = o[s],
                        u = l.details,
                        h = a.defaultAudioCodec || l.audioCodec || "mp4a.40.2",
                        d = this.transmuxer;
                    d || (d = this.transmuxer = new oe(this.hls, w.b.AUDIO, this._handleTransmuxComplete.bind(this), this._handleTransmuxerFlush.bind(this)));
                    var c = this.initPTS[i.cc],
                        f = null === (e = i.initSegment) || void 0 === e ? void 0 : e.data;
                    if (void 0 !== c) {
                        var g = r ? r.index : -1,
                            v = -1 !== g,
                            p = new yt(i.level, i.sn, i.stats.chunkCount, n.byteLength, g, v);
                        d.push(n, f, h, "", i, r, u.totalduration, !1, p, c)
                    } else {
                        this.log("Unknown video PTS for cc " + i.cc + ", waiting for video PTS before demuxing audio frag " + i.sn + " of [" + u.startSN + " ," + u.endSN + "],track " + s), (this.waitingData = this.waitingData || {
                            frag: i,
                            part: r,
                            cache: new pe,
                            complete: !1
                        }).cache.push(new Uint8Array(n)), this.waitingVideoCC = this.videoTrackCC, this.state = Jt
                    }
                } else this.warn("Audio tracks were reset while fragment load was in progress. Fragment " + i.sn + " of level " + i.level + " will not be buffered")
            }, n._handleFragmentLoadComplete = function(e) {
                this.waitingData ? this.waitingData.complete = !0 : t.prototype._handleFragmentLoadComplete.call(this, e)
            }, n.onBufferReset = function() {
                this.mediaBuffer = this.videoBuffer = null, this.loadedmetadata = !1
            }, n.onBufferCreated = function(t, e) {
                var i = e.tracks.audio;
                i && (this.mediaBuffer = i.buffer || null), e.tracks.video && (this.videoBuffer = e.tracks.video.buffer || null)
            }, n.onFragBuffered = function(t, e) {
                var i = e.frag,
                    r = e.part;
                i.type === w.b.AUDIO && (this.fragContextChanged(i) ? this.warn("Fragment " + i.sn + (r ? " p: " + r.index : "") + " of level " + i.level + " finished buffering, but was aborted. state: " + this.state + ", audioSwitch: " + this.audioSwitch) : ("initSegment" !== i.sn && (this.fragPrevious = i, this.audioSwitch && (this.audioSwitch = !1, this.hls.trigger(s.a.AUDIO_TRACK_SWITCHED, {
                    id: this.trackId
                }))), this.fragBufferedComplete(i, r)))
            }, n.onError = function(e, i) {
                switch (i.details) {
                    case o.a.FRAG_LOAD_ERROR:
                    case o.a.FRAG_LOAD_TIMEOUT:
                    case o.a.KEY_LOAD_ERROR:
                    case o.a.KEY_LOAD_TIMEOUT:
                        this.onFragmentOrKeyLoadError(w.b.AUDIO, i);
                        break;
                    case o.a.AUDIO_TRACK_LOAD_ERROR:
                    case o.a.AUDIO_TRACK_LOAD_TIMEOUT:
                        this.state !== $t && this.state !== Kt && (this.state = i.fatal ? $t : Ht, this.warn(i.details + " while loading frag, switching to " + this.state + " state"));
                        break;
                    case o.a.BUFFER_FULL_ERROR:
                        if ("audio" === i.parent && (this.state === zt || this.state === Xt)) {
                            var r = !0,
                                n = this.getFwdBufferInfo(this.mediaBuffer, w.b.AUDIO);
                            n && n.len > .5 && (r = !this.reduceMaxBufferLength(n.len)), r && (this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"), this.fragCurrent = null, t.prototype.flushMainBuffer.call(this, 0, Number.POSITIVE_INFINITY, "audio")), this.resetLoadingState()
                        }
                }
            }, n.onBufferFlushed = function(t, e) {
                e.type === p.a.AUDIO && (this.bufferFlushed = !0)
            }, n._handleTransmuxComplete = function(t) {
                var e, i = "audio",
                    r = this.hls,
                    n = t.remuxResult,
                    a = t.chunkMeta,
                    o = this.getCurrentContext(a);
                if (!o) return this.warn("The loading context changed while buffering fragment " + a.sn + " of level " + a.level + ". This chunk will not be buffered."), void this.resetStartWhenNotLoaded(a.level);
                var l = o.frag,
                    u = o.part,
                    h = o.level.details,
                    d = n.audio,
                    c = n.text,
                    f = n.id3,
                    g = n.initSegment;
                if (!this.fragContextChanged(l) && h) {
                    if (this.state = zt, this.audioSwitch && d && this.completeAudioSwitch(), null != g && g.tracks && (this._bufferInitSegment(g.tracks, l, a), r.trigger(s.a.FRAG_PARSING_INIT_SEGMENT, {
                            frag: l,
                            id: i,
                            tracks: g.tracks
                        })), d) {
                        var v = d.startPTS,
                            m = d.endPTS,
                            y = d.startDTS,
                            T = d.endDTS;
                        u && (u.elementaryStreams[p.a.AUDIO] = {
                            startPTS: v,
                            endPTS: m,
                            startDTS: y,
                            endDTS: T
                        }), l.setElementaryStreamInfo(p.a.AUDIO, v, m, y, T), this.bufferFragmentData(d, l, u, a)
                    }
                    if (null != f && null !== (e = f.samples) && void 0 !== e && e.length) {
                        var b = me({
                            id: i,
                            frag: l,
                            details: h
                        }, f);
                        r.trigger(s.a.FRAG_PARSING_METADATA, b)
                    }
                    if (c) {
                        var E = me({
                            id: i,
                            frag: l,
                            details: h
                        }, c);
                        r.trigger(s.a.FRAG_PARSING_USERDATA, E)
                    }
                }
            }, n._bufferInitSegment = function(t, e, i) {
                if (this.state === zt) {
                    t.video && delete t.video;
                    var r = t.audio;
                    if (r) {
                        r.levelCodec = r.codec, r.id = "audio", this.log("Init audio buffer, container:" + r.container + ", codecs[parsed]=[" + r.codec + "]"), this.hls.trigger(s.a.BUFFER_CODECS, t);
                        var n = r.initSegment;
                        if (null != n && n.byteLength) {
                            var a = {
                                type: "audio",
                                frag: e,
                                part: null,
                                chunkMeta: i,
                                parent: e.type,
                                data: n
                            };
                            this.hls.trigger(s.a.BUFFER_APPENDING, a)
                        }
                        this.tick()
                    }
                }
            }, n.loadFragment = function(e, i, r) {
                var n = this.fragmentTracker.getState(e);
                this.fragCurrent = e, (this.audioSwitch || n === ut.NOT_LOADED || n === ut.PARTIAL) && ("initSegment" === e.sn ? this._loadInitSegment(e) : i.live && !Object(a.a)(this.initPTS[e.cc]) ? (this.log("Waiting for video PTS in continuity counter " + e.cc + " of live stream before loading audio fragment " + e.sn + " of level " + this.trackId), this.state = Jt) : (this.startFragRequested = !0, t.prototype.loadFragment.call(this, e, i, r)))
            }, n.completeAudioSwitch = function() {
                var e = this.hls,
                    i = this.media,
                    r = this.trackId;
                i && (this.log("Switching audio track : flushing all audio"), t.prototype.flushMainBuffer.call(this, 0, Number.POSITIVE_INFINITY, "audio")), this.audioSwitch = !1, e.trigger(s.a.AUDIO_TRACK_SWITCHED, {
                    id: r
                })
            }, r
        }(te);

        function be(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }

        function Ee(t, e) {
            return (Ee = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e, t
            })(t, e)
        }
        var Se = function(t) {
            var e, i;

            function r(e) {
                var i;
                return (i = t.call(this, e, "[audio-track-controller]") || this).tracks = [], i.groupId = null, i.tracksInGroup = [], i.trackId = -1, i.trackName = "", i.selectDefaultTrack = !0, i.registerListeners(), i
            }
            i = t, (e = r).prototype = Object.create(i.prototype), e.prototype.constructor = e, Ee(e, i);
            var n, a, l, u = r.prototype;
            return u.registerListeners = function() {
                var t = this.hls;
                t.on(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.on(s.a.MANIFEST_PARSED, this.onManifestParsed, this), t.on(s.a.LEVEL_LOADING, this.onLevelLoading, this), t.on(s.a.LEVEL_SWITCHING, this.onLevelSwitching, this), t.on(s.a.AUDIO_TRACK_LOADED, this.onAudioTrackLoaded, this), t.on(s.a.ERROR, this.onError, this)
            }, u.unregisterListeners = function() {
                var t = this.hls;
                t.off(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.off(s.a.MANIFEST_PARSED, this.onManifestParsed, this), t.off(s.a.LEVEL_LOADING, this.onLevelLoading, this), t.off(s.a.LEVEL_SWITCHING, this.onLevelSwitching, this), t.off(s.a.AUDIO_TRACK_LOADED, this.onAudioTrackLoaded, this), t.off(s.a.ERROR, this.onError, this)
            }, u.destroy = function() {
                this.unregisterListeners(), this.tracks.length = 0, this.tracksInGroup.length = 0, t.prototype.destroy.call(this)
            }, u.onManifestLoading = function() {
                this.tracks = [], this.groupId = null, this.tracksInGroup = [], this.trackId = -1, this.trackName = "", this.selectDefaultTrack = !0
            }, u.onManifestParsed = function(t, e) {
                this.tracks = e.audioTracks || []
            }, u.onAudioTrackLoaded = function(t, e) {
                var i = e.id,
                    r = e.details,
                    n = this.tracksInGroup[i];
                if (n) {
                    var a = n.details;
                    n.details = e.details, this.log("audioTrack " + i + " loaded [" + r.startSN + "-" + r.endSN + "]"), i === this.trackId && (this.retryCount = 0, this.playlistLoaded(i, e, a))
                } else this.warn("Invalid audio track id " + i)
            }, u.onLevelLoading = function(t, e) {
                this.switchLevel(e.level)
            }, u.onLevelSwitching = function(t, e) {
                this.switchLevel(e.level)
            }, u.switchLevel = function(t) {
                var e = this.hls.levels[t];
                if (null != e && e.audioGroupIds) {
                    var i = e.audioGroupIds[e.urlId];
                    if (this.groupId !== i) {
                        this.groupId = i;
                        var r = this.tracks.filter((function(t) {
                            return !i || t.groupId === i
                        }));
                        this.selectDefaultTrack && !r.some((function(t) {
                            return t.default
                        })) && (this.selectDefaultTrack = !1), this.tracksInGroup = r;
                        var n = {
                            audioTracks: r
                        };
                        this.log("Updating audio tracks, " + r.length + ' track(s) found in "' + i + '" group-id'), this.hls.trigger(s.a.AUDIO_TRACKS_UPDATED, n), this.selectInitialTrack()
                    }
                }
            }, u.onError = function(e, i) {
                t.prototype.onError.call(this, e, i), !i.fatal && i.context && i.context.type === w.a.AUDIO_TRACK && i.context.id === this.trackId && i.context.groupId === this.groupId && this.retryLoadingOrFail(i)
            }, u.setAudioTrack = function(t) {
                var e = this.tracksInGroup;
                if (t < 0 || t >= e.length) this.warn("Invalid id passed to audio-track controller");
                else {
                    this.clearTimer();
                    var i = e[this.trackId];
                    this.log("Now switching to audio-track index " + t);
                    var r = e[t],
                        n = r.id,
                        a = r.groupId,
                        o = void 0 === a ? "" : a,
                        l = r.name,
                        u = r.type,
                        h = r.url;
                    if (this.trackId = t, this.trackName = l, this.selectDefaultTrack = !1, this.hls.trigger(s.a.AUDIO_TRACK_SWITCHING, {
                            id: n,
                            groupId: o,
                            name: l,
                            type: u,
                            url: h
                        }), !r.details || r.details.live) {
                        var d = this.switchParams(r.url, null == i ? void 0 : i.details);
                        this.loadPlaylist(d)
                    }
                }
            }, u.selectInitialTrack = function() {
                this.tracksInGroup;
                var t = this.trackName,
                    e = this.findTrackId(t) || this.findTrackId(); - 1 !== e ? this.setAudioTrack(e) : (this.warn("No track found for running audio group-ID: " + this.groupId), this.hls.trigger(s.a.ERROR, {
                    type: o.b.MEDIA_ERROR,
                    details: o.a.AUDIO_TRACK_LOAD_ERROR,
                    fatal: !0
                }))
            }, u.findTrackId = function(t) {
                for (var e = this.tracksInGroup, i = 0; i < e.length; i++) {
                    var r = e[i];
                    if ((!this.selectDefaultTrack || r.default) && (!t || t === r.name)) return r.id
                }
                return -1
            }, u.loadPlaylist = function(t) {
                var e = this.tracksInGroup[this.trackId];
                if (this.shouldLoadTrack(e)) {
                    var i = e.id,
                        r = e.groupId,
                        n = e.url;
                    if (t) try {
                        n = t.addDirectives(n)
                    } catch (t) {
                        this.warn("Could not construct new URL with HLS Delivery Directives: " + t)
                    }
                    this.log("loading audio-track playlist for id: " + i), this.clearTimer(), this.hls.trigger(s.a.AUDIO_TRACK_LOADING, {
                        url: n,
                        id: i,
                        groupId: r,
                        deliveryDirectives: t || null
                    })
                }
            }, n = r, (a = [{
                key: "audioTracks",
                get: function() {
                    return this.tracksInGroup
                }
            }, {
                key: "audioTrack",
                get: function() {
                    return this.trackId
                },
                set: function(t) {
                    this.selectDefaultTrack = !1, this.setAudioTrack(t)
                }
            }]) && be(n.prototype, a), l && be(n, l), Object.defineProperty(n, "prototype", {
                writable: !1
            }), r
        }(at);

        function Le(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }

        function Ae(t, e) {
            return (Ae = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e, t
            })(t, e)
        }
        var De = function(t) {
                var e, i;

                function r(e, i) {
                    var r;
                    return (r = t.call(this, e, i, "[subtitle-stream-controller]") || this).levels = [], r.currentTrackId = -1, r.tracksBuffered = [], r.mainDetails = null, r._registerListeners(), r
                }
                i = t, (e = r).prototype = Object.create(i.prototype), e.prototype.constructor = e, Ae(e, i);
                var n, a, o, l = r.prototype;
                return l.onHandlerDestroying = function() {
                    this._unregisterListeners(), this.mainDetails = null
                }, l._registerListeners = function() {
                    var t = this.hls;
                    t.on(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), t.on(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.on(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.on(s.a.LEVEL_LOADED, this.onLevelLoaded, this), t.on(s.a.ERROR, this.onError, this), t.on(s.a.SUBTITLE_TRACKS_UPDATED, this.onSubtitleTracksUpdated, this), t.on(s.a.SUBTITLE_TRACK_SWITCH, this.onSubtitleTrackSwitch, this), t.on(s.a.SUBTITLE_TRACK_LOADED, this.onSubtitleTrackLoaded, this), t.on(s.a.SUBTITLE_FRAG_PROCESSED, this.onSubtitleFragProcessed, this), t.on(s.a.BUFFER_FLUSHING, this.onBufferFlushing, this)
                }, l._unregisterListeners = function() {
                    var t = this.hls;
                    t.off(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), t.off(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.off(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.off(s.a.LEVEL_LOADED, this.onLevelLoaded, this), t.off(s.a.ERROR, this.onError, this), t.off(s.a.SUBTITLE_TRACKS_UPDATED, this.onSubtitleTracksUpdated, this), t.off(s.a.SUBTITLE_TRACK_SWITCH, this.onSubtitleTrackSwitch, this), t.off(s.a.SUBTITLE_TRACK_LOADED, this.onSubtitleTrackLoaded, this), t.off(s.a.SUBTITLE_FRAG_PROCESSED, this.onSubtitleFragProcessed, this), t.off(s.a.BUFFER_FLUSHING, this.onBufferFlushing, this)
                }, l.startLoad = function() {
                    this.stopLoad(), this.state = Ht, this.setInterval(500), this.tick()
                }, l.onManifestLoading = function() {
                    this.mainDetails = null, this.fragmentTracker.removeAllFragments()
                }, l.onLevelLoaded = function(t, e) {
                    this.mainDetails = e.details
                }, l.onSubtitleFragProcessed = function(t, e) {
                    var i = e.frag,
                        r = e.success;
                    if (this.fragPrevious = i, this.state = Ht, r) {
                        var n = this.tracksBuffered[this.currentTrackId];
                        if (n) {
                            for (var a, s = i.start, o = 0; o < n.length; o++)
                                if (s >= n[o].start && s <= n[o].end) {
                                    a = n[o];
                                    break
                                } var l = i.start + i.duration;
                            a ? a.end = l : (a = {
                                start: s,
                                end: l
                            }, n.push(a)), this.fragmentTracker.fragBuffered(i)
                        }
                    }
                }, l.onBufferFlushing = function(t, e) {
                    var i = e.startOffset,
                        r = e.endOffset;
                    if (0 === i && r !== Number.POSITIVE_INFINITY) {
                        var n = this.currentTrackId,
                            a = this.levels;
                        if (!a.length || !a[n] || !a[n].details) return;
                        var s = r - a[n].details.targetduration;
                        if (s <= 0) return;
                        e.endOffsetSubtitles = Math.max(0, s), this.tracksBuffered.forEach((function(t) {
                            for (var e = 0; e < t.length;)
                                if (t[e].end <= s) t.shift();
                                else {
                                    if (!(t[e].start < s)) break;
                                    t[e].start = s, e++
                                }
                        })), this.fragmentTracker.removeFragmentsInRange(i, s, w.b.SUBTITLE)
                    }
                }, l.onError = function(t, e) {
                    var i, r = e.frag;
                    r && r.type === w.b.SUBTITLE && (null !== (i = this.fragCurrent) && void 0 !== i && i.loader && this.fragCurrent.loader.abort(), this.state = Ht)
                }, l.onSubtitleTracksUpdated = function(t, e) {
                    var i = this,
                        r = e.subtitleTracks;
                    this.tracksBuffered = [], this.levels = r.map((function(t) {
                        return new Q(t)
                    })), this.fragmentTracker.removeAllFragments(), this.fragPrevious = null, this.levels.forEach((function(t) {
                        i.tracksBuffered[t.id] = []
                    })), this.mediaBuffer = null
                }, l.onSubtitleTrackSwitch = function(t, e) {
                    if (this.currentTrackId = e.id, this.levels.length && -1 !== this.currentTrackId) {
                        var i = this.levels[this.currentTrackId];
                        null != i && i.details ? this.mediaBuffer = this.mediaBufferTimeRanges : this.mediaBuffer = null, i && this.setInterval(500)
                    } else this.clearInterval()
                }, l.onSubtitleTrackLoaded = function(t, e) {
                    var i, r = e.details,
                        n = e.id,
                        a = this.currentTrackId,
                        s = this.levels;
                    if (s.length) {
                        var o = s[a];
                        if (!(n >= s.length || n !== a) && o) {
                            if (this.mediaBuffer = this.mediaBufferTimeRanges, r.live || null !== (i = o.details) && void 0 !== i && i.live) {
                                var l = this.mainDetails;
                                if (r.deltaUpdateFailed || !l) return;
                                var u = l.fragments[0];
                                if (o.details) 0 === this.alignPlaylists(r, o.details) && u && nt(r, u.start);
                                else r.hasProgramDateTime && l.hasProgramDateTime ? Lt(r, l) : u && nt(r, u.start)
                            }
                            if (o.details = r, this.levelLastLoaded = n, this.tick(), r.live && !this.fragCurrent && this.media && this.state === Ht) Dt(null, r.fragments, this.media.currentTime, 0) || (this.warn("Subtitle playlist not aligned with playback"), o.details = void 0)
                        }
                    }
                }, l._handleFragmentLoadComplete = function(t) {
                    var e = t.frag,
                        i = t.payload,
                        r = e.decryptdata,
                        n = this.hls;
                    if (!this.fragContextChanged(e) && i && i.byteLength > 0 && r && r.key && r.iv && "AES-128" === r.method) {
                        var a = performance.now();
                        this.decrypter.webCryptoDecrypt(new Uint8Array(i), r.key.buffer, r.iv.buffer).then((function(t) {
                            var i = performance.now();
                            n.trigger(s.a.FRAG_DECRYPTED, {
                                frag: e,
                                payload: t,
                                stats: {
                                    tstart: a,
                                    tdecrypt: i
                                }
                            })
                        }))
                    }
                }, l.doTick = function() {
                    if (this.media) {
                        if (this.state === Ht) {
                            var t = this.currentTrackId,
                                e = this.levels;
                            if (!e.length || !e[t] || !e[t].details) return;
                            var i = e[t].details,
                                r = i.targetduration,
                                n = this.config,
                                a = this.media,
                                s = mt.bufferedInfo(this.tracksBuffered[this.currentTrackId] || [], a.currentTime - r, n.maxBufferHole),
                                o = s.end;
                            if (s.len > this.getMaxBufferLength() + r) return;
                            var l, u = i.fragments,
                                h = u.length,
                                d = i.edge,
                                c = this.fragPrevious;
                            if (o < d) {
                                var f = n.maxFragLookUpTolerance;
                                !(l = Dt(c, u, Math.max(u[0].start, o), f)) && c && c.start < u[0].start && (l = u[0])
                            } else l = u[h - 1];
                            if (!(l = this.mapToInitFragWhenRequired(l))) return;
                            if (this.fragmentTracker.getState(l) !== ut.NOT_LOADED) return;
                            l.encrypted ? this.loadKey(l, i) : this.loadFragment(l, i, o)
                        }
                    } else this.state = Ht
                }, l.loadFragment = function(e, i, r) {
                    this.fragCurrent = e, "initSegment" === e.sn ? this._loadInitSegment(e) : t.prototype.loadFragment.call(this, e, i, r)
                }, n = r, (a = [{
                    key: "mediaBufferTimeRanges",
                    get: function() {
                        return new Re(this.tracksBuffered[this.currentTrackId] || [])
                    }
                }]) && Le(n.prototype, a), o && Le(n, o), Object.defineProperty(n, "prototype", {
                    writable: !1
                }), r
            }(te),
            Re = function(t) {
                this.buffered = void 0;
                var e = function(e, i, r) {
                    if ((i >>>= 0) > r - 1) throw new DOMException("Failed to execute '" + e + "' on 'TimeRanges': The index provided (" + i + ") is greater than the maximum bound (" + r + ")");
                    return t[i][e]
                };
                this.buffered = {
                    get length() {
                        return t.length
                    },
                    end: function(i) {
                        return e("end", i, t.length)
                    },
                    start: function(i) {
                        return e("start", i, t.length)
                    }
                }
            };

        function ke(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }

        function _e(t, e) {
            return (_e = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e, t
            })(t, e)
        }

        function Ie(t) {
            for (var e = [], i = 0; i < t.length; i++) {
                var r = t[i];
                "subtitles" === r.kind && r.label && e.push(t[i])
            }
            return e
        }
        var Oe, Ce = function(t) {
                var e, i;

                function r(e) {
                    var i;
                    return (i = t.call(this, e, "[subtitle-track-controller]") || this).media = null, i.tracks = [], i.groupId = null, i.tracksInGroup = [], i.trackId = -1, i.selectDefaultTrack = !0, i.queuedDefaultTrack = -1, i.trackChangeListener = function() {
                        return i.onTextTracksChanged()
                    }, i.asyncPollTrackChange = function() {
                        return i.pollTrackChange(0)
                    }, i.useTextTrackPolling = !1, i.subtitlePollingInterval = -1, i._subtitleDisplay = !0, i.registerListeners(), i
                }
                i = t, (e = r).prototype = Object.create(i.prototype), e.prototype.constructor = e, _e(e, i);
                var n, a, o, l = r.prototype;
                return l.destroy = function() {
                    this.unregisterListeners(), this.tracks.length = 0, this.tracksInGroup.length = 0, this.trackChangeListener = this.asyncPollTrackChange = null, t.prototype.destroy.call(this)
                }, l.registerListeners = function() {
                    var t = this.hls;
                    t.on(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), t.on(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.on(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.on(s.a.MANIFEST_PARSED, this.onManifestParsed, this), t.on(s.a.LEVEL_LOADING, this.onLevelLoading, this), t.on(s.a.LEVEL_SWITCHING, this.onLevelSwitching, this), t.on(s.a.SUBTITLE_TRACK_LOADED, this.onSubtitleTrackLoaded, this), t.on(s.a.ERROR, this.onError, this)
                }, l.unregisterListeners = function() {
                    var t = this.hls;
                    t.off(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), t.off(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.off(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.off(s.a.MANIFEST_PARSED, this.onManifestParsed, this), t.off(s.a.LEVEL_LOADING, this.onLevelLoading, this), t.off(s.a.LEVEL_SWITCHING, this.onLevelSwitching, this), t.off(s.a.SUBTITLE_TRACK_LOADED, this.onSubtitleTrackLoaded, this), t.off(s.a.ERROR, this.onError, this)
                }, l.onMediaAttached = function(t, e) {
                    this.media = e.media, this.media && (this.queuedDefaultTrack > -1 && (this.subtitleTrack = this.queuedDefaultTrack, this.queuedDefaultTrack = -1), this.useTextTrackPolling = !(this.media.textTracks && "onchange" in this.media.textTracks), this.useTextTrackPolling ? this.pollTrackChange(500) : this.media.textTracks.addEventListener("change", this.asyncPollTrackChange))
                }, l.pollTrackChange = function(t) {
                    self.clearInterval(this.subtitlePollingInterval), this.subtitlePollingInterval = self.setInterval(this.trackChangeListener, t)
                }, l.onMediaDetaching = function() {
                    this.media && (self.clearInterval(this.subtitlePollingInterval), this.useTextTrackPolling || this.media.textTracks.removeEventListener("change", this.asyncPollTrackChange), this.trackId > -1 && (this.queuedDefaultTrack = this.trackId), Ie(this.media.textTracks).forEach((function(t) {
                        U(t)
                    })), this.subtitleTrack = -1, this.media = null)
                }, l.onManifestLoading = function() {
                    this.tracks = [], this.groupId = null, this.tracksInGroup = [], this.trackId = -1, this.selectDefaultTrack = !0
                }, l.onManifestParsed = function(t, e) {
                    this.tracks = e.subtitleTracks
                }, l.onSubtitleTrackLoaded = function(t, e) {
                    var i = e.id,
                        r = e.details,
                        n = this.trackId,
                        a = this.tracksInGroup[n];
                    if (a) {
                        var s = a.details;
                        a.details = e.details, this.log("subtitle track " + i + " loaded [" + r.startSN + "-" + r.endSN + "]"), i === this.trackId && (this.retryCount = 0, this.playlistLoaded(i, e, s))
                    } else this.warn("Invalid subtitle track id " + i)
                }, l.onLevelLoading = function(t, e) {
                    this.switchLevel(e.level)
                }, l.onLevelSwitching = function(t, e) {
                    this.switchLevel(e.level)
                }, l.switchLevel = function(t) {
                    var e = this.hls.levels[t];
                    if (null != e && e.textGroupIds) {
                        var i = e.textGroupIds[e.urlId];
                        if (this.groupId !== i) {
                            var r = this.tracksInGroup ? this.tracksInGroup[this.trackId] : void 0,
                                n = this.tracks.filter((function(t) {
                                    return !i || t.groupId === i
                                }));
                            this.tracksInGroup = n;
                            var a = this.findTrackId(null == r ? void 0 : r.name) || this.findTrackId();
                            this.groupId = i;
                            var o = {
                                subtitleTracks: n
                            };
                            this.log("Updating subtitle tracks, " + n.length + ' track(s) found in "' + i + '" group-id'), this.hls.trigger(s.a.SUBTITLE_TRACKS_UPDATED, o), -1 !== a && this.setSubtitleTrack(a, r)
                        }
                    }
                }, l.findTrackId = function(t) {
                    for (var e = this.tracksInGroup, i = 0; i < e.length; i++) {
                        var r = e[i];
                        if ((!this.selectDefaultTrack || r.default) && (!t || t === r.name)) return r.id
                    }
                    return -1
                }, l.onError = function(e, i) {
                    t.prototype.onError.call(this, e, i), !i.fatal && i.context && i.context.type === w.a.SUBTITLE_TRACK && i.context.id === this.trackId && i.context.groupId === this.groupId && this.retryLoadingOrFail(i)
                }, l.loadPlaylist = function(t) {
                    var e = this.tracksInGroup[this.trackId];
                    if (this.shouldLoadTrack(e)) {
                        var i = e.id,
                            r = e.groupId,
                            n = e.url;
                        if (t) try {
                            n = t.addDirectives(n)
                        } catch (t) {
                            this.warn("Could not construct new URL with HLS Delivery Directives: " + t)
                        }
                        this.log("Loading subtitle playlist for id " + i), this.hls.trigger(s.a.SUBTITLE_TRACK_LOADING, {
                            url: n,
                            id: i,
                            groupId: r,
                            deliveryDirectives: t || null
                        })
                    }
                }, l.toggleTrackModes = function(t) {
                    var e = this,
                        i = this.media,
                        r = this.trackId;
                    if (i) {
                        var n = Ie(i.textTracks),
                            a = n.filter((function(t) {
                                return t.groupId === e.groupId
                            }));
                        if (-1 === t)[].slice.call(n).forEach((function(t) {
                            t.mode = "disabled"
                        }));
                        else {
                            var s = a[r];
                            s && (s.mode = "disabled")
                        }
                        var o = a[t];
                        o && (o.mode = this.subtitleDisplay ? "showing" : "hidden")
                    }
                }, l.setSubtitleTrack = function(t, e) {
                    var i, r = this.tracksInGroup;
                    if (this.media) {
                        if (this.trackId !== t && this.toggleTrackModes(t), !(this.trackId === t && (-1 === t || null !== (i = r[t]) && void 0 !== i && i.details) || t < -1 || t >= r.length)) {
                            this.clearTimer();
                            var n = r[t];
                            if (this.log("Switching to subtitle track " + t), this.trackId = t, n) {
                                var a = n.id,
                                    o = n.groupId,
                                    l = void 0 === o ? "" : o,
                                    u = n.name,
                                    h = n.type,
                                    d = n.url;
                                this.hls.trigger(s.a.SUBTITLE_TRACK_SWITCH, {
                                    id: a,
                                    groupId: l,
                                    name: u,
                                    type: h,
                                    url: d
                                });
                                var c = this.switchParams(n.url, null == e ? void 0 : e.details);
                                this.loadPlaylist(c)
                            } else this.hls.trigger(s.a.SUBTITLE_TRACK_SWITCH, {
                                id: t
                            })
                        }
                    } else this.queuedDefaultTrack = t
                }, l.onTextTracksChanged = function() {
                    if (this.useTextTrackPolling || self.clearInterval(this.subtitlePollingInterval), this.media && this.hls.config.renderTextTracksNatively) {
                        for (var t = -1, e = Ie(this.media.textTracks), i = 0; i < e.length; i++)
                            if ("hidden" === e[i].mode) t = i;
                            else if ("showing" === e[i].mode) {
                            t = i;
                            break
                        }
                        this.subtitleTrack !== t && (this.subtitleTrack = t)
                    }
                }, n = r, (a = [{
                    key: "subtitleDisplay",
                    get: function() {
                        return this._subtitleDisplay
                    },
                    set: function(t) {
                        this._subtitleDisplay = t, this.trackId > -1 && this.toggleTrackModes(this.trackId)
                    }
                }, {
                    key: "subtitleTracks",
                    get: function() {
                        return this.tracksInGroup
                    }
                }, {
                    key: "subtitleTrack",
                    get: function() {
                        return this.trackId
                    },
                    set: function(t) {
                        this.selectDefaultTrack = !1;
                        var e = this.tracksInGroup ? this.tracksInGroup[this.trackId] : void 0;
                        this.setSubtitleTrack(t, e)
                    }
                }]) && ke(n.prototype, a), o && ke(n, o), Object.defineProperty(n, "prototype", {
                    writable: !1
                }), r
            }(at),
            we = function() {
                function t(t) {
                    this.buffers = void 0, this.queues = {
                        video: [],
                        audio: [],
                        audiovideo: []
                    }, this.buffers = t
                }
                var e = t.prototype;
                return e.append = function(t, e) {
                    var i = this.queues[e];
                    i.push(t), 1 === i.length && this.buffers[e] && this.executeNext(e)
                }, e.insertAbort = function(t, e) {
                    this.queues[e].unshift(t), this.executeNext(e)
                }, e.appendBlocker = function(t) {
                    var e, i = new Promise((function(t) {
                            e = t
                        })),
                        r = {
                            execute: e,
                            onStart: function() {},
                            onComplete: function() {},
                            onError: function() {}
                        };
                    return this.append(r, t), i
                }, e.executeNext = function(t) {
                    var e = this.buffers,
                        i = this.queues,
                        r = e[t],
                        n = i[t];
                    if (n.length) {
                        var a = n[0];
                        try {
                            a.execute()
                        } catch (e) {
                            l.b.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"), a.onError(e), r && r.updating || (n.shift(), this.executeNext(t))
                        }
                    }
                }, e.shiftAndExecuteNext = function(t) {
                    this.queues[t].shift(), this.executeNext(t)
                }, e.current = function(t) {
                    return this.queues[t][0]
                }, t
            }(),
            xe = ee(),
            Pe = /([ha]vc.)(?:\.[^.,]+)+/,
            Fe = function() {
                function t(t) {
                    var e = this;
                    this.details = null, this._objectUrl = null, this.operationQueue = void 0, this.listeners = void 0, this.hls = void 0, this.bufferCodecEventsExpected = 0, this._bufferCodecEventsTotal = 0, this.media = null, this.mediaSource = null, this.appendError = 0, this.tracks = {}, this.pendingTracks = {}, this.sourceBuffer = void 0, this._onMediaSourceOpen = function() {
                        var t = e.hls,
                            i = e.media,
                            r = e.mediaSource;
                        l.b.log("[buffer-controller]: Media source opened"), i && (e.updateMediaElementDuration(), t.trigger(s.a.MEDIA_ATTACHED, {
                            media: i
                        })), r && r.removeEventListener("sourceopen", e._onMediaSourceOpen), e.checkPendingTracks()
                    }, this._onMediaSourceClose = function() {
                        l.b.log("[buffer-controller]: Media source closed")
                    }, this._onMediaSourceEnded = function() {
                        l.b.log("[buffer-controller]: Media source ended")
                    }, this.hls = t, this._initSourceBuffer(), this.registerListeners()
                }
                var e = t.prototype;
                return e.hasSourceTypes = function() {
                    return this.getSourceBufferTypes().length > 0 || Object.keys(this.pendingTracks).length > 0
                }, e.destroy = function() {
                    this.unregisterListeners(), this.details = null
                }, e.registerListeners = function() {
                    var t = this.hls;
                    t.on(s.a.MEDIA_ATTACHING, this.onMediaAttaching, this), t.on(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.on(s.a.MANIFEST_PARSED, this.onManifestParsed, this), t.on(s.a.BUFFER_RESET, this.onBufferReset, this), t.on(s.a.BUFFER_APPENDING, this.onBufferAppending, this), t.on(s.a.BUFFER_CODECS, this.onBufferCodecs, this), t.on(s.a.BUFFER_EOS, this.onBufferEos, this), t.on(s.a.BUFFER_FLUSHING, this.onBufferFlushing, this), t.on(s.a.LEVEL_UPDATED, this.onLevelUpdated, this), t.on(s.a.FRAG_PARSED, this.onFragParsed, this), t.on(s.a.FRAG_CHANGED, this.onFragChanged, this)
                }, e.unregisterListeners = function() {
                    var t = this.hls;
                    t.off(s.a.MEDIA_ATTACHING, this.onMediaAttaching, this), t.off(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.off(s.a.MANIFEST_PARSED, this.onManifestParsed, this), t.off(s.a.BUFFER_RESET, this.onBufferReset, this), t.off(s.a.BUFFER_APPENDING, this.onBufferAppending, this), t.off(s.a.BUFFER_CODECS, this.onBufferCodecs, this), t.off(s.a.BUFFER_EOS, this.onBufferEos, this), t.off(s.a.BUFFER_FLUSHING, this.onBufferFlushing, this), t.off(s.a.LEVEL_UPDATED, this.onLevelUpdated, this), t.off(s.a.FRAG_PARSED, this.onFragParsed, this), t.off(s.a.FRAG_CHANGED, this.onFragChanged, this)
                }, e._initSourceBuffer = function() {
                    this.sourceBuffer = {}, this.operationQueue = new we(this.sourceBuffer), this.listeners = {
                        audio: [],
                        video: [],
                        audiovideo: []
                    }
                }, e.onManifestParsed = function(t, e) {
                    var i = 2;
                    (e.audio && !e.video || !e.altAudio) && (i = 1), this.bufferCodecEventsExpected = this._bufferCodecEventsTotal = i, this.details = null, l.b.log(this.bufferCodecEventsExpected + " bufferCodec event(s) expected")
                }, e.onMediaAttaching = function(t, e) {
                    var i = this.media = e.media;
                    if (i && xe) {
                        var r = this.mediaSource = new xe;
                        r.addEventListener("sourceopen", this._onMediaSourceOpen), r.addEventListener("sourceended", this._onMediaSourceEnded), r.addEventListener("sourceclose", this._onMediaSourceClose), i.src = self.URL.createObjectURL(r), this._objectUrl = i.src
                    }
                }, e.onMediaDetaching = function() {
                    var t = this.media,
                        e = this.mediaSource,
                        i = this._objectUrl;
                    if (e) {
                        if (l.b.log("[buffer-controller]: media source detaching"), "open" === e.readyState) try {
                            e.endOfStream()
                        } catch (t) {
                            l.b.warn("[buffer-controller]: onMediaDetaching: " + t.message + " while calling endOfStream")
                        }
                        this.onBufferReset(), e.removeEventListener("sourceopen", this._onMediaSourceOpen), e.removeEventListener("sourceended", this._onMediaSourceEnded), e.removeEventListener("sourceclose", this._onMediaSourceClose), t && (i && self.URL.revokeObjectURL(i), t.src === i ? (t.removeAttribute("src"), t.load()) : l.b.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")), this.mediaSource = null, this.media = null, this._objectUrl = null, this.bufferCodecEventsExpected = this._bufferCodecEventsTotal, this.pendingTracks = {}, this.tracks = {}
                    }
                    this.hls.trigger(s.a.MEDIA_DETACHED, void 0)
                }, e.onBufferReset = function() {
                    var t = this;
                    this.getSourceBufferTypes().forEach((function(e) {
                        var i = t.sourceBuffer[e];
                        try {
                            i && (t.removeBufferListeners(e), t.mediaSource && t.mediaSource.removeSourceBuffer(i), t.sourceBuffer[e] = void 0)
                        } catch (t) {
                            l.b.warn("[buffer-controller]: Failed to reset the " + e + " buffer", t)
                        }
                    })), this._initSourceBuffer()
                }, e.onBufferCodecs = function(t, e) {
                    var i = this,
                        r = this.getSourceBufferTypes().length;
                    Object.keys(e).forEach((function(t) {
                        if (r) {
                            var n = i.tracks[t];
                            if (n && "function" == typeof n.buffer.changeType) {
                                var a = e[t],
                                    s = a.id,
                                    o = a.codec,
                                    u = a.levelCodec,
                                    h = a.container,
                                    d = a.metadata,
                                    c = (n.levelCodec || n.codec).replace(Pe, "$1"),
                                    f = (u || o).replace(Pe, "$1");
                                if (c !== f) {
                                    var g = h + ";codecs=" + (u || o);
                                    i.appendChangeType(t, g), l.b.log("[buffer-controller]: switching codec " + c + " to " + f), i.tracks[t] = {
                                        buffer: n.buffer,
                                        codec: o,
                                        container: h,
                                        levelCodec: u,
                                        metadata: d,
                                        id: s
                                    }
                                }
                            }
                        } else i.pendingTracks[t] = e[t]
                    })), r || (this.bufferCodecEventsExpected = Math.max(this.bufferCodecEventsExpected - 1, 0), this.mediaSource && "open" === this.mediaSource.readyState && this.checkPendingTracks())
                }, e.appendChangeType = function(t, e) {
                    var i = this,
                        r = this.operationQueue,
                        n = {
                            execute: function() {
                                var n = i.sourceBuffer[t];
                                n && (l.b.log("[buffer-controller]: changing " + t + " sourceBuffer type to " + e), n.changeType(e)), r.shiftAndExecuteNext(t)
                            },
                            onStart: function() {},
                            onComplete: function() {},
                            onError: function(e) {
                                l.b.warn("[buffer-controller]: Failed to change " + t + " SourceBuffer type", e)
                            }
                        };
                    r.append(n, t)
                }, e.onBufferAppending = function(t, e) {
                    var i = this,
                        r = this.hls,
                        n = this.operationQueue,
                        a = this.tracks,
                        u = e.data,
                        h = e.type,
                        d = e.frag,
                        c = e.part,
                        f = e.chunkMeta,
                        g = f.buffering[h],
                        v = self.performance.now();
                    g.start = v;
                    var p = d.stats.buffering,
                        m = c ? c.stats.buffering : null;
                    0 === p.start && (p.start = v), m && 0 === m.start && (m.start = v);
                    var y = a.audio,
                        T = "audio" === h && 1 === f.id && "audio/mpeg" === (null == y ? void 0 : y.container),
                        b = {
                            execute: function() {
                                if (g.executeStart = self.performance.now(), T) {
                                    var t = i.sourceBuffer[h];
                                    if (t) {
                                        var e = d.start - t.timestampOffset;
                                        Math.abs(e) >= .1 && (l.b.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to " + d.start + " (delta: " + e + ") sn: " + d.sn + ")"), t.timestampOffset = d.start)
                                    }
                                }
                                i.appendExecutor(u, h)
                            },
                            onStart: function() {},
                            onComplete: function() {
                                var t = self.performance.now();
                                g.executeEnd = g.end = t, 0 === p.first && (p.first = t), m && 0 === m.first && (m.first = t);
                                var e = i.sourceBuffer,
                                    r = {};
                                for (var n in e) r[n] = mt.getBuffered(e[n]);
                                i.appendError = 0, i.hls.trigger(s.a.BUFFER_APPENDED, {
                                    type: h,
                                    frag: d,
                                    part: c,
                                    chunkMeta: f,
                                    parent: d.type,
                                    timeRanges: r
                                })
                            },
                            onError: function(t) {
                                l.b.error("[buffer-controller]: Error encountered while trying to append to the " + h + " SourceBuffer", t);
                                var e = {
                                    type: o.b.MEDIA_ERROR,
                                    parent: d.type,
                                    details: o.a.BUFFER_APPEND_ERROR,
                                    err: t,
                                    fatal: !1
                                };
                                t.code === DOMException.QUOTA_EXCEEDED_ERR ? e.details = o.a.BUFFER_FULL_ERROR : (i.appendError++, e.details = o.a.BUFFER_APPEND_ERROR, i.appendError > r.config.appendErrorMaxRetry && (l.b.error("[buffer-controller]: Failed " + r.config.appendErrorMaxRetry + " times to append segment in sourceBuffer"), e.fatal = !0, r.stopLoad())), r.trigger(s.a.ERROR, e)
                            }
                        };
                    n.append(b, h)
                }, e.onBufferFlushing = function(t, e) {
                    var i = this,
                        r = this.operationQueue,
                        n = function(t) {
                            return {
                                execute: i.removeExecutor.bind(i, t, e.startOffset, e.endOffset),
                                onStart: function() {},
                                onComplete: function() {
                                    i.hls.trigger(s.a.BUFFER_FLUSHED, {
                                        type: t
                                    })
                                },
                                onError: function(e) {
                                    l.b.warn("[buffer-controller]: Failed to remove from " + t + " SourceBuffer", e)
                                }
                            }
                        };
                    e.type ? r.append(n(e.type), e.type) : this.getSourceBufferTypes().forEach((function(t) {
                        r.append(n(t), t)
                    }))
                }, e.onFragParsed = function(t, e) {
                    var i = this,
                        r = e.frag,
                        n = e.part,
                        a = [],
                        o = n ? n.elementaryStreams : r.elementaryStreams;
                    o[p.a.AUDIOVIDEO] ? a.push("audiovideo") : (o[p.a.AUDIO] && a.push("audio"), o[p.a.VIDEO] && a.push("video"));
                    0 === a.length && l.b.warn("Fragments must have at least one ElementaryStreamType set. type: " + r.type + " level: " + r.level + " sn: " + r.sn), this.blockBuffers((function() {
                        var t = self.performance.now();
                        r.stats.buffering.end = t, n && (n.stats.buffering.end = t);
                        var e = n ? n.stats : r.stats;
                        i.hls.trigger(s.a.FRAG_BUFFERED, {
                            frag: r,
                            part: n,
                            stats: e,
                            id: r.type
                        })
                    }), a)
                }, e.onFragChanged = function(t, e) {
                    this.flushBackBuffer()
                }, e.onBufferEos = function(t, e) {
                    var i = this;
                    this.getSourceBufferTypes().reduce((function(t, r) {
                        var n = i.sourceBuffer[r];
                        return e.type && e.type !== r || n && !n.ended && (n.ended = !0, l.b.log("[buffer-controller]: " + r + " sourceBuffer now EOS")), t && !(n && !n.ended)
                    }), !0) && this.blockBuffers((function() {
                        var t = i.mediaSource;
                        t && "open" === t.readyState && t.endOfStream()
                    }))
                }, e.onLevelUpdated = function(t, e) {
                    var i = e.details;
                    i.fragments.length && (this.details = i, this.getSourceBufferTypes().length ? this.blockBuffers(this.updateMediaElementDuration.bind(this)) : this.updateMediaElementDuration())
                }, e.flushBackBuffer = function() {
                    var t = this.hls,
                        e = this.details,
                        i = this.media,
                        r = this.sourceBuffer;
                    if (i && null !== e) {
                        var n = this.getSourceBufferTypes();
                        if (n.length) {
                            var o = e.live && null !== t.config.liveBackBufferLength ? t.config.liveBackBufferLength : t.config.backBufferLength;
                            if (Object(a.a)(o) && !(o < 0)) {
                                var l = i.currentTime,
                                    u = e.levelTargetDuration,
                                    h = Math.max(o, u),
                                    d = Math.floor(l / u) * u - h;
                                n.forEach((function(i) {
                                    var n = r[i];
                                    if (n) {
                                        var a = mt.getBuffered(n);
                                        a.length > 0 && d > a.start(0) && (t.trigger(s.a.BACK_BUFFER_REACHED, {
                                            bufferEnd: d
                                        }), e.live && t.trigger(s.a.LIVE_BACK_BUFFER_REACHED, {
                                            bufferEnd: d
                                        }), t.trigger(s.a.BUFFER_FLUSHING, {
                                            startOffset: 0,
                                            endOffset: d,
                                            type: i
                                        }))
                                    }
                                }))
                            }
                        }
                    }
                }, e.updateMediaElementDuration = function() {
                    if (this.details && this.media && this.mediaSource && "open" === this.mediaSource.readyState) {
                        var t = this.details,
                            e = this.hls,
                            i = this.media,
                            r = this.mediaSource,
                            n = t.fragments[0].start + t.totalduration,
                            s = i.duration,
                            o = Object(a.a)(r.duration) ? r.duration : 0;
                        t.live && e.config.liveDurationInfinity ? (l.b.log("[buffer-controller]: Media Source duration is set to Infinity"), r.duration = 1 / 0, this.updateSeekableRange(t)) : (n > o && n > s || !Object(a.a)(s)) && (l.b.log("[buffer-controller]: Updating Media Source duration to " + n.toFixed(3)), r.duration = n)
                    }
                }, e.updateSeekableRange = function(t) {
                    var e = this.mediaSource,
                        i = t.fragments;
                    if (i.length && t.live && null != e && e.setLiveSeekableRange) {
                        var r = Math.max(0, i[0].start),
                            n = Math.max(r, r + t.totalduration);
                        e.setLiveSeekableRange(r, n)
                    }
                }, e.checkPendingTracks = function() {
                    var t = this.bufferCodecEventsExpected,
                        e = this.operationQueue,
                        i = this.pendingTracks,
                        r = Object.keys(i).length;
                    if (r && !t || 2 === r) {
                        this.createSourceBuffers(i), this.pendingTracks = {};
                        var n = this.getSourceBufferTypes();
                        if (0 === n.length) return void this.hls.trigger(s.a.ERROR, {
                            type: o.b.MEDIA_ERROR,
                            details: o.a.BUFFER_INCOMPATIBLE_CODECS_ERROR,
                            fatal: !0,
                            reason: "could not create source buffer for media codec(s)"
                        });
                        n.forEach((function(t) {
                            e.executeNext(t)
                        }))
                    }
                }, e.createSourceBuffers = function(t) {
                    var e = this.sourceBuffer,
                        i = this.mediaSource;
                    if (!i) throw Error("createSourceBuffers called when mediaSource was null");
                    var r = 0;
                    for (var n in t)
                        if (!e[n]) {
                            var a = t[n];
                            if (!a) throw Error("source buffer exists for track " + n + ", however track does not");
                            var u = a.levelCodec || a.codec,
                                h = a.container + ";codecs=" + u;
                            l.b.log("[buffer-controller]: creating sourceBuffer(" + h + ")");
                            try {
                                var d = e[n] = i.addSourceBuffer(h),
                                    c = n;
                                this.addBufferListener(c, "updatestart", this._onSBUpdateStart), this.addBufferListener(c, "updateend", this._onSBUpdateEnd), this.addBufferListener(c, "error", this._onSBUpdateError), this.tracks[n] = {
                                    buffer: d,
                                    codec: u,
                                    container: a.container,
                                    levelCodec: a.levelCodec,
                                    metadata: a.metadata,
                                    id: a.id
                                }, r++
                            } catch (t) {
                                l.b.error("[buffer-controller]: error while trying to add sourceBuffer: " + t.message), this.hls.trigger(s.a.ERROR, {
                                    type: o.b.MEDIA_ERROR,
                                    details: o.a.BUFFER_ADD_CODEC_ERROR,
                                    fatal: !1,
                                    error: t,
                                    mimeType: h
                                })
                            }
                        } r && this.hls.trigger(s.a.BUFFER_CREATED, {
                        tracks: this.tracks
                    })
                }, e._onSBUpdateStart = function(t) {
                    this.operationQueue.current(t).onStart()
                }, e._onSBUpdateEnd = function(t) {
                    var e = this.operationQueue;
                    e.current(t).onComplete(), e.shiftAndExecuteNext(t)
                }, e._onSBUpdateError = function(t, e) {
                    l.b.error("[buffer-controller]: " + t + " SourceBuffer error", e), this.hls.trigger(s.a.ERROR, {
                        type: o.b.MEDIA_ERROR,
                        details: o.a.BUFFER_APPENDING_ERROR,
                        fatal: !1
                    });
                    var i = this.operationQueue.current(t);
                    i && i.onError(e)
                }, e.removeExecutor = function(t, e, i) {
                    var r = this.media,
                        n = this.mediaSource,
                        s = this.operationQueue,
                        o = this.sourceBuffer[t];
                    if (!r || !n || !o) return l.b.warn("[buffer-controller]: Attempting to remove from the " + t + " SourceBuffer, but it does not exist"), void s.shiftAndExecuteNext(t);
                    var u = Object(a.a)(r.duration) ? r.duration : 1 / 0,
                        h = Object(a.a)(n.duration) ? n.duration : 1 / 0,
                        d = Math.max(0, e),
                        c = Math.min(i, u, h);
                    c > d ? (l.b.log("[buffer-controller]: Removing [" + d + "," + c + "] from the " + t + " SourceBuffer"), o.remove(d, c)) : s.shiftAndExecuteNext(t)
                }, e.appendExecutor = function(t, e) {
                    var i = this.operationQueue,
                        r = this.sourceBuffer[e];
                    if (!r) return l.b.warn("[buffer-controller]: Attempting to append to the " + e + " SourceBuffer, but it does not exist"), void i.shiftAndExecuteNext(e);
                    r.ended = !1, r.appendBuffer(t)
                }, e.blockBuffers = function(t, e) {
                    var i = this;
                    if (void 0 === e && (e = this.getSourceBufferTypes()), !e.length) return l.b.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"), void Promise.resolve().then(t);
                    var r = this.operationQueue,
                        n = e.map((function(t) {
                            return r.appendBlocker(t)
                        }));
                    Promise.all(n).then((function() {
                        t(), e.forEach((function(t) {
                            var e = i.sourceBuffer[t];
                            e && e.updating || r.shiftAndExecuteNext(t)
                        }))
                    }))
                }, e.getSourceBufferTypes = function() {
                    return Object.keys(this.sourceBuffer)
                }, e.addBufferListener = function(t, e, i) {
                    var r = this.sourceBuffer[t];
                    if (r) {
                        var n = i.bind(this, t);
                        this.listeners[t].push({
                            event: e,
                            listener: n
                        }), r.addEventListener(e, n)
                    }
                }, e.removeBufferListeners = function(t) {
                    var e = this.sourceBuffer[t];
                    e && this.listeners[t].forEach((function(t) {
                        e.removeEventListener(t.event, t.listener)
                    }))
                }, t
            }(),
            Me = {
                42: 225,
                92: 233,
                94: 237,
                95: 243,
                96: 250,
                123: 231,
                124: 247,
                125: 209,
                126: 241,
                127: 9608,
                128: 174,
                129: 176,
                130: 189,
                131: 191,
                132: 8482,
                133: 162,
                134: 163,
                135: 9834,
                136: 224,
                137: 32,
                138: 232,
                139: 226,
                140: 234,
                141: 238,
                142: 244,
                143: 251,
                144: 193,
                145: 201,
                146: 211,
                147: 218,
                148: 220,
                149: 252,
                150: 8216,
                151: 161,
                152: 42,
                153: 8217,
                154: 9473,
                155: 169,
                156: 8480,
                157: 8226,
                158: 8220,
                159: 8221,
                160: 192,
                161: 194,
                162: 199,
                163: 200,
                164: 202,
                165: 203,
                166: 235,
                167: 206,
                168: 207,
                169: 239,
                170: 212,
                171: 217,
                172: 249,
                173: 219,
                174: 171,
                175: 187,
                176: 195,
                177: 227,
                178: 205,
                179: 204,
                180: 236,
                181: 210,
                182: 242,
                183: 213,
                184: 245,
                185: 123,
                186: 125,
                187: 92,
                188: 94,
                189: 95,
                190: 124,
                191: 8764,
                192: 196,
                193: 228,
                194: 214,
                195: 246,
                196: 223,
                197: 165,
                198: 164,
                199: 9475,
                200: 197,
                201: 229,
                202: 216,
                203: 248,
                204: 9487,
                205: 9491,
                206: 9495,
                207: 9499
            },
            Ne = function(t) {
                var e = t;
                return Me.hasOwnProperty(t) && (e = Me[t]), String.fromCharCode(e)
            },
            Ue = {
                17: 1,
                18: 3,
                21: 5,
                22: 7,
                23: 9,
                16: 11,
                19: 12,
                20: 14
            },
            Be = {
                17: 2,
                18: 4,
                21: 6,
                22: 8,
                23: 10,
                19: 13,
                20: 15
            },
            Ge = {
                25: 1,
                26: 3,
                29: 5,
                30: 7,
                31: 9,
                24: 11,
                27: 12,
                28: 14
            },
            je = {
                25: 2,
                26: 4,
                29: 6,
                30: 8,
                31: 10,
                27: 13,
                28: 15
            },
            Ke = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "black", "transparent"];
        ! function(t) {
            t[t.ERROR = 0] = "ERROR", t[t.TEXT = 1] = "TEXT", t[t.WARNING = 2] = "WARNING", t[t.INFO = 2] = "INFO", t[t.DEBUG = 3] = "DEBUG", t[t.DATA = 3] = "DATA"
        }(Oe || (Oe = {}));
        var He = function() {
                function t() {
                    this.time = null, this.verboseLevel = Oe.ERROR
                }
                return t.prototype.log = function(t, e) {
                    this.verboseLevel >= t && l.b.log(this.time + " [" + t + "] " + e)
                }, t
            }(),
            Ve = function(t) {
                for (var e = [], i = 0; i < t.length; i++) e.push(t[i].toString(16));
                return e
            },
            We = function() {
                function t(t, e, i, r, n) {
                    this.foreground = void 0, this.underline = void 0, this.italics = void 0, this.background = void 0, this.flash = void 0, this.foreground = t || "white", this.underline = e || !1, this.italics = i || !1, this.background = r || "black", this.flash = n || !1
                }
                var e = t.prototype;
                return e.reset = function() {
                    this.foreground = "white", this.underline = !1, this.italics = !1, this.background = "black", this.flash = !1
                }, e.setStyles = function(t) {
                    for (var e = ["foreground", "underline", "italics", "background", "flash"], i = 0; i < e.length; i++) {
                        var r = e[i];
                        t.hasOwnProperty(r) && (this[r] = t[r])
                    }
                }, e.isDefault = function() {
                    return "white" === this.foreground && !this.underline && !this.italics && "black" === this.background && !this.flash
                }, e.equals = function(t) {
                    return this.foreground === t.foreground && this.underline === t.underline && this.italics === t.italics && this.background === t.background && this.flash === t.flash
                }, e.copy = function(t) {
                    this.foreground = t.foreground, this.underline = t.underline, this.italics = t.italics, this.background = t.background, this.flash = t.flash
                }, e.toString = function() {
                    return "color=" + this.foreground + ", underline=" + this.underline + ", italics=" + this.italics + ", background=" + this.background + ", flash=" + this.flash
                }, t
            }(),
            Ye = function() {
                function t(t, e, i, r, n, a) {
                    this.uchar = void 0, this.penState = void 0, this.uchar = t || " ", this.penState = new We(e, i, r, n, a)
                }
                var e = t.prototype;
                return e.reset = function() {
                    this.uchar = " ", this.penState.reset()
                }, e.setChar = function(t, e) {
                    this.uchar = t, this.penState.copy(e)
                }, e.setPenState = function(t) {
                    this.penState.copy(t)
                }, e.equals = function(t) {
                    return this.uchar === t.uchar && this.penState.equals(t.penState)
                }, e.copy = function(t) {
                    this.uchar = t.uchar, this.penState.copy(t.penState)
                }, e.isEmpty = function() {
                    return " " === this.uchar && this.penState.isDefault()
                }, t
            }(),
            qe = function() {
                function t(t) {
                    this.chars = void 0, this.pos = void 0, this.currPenState = void 0, this.cueStartTime = void 0, this.logger = void 0, this.chars = [];
                    for (var e = 0; e < 100; e++) this.chars.push(new Ye);
                    this.logger = t, this.pos = 0, this.currPenState = new We
                }
                var e = t.prototype;
                return e.equals = function(t) {
                    for (var e = !0, i = 0; i < 100; i++)
                        if (!this.chars[i].equals(t.chars[i])) {
                            e = !1;
                            break
                        } return e
                }, e.copy = function(t) {
                    for (var e = 0; e < 100; e++) this.chars[e].copy(t.chars[e])
                }, e.isEmpty = function() {
                    for (var t = !0, e = 0; e < 100; e++)
                        if (!this.chars[e].isEmpty()) {
                            t = !1;
                            break
                        } return t
                }, e.setCursor = function(t) {
                    this.pos !== t && (this.pos = t), this.pos < 0 ? (this.logger.log(Oe.DEBUG, "Negative cursor position " + this.pos), this.pos = 0) : this.pos > 100 && (this.logger.log(Oe.DEBUG, "Too large cursor position " + this.pos), this.pos = 100)
                }, e.moveCursor = function(t) {
                    var e = this.pos + t;
                    if (t > 1)
                        for (var i = this.pos + 1; i < e + 1; i++) this.chars[i].setPenState(this.currPenState);
                    this.setCursor(e)
                }, e.backSpace = function() {
                    this.moveCursor(-1), this.chars[this.pos].setChar(" ", this.currPenState)
                }, e.insertChar = function(t) {
                    t >= 144 && this.backSpace();
                    var e = Ne(t);
                    this.pos >= 100 ? this.logger.log(Oe.ERROR, "Cannot insert " + t.toString(16) + " (" + e + ") at position " + this.pos + ". Skipping it!") : (this.chars[this.pos].setChar(e, this.currPenState), this.moveCursor(1))
                }, e.clearFromPos = function(t) {
                    var e;
                    for (e = t; e < 100; e++) this.chars[e].reset()
                }, e.clear = function() {
                    this.clearFromPos(0), this.pos = 0, this.currPenState.reset()
                }, e.clearToEndOfRow = function() {
                    this.clearFromPos(this.pos)
                }, e.getTextString = function() {
                    for (var t = [], e = !0, i = 0; i < 100; i++) {
                        var r = this.chars[i].uchar;
                        " " !== r && (e = !1), t.push(r)
                    }
                    return e ? "" : t.join("")
                }, e.setPenStyles = function(t) {
                    this.currPenState.setStyles(t), this.chars[this.pos].setPenState(this.currPenState)
                }, t
            }(),
            ze = function() {
                function t(t) {
                    this.rows = void 0, this.currRow = void 0, this.nrRollUpRows = void 0, this.lastOutputScreen = void 0, this.logger = void 0, this.rows = [];
                    for (var e = 0; e < 15; e++) this.rows.push(new qe(t));
                    this.logger = t, this.currRow = 14, this.nrRollUpRows = null, this.lastOutputScreen = null, this.reset()
                }
                var e = t.prototype;
                return e.reset = function() {
                    for (var t = 0; t < 15; t++) this.rows[t].clear();
                    this.currRow = 14
                }, e.equals = function(t) {
                    for (var e = !0, i = 0; i < 15; i++)
                        if (!this.rows[i].equals(t.rows[i])) {
                            e = !1;
                            break
                        } return e
                }, e.copy = function(t) {
                    for (var e = 0; e < 15; e++) this.rows[e].copy(t.rows[e])
                }, e.isEmpty = function() {
                    for (var t = !0, e = 0; e < 15; e++)
                        if (!this.rows[e].isEmpty()) {
                            t = !1;
                            break
                        } return t
                }, e.backSpace = function() {
                    this.rows[this.currRow].backSpace()
                }, e.clearToEndOfRow = function() {
                    this.rows[this.currRow].clearToEndOfRow()
                }, e.insertChar = function(t) {
                    this.rows[this.currRow].insertChar(t)
                }, e.setPen = function(t) {
                    this.rows[this.currRow].setPenStyles(t)
                }, e.moveCursor = function(t) {
                    this.rows[this.currRow].moveCursor(t)
                }, e.setCursor = function(t) {
                    this.logger.log(Oe.INFO, "setCursor: " + t), this.rows[this.currRow].setCursor(t)
                }, e.setPAC = function(t) {
                    this.logger.log(Oe.INFO, "pacData = " + JSON.stringify(t));
                    var e = t.row - 1;
                    if (this.nrRollUpRows && e < this.nrRollUpRows - 1 && (e = this.nrRollUpRows - 1), this.nrRollUpRows && this.currRow !== e) {
                        for (var i = 0; i < 15; i++) this.rows[i].clear();
                        var r = this.currRow + 1 - this.nrRollUpRows,
                            n = this.lastOutputScreen;
                        if (n) {
                            var a = n.rows[r].cueStartTime,
                                s = this.logger.time;
                            if (a && null !== s && a < s)
                                for (var o = 0; o < this.nrRollUpRows; o++) this.rows[e - this.nrRollUpRows + o + 1].copy(n.rows[r + o])
                        }
                    }
                    this.currRow = e;
                    var l = this.rows[this.currRow];
                    if (null !== t.indent) {
                        var u = t.indent,
                            h = Math.max(u - 1, 0);
                        l.setCursor(t.indent), t.color = l.chars[h].penState.foreground
                    }
                    var d = {
                        foreground: t.color,
                        underline: t.underline,
                        italics: t.italics,
                        background: "black",
                        flash: !1
                    };
                    this.setPen(d)
                }, e.setBkgData = function(t) {
                    this.logger.log(Oe.INFO, "bkgData = " + JSON.stringify(t)), this.backSpace(), this.setPen(t), this.insertChar(32)
                }, e.setRollUpRows = function(t) {
                    this.nrRollUpRows = t
                }, e.rollUp = function() {
                    if (null !== this.nrRollUpRows) {
                        this.logger.log(Oe.TEXT, this.getDisplayText());
                        var t = this.currRow + 1 - this.nrRollUpRows,
                            e = this.rows.splice(t, 1)[0];
                        e.clear(), this.rows.splice(this.currRow, 0, e), this.logger.log(Oe.INFO, "Rolling up")
                    } else this.logger.log(Oe.DEBUG, "roll_up but nrRollUpRows not set yet")
                }, e.getDisplayText = function(t) {
                    t = t || !1;
                    for (var e = [], i = "", r = -1, n = 0; n < 15; n++) {
                        var a = this.rows[n].getTextString();
                        a && (r = n + 1, t ? e.push("Row " + r + ": '" + a + "'") : e.push(a.trim()))
                    }
                    return e.length > 0 && (i = t ? "[" + e.join(" | ") + "]" : e.join("\n")), i
                }, e.getTextAndFormat = function() {
                    return this.rows
                }, t
            }(),
            Xe = function() {
                function t(t, e, i) {
                    this.chNr = void 0, this.outputFilter = void 0, this.mode = void 0, this.verbose = void 0, this.displayedMemory = void 0, this.nonDisplayedMemory = void 0, this.lastOutputScreen = void 0, this.currRollUpRow = void 0, this.writeScreen = void 0, this.cueStartTime = void 0, this.logger = void 0, this.chNr = t, this.outputFilter = e, this.mode = null, this.verbose = 0, this.displayedMemory = new ze(i), this.nonDisplayedMemory = new ze(i), this.lastOutputScreen = new ze(i), this.currRollUpRow = this.displayedMemory.rows[14], this.writeScreen = this.displayedMemory, this.mode = null, this.cueStartTime = null, this.logger = i
                }
                var e = t.prototype;
                return e.reset = function() {
                    this.mode = null, this.displayedMemory.reset(), this.nonDisplayedMemory.reset(), this.lastOutputScreen.reset(), this.outputFilter.reset(), this.currRollUpRow = this.displayedMemory.rows[14], this.writeScreen = this.displayedMemory, this.mode = null, this.cueStartTime = null
                }, e.getHandler = function() {
                    return this.outputFilter
                }, e.setHandler = function(t) {
                    this.outputFilter = t
                }, e.setPAC = function(t) {
                    this.writeScreen.setPAC(t)
                }, e.setBkgData = function(t) {
                    this.writeScreen.setBkgData(t)
                }, e.setMode = function(t) {
                    t !== this.mode && (this.mode = t, this.logger.log(Oe.INFO, "MODE=" + t), "MODE_POP-ON" === this.mode ? this.writeScreen = this.nonDisplayedMemory : (this.writeScreen = this.displayedMemory, this.writeScreen.reset()), "MODE_ROLL-UP" !== this.mode && (this.displayedMemory.nrRollUpRows = null, this.nonDisplayedMemory.nrRollUpRows = null), this.mode = t)
                }, e.insertChars = function(t) {
                    for (var e = 0; e < t.length; e++) this.writeScreen.insertChar(t[e]);
                    var i = this.writeScreen === this.displayedMemory ? "DISP" : "NON_DISP";
                    this.logger.log(Oe.INFO, i + ": " + this.writeScreen.getDisplayText(!0)), "MODE_PAINT-ON" !== this.mode && "MODE_ROLL-UP" !== this.mode || (this.logger.log(Oe.TEXT, "DISPLAYED: " + this.displayedMemory.getDisplayText(!0)), this.outputDataUpdate())
                }, e.ccRCL = function() {
                    this.logger.log(Oe.INFO, "RCL - Resume Caption Loading"), this.setMode("MODE_POP-ON")
                }, e.ccBS = function() {
                    this.logger.log(Oe.INFO, "BS - BackSpace"), "MODE_TEXT" !== this.mode && (this.writeScreen.backSpace(), this.writeScreen === this.displayedMemory && this.outputDataUpdate())
                }, e.ccAOF = function() {}, e.ccAON = function() {}, e.ccDER = function() {
                    this.logger.log(Oe.INFO, "DER- Delete to End of Row"), this.writeScreen.clearToEndOfRow(), this.outputDataUpdate()
                }, e.ccRU = function(t) {
                    this.logger.log(Oe.INFO, "RU(" + t + ") - Roll Up"), this.writeScreen = this.displayedMemory, this.setMode("MODE_ROLL-UP"), this.writeScreen.setRollUpRows(t)
                }, e.ccFON = function() {
                    this.logger.log(Oe.INFO, "FON - Flash On"), this.writeScreen.setPen({
                        flash: !0
                    })
                }, e.ccRDC = function() {
                    this.logger.log(Oe.INFO, "RDC - Resume Direct Captioning"), this.setMode("MODE_PAINT-ON")
                }, e.ccTR = function() {
                    this.logger.log(Oe.INFO, "TR"), this.setMode("MODE_TEXT")
                }, e.ccRTD = function() {
                    this.logger.log(Oe.INFO, "RTD"), this.setMode("MODE_TEXT")
                }, e.ccEDM = function() {
                    this.logger.log(Oe.INFO, "EDM - Erase Displayed Memory"), this.displayedMemory.reset(), this.outputDataUpdate(!0)
                }, e.ccCR = function() {
                    this.logger.log(Oe.INFO, "CR - Carriage Return"), this.writeScreen.rollUp(), this.outputDataUpdate(!0)
                }, e.ccENM = function() {
                    this.logger.log(Oe.INFO, "ENM - Erase Non-displayed Memory"), this.nonDisplayedMemory.reset()
                }, e.ccEOC = function() {
                    if (this.logger.log(Oe.INFO, "EOC - End Of Caption"), "MODE_POP-ON" === this.mode) {
                        var t = this.displayedMemory;
                        this.displayedMemory = this.nonDisplayedMemory, this.nonDisplayedMemory = t, this.writeScreen = this.nonDisplayedMemory, this.logger.log(Oe.TEXT, "DISP: " + this.displayedMemory.getDisplayText())
                    }
                    this.outputDataUpdate(!0)
                }, e.ccTO = function(t) {
                    this.logger.log(Oe.INFO, "TO(" + t + ") - Tab Offset"), this.writeScreen.moveCursor(t)
                }, e.ccMIDROW = function(t) {
                    var e = {
                        flash: !1
                    };
                    if (e.underline = t % 2 == 1, e.italics = t >= 46, e.italics) e.foreground = "white";
                    else {
                        var i = Math.floor(t / 2) - 16;
                        e.foreground = ["white", "green", "blue", "cyan", "red", "yellow", "magenta"][i]
                    }
                    this.logger.log(Oe.INFO, "MIDROW: " + JSON.stringify(e)), this.writeScreen.setPen(e)
                }, e.outputDataUpdate = function(t) {
                    void 0 === t && (t = !1);
                    var e = this.logger.time;
                    null !== e && this.outputFilter && (null !== this.cueStartTime || this.displayedMemory.isEmpty() ? this.displayedMemory.equals(this.lastOutputScreen) || (this.outputFilter.newCue(this.cueStartTime, e, this.lastOutputScreen), t && this.outputFilter.dispatchCue && this.outputFilter.dispatchCue(), this.cueStartTime = this.displayedMemory.isEmpty() ? null : e) : this.cueStartTime = e, this.lastOutputScreen.copy(this.displayedMemory))
                }, e.cueSplitAtTime = function(t) {
                    this.outputFilter && (this.displayedMemory.isEmpty() || (this.outputFilter.newCue && this.outputFilter.newCue(this.cueStartTime, t, this.displayedMemory), this.cueStartTime = t))
                }, t
            }();

        function Qe(t, e, i) {
            i.a = t, i.b = e
        }

        function $e(t, e, i) {
            return i.a === t && i.b === e
        }
        var Je = function() {
                function t(t, e, i) {
                    this.channels = void 0, this.currentChannel = 0, this.cmdHistory = void 0, this.logger = void 0;
                    var r = new He;
                    this.channels = [null, new Xe(t, e, r), new Xe(t + 1, i, r)], this.cmdHistory = {
                        a: null,
                        b: null
                    }, this.logger = r
                }
                var e = t.prototype;
                return e.getHandler = function(t) {
                    return this.channels[t].getHandler()
                }, e.setHandler = function(t, e) {
                    this.channels[t].setHandler(e)
                }, e.addData = function(t, e) {
                    var i, r, n, a = !1;
                    this.logger.time = t;
                    for (var s = 0; s < e.length; s += 2)
                        if (r = 127 & e[s], n = 127 & e[s + 1], 0 !== r || 0 !== n) {
                            if (this.logger.log(Oe.DATA, "[" + Ve([e[s], e[s + 1]]) + "] -> (" + Ve([r, n]) + ")"), (i = this.parseCmd(r, n)) || (i = this.parseMidrow(r, n)), i || (i = this.parsePAC(r, n)), i || (i = this.parseBackgroundAttributes(r, n)), !i && (a = this.parseChars(r, n))) {
                                var o = this.currentChannel;
                                if (o && o > 0) this.channels[o].insertChars(a);
                                else this.logger.log(Oe.WARNING, "No channel found yet. TEXT-MODE?")
                            }
                            i || a || this.logger.log(Oe.WARNING, "Couldn't parse cleaned data " + Ve([r, n]) + " orig: " + Ve([e[s], e[s + 1]]))
                        }
                }, e.parseCmd = function(t, e) {
                    var i = this.cmdHistory;
                    if (!((20 === t || 28 === t || 21 === t || 29 === t) && e >= 32 && e <= 47) && !((23 === t || 31 === t) && e >= 33 && e <= 35)) return !1;
                    if ($e(t, e, i)) return Qe(null, null, i), this.logger.log(Oe.DEBUG, "Repeated command (" + Ve([t, e]) + ") is dropped"), !0;
                    var r = 20 === t || 21 === t || 23 === t ? 1 : 2,
                        n = this.channels[r];
                    return 20 === t || 21 === t || 28 === t || 29 === t ? 32 === e ? n.ccRCL() : 33 === e ? n.ccBS() : 34 === e ? n.ccAOF() : 35 === e ? n.ccAON() : 36 === e ? n.ccDER() : 37 === e ? n.ccRU(2) : 38 === e ? n.ccRU(3) : 39 === e ? n.ccRU(4) : 40 === e ? n.ccFON() : 41 === e ? n.ccRDC() : 42 === e ? n.ccTR() : 43 === e ? n.ccRTD() : 44 === e ? n.ccEDM() : 45 === e ? n.ccCR() : 46 === e ? n.ccENM() : 47 === e && n.ccEOC() : n.ccTO(e - 32), Qe(t, e, i), this.currentChannel = r, !0
                }, e.parseMidrow = function(t, e) {
                    var i = 0;
                    if ((17 === t || 25 === t) && e >= 32 && e <= 47) {
                        if ((i = 17 === t ? 1 : 2) !== this.currentChannel) return this.logger.log(Oe.ERROR, "Mismatch channel in midrow parsing"), !1;
                        var r = this.channels[i];
                        return !!r && (r.ccMIDROW(e), this.logger.log(Oe.DEBUG, "MIDROW (" + Ve([t, e]) + ")"), !0)
                    }
                    return !1
                }, e.parsePAC = function(t, e) {
                    var i, r = this.cmdHistory;
                    if (!((t >= 17 && t <= 23 || t >= 25 && t <= 31) && e >= 64 && e <= 127) && !((16 === t || 24 === t) && e >= 64 && e <= 95)) return !1;
                    if ($e(t, e, r)) return Qe(null, null, r), !0;
                    var n = t <= 23 ? 1 : 2;
                    i = e >= 64 && e <= 95 ? 1 === n ? Ue[t] : Ge[t] : 1 === n ? Be[t] : je[t];
                    var a = this.channels[n];
                    return !!a && (a.setPAC(this.interpretPAC(i, e)), Qe(t, e, r), this.currentChannel = n, !0)
                }, e.interpretPAC = function(t, e) {
                    var i, r = {
                        color: null,
                        italics: !1,
                        indent: null,
                        underline: !1,
                        row: t
                    };
                    return i = e > 95 ? e - 96 : e - 64, r.underline = 1 == (1 & i), i <= 13 ? r.color = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "white"][Math.floor(i / 2)] : i <= 15 ? (r.italics = !0, r.color = "white") : r.indent = 4 * Math.floor((i - 16) / 2), r
                }, e.parseChars = function(t, e) {
                    var i, r, n = null,
                        a = null;
                    (t >= 25 ? (i = 2, a = t - 8) : (i = 1, a = t), a >= 17 && a <= 19) ? (r = 17 === a ? e + 80 : 18 === a ? e + 112 : e + 144, this.logger.log(Oe.INFO, "Special char '" + Ne(r) + "' in channel " + i), n = [r]) : t >= 32 && t <= 127 && (n = 0 === e ? [t] : [t, e]);
                    if (n) {
                        var s = Ve(n);
                        this.logger.log(Oe.DEBUG, "Char codes =  " + s.join(",")), Qe(t, e, this.cmdHistory)
                    }
                    return n
                }, e.parseBackgroundAttributes = function(t, e) {
                    var i;
                    if (!((16 === t || 24 === t) && e >= 32 && e <= 47) && !((23 === t || 31 === t) && e >= 45 && e <= 47)) return !1;
                    var r = {};
                    16 === t || 24 === t ? (i = Math.floor((e - 32) / 2), r.background = Ke[i], e % 2 == 1 && (r.background = r.background + "_semi")) : 45 === e ? r.background = "transparent" : (r.foreground = "black", 47 === e && (r.underline = !0));
                    var n = t <= 23 ? 1 : 2;
                    return this.channels[n].setBkgData(r), Qe(t, e, this.cmdHistory), !0
                }, e.reset = function() {
                    for (var t = 0; t < Object.keys(this.channels).length; t++) {
                        var e = this.channels[t];
                        e && e.reset()
                    }
                    this.cmdHistory = {
                        a: null,
                        b: null
                    }
                }, e.cueSplitAtTime = function(t) {
                    for (var e = 0; e < this.channels.length; e++) {
                        var i = this.channels[e];
                        i && i.cueSplitAtTime(t)
                    }
                }, t
            }(),
            Ze = function() {
                function t(t, e) {
                    this.timelineController = void 0, this.cueRanges = [], this.trackName = void 0, this.startTime = null, this.endTime = null, this.screen = null, this.timelineController = t, this.trackName = e
                }
                var e = t.prototype;
                return e.dispatchCue = function() {
                    null !== this.startTime && (this.timelineController.addCues(this.trackName, this.startTime, this.endTime, this.screen, this.cueRanges), this.startTime = null)
                }, e.newCue = function(t, e, i) {
                    (null === this.startTime || this.startTime > t) && (this.startTime = t), this.endTime = e, this.screen = i, this.timelineController.createCaptionsTrack(this.trackName)
                }, e.reset = function() {
                    this.cueRanges = [], this.startTime = null
                }, t
            }(),
            ti = function() {
                if ("undefined" != typeof self && self.VTTCue) return self.VTTCue;
                var t = ["", "lr", "rl"],
                    e = ["start", "middle", "end", "left", "right"];

                function i(t, e) {
                    if ("string" != typeof e) return !1;
                    if (!Array.isArray(t)) return !1;
                    var i = e.toLowerCase();
                    return !!~t.indexOf(i) && i
                }

                function r(t) {
                    return i(e, t)
                }

                function n(t) {
                    for (var e = arguments.length, i = new Array(e > 1 ? e - 1 : 0), r = 1; r < e; r++) i[r - 1] = arguments[r];
                    for (var n = 1; n < arguments.length; n++) {
                        var a = arguments[n];
                        for (var s in a) t[s] = a[s]
                    }
                    return t
                }

                function a(e, a, s) {
                    var o = this,
                        l = {
                            enumerable: !0
                        };
                    o.hasBeenReset = !1;
                    var u = "",
                        h = !1,
                        d = e,
                        c = a,
                        f = s,
                        g = null,
                        v = "",
                        p = !0,
                        m = "auto",
                        y = "start",
                        T = 50,
                        b = "middle",
                        E = 50,
                        S = "middle";
                    Object.defineProperty(o, "id", n({}, l, {
                        get: function() {
                            return u
                        },
                        set: function(t) {
                            u = "" + t
                        }
                    })), Object.defineProperty(o, "pauseOnExit", n({}, l, {
                        get: function() {
                            return h
                        },
                        set: function(t) {
                            h = !!t
                        }
                    })), Object.defineProperty(o, "startTime", n({}, l, {
                        get: function() {
                            return d
                        },
                        set: function(t) {
                            if ("number" != typeof t) throw new TypeError("Start time must be set to a number.");
                            d = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(o, "endTime", n({}, l, {
                        get: function() {
                            return c
                        },
                        set: function(t) {
                            if ("number" != typeof t) throw new TypeError("End time must be set to a number.");
                            c = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(o, "text", n({}, l, {
                        get: function() {
                            return f
                        },
                        set: function(t) {
                            f = "" + t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(o, "region", n({}, l, {
                        get: function() {
                            return g
                        },
                        set: function(t) {
                            g = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(o, "vertical", n({}, l, {
                        get: function() {
                            return v
                        },
                        set: function(e) {
                            var r = function(e) {
                                return i(t, e)
                            }(e);
                            if (!1 === r) throw new SyntaxError("An invalid or illegal string was specified.");
                            v = r, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(o, "snapToLines", n({}, l, {
                        get: function() {
                            return p
                        },
                        set: function(t) {
                            p = !!t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(o, "line", n({}, l, {
                        get: function() {
                            return m
                        },
                        set: function(t) {
                            if ("number" != typeof t && "auto" !== t) throw new SyntaxError("An invalid number or illegal string was specified.");
                            m = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(o, "lineAlign", n({}, l, {
                        get: function() {
                            return y
                        },
                        set: function(t) {
                            var e = r(t);
                            if (!e) throw new SyntaxError("An invalid or illegal string was specified.");
                            y = e, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(o, "position", n({}, l, {
                        get: function() {
                            return T
                        },
                        set: function(t) {
                            if (t < 0 || t > 100) throw new Error("Position must be between 0 and 100.");
                            T = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(o, "positionAlign", n({}, l, {
                        get: function() {
                            return b
                        },
                        set: function(t) {
                            var e = r(t);
                            if (!e) throw new SyntaxError("An invalid or illegal string was specified.");
                            b = e, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(o, "size", n({}, l, {
                        get: function() {
                            return E
                        },
                        set: function(t) {
                            if (t < 0 || t > 100) throw new Error("Size must be between 0 and 100.");
                            E = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(o, "align", n({}, l, {
                        get: function() {
                            return S
                        },
                        set: function(t) {
                            var e = r(t);
                            if (!e) throw new SyntaxError("An invalid or illegal string was specified.");
                            S = e, this.hasBeenReset = !0
                        }
                    })), o.displayState = void 0
                }
                return a.prototype.getCueAsHTML = function() {
                    return self.WebVTT.convertCueToDOMTree(self, this.text)
                }, a
            }(),
            ei = function() {
                function t() {}
                return t.prototype.decode = function(t, e) {
                    if (!t) return "";
                    if ("string" != typeof t) throw new Error("Error - expected string data.");
                    return decodeURIComponent(encodeURIComponent(t))
                }, t
            }();

        function ii(t) {
            function e(t, e, i, r) {
                return 3600 * (0 | t) + 60 * (0 | e) + (0 | i) + parseFloat(r || 0)
            }
            var i = t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);
            return i ? parseFloat(i[2]) > 59 ? e(i[2], i[3], 0, i[4]) : e(i[1], i[2], i[3], i[4]) : null
        }
        var ri = function() {
            function t() {
                this.values = Object.create(null)
            }
            var e = t.prototype;
            return e.set = function(t, e) {
                this.get(t) || "" === e || (this.values[t] = e)
            }, e.get = function(t, e, i) {
                return i ? this.has(t) ? this.values[t] : e[i] : this.has(t) ? this.values[t] : e
            }, e.has = function(t) {
                return t in this.values
            }, e.alt = function(t, e, i) {
                for (var r = 0; r < i.length; ++r)
                    if (e === i[r]) {
                        this.set(t, e);
                        break
                    }
            }, e.integer = function(t, e) {
                /^-?\d+$/.test(e) && this.set(t, parseInt(e, 10))
            }, e.percent = function(t, e) {
                if (/^([\d]{1,3})(\.[\d]*)?%$/.test(e)) {
                    var i = parseFloat(e);
                    if (i >= 0 && i <= 100) return this.set(t, i), !0
                }
                return !1
            }, t
        }();

        function ni(t, e, i, r) {
            var n = r ? t.split(r) : [t];
            for (var a in n)
                if ("string" == typeof n[a]) {
                    var s = n[a].split(i);
                    if (2 === s.length) e(s[0], s[1])
                }
        }
        var ai = new ti(0, 0, ""),
            si = "middle" === ai.align ? "middle" : "center";

        function oi(t, e, i) {
            var r = t;

            function n() {
                var e = ii(t);
                if (null === e) throw new Error("Malformed timestamp: " + r);
                return t = t.replace(/^[^\sa-zA-Z-]+/, ""), e
            }

            function a() {
                t = t.replace(/^\s+/, "")
            }
            if (a(), e.startTime = n(), a(), "--\x3e" !== t.slice(0, 3)) throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): " + r);
            t = t.slice(3), a(), e.endTime = n(), a(),
                function(t, e) {
                    var r = new ri;
                    ni(t, (function(t, e) {
                        var n;
                        switch (t) {
                            case "region":
                                for (var a = i.length - 1; a >= 0; a--)
                                    if (i[a].id === e) {
                                        r.set(t, i[a].region);
                                        break
                                    } break;
                            case "vertical":
                                r.alt(t, e, ["rl", "lr"]);
                                break;
                            case "line":
                                n = e.split(","), r.integer(t, n[0]), r.percent(t, n[0]) && r.set("snapToLines", !1), r.alt(t, n[0], ["auto"]), 2 === n.length && r.alt("lineAlign", n[1], ["start", si, "end"]);
                                break;
                            case "position":
                                n = e.split(","), r.percent(t, n[0]), 2 === n.length && r.alt("positionAlign", n[1], ["start", si, "end", "line-left", "line-right", "auto"]);
                                break;
                            case "size":
                                r.percent(t, e);
                                break;
                            case "align":
                                r.alt(t, e, ["start", si, "end", "left", "right"])
                        }
                    }), /:/, /\s/), e.region = r.get("region", null), e.vertical = r.get("vertical", "");
                    var n = r.get("line", "auto");
                    "auto" === n && -1 === ai.line && (n = -1), e.line = n, e.lineAlign = r.get("lineAlign", "start"), e.snapToLines = r.get("snapToLines", !0), e.size = r.get("size", 100), e.align = r.get("align", si);
                    var a = r.get("position", "auto");
                    "auto" === a && 50 === ai.position && (a = "start" === e.align || "left" === e.align ? 0 : "end" === e.align || "right" === e.align ? 100 : 50), e.position = a
                }(t, e)
        }

        function li(t) {
            return t.replace(/<br(?: \/)?>/gi, "\n")
        }
        var ui = function() {
                function t() {
                    this.state = "INITIAL", this.buffer = "", this.decoder = new ei, this.regionList = [], this.cue = null, this.oncue = void 0, this.onparsingerror = void 0, this.onflush = void 0
                }
                var e = t.prototype;
                return e.parse = function(t) {
                    var e = this;

                    function i() {
                        var t = e.buffer,
                            i = 0;
                        for (t = li(t); i < t.length && "\r" !== t[i] && "\n" !== t[i];) ++i;
                        var r = t.slice(0, i);
                        return "\r" === t[i] && ++i, "\n" === t[i] && ++i, e.buffer = t.slice(i), r
                    }
                    t && (e.buffer += e.decoder.decode(t, {
                        stream: !0
                    }));
                    try {
                        var r = "";
                        if ("INITIAL" === e.state) {
                            if (!/\r\n|\n/.test(e.buffer)) return this;
                            var n = (r = i()).match(/^()?WEBVTT([ \t].*)?$/);
                            if (!n || !n[0]) throw new Error("Malformed WebVTT signature.");
                            e.state = "HEADER"
                        }
                        for (var a = !1; e.buffer;) {
                            if (!/\r\n|\n/.test(e.buffer)) return this;
                            switch (a ? a = !1 : r = i(), e.state) {
                                case "HEADER":
                                    /:/.test(r) ? ni(r, (function(t, e) {}), /:/) : r || (e.state = "ID");
                                    continue;
                                case "NOTE":
                                    r || (e.state = "ID");
                                    continue;
                                case "ID":
                                    if (/^NOTE($|[ \t])/.test(r)) {
                                        e.state = "NOTE";
                                        break
                                    }
                                    if (!r) continue;
                                    if (e.cue = new ti(0, 0, ""), e.state = "CUE", -1 === r.indexOf("--\x3e")) {
                                        e.cue.id = r;
                                        continue
                                    }
                                case "CUE":
                                    if (!e.cue) {
                                        e.state = "BADCUE";
                                        continue
                                    }
                                    try {
                                        oi(r, e.cue, e.regionList)
                                    } catch (t) {
                                        e.cue = null, e.state = "BADCUE";
                                        continue
                                    }
                                    e.state = "CUETEXT";
                                    continue;
                                case "CUETEXT":
                                    var s = -1 !== r.indexOf("--\x3e");
                                    if (!r || s && (a = !0)) {
                                        e.oncue && e.cue && e.oncue(e.cue), e.cue = null, e.state = "ID";
                                        continue
                                    }
                                    if (null === e.cue) continue;
                                    e.cue.text && (e.cue.text += "\n"), e.cue.text += r;
                                    continue;
                                case "BADCUE":
                                    r || (e.state = "ID")
                            }
                        }
                    } catch (t) {
                        "CUETEXT" === e.state && e.cue && e.oncue && e.oncue(e.cue), e.cue = null, e.state = "INITIAL" === e.state ? "BADWEBVTT" : "BADCUE"
                    }
                    return this
                }, e.flush = function() {
                    try {
                        if ((this.cue || "HEADER" === this.state) && (this.buffer += "\n\n", this.parse()), "INITIAL" === this.state || "BADWEBVTT" === this.state) throw new Error("Malformed WebVTT signature.")
                    } catch (t) {
                        this.onparsingerror && this.onparsingerror(t)
                    }
                    return this.onflush && this.onflush(), this
                }, t
            }(),
            hi = i(11),
            di = i(13),
            ci = /\r\n|\n\r|\n|\r/g,
            fi = function(t, e, i) {
                return void 0 === i && (i = 0), t.slice(i, i + e.length) === e
            },
            gi = function(t) {
                for (var e = 5381, i = t.length; i;) e = 33 * e ^ t.charCodeAt(--i);
                return (e >>> 0).toString()
            };

        function vi(t, e, i) {
            return gi(t.toString()) + gi(e.toString()) + gi(i)
        }

        function pi(t, e, i, r, n, s, o, l) {
            var u, h = new ui,
                d = Object(G.f)(new Uint8Array(t)).trim().replace(ci, "\n").split("\n"),
                c = [],
                f = Object(hi.a)(e, i),
                g = "00:00.000",
                v = 0,
                p = 0,
                m = !0;
            h.oncue = function(t) {
                var e = r[n],
                    i = r.ccOffset,
                    a = (v - f) / 9e4;
                null != e && e.new && (void 0 !== p ? i = r.ccOffset = e.start : function(t, e, i) {
                    var r = t[e],
                        n = t[r.prevCC];
                    if (!n || !n.new && r.new) return t.ccOffset = t.presentationOffset = r.start, void(r.new = !1);
                    for (; null !== (a = n) && void 0 !== a && a.new;) {
                        var a;
                        t.ccOffset += r.start - n.start, r.new = !1, n = t[(r = n).prevCC]
                    }
                    t.presentationOffset = i
                }(r, n, a)), a && (i = a - r.presentationOffset);
                var o = t.endTime - t.startTime,
                    l = Object(di.d)(9e4 * (t.startTime + i - p), 9e4 * s) / 9e4;
                t.startTime = Math.max(l, 0), t.endTime = Math.max(l + o, 0);
                var u = t.text.trim();
                t.text = decodeURIComponent(encodeURIComponent(u)), t.id || (t.id = vi(t.startTime, t.endTime, u)), t.endTime > 0 && c.push(t)
            }, h.onparsingerror = function(t) {
                u = t
            }, h.onflush = function() {
                u ? l(u) : o(c)
            }, d.forEach((function(t) {
                if (m) {
                    if (fi(t, "X-TIMESTAMP-MAP=")) {
                        m = !1, t.slice(16).split(",").forEach((function(t) {
                            fi(t, "LOCAL:") ? g = t.slice(6) : fi(t, "MPEGTS:") && (v = parseInt(t.slice(7)))
                        }));
                        try {
                            p = function(t) {
                                var e = parseInt(t.slice(-3)),
                                    i = parseInt(t.slice(-6, -4)),
                                    r = parseInt(t.slice(-9, -7)),
                                    n = t.length > 9 ? parseInt(t.substring(0, t.indexOf(":"))) : 0;
                                if (!(Object(a.a)(e) && Object(a.a)(i) && Object(a.a)(r) && Object(a.a)(n))) throw Error("Malformed X-TIMESTAMP-MAP: Local:" + t);
                                return e += 1e3 * i, e += 6e4 * r, e += 36e5 * n
                            }(g) / 1e3
                        } catch (t) {
                            u = t
                        }
                        return
                    }
                    "" === t && (m = !1)
                }
                h.parse(t + "\n")
            })), h.flush()
        }

        function mi() {
            return (mi = Object.assign ? Object.assign.bind() : function(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var i = arguments[e];
                    for (var r in i) Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r])
                }
                return t
            }).apply(this, arguments)
        }
        var yi = /^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,
            Ti = /^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,
            bi = {
                left: "start",
                center: "center",
                right: "end",
                start: "start",
                end: "end"
            };

        function Ei(t, e, i, r, n) {
            var a = Object(u.c)(new Uint8Array(t), ["mdat"]);
            if (0 !== a.length) {
                var s = a.map((function(t) {
                        return Object(G.f)(t)
                    })),
                    o = Object(hi.c)(e, 1, i);
                try {
                    s.forEach((function(t) {
                        return r(function(t, e) {
                            var i = (new DOMParser).parseFromString(t, "text/xml").getElementsByTagName("tt")[0];
                            if (!i) throw new Error("Invalid ttml");
                            var r = {
                                    frameRate: 30,
                                    subFrameRate: 1,
                                    frameRateMultiplier: 0,
                                    tickRate: 0
                                },
                                n = Object.keys(r).reduce((function(t, e) {
                                    return t[e] = i.getAttribute("ttp:" + e) || r[e], t
                                }), {}),
                                a = "preserve" !== i.getAttribute("xml:space"),
                                s = Li(Si(i, "styling", "style")),
                                o = Li(Si(i, "layout", "region")),
                                l = Si(i, "body", "[begin]");
                            return [].map.call(l, (function(t) {
                                var i = function t(e, i) {
                                    return [].slice.call(e.childNodes).reduce((function(e, r, n) {
                                        var a;
                                        return "br" === r.nodeName && n ? e + "\n" : null !== (a = r.childNodes) && void 0 !== a && a.length ? t(r, i) : i ? e + r.textContent.trim().replace(/\s+/g, " ") : e + r.textContent
                                    }), "")
                                }(t, a);
                                if (!i || !t.hasAttribute("begin")) return null;
                                var r = Ri(t.getAttribute("begin"), n),
                                    l = Ri(t.getAttribute("dur"), n),
                                    u = Ri(t.getAttribute("end"), n);
                                if (null === r) throw Di(t);
                                if (null === u) {
                                    if (null === l) throw Di(t);
                                    u = r + l
                                }
                                var h = new ti(r - e, u - e, i);
                                h.id = vi(h.startTime, h.endTime, h.text);
                                var d = o[t.getAttribute("region")],
                                    c = s[t.getAttribute("style")];
                                h.position = 10, h.size = 80;
                                var f = function(t, e, i) {
                                        var r = "http://www.w3.org/ns/ttml#styling",
                                            n = null,
                                            a = null != t && t.hasAttribute("style") ? t.getAttribute("style") : null;
                                        a && i.hasOwnProperty(a) && (n = i[a]);
                                        return ["displayAlign", "textAlign", "color", "backgroundColor", "fontSize", "fontFamily"].reduce((function(i, a) {
                                            var s = Ai(e, r, a) || Ai(t, r, a) || Ai(n, r, a);
                                            return s && (i[a] = s), i
                                        }), {})
                                    }(d, c, s),
                                    g = f.textAlign;
                                if (g) {
                                    var v = bi[g];
                                    v && (h.lineAlign = v), h.align = g
                                }
                                return mi(h, f), h
                            })).filter((function(t) {
                                return null !== t
                            }))
                        }(t, o))
                    }))
                } catch (t) {
                    n(t)
                }
            } else n(new Error("Could not parse IMSC1 mdat"))
        }

        function Si(t, e, i) {
            var r = t.getElementsByTagName(e)[0];
            return r ? [].slice.call(r.querySelectorAll(i)) : []
        }

        function Li(t) {
            return t.reduce((function(t, e) {
                var i = e.getAttribute("xml:id");
                return i && (t[i] = e), t
            }), {})
        }

        function Ai(t, e, i) {
            return t && t.hasAttributeNS(e, i) ? t.getAttributeNS(e, i) : null
        }

        function Di(t) {
            return new Error("Could not parse ttml timestamp " + t)
        }

        function Ri(t, e) {
            if (!t) return null;
            var i = ii(t);
            return null === i && (yi.test(t) ? i = function(t, e) {
                var i = yi.exec(t),
                    r = (0 | i[4]) + (0 | i[5]) / e.subFrameRate;
                return 3600 * (0 | i[1]) + 60 * (0 | i[2]) + (0 | i[3]) + r / e.frameRate
            }(t, e) : Ti.test(t) && (i = function(t, e) {
                var i = Ti.exec(t),
                    r = Number(i[1]);
                switch (i[2]) {
                    case "h":
                        return 3600 * r;
                    case "m":
                        return 60 * r;
                    case "ms":
                        return 1e3 * r;
                    case "f":
                        return r / e.frameRate;
                    case "t":
                        return r / e.tickRate
                }
                return r
            }(t, e))), i
        }
        var ki = function() {
            function t(t) {
                if (this.hls = void 0, this.media = null, this.config = void 0, this.enabled = !0, this.Cues = void 0, this.textTracks = [], this.tracks = [], this.initPTS = [], this.timescale = [], this.unparsedVttFrags = [], this.captionsTracks = {}, this.nonNativeCaptionsTracks = {}, this.cea608Parser1 = void 0, this.cea608Parser2 = void 0, this.lastSn = -1, this.lastPartIndex = -1, this.prevCC = -1, this.vttCCs = {
                        ccOffset: 0,
                        presentationOffset: 0,
                        0: {
                            start: 0,
                            prevCC: -1,
                            new: !0
                        }
                    }, this.captionsProperties = void 0, this.hls = t, this.config = t.config, this.Cues = t.config.cueHandler, this.captionsProperties = {
                        textTrack1: {
                            label: this.config.captionsTextTrack1Label,
                            languageCode: this.config.captionsTextTrack1LanguageCode
                        },
                        textTrack2: {
                            label: this.config.captionsTextTrack2Label,
                            languageCode: this.config.captionsTextTrack2LanguageCode
                        },
                        textTrack3: {
                            label: this.config.captionsTextTrack3Label,
                            languageCode: this.config.captionsTextTrack3LanguageCode
                        },
                        textTrack4: {
                            label: this.config.captionsTextTrack4Label,
                            languageCode: this.config.captionsTextTrack4LanguageCode
                        }
                    }, this.config.enableCEA708Captions) {
                    var e = new Ze(this, "textTrack1"),
                        i = new Ze(this, "textTrack2"),
                        r = new Ze(this, "textTrack3"),
                        n = new Ze(this, "textTrack4");
                    this.cea608Parser1 = new Je(1, e, i), this.cea608Parser2 = new Je(3, r, n)
                }
                t.on(s.a.MEDIA_ATTACHING, this.onMediaAttaching, this), t.on(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.on(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.on(s.a.MANIFEST_LOADED, this.onManifestLoaded, this), t.on(s.a.SUBTITLE_TRACKS_UPDATED, this.onSubtitleTracksUpdated, this), t.on(s.a.FRAG_LOADING, this.onFragLoading, this), t.on(s.a.FRAG_LOADED, this.onFragLoaded, this), t.on(s.a.FRAG_PARSING_USERDATA, this.onFragParsingUserdata, this), t.on(s.a.FRAG_DECRYPTED, this.onFragDecrypted, this), t.on(s.a.INIT_PTS_FOUND, this.onInitPtsFound, this), t.on(s.a.SUBTITLE_TRACKS_CLEARED, this.onSubtitleTracksCleared, this), t.on(s.a.BUFFER_FLUSHING, this.onBufferFlushing, this)
            }
            var e = t.prototype;
            return e.destroy = function() {
                var t = this.hls;
                t.off(s.a.MEDIA_ATTACHING, this.onMediaAttaching, this), t.off(s.a.MEDIA_DETACHING, this.onMediaDetaching, this), t.off(s.a.MANIFEST_LOADING, this.onManifestLoading, this), t.off(s.a.MANIFEST_LOADED, this.onManifestLoaded, this), t.off(s.a.SUBTITLE_TRACKS_UPDATED, this.onSubtitleTracksUpdated, this), t.off(s.a.FRAG_LOADING, this.onFragLoading, this), t.off(s.a.FRAG_LOADED, this.onFragLoaded, this), t.off(s.a.FRAG_PARSING_USERDATA, this.onFragParsingUserdata, this), t.off(s.a.FRAG_DECRYPTED, this.onFragDecrypted, this), t.off(s.a.INIT_PTS_FOUND, this.onInitPtsFound, this), t.off(s.a.SUBTITLE_TRACKS_CLEARED, this.onSubtitleTracksCleared, this), t.off(s.a.BUFFER_FLUSHING, this.onBufferFlushing, this), this.hls = this.config = this.cea608Parser1 = this.cea608Parser2 = null
            }, e.addCues = function(t, e, i, r, n) {
                for (var a, o, l, u, h = !1, d = n.length; d--;) {
                    var c = n[d],
                        f = (a = c[0], o = c[1], l = e, u = i, Math.min(o, u) - Math.max(a, l));
                    if (f >= 0 && (c[0] = Math.min(c[0], e), c[1] = Math.max(c[1], i), h = !0, f / (i - e) > .5)) return
                }
                if (h || n.push([e, i]), this.config.renderTextTracksNatively) {
                    var g = this.captionsTracks[t];
                    this.Cues.newCue(g, e, i, r)
                } else {
                    var v = this.Cues.newCue(null, e, i, r);
                    this.hls.trigger(s.a.CUES_PARSED, {
                        type: "captions",
                        cues: v,
                        track: t
                    })
                }
            }, e.onInitPtsFound = function(t, e) {
                var i = this,
                    r = e.frag,
                    n = e.id,
                    a = e.initPTS,
                    o = e.timescale,
                    l = this.unparsedVttFrags;
                "main" === n && (this.initPTS[r.cc] = a, this.timescale[r.cc] = o), l.length && (this.unparsedVttFrags = [], l.forEach((function(t) {
                    i.onFragLoaded(s.a.FRAG_LOADED, t)
                })))
            }, e.getExistingTrack = function(t) {
                var e = this.media;
                if (e)
                    for (var i = 0; i < e.textTracks.length; i++) {
                        var r = e.textTracks[i];
                        if (r[t]) return r
                    }
                return null
            }, e.createCaptionsTrack = function(t) {
                this.config.renderTextTracksNatively ? this.createNativeTrack(t) : this.createNonNativeTrack(t)
            }, e.createNativeTrack = function(t) {
                if (!this.captionsTracks[t]) {
                    var e = this.captionsProperties,
                        i = this.captionsTracks,
                        r = this.media,
                        n = e[t],
                        a = n.label,
                        s = n.languageCode,
                        o = this.getExistingTrack(t);
                    if (o) i[t] = o, U(i[t]), M(i[t], r);
                    else {
                        var l = this.createTextTrack("captions", a, s);
                        l && (l[t] = !0, i[t] = l)
                    }
                }
            }, e.createNonNativeTrack = function(t) {
                if (!this.nonNativeCaptionsTracks[t]) {
                    var e = this.captionsProperties[t];
                    if (e) {
                        var i = {
                            _id: t,
                            label: e.label,
                            kind: "captions",
                            default: !!e.media && !!e.media.default,
                            closedCaptions: e.media
                        };
                        this.nonNativeCaptionsTracks[t] = i, this.hls.trigger(s.a.NON_NATIVE_TEXT_TRACKS_FOUND, {
                            tracks: [i]
                        })
                    }
                }
            }, e.createTextTrack = function(t, e, i) {
                var r = this.media;
                if (r) return r.addTextTrack(t, e, i)
            }, e.onMediaAttaching = function(t, e) {
                this.media = e.media, this._cleanTracks()
            }, e.onMediaDetaching = function() {
                var t = this.captionsTracks;
                Object.keys(t).forEach((function(e) {
                    U(t[e]), delete t[e]
                })), this.nonNativeCaptionsTracks = {}
            }, e.onManifestLoading = function() {
                this.lastSn = -1, this.lastPartIndex = -1, this.prevCC = -1, this.vttCCs = {
                    ccOffset: 0,
                    presentationOffset: 0,
                    0: {
                        start: 0,
                        prevCC: -1,
                        new: !0
                    }
                }, this._cleanTracks(), this.tracks = [], this.captionsTracks = {}, this.nonNativeCaptionsTracks = {}, this.textTracks = [], this.unparsedVttFrags = this.unparsedVttFrags || [], this.initPTS = [], this.timescale = [], this.cea608Parser1 && this.cea608Parser2 && (this.cea608Parser1.reset(), this.cea608Parser2.reset())
            }, e._cleanTracks = function() {
                var t = this.media;
                if (t) {
                    var e = t.textTracks;
                    if (e)
                        for (var i = 0; i < e.length; i++) U(e[i])
                }
            }, e.onSubtitleTracksUpdated = function(t, e) {
                var i = this;
                this.textTracks = [];
                var r = e.subtitleTracks || [],
                    n = r.some((function(t) {
                        return "stpp.ttml.im1t" === t.textCodec
                    }));
                if (this.config.enableWebVTT || n && this.config.enableIMSC1) {
                    var a = this.tracks && r && this.tracks.length === r.length;
                    if (this.tracks = r || [], this.config.renderTextTracksNatively) {
                        var o = this.media ? this.media.textTracks : [];
                        this.tracks.forEach((function(t, e) {
                            var r;
                            if (e < o.length) {
                                for (var n = null, a = 0; a < o.length; a++)
                                    if (_i(o[a], t)) {
                                        n = o[a];
                                        break
                                    } n && (r = n)
                            }
                            if (r) U(r);
                            else {
                                var s = i._captionsOrSubtitlesFromCharacteristics(t);
                                (r = i.createTextTrack(s, t.name, t.lang)) && (r.mode = "disabled")
                            }
                            r && (r.groupId = t.groupId, i.textTracks.push(r))
                        }))
                    } else if (!a && this.tracks && this.tracks.length) {
                        var l = this.tracks.map((function(t) {
                            return {
                                label: t.name,
                                kind: t.type.toLowerCase(),
                                default: t.default,
                                subtitleTrack: t
                            }
                        }));
                        this.hls.trigger(s.a.NON_NATIVE_TEXT_TRACKS_FOUND, {
                            tracks: l
                        })
                    }
                }
            }, e._captionsOrSubtitlesFromCharacteristics = function(t) {
                var e;
                if (null !== (e = t.attrs) && void 0 !== e && e.CHARACTERISTICS) {
                    var i = /transcribes-spoken-dialog/gi.test(t.attrs.CHARACTERISTICS),
                        r = /describes-music-and-sound/gi.test(t.attrs.CHARACTERISTICS);
                    if (i && r) return "captions"
                }
                return "subtitles"
            }, e.onManifestLoaded = function(t, e) {
                var i = this;
                this.config.enableCEA708Captions && e.captions && e.captions.forEach((function(t) {
                    var e = /(?:CC|SERVICE)([1-4])/.exec(t.instreamId);
                    if (e) {
                        var r = "textTrack" + e[1],
                            n = i.captionsProperties[r];
                        n && (n.label = t.name, t.lang && (n.languageCode = t.lang), n.media = t)
                    }
                }))
            }, e.onFragLoading = function(t, e) {
                var i = this.cea608Parser1,
                    r = this.cea608Parser2,
                    n = this.lastSn,
                    a = this.lastPartIndex;
                if (this.enabled && i && r && e.frag.type === w.b.MAIN) {
                    var s, o, l = e.frag.sn,
                        u = null != (s = null == e || null === (o = e.part) || void 0 === o ? void 0 : o.index) ? s : -1;
                    l === n + 1 || l === n && u === a + 1 || (i.reset(), r.reset()), this.lastSn = l, this.lastPartIndex = u
                }
            }, e.onFragLoaded = function(t, e) {
                var i = e.frag,
                    r = e.payload,
                    n = this.initPTS,
                    o = this.unparsedVttFrags;
                if (i.type === w.b.SUBTITLE)
                    if (r.byteLength) {
                        if (!Object(a.a)(n[i.cc])) return o.push(e), void(n.length && this.hls.trigger(s.a.SUBTITLE_FRAG_PROCESSED, {
                            success: !1,
                            frag: i,
                            error: new Error("Missing initial subtitle PTS")
                        }));
                        var l = i.decryptdata,
                            u = "stats" in e;
                        if (null == l || null == l.key || "AES-128" !== l.method || u) {
                            var h = this.tracks[i.level],
                                d = this.vttCCs;
                            d[i.cc] || (d[i.cc] = {
                                start: i.start,
                                prevCC: this.prevCC,
                                new: !0
                            }, this.prevCC = i.cc), h && "stpp.ttml.im1t" === h.textCodec ? this._parseIMSC1(i, r) : this._parseVTTs(i, r, d)
                        }
                    } else this.hls.trigger(s.a.SUBTITLE_FRAG_PROCESSED, {
                        success: !1,
                        frag: i,
                        error: new Error("Empty subtitle payload")
                    })
            }, e._parseIMSC1 = function(t, e) {
                var i = this,
                    r = this.hls;
                Ei(e, this.initPTS[t.cc], this.timescale[t.cc], (function(e) {
                    i._appendCues(e, t.level), r.trigger(s.a.SUBTITLE_FRAG_PROCESSED, {
                        success: !0,
                        frag: t
                    })
                }), (function(e) {
                    l.b.log("Failed to parse IMSC1: " + e), r.trigger(s.a.SUBTITLE_FRAG_PROCESSED, {
                        success: !1,
                        frag: t,
                        error: e
                    })
                }))
            }, e._parseVTTs = function(t, e, i) {
                var r, n = this,
                    a = this.hls;
                pi(null !== (r = t.initSegment) && void 0 !== r && r.data ? Object(u.b)(t.initSegment.data, new Uint8Array(e)) : e, this.initPTS[t.cc], this.timescale[t.cc], i, t.cc, t.start, (function(e) {
                    n._appendCues(e, t.level), a.trigger(s.a.SUBTITLE_FRAG_PROCESSED, {
                        success: !0,
                        frag: t
                    })
                }), (function(i) {
                    n._fallbackToIMSC1(t, e), l.b.log("Failed to parse VTT cue: " + i), a.trigger(s.a.SUBTITLE_FRAG_PROCESSED, {
                        success: !1,
                        frag: t,
                        error: i
                    })
                }))
            }, e._fallbackToIMSC1 = function(t, e) {
                var i = this,
                    r = this.tracks[t.level];
                r.textCodec || Ei(e, this.initPTS[t.cc], this.timescale[t.cc], (function() {
                    r.textCodec = "stpp.ttml.im1t", i._parseIMSC1(t, e)
                }), (function() {
                    r.textCodec = "wvtt"
                }))
            }, e._appendCues = function(t, e) {
                var i = this.hls;
                if (this.config.renderTextTracksNatively) {
                    var r = this.textTracks[e];
                    if (!r || "disabled" === r.mode) return;
                    t.forEach((function(t) {
                        return N(r, t)
                    }))
                } else {
                    var n = this.tracks[e];
                    if (!n) return;
                    var a = n.default ? "default" : "subtitles" + e;
                    i.trigger(s.a.CUES_PARSED, {
                        type: "subtitles",
                        cues: t,
                        track: a
                    })
                }
            }, e.onFragDecrypted = function(t, e) {
                var i = e.frag;
                if (i.type === w.b.SUBTITLE) {
                    if (!Object(a.a)(this.initPTS[i.cc])) return void this.unparsedVttFrags.push(e);
                    this.onFragLoaded(s.a.FRAG_LOADED, e)
                }
            }, e.onSubtitleTracksCleared = function() {
                this.tracks = [], this.captionsTracks = {}
            }, e.onFragParsingUserdata = function(t, e) {
                var i = this.cea608Parser1,
                    r = this.cea608Parser2;
                if (this.enabled && i && r)
                    for (var n = 0; n < e.samples.length; n++) {
                        var a = e.samples[n].bytes;
                        if (a) {
                            var s = this.extractCea608Data(a);
                            i.addData(e.samples[n].pts, s[0]), r.addData(e.samples[n].pts, s[1])
                        }
                    }
            }, e.onBufferFlushing = function(t, e) {
                var i = e.startOffset,
                    r = e.endOffset,
                    n = e.endOffsetSubtitles,
                    a = e.type,
                    s = this.media;
                if (s && !(s.currentTime < r)) {
                    if (!a || "video" === a) {
                        var o = this.captionsTracks;
                        Object.keys(o).forEach((function(t) {
                            return B(o[t], i, r)
                        }))
                    }
                    if (this.config.renderTextTracksNatively && 0 === i && void 0 !== n) {
                        var l = this.textTracks;
                        Object.keys(l).forEach((function(t) {
                            return B(l[t], i, n)
                        }))
                    }
                }
            }, e.extractCea608Data = function(t) {
                for (var e = [
                        [],
                        []
                    ], i = 31 & t[0], r = 2, n = 0; n < i; n++) {
                    var a = t[r++],
                        s = 127 & t[r++],
                        o = 127 & t[r++];
                    if (0 !== s || 0 !== o)
                        if (0 != (4 & a)) {
                            var l = 3 & a;
                            0 !== l && 1 !== l || (e[l].push(s), e[l].push(o))
                        }
                }
                return e
            }, t
        }();

        function _i(t, e) {
            return t && t.label === e.name && !(t.textTrack1 || t.textTrack2)
        }

        function Ii(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }
        var Oi, Ci = function() {
                function t(t) {
                    this.autoLevelCapping = void 0, this.firstLevel = void 0, this.media = void 0, this.restrictedLevels = void 0, this.timer = void 0, this.hls = void 0, this.streamController = void 0, this.clientRect = void 0, this.hls = t, this.autoLevelCapping = Number.POSITIVE_INFINITY, this.firstLevel = -1, this.media = null, this.restrictedLevels = [], this.timer = void 0, this.clientRect = null, this.registerListeners()
                }
                var e, i, r, n = t.prototype;
                return n.setStreamController = function(t) {
                    this.streamController = t
                }, n.destroy = function() {
                    this.unregisterListener(), this.hls.config.capLevelToPlayerSize && this.stopCapping(), this.media = null, this.clientRect = null, this.hls = this.streamController = null
                }, n.registerListeners = function() {
                    var t = this.hls;
                    t.on(s.a.FPS_DROP_LEVEL_CAPPING, this.onFpsDropLevelCapping, this), t.on(s.a.MEDIA_ATTACHING, this.onMediaAttaching, this), t.on(s.a.MANIFEST_PARSED, this.onManifestParsed, this), t.on(s.a.BUFFER_CODECS, this.onBufferCodecs, this), t.on(s.a.MEDIA_DETACHING, this.onMediaDetaching, this)
                }, n.unregisterListener = function() {
                    var t = this.hls;
                    t.off(s.a.FPS_DROP_LEVEL_CAPPING, this.onFpsDropLevelCapping, this), t.off(s.a.MEDIA_ATTACHING, this.onMediaAttaching, this), t.off(s.a.MANIFEST_PARSED, this.onManifestParsed, this), t.off(s.a.BUFFER_CODECS, this.onBufferCodecs, this), t.off(s.a.MEDIA_DETACHING, this.onMediaDetaching, this)
                }, n.onFpsDropLevelCapping = function(e, i) {
                    t.isLevelAllowed(i.droppedLevel, this.restrictedLevels) && this.restrictedLevels.push(i.droppedLevel)
                }, n.onMediaAttaching = function(t, e) {
                    this.media = e.media instanceof HTMLVideoElement ? e.media : null
                }, n.onManifestParsed = function(t, e) {
                    var i = this.hls;
                    this.restrictedLevels = [], this.firstLevel = e.firstLevel, i.config.capLevelToPlayerSize && e.video && this.startCapping()
                }, n.onBufferCodecs = function(t, e) {
                    this.hls.config.capLevelToPlayerSize && e.video && this.startCapping()
                }, n.onMediaDetaching = function() {
                    this.stopCapping()
                }, n.detectPlayerSize = function() {
                    if (this.media && this.mediaHeight > 0 && this.mediaWidth > 0) {
                        var t = this.hls.levels;
                        if (t.length) {
                            var e = this.hls;
                            e.autoLevelCapping = this.getMaxLevel(t.length - 1), e.autoLevelCapping > this.autoLevelCapping && this.streamController && this.streamController.nextLevelSwitch(), this.autoLevelCapping = e.autoLevelCapping
                        }
                    }
                }, n.getMaxLevel = function(e) {
                    var i = this,
                        r = this.hls.levels;
                    if (!r.length) return -1;
                    var n = r.filter((function(r, n) {
                        return t.isLevelAllowed(n, i.restrictedLevels) && n <= e
                    }));
                    return this.clientRect = null, t.getMaxLevelByMediaSize(n, this.mediaWidth, this.mediaHeight)
                }, n.startCapping = function() {
                    this.timer || (this.autoLevelCapping = Number.POSITIVE_INFINITY, this.hls.firstLevel = this.getMaxLevel(this.firstLevel), self.clearInterval(this.timer), this.timer = self.setInterval(this.detectPlayerSize.bind(this), 1e3), this.detectPlayerSize())
                }, n.stopCapping = function() {
                    this.restrictedLevels = [], this.firstLevel = -1, this.autoLevelCapping = Number.POSITIVE_INFINITY, this.timer && (self.clearInterval(this.timer), this.timer = void 0)
                }, n.getDimensions = function() {
                    if (this.clientRect) return this.clientRect;
                    var t = this.media,
                        e = {
                            width: 0,
                            height: 0
                        };
                    if (t) {
                        var i = t.getBoundingClientRect();
                        e.width = i.width, e.height = i.height, e.width || e.height || (e.width = i.right - i.left || t.width || 0, e.height = i.bottom - i.top || t.height || 0)
                    }
                    return this.clientRect = e, e
                }, t.isLevelAllowed = function(t, e) {
                    return void 0 === e && (e = []), -1 === e.indexOf(t)
                }, t.getMaxLevelByMediaSize = function(t, e, i) {
                    if (!t || !t.length) return -1;
                    for (var r, n, a = t.length - 1, s = 0; s < t.length; s += 1) {
                        var o = t[s];
                        if ((o.width >= e || o.height >= i) && (r = o, !(n = t[s + 1]) || r.width !== n.width || r.height !== n.height)) {
                            a = s;
                            break
                        }
                    }
                    return a
                }, e = t, (i = [{
                    key: "mediaWidth",
                    get: function() {
                        return this.getDimensions().width * this.contentScaleFactor
                    }
                }, {
                    key: "mediaHeight",
                    get: function() {
                        return this.getDimensions().height * this.contentScaleFactor
                    }
                }, {
                    key: "contentScaleFactor",
                    get: function() {
                        var t = 1;
                        if (!this.hls.config.ignoreDevicePixelRatio) try {
                            t = self.devicePixelRatio
                        } catch (t) {}
                        return t
                    }
                }]) && Ii(e.prototype, i), r && Ii(e, r), Object.defineProperty(e, "prototype", {
                    writable: !1
                }), t
            }(),
            wi = function() {
                function t(t) {
                    this.hls = void 0, this.isVideoPlaybackQualityAvailable = !1, this.timer = void 0, this.media = null, this.lastTime = void 0, this.lastDroppedFrames = 0, this.lastDecodedFrames = 0, this.streamController = void 0, this.hls = t, this.registerListeners()
                }
                var e = t.prototype;
                return e.setStreamController = function(t) {
                    this.streamController = t
                }, e.registerListeners = function() {
                    this.hls.on(s.a.MEDIA_ATTACHING, this.onMediaAttaching, this)
                }, e.unregisterListeners = function() {
                    this.hls.off(s.a.MEDIA_ATTACHING, this.onMediaAttaching)
                }, e.destroy = function() {
                    this.timer && clearInterval(this.timer), this.unregisterListeners(), this.isVideoPlaybackQualityAvailable = !1, this.media = null
                }, e.onMediaAttaching = function(t, e) {
                    var i = this.hls.config;
                    if (i.capLevelOnFPSDrop) {
                        var r = e.media instanceof self.HTMLVideoElement ? e.media : null;
                        this.media = r, r && "function" == typeof r.getVideoPlaybackQuality && (this.isVideoPlaybackQualityAvailable = !0), self.clearInterval(this.timer), this.timer = self.setInterval(this.checkFPSInterval.bind(this), i.fpsDroppedMonitoringPeriod)
                    }
                }, e.checkFPS = function(t, e, i) {
                    var r = performance.now();
                    if (e) {
                        if (this.lastTime) {
                            var n = r - this.lastTime,
                                a = i - this.lastDroppedFrames,
                                o = e - this.lastDecodedFrames,
                                u = 1e3 * a / n,
                                h = this.hls;
                            if (h.trigger(s.a.FPS_DROP, {
                                    currentDropped: a,
                                    currentDecoded: o,
                                    totalDroppedFrames: i
                                }), u > 0 && a > h.config.fpsDroppedMonitoringThreshold * o) {
                                var d = h.currentLevel;
                                l.b.warn("drop FPS ratio greater than max allowed value for currentLevel: " + d), d > 0 && (-1 === h.autoLevelCapping || h.autoLevelCapping >= d) && (d -= 1, h.trigger(s.a.FPS_DROP_LEVEL_CAPPING, {
                                    level: d,
                                    droppedLevel: h.currentLevel
                                }), h.autoLevelCapping = d, this.streamController.nextLevelSwitch())
                            }
                        }
                        this.lastTime = r, this.lastDroppedFrames = i, this.lastDecodedFrames = e
                    }
                }, e.checkFPSInterval = function() {
                    var t = this.media;
                    if (t)
                        if (this.isVideoPlaybackQualityAvailable) {
                            var e = t.getVideoPlaybackQuality();
                            this.checkFPS(t, e.totalVideoFrames, e.droppedVideoFrames)
                        } else this.checkFPS(t, t.webkitDecodedFrameCount, t.webkitDroppedFrameCount)
                }, t
            }();
        ! function(t) {
            t.WIDEVINE = "com.widevine.alpha", t.PLAYREADY = "com.microsoft.playready"
        }(Oi || (Oi = {}));
        var xi = "undefined" != typeof self && self.navigator && self.navigator.requestMediaKeySystemAccess ? self.navigator.requestMediaKeySystemAccess.bind(self.navigator) : null;

        function Pi(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }
        var Fi, Mi, Ni, Ui = function() {
            function t(t) {
                this.hls = void 0, this._widevineLicenseUrl = void 0, this._licenseXhrSetup = void 0, this._licenseResponseCallback = void 0, this._emeEnabled = void 0, this._requestMediaKeySystemAccess = void 0, this._drmSystemOptions = void 0, this._config = void 0, this._mediaKeysList = [], this._media = null, this._hasSetMediaKeys = !1, this._requestLicenseFailureCount = 0, this.mediaKeysPromise = null, this._onMediaEncrypted = this.onMediaEncrypted.bind(this), this.hls = t, this._config = t.config, this._widevineLicenseUrl = this._config.widevineLicenseUrl, this._licenseXhrSetup = this._config.licenseXhrSetup, this._licenseResponseCallback = this._config.licenseResponseCallback, this._emeEnabled = this._config.emeEnabled, this._requestMediaKeySystemAccess = this._config.requestMediaKeySystemAccessFunc, this._drmSystemOptions = this._config.drmSystemOptions, this._registerListeners()
            }
            var e, i, r, n = t.prototype;
            return n.destroy = function() {
                this._unregisterListeners(), this.hls = this._onMediaEncrypted = null, this._requestMediaKeySystemAccess = null
            }, n._registerListeners = function() {
                this.hls.on(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), this.hls.on(s.a.MEDIA_DETACHED, this.onMediaDetached, this), this.hls.on(s.a.MANIFEST_PARSED, this.onManifestParsed, this)
            }, n._unregisterListeners = function() {
                this.hls.off(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), this.hls.off(s.a.MEDIA_DETACHED, this.onMediaDetached, this), this.hls.off(s.a.MANIFEST_PARSED, this.onManifestParsed, this)
            }, n.getLicenseServerUrl = function(t) {
                switch (t) {
                    case Oi.WIDEVINE:
                        if (!this._widevineLicenseUrl) break;
                        return this._widevineLicenseUrl
                }
                throw new Error('no license server URL configured for key-system "' + t + '"')
            }, n._attemptKeySystemAccess = function(t, e, i) {
                var r = this,
                    n = function(t, e, i, r) {
                        switch (t) {
                            case Oi.WIDEVINE:
                                return function(t, e, i) {
                                    var r = {
                                        audioCapabilities: [],
                                        videoCapabilities: []
                                    };
                                    return t.forEach((function(t) {
                                        r.audioCapabilities.push({
                                            contentType: 'audio/mp4; codecs="' + t + '"',
                                            robustness: i.audioRobustness || ""
                                        })
                                    })), e.forEach((function(t) {
                                        r.videoCapabilities.push({
                                            contentType: 'video/mp4; codecs="' + t + '"',
                                            robustness: i.videoRobustness || ""
                                        })
                                    })), [r]
                                }(e, i, r);
                            default:
                                throw new Error("Unknown key-system: " + t)
                        }
                    }(t, e, i, this._drmSystemOptions);
                l.b.log("Requesting encrypted media key-system access");
                var a = this.requestMediaKeySystemAccess(t, n);
                this.mediaKeysPromise = a.then((function(e) {
                    return r._onMediaKeySystemAccessObtained(t, e)
                })), a.catch((function(e) {
                    l.b.error('Failed to obtain key-system "' + t + '" access:', e)
                }))
            }, n._onMediaKeySystemAccessObtained = function(t, e) {
                var i = this;
                l.b.log('Access for key-system "' + t + '" obtained');
                var r = {
                    mediaKeysSessionInitialized: !1,
                    mediaKeySystemAccess: e,
                    mediaKeySystemDomain: t
                };
                this._mediaKeysList.push(r);
                var n = Promise.resolve().then((function() {
                    return e.createMediaKeys()
                })).then((function(e) {
                    return r.mediaKeys = e, l.b.log('Media-keys created for key-system "' + t + '"'), i._onMediaKeysCreated(), e
                }));
                return n.catch((function(t) {
                    l.b.error("Failed to create media-keys:", t)
                })), n
            }, n._onMediaKeysCreated = function() {
                var t = this;
                this._mediaKeysList.forEach((function(e) {
                    e.mediaKeysSession || (e.mediaKeysSession = e.mediaKeys.createSession(), t._onNewMediaKeySession(e.mediaKeysSession))
                }))
            }, n._onNewMediaKeySession = function(t) {
                var e = this;
                l.b.log("New key-system session " + t.sessionId), t.addEventListener("message", (function(i) {
                    e._onKeySessionMessage(t, i.message)
                }), !1)
            }, n._onKeySessionMessage = function(t, e) {
                l.b.log("Got EME message event, creating license request"), this._requestLicense(e, (function(e) {
                    l.b.log("Received license data (length: " + (e ? e.byteLength : e) + "), updating key-session"), t.update(e).catch((function(t) {
                        l.b.warn("Updating key-session failed: " + t)
                    }))
                }))
            }, n.onMediaEncrypted = function(t) {
                var e = this;
                if (l.b.log('Media is encrypted using "' + t.initDataType + '" init data type'), !this.mediaKeysPromise) return l.b.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"), void this.hls.trigger(s.a.ERROR, {
                    type: o.b.KEY_SYSTEM_ERROR,
                    details: o.a.KEY_SYSTEM_NO_KEYS,
                    fatal: !0
                });
                var i = function(i) {
                    e._media && (e._attemptSetMediaKeys(i), e._generateRequestWithPreferredKeySession(t.initDataType, t.initData))
                };
                this.mediaKeysPromise.then(i).catch(i)
            }, n._attemptSetMediaKeys = function(t) {
                if (!this._media) throw new Error("Attempted to set mediaKeys without first attaching a media element");
                if (!this._hasSetMediaKeys) {
                    var e = this._mediaKeysList[0];
                    if (!e || !e.mediaKeys) return l.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"), void this.hls.trigger(s.a.ERROR, {
                        type: o.b.KEY_SYSTEM_ERROR,
                        details: o.a.KEY_SYSTEM_NO_KEYS,
                        fatal: !0
                    });
                    l.b.log("Setting keys for encrypted media"), this._media.setMediaKeys(e.mediaKeys), this._hasSetMediaKeys = !0
                }
            }, n._generateRequestWithPreferredKeySession = function(t, e) {
                var i = this,
                    r = this._mediaKeysList[0];
                if (!r) return l.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"), void this.hls.trigger(s.a.ERROR, {
                    type: o.b.KEY_SYSTEM_ERROR,
                    details: o.a.KEY_SYSTEM_NO_ACCESS,
                    fatal: !0
                });
                if (r.mediaKeysSessionInitialized) l.b.warn("Key-Session already initialized but requested again");
                else {
                    var n = r.mediaKeysSession;
                    if (!n) return l.b.error("Fatal: Media is encrypted but no key-session existing"), void this.hls.trigger(s.a.ERROR, {
                        type: o.b.KEY_SYSTEM_ERROR,
                        details: o.a.KEY_SYSTEM_NO_SESSION,
                        fatal: !0
                    });
                    if (!e) return l.b.warn("Fatal: initData required for generating a key session is null"), void this.hls.trigger(s.a.ERROR, {
                        type: o.b.KEY_SYSTEM_ERROR,
                        details: o.a.KEY_SYSTEM_NO_INIT_DATA,
                        fatal: !0
                    });
                    l.b.log('Generating key-session request for "' + t + '" init data type'), r.mediaKeysSessionInitialized = !0, n.generateRequest(t, e).then((function() {
                        l.b.debug("Key-session generation succeeded")
                    })).catch((function(t) {
                        l.b.error("Error generating key-session request:", t), i.hls.trigger(s.a.ERROR, {
                            type: o.b.KEY_SYSTEM_ERROR,
                            details: o.a.KEY_SYSTEM_NO_SESSION,
                            fatal: !1
                        })
                    }))
                }
            }, n._createLicenseXhr = function(t, e, i) {
                var r = new XMLHttpRequest;
                r.responseType = "arraybuffer", r.onreadystatechange = this._onLicenseRequestReadyStageChange.bind(this, r, t, e, i);
                var n = this._licenseXhrSetup;
                if (n) try {
                    n.call(this.hls, r, t), n = void 0
                } catch (t) {
                    l.b.error(t)
                }
                try {
                    r.readyState || r.open("POST", t, !0), n && n.call(this.hls, r, t)
                } catch (t) {
                    throw new Error("issue setting up KeySystem license XHR " + t)
                }
                return r
            }, n._onLicenseRequestReadyStageChange = function(t, e, i, r) {
                switch (t.readyState) {
                    case 4:
                        if (200 === t.status) {
                            this._requestLicenseFailureCount = 0, l.b.log("License request succeeded");
                            var n = t.response,
                                a = this._licenseResponseCallback;
                            if (a) try {
                                n = a.call(this.hls, t, e)
                            } catch (t) {
                                l.b.error(t)
                            }
                            r(n)
                        } else {
                            if (l.b.error("License Request XHR failed (" + e + "). Status: " + t.status + " (" + t.statusText + ")"), this._requestLicenseFailureCount++, this._requestLicenseFailureCount > 3) return void this.hls.trigger(s.a.ERROR, {
                                type: o.b.KEY_SYSTEM_ERROR,
                                details: o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                                fatal: !0
                            });
                            var u = 3 - this._requestLicenseFailureCount + 1;
                            l.b.warn("Retrying license request, " + u + " attempts left"), this._requestLicense(i, r)
                        }
                }
            }, n._generateLicenseRequestChallenge = function(t, e) {
                switch (t.mediaKeySystemDomain) {
                    case Oi.WIDEVINE:
                        return e
                }
                throw new Error("unsupported key-system: " + t.mediaKeySystemDomain)
            }, n._requestLicense = function(t, e) {
                l.b.log("Requesting content license for key-system");
                var i = this._mediaKeysList[0];
                if (!i) return l.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"), void this.hls.trigger(s.a.ERROR, {
                    type: o.b.KEY_SYSTEM_ERROR,
                    details: o.a.KEY_SYSTEM_NO_ACCESS,
                    fatal: !0
                });
                try {
                    var r = this.getLicenseServerUrl(i.mediaKeySystemDomain),
                        n = this._createLicenseXhr(r, t, e);
                    l.b.log("Sending license request to URL: " + r);
                    var a = this._generateLicenseRequestChallenge(i, t);
                    n.send(a)
                } catch (t) {
                    l.b.error("Failure requesting DRM license: " + t), this.hls.trigger(s.a.ERROR, {
                        type: o.b.KEY_SYSTEM_ERROR,
                        details: o.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                        fatal: !0
                    })
                }
            }, n.onMediaAttached = function(t, e) {
                if (this._emeEnabled) {
                    var i = e.media;
                    this._media = i, i.addEventListener("encrypted", this._onMediaEncrypted)
                }
            }, n.onMediaDetached = function() {
                var t = this._media,
                    e = this._mediaKeysList;
                t && (t.removeEventListener("encrypted", this._onMediaEncrypted), this._media = null, this._mediaKeysList = [], Promise.all(e.map((function(t) {
                    if (t.mediaKeysSession) return t.mediaKeysSession.close().catch((function() {}))
                }))).then((function() {
                    return t.setMediaKeys(null)
                })).catch((function() {})))
            }, n.onManifestParsed = function(t, e) {
                if (this._emeEnabled) {
                    var i = e.levels.map((function(t) {
                            return t.audioCodec
                        })).filter((function(t) {
                            return !!t
                        })),
                        r = e.levels.map((function(t) {
                            return t.videoCodec
                        })).filter((function(t) {
                            return !!t
                        }));
                    this._attemptKeySystemAccess(Oi.WIDEVINE, i, r)
                }
            }, e = t, (i = [{
                key: "requestMediaKeySystemAccess",
                get: function() {
                    if (!this._requestMediaKeySystemAccess) throw new Error("No requestMediaKeySystemAccess function configured");
                    return this._requestMediaKeySystemAccess
                }
            }]) && Pi(e.prototype, i), r && Pi(e, r), Object.defineProperty(e, "prototype", {
                writable: !1
            }), t
        }();

        function Bi(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }

        function Gi(t, e, i) {
            return e && Bi(t.prototype, e), i && Bi(t, i), Object.defineProperty(t, "prototype", {
                writable: !1
            }), t
        }

        function ji(t, e) {
            var i = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
            if (i) return (i = i.call(t)).next.bind(i);
            if (Array.isArray(t) || (i = function(t, e) {
                    if (!t) return;
                    if ("string" == typeof t) return Ki(t, e);
                    var i = Object.prototype.toString.call(t).slice(8, -1);
                    "Object" === i && t.constructor && (i = t.constructor.name);
                    if ("Map" === i || "Set" === i) return Array.from(t);
                    if ("Arguments" === i || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)) return Ki(t, e)
                }(t)) || e && t && "number" == typeof t.length) {
                i && (t = i);
                var r = 0;
                return function() {
                    return r >= t.length ? {
                        done: !0
                    } : {
                        done: !1,
                        value: t[r++]
                    }
                }
            }
            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
        }

        function Ki(t, e) {
            (null == e || e > t.length) && (e = t.length);
            for (var i = 0, r = new Array(e); i < e; i++) r[i] = t[i];
            return r
        }

        function Hi() {
            return (Hi = Object.assign ? Object.assign.bind() : function(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var i = arguments[e];
                    for (var r in i) Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r])
                }
                return t
            }).apply(this, arguments)
        }! function(t) {
            t.MANIFEST = "m", t.AUDIO = "a", t.VIDEO = "v", t.MUXED = "av", t.INIT = "i", t.CAPTION = "c", t.TIMED_TEXT = "tt", t.KEY = "k", t.OTHER = "o"
        }(Fi || (Fi = {})),
        function(t) {
            t.DASH = "d", t.HLS = "h", t.SMOOTH = "s", t.OTHER = "o"
        }(Mi || (Mi = {})),
        function(t) {
            t.VOD = "v", t.LIVE = "l"
        }(Ni || (Ni = {}));
        var Vi = function() {
                function t(e) {
                    var i = this;
                    this.hls = void 0, this.config = void 0, this.media = void 0, this.sid = void 0, this.cid = void 0, this.useHeaders = !1, this.initialized = !1, this.starved = !1, this.buffering = !0, this.audioBuffer = void 0, this.videoBuffer = void 0, this.onWaiting = function() {
                        i.initialized && (i.starved = !0), i.buffering = !0
                    }, this.onPlaying = function() {
                        i.initialized || (i.initialized = !0), i.buffering = !1
                    }, this.applyPlaylistData = function(t) {
                        try {
                            i.apply(t, {
                                ot: Fi.MANIFEST,
                                su: !i.initialized
                            })
                        } catch (t) {
                            l.b.warn("Could not generate manifest CMCD data.", t)
                        }
                    }, this.applyFragmentData = function(t) {
                        try {
                            var e = t.frag,
                                r = i.hls.levels[e.level],
                                n = i.getObjectType(e),
                                a = {
                                    d: 1e3 * e.duration,
                                    ot: n
                                };
                            n !== Fi.VIDEO && n !== Fi.AUDIO && n != Fi.MUXED || (a.br = r.bitrate / 1e3, a.tb = i.getTopBandwidth(n) / 1e3, a.bl = i.getBufferLength(n)), i.apply(t, a)
                        } catch (t) {
                            l.b.warn("Could not generate segment CMCD data.", t)
                        }
                    }, this.hls = e;
                    var r = this.config = e.config,
                        n = r.cmcd;
                    null != n && (r.pLoader = this.createPlaylistLoader(), r.fLoader = this.createFragmentLoader(), this.sid = n.sessionId || t.uuid(), this.cid = n.contentId, this.useHeaders = !0 === n.useHeaders, this.registerListeners())
                }
                var e = t.prototype;
                return e.registerListeners = function() {
                    var t = this.hls;
                    t.on(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), t.on(s.a.MEDIA_DETACHED, this.onMediaDetached, this), t.on(s.a.BUFFER_CREATED, this.onBufferCreated, this)
                }, e.unregisterListeners = function() {
                    var t = this.hls;
                    t.off(s.a.MEDIA_ATTACHED, this.onMediaAttached, this), t.off(s.a.MEDIA_DETACHED, this.onMediaDetached, this), t.off(s.a.BUFFER_CREATED, this.onBufferCreated, this), this.onMediaDetached()
                }, e.destroy = function() {
                    this.unregisterListeners(), this.hls = this.config = this.audioBuffer = this.videoBuffer = null
                }, e.onMediaAttached = function(t, e) {
                    this.media = e.media, this.media.addEventListener("waiting", this.onWaiting), this.media.addEventListener("playing", this.onPlaying)
                }, e.onMediaDetached = function() {
                    this.media && (this.media.removeEventListener("waiting", this.onWaiting), this.media.removeEventListener("playing", this.onPlaying), this.media = null)
                }, e.onBufferCreated = function(t, e) {
                    var i, r;
                    this.audioBuffer = null === (i = e.tracks.audio) || void 0 === i ? void 0 : i.buffer, this.videoBuffer = null === (r = e.tracks.video) || void 0 === r ? void 0 : r.buffer
                }, e.createData = function() {
                    var t;
                    return {
                        v: 1,
                        sf: Mi.HLS,
                        sid: this.sid,
                        cid: this.cid,
                        pr: null === (t = this.media) || void 0 === t ? void 0 : t.playbackRate,
                        mtp: this.hls.bandwidthEstimate / 1e3
                    }
                }, e.apply = function(e, i) {
                    void 0 === i && (i = {}), Hi(i, this.createData());
                    var r = i.ot === Fi.INIT || i.ot === Fi.VIDEO || i.ot === Fi.MUXED;
                    if (this.starved && r && (i.bs = !0, i.su = !0, this.starved = !1), null == i.su && (i.su = this.buffering), this.useHeaders) {
                        var n = t.toHeaders(i);
                        if (!Object.keys(n).length) return;
                        e.headers || (e.headers = {}), Hi(e.headers, n)
                    } else {
                        var a = t.toQuery(i);
                        if (!a) return;
                        e.url = t.appendQueryToUri(e.url, a)
                    }
                }, e.getObjectType = function(t) {
                    var e = t.type;
                    return "subtitle" === e ? Fi.TIMED_TEXT : "initSegment" === t.sn ? Fi.INIT : "audio" === e ? Fi.AUDIO : "main" === e ? this.hls.audioTracks.length ? Fi.VIDEO : Fi.MUXED : void 0
                }, e.getTopBandwidth = function(t) {
                    var e, i = 0,
                        r = this.hls;
                    if (t === Fi.AUDIO) e = r.audioTracks;
                    else {
                        var n = r.maxAutoLevel,
                            a = n > -1 ? n + 1 : r.levels.length;
                        e = r.levels.slice(0, a)
                    }
                    for (var s, o = ji(e); !(s = o()).done;) {
                        var l = s.value;
                        l.bitrate > i && (i = l.bitrate)
                    }
                    return i > 0 ? i : NaN
                }, e.getBufferLength = function(t) {
                    var e = this.hls.media,
                        i = t === Fi.AUDIO ? this.audioBuffer : this.videoBuffer;
                    return i && e ? 1e3 * mt.bufferInfo(i, e.currentTime, this.config.maxBufferHole).len : NaN
                }, e.createPlaylistLoader = function() {
                    var t = this.config.pLoader,
                        e = this.applyPlaylistData,
                        i = t || this.config.loader;
                    return function() {
                        function t(t) {
                            this.loader = void 0, this.loader = new i(t)
                        }
                        var r = t.prototype;
                        return r.destroy = function() {
                            this.loader.destroy()
                        }, r.abort = function() {
                            this.loader.abort()
                        }, r.load = function(t, i, r) {
                            e(t), this.loader.load(t, i, r)
                        }, Gi(t, [{
                            key: "stats",
                            get: function() {
                                return this.loader.stats
                            }
                        }, {
                            key: "context",
                            get: function() {
                                return this.loader.context
                            }
                        }]), t
                    }()
                }, e.createFragmentLoader = function() {
                    var t = this.config.fLoader,
                        e = this.applyFragmentData,
                        i = t || this.config.loader;
                    return function() {
                        function t(t) {
                            this.loader = void 0, this.loader = new i(t)
                        }
                        var r = t.prototype;
                        return r.destroy = function() {
                            this.loader.destroy()
                        }, r.abort = function() {
                            this.loader.abort()
                        }, r.load = function(t, i, r) {
                            e(t), this.loader.load(t, i, r)
                        }, Gi(t, [{
                            key: "stats",
                            get: function() {
                                return this.loader.stats
                            }
                        }, {
                            key: "context",
                            get: function() {
                                return this.loader.context
                            }
                        }]), t
                    }()
                }, t.uuid = function() {
                    var t = URL.createObjectURL(new Blob),
                        e = t.toString();
                    return URL.revokeObjectURL(t), e.slice(e.lastIndexOf("/") + 1)
                }, t.serialize = function(t) {
                    for (var e, i = [], r = function(t) {
                            return !Number.isNaN(t) && null != t && "" !== t && !1 !== t
                        }, n = function(t) {
                            return Math.round(t)
                        }, a = function(t) {
                            return 100 * n(t / 100)
                        }, s = {
                            br: n,
                            d: n,
                            bl: a,
                            dl: a,
                            mtp: a,
                            nor: function(t) {
                                return encodeURIComponent(t)
                            },
                            rtp: a,
                            tb: n
                        }, o = ji(Object.keys(t || {}).sort()); !(e = o()).done;) {
                        var l = e.value,
                            u = t[l];
                        if (r(u) && !("v" === l && 1 === u || "pr" == l && 1 === u)) {
                            var h = s[l];
                            h && (u = h(u));
                            var d = typeof u,
                                c = void 0;
                            c = "ot" === l || "sf" === l || "st" === l ? l + "=" + u : "boolean" === d ? l : "number" === d ? l + "=" + u : l + "=" + JSON.stringify(u), i.push(c)
                        }
                    }
                    return i.join(",")
                }, t.toHeaders = function(e) {
                    for (var i = {}, r = ["Object", "Request", "Session", "Status"], n = [{}, {}, {}, {}], a = {
                            br: 0,
                            d: 0,
                            ot: 0,
                            tb: 0,
                            bl: 1,
                            dl: 1,
                            mtp: 1,
                            nor: 1,
                            nrr: 1,
                            su: 1,
                            cid: 2,
                            pr: 2,
                            sf: 2,
                            sid: 2,
                            st: 2,
                            v: 2,
                            bs: 3,
                            rtp: 3
                        }, s = 0, o = Object.keys(e); s < o.length; s++) {
                        var l = o[s];
                        n[null != a[l] ? a[l] : 1][l] = e[l]
                    }
                    for (var u = 0; u < n.length; u++) {
                        var h = t.serialize(n[u]);
                        h && (i["CMCD-" + r[u]] = h)
                    }
                    return i
                }, t.toQuery = function(e) {
                    return "CMCD=" + encodeURIComponent(t.serialize(e))
                }, t.appendQueryToUri = function(t, e) {
                    if (!e) return t;
                    var i = t.includes("?") ? "&" : "?";
                    return "" + t + i + e
                }, t
            }(),
            Wi = i(14),
            Yi = /^age:\s*[\d.]+\s*$/m,
            qi = function() {
                function t(t) {
                    this.xhrSetup = void 0, this.requestTimeout = void 0, this.retryTimeout = void 0, this.retryDelay = void 0, this.config = null, this.callbacks = null, this.context = void 0, this.loader = null, this.stats = void 0, this.xhrSetup = t ? t.xhrSetup : null, this.stats = new Wi.a, this.retryDelay = 0
                }
                var e = t.prototype;
                return e.destroy = function() {
                    this.callbacks = null, this.abortInternal(), this.loader = null, this.config = null
                }, e.abortInternal = function() {
                    var t = this.loader;
                    self.clearTimeout(this.requestTimeout), self.clearTimeout(this.retryTimeout), t && (t.onreadystatechange = null, t.onprogress = null, 4 !== t.readyState && (this.stats.aborted = !0, t.abort()))
                }, e.abort = function() {
                    var t;
                    this.abortInternal(), null !== (t = this.callbacks) && void 0 !== t && t.onAbort && this.callbacks.onAbort(this.stats, this.context, this.loader)
                }, e.load = function(t, e, i) {
                    if (this.stats.loading.start) throw new Error("Loader can only be used once.");
                    this.stats.loading.start = self.performance.now(), this.context = t, this.config = e, this.callbacks = i, this.retryDelay = e.retryDelay, this.loadInternal()
                }, e.loadInternal = function() {
                    var t = this.config,
                        e = this.context;
                    if (t) {
                        var i = this.loader = new self.XMLHttpRequest,
                            r = this.stats;
                        r.loading.first = 0, r.loaded = 0;
                        var n = this.xhrSetup;
                        try {
                            if (n) try {
                                n(i, e.url)
                            } catch (t) {
                                i.open("GET", e.url, !0), n(i, e.url)
                            }
                            i.readyState || i.open("GET", e.url, !0);
                            var a = this.context.headers;
                            if (a)
                                for (var s in a) i.setRequestHeader(s, a[s])
                        } catch (t) {
                            return void this.callbacks.onError({
                                code: i.status,
                                text: t.message
                            }, e, i)
                        }
                        e.rangeEnd && i.setRequestHeader("Range", "bytes=" + e.rangeStart + "-" + (e.rangeEnd - 1)), i.onreadystatechange = this.readystatechange.bind(this), i.onprogress = this.loadprogress.bind(this), i.responseType = e.responseType, self.clearTimeout(this.requestTimeout), this.requestTimeout = self.setTimeout(this.loadtimeout.bind(this), t.timeout), i.send()
                    }
                }, e.readystatechange = function() {
                    var t = this.context,
                        e = this.loader,
                        i = this.stats;
                    if (t && e) {
                        var r = e.readyState,
                            n = this.config;
                        if (!i.aborted && r >= 2)
                            if (self.clearTimeout(this.requestTimeout), 0 === i.loading.first && (i.loading.first = Math.max(self.performance.now(), i.loading.start)), 4 === r) {
                                e.onreadystatechange = null, e.onprogress = null;
                                var a = e.status;
                                if (a >= 200 && a < 300) {
                                    var s, o;
                                    if (i.loading.end = Math.max(self.performance.now(), i.loading.first), o = "arraybuffer" === t.responseType ? (s = e.response).byteLength : (s = e.responseText).length, i.loaded = i.total = o, !this.callbacks) return;
                                    var u = this.callbacks.onProgress;
                                    if (u && u(i, t, s, e), !this.callbacks) return;
                                    var h = {
                                        url: e.responseURL,
                                        data: s
                                    };
                                    this.callbacks.onSuccess(h, i, t, e)
                                } else i.retry >= n.maxRetry || a >= 400 && a < 499 ? (l.b.error(a + " while loading " + t.url), this.callbacks.onError({
                                    code: a,
                                    text: e.statusText
                                }, t, e)) : (l.b.warn(a + " while loading " + t.url + ", retrying in " + this.retryDelay + "..."), this.abortInternal(), this.loader = null, self.clearTimeout(this.retryTimeout), this.retryTimeout = self.setTimeout(this.loadInternal.bind(this), this.retryDelay), this.retryDelay = Math.min(2 * this.retryDelay, n.maxRetryDelay), i.retry++)
                            } else self.clearTimeout(this.requestTimeout), this.requestTimeout = self.setTimeout(this.loadtimeout.bind(this), n.timeout)
                    }
                }, e.loadtimeout = function() {
                    l.b.warn("timeout while loading " + this.context.url);
                    var t = this.callbacks;
                    t && (this.abortInternal(), t.onTimeout(this.stats, this.context, this.loader))
                }, e.loadprogress = function(t) {
                    var e = this.stats;
                    e.loaded = t.loaded, t.lengthComputable && (e.total = t.total)
                }, e.getCacheAge = function() {
                    var t = null;
                    if (this.loader && Yi.test(this.loader.getAllResponseHeaders())) {
                        var e = this.loader.getResponseHeader("age");
                        t = e ? parseFloat(e) : null
                    }
                    return t
                }, t
            }();

        function zi(t) {
            var e = "function" == typeof Map ? new Map : void 0;
            return (zi = function(t) {
                if (null === t || (i = t, -1 === Function.toString.call(i).indexOf("[native code]"))) return t;
                var i;
                if ("function" != typeof t) throw new TypeError("Super expression must either be null or a function");
                if (void 0 !== e) {
                    if (e.has(t)) return e.get(t);
                    e.set(t, r)
                }

                function r() {
                    return Xi(t, arguments, Ji(this).constructor)
                }
                return r.prototype = Object.create(t.prototype, {
                    constructor: {
                        value: r,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), $i(r, t)
            })(t)
        }

        function Xi(t, e, i) {
            return (Xi = Qi() ? Reflect.construct.bind() : function(t, e, i) {
                var r = [null];
                r.push.apply(r, e);
                var n = new(Function.bind.apply(t, r));
                return i && $i(n, i.prototype), n
            }).apply(null, arguments)
        }

        function Qi() {
            if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
            if (Reflect.construct.sham) return !1;
            if ("function" == typeof Proxy) return !0;
            try {
                return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}))), !0
            } catch (t) {
                return !1
            }
        }

        function $i(t, e) {
            return ($i = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                return t.__proto__ = e, t
            })(t, e)
        }

        function Ji(t) {
            return (Ji = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
                return t.__proto__ || Object.getPrototypeOf(t)
            })(t)
        }

        function Zi() {
            return (Zi = Object.assign ? Object.assign.bind() : function(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var i = arguments[e];
                    for (var r in i) Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r])
                }
                return t
            }).apply(this, arguments)
        }
        var tr = function() {
            function t(t) {
                this.fetchSetup = void 0, this.requestTimeout = void 0, this.request = void 0, this.response = void 0, this.controller = void 0, this.context = void 0, this.config = null, this.callbacks = null, this.stats = void 0, this.loader = null, this.fetchSetup = t.fetchSetup || er, this.controller = new self.AbortController, this.stats = new Wi.a
            }
            var e = t.prototype;
            return e.destroy = function() {
                this.loader = this.callbacks = null, this.abortInternal()
            }, e.abortInternal = function() {
                var t = this.response;
                t && t.ok || (this.stats.aborted = !0, this.controller.abort())
            }, e.abort = function() {
                var t;
                this.abortInternal(), null !== (t = this.callbacks) && void 0 !== t && t.onAbort && this.callbacks.onAbort(this.stats, this.context, this.response)
            }, e.load = function(t, e, i) {
                var r = this,
                    n = this.stats;
                if (n.loading.start) throw new Error("Loader can only be used once.");
                n.loading.start = self.performance.now();
                var s = function(t, e) {
                        var i = {
                            method: "GET",
                            mode: "cors",
                            credentials: "same-origin",
                            signal: e,
                            headers: new self.Headers(Zi({}, t.headers))
                        };
                        t.rangeEnd && i.headers.set("Range", "bytes=" + t.rangeStart + "-" + String(t.rangeEnd - 1));
                        return i
                    }(t, this.controller.signal),
                    o = i.onProgress,
                    l = "arraybuffer" === t.responseType,
                    u = l ? "byteLength" : "length";
                this.context = t, this.config = e, this.callbacks = i, this.request = this.fetchSetup(t, s), self.clearTimeout(this.requestTimeout), this.requestTimeout = self.setTimeout((function() {
                    r.abortInternal(), i.onTimeout(n, t, r.response)
                }), e.timeout), self.fetch(this.request).then((function(i) {
                    if (r.response = r.loader = i, !i.ok) {
                        var s = i.status,
                            u = i.statusText;
                        throw new ir(u || "fetch, bad network response", s, i)
                    }
                    return n.loading.first = Math.max(self.performance.now(), n.loading.start), n.total = parseInt(i.headers.get("Content-Length") || "0"), o && Object(a.a)(e.highWaterMark) ? r.loadProgressively(i, n, t, e.highWaterMark, o) : l ? i.arrayBuffer() : i.text()
                })).then((function(s) {
                    var l = r.response;
                    self.clearTimeout(r.requestTimeout), n.loading.end = Math.max(self.performance.now(), n.loading.first), n.loaded = n.total = s[u];
                    var h = {
                        url: l.url,
                        data: s
                    };
                    o && !Object(a.a)(e.highWaterMark) && o(n, t, s, l), i.onSuccess(h, n, t, l)
                })).catch((function(e) {
                    if (self.clearTimeout(r.requestTimeout), !n.aborted) {
                        var a = e && e.code || 0,
                            s = e ? e.message : null;
                        i.onError({
                            code: a,
                            text: s
                        }, t, e ? e.details : null)
                    }
                }))
            }, e.getCacheAge = function() {
                var t = null;
                if (this.response) {
                    var e = this.response.headers.get("age");
                    t = e ? parseFloat(e) : null
                }
                return t
            }, e.loadProgressively = function(t, e, i, r, n) {
                void 0 === r && (r = 0);
                var a = new pe,
                    s = t.body.getReader();
                return function o() {
                    return s.read().then((function(s) {
                        if (s.done) return a.dataLength && n(e, i, a.flush(), t), Promise.resolve(new ArrayBuffer(0));
                        var l = s.value,
                            u = l.length;
                        return e.loaded += u, u < r || a.dataLength ? (a.push(l), a.dataLength >= r && n(e, i, a.flush(), t)) : n(e, i, l, t), o()
                    })).catch((function() {
                        return Promise.reject()
                    }))
                }()
            }, t
        }();

        function er(t, e) {
            return new self.Request(t.url, e)
        }
        var ir = function(t) {
                var e, i;

                function r(e, i, r) {
                    var n;
                    return (n = t.call(this, e) || this).code = void 0, n.details = void 0, n.code = i, n.details = r, n
                }
                return i = t, (e = r).prototype = Object.create(i.prototype), e.prototype.constructor = e, $i(e, i), r
            }(zi(Error)),
            rr = tr,
            nr = /\s/;

        function ar() {
            return (ar = Object.assign ? Object.assign.bind() : function(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var i = arguments[e];
                    for (var r in i) Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r])
                }
                return t
            }).apply(this, arguments)
        }

        function sr(t, e) {
            var i = Object.keys(t);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(t);
                e && (r = r.filter((function(e) {
                    return Object.getOwnPropertyDescriptor(t, e).enumerable
                }))), i.push.apply(i, r)
            }
            return i
        }

        function or(t) {
            for (var e = 1; e < arguments.length; e++) {
                var i = null != arguments[e] ? arguments[e] : {};
                e % 2 ? sr(Object(i), !0).forEach((function(e) {
                    lr(t, e, i[e])
                })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(i)) : sr(Object(i)).forEach((function(e) {
                    Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(i, e))
                }))
            }
            return t
        }

        function lr(t, e, i) {
            return e in t ? Object.defineProperty(t, e, {
                value: i,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : t[e] = i, t
        }
        var ur = or(or({
            autoStartLoad: !0,
            startPosition: -1,
            defaultAudioCodec: void 0,
            debug: !1,
            capLevelOnFPSDrop: !1,
            capLevelToPlayerSize: !1,
            ignoreDevicePixelRatio: !1,
            initialLiveManifestSize: 1,
            maxBufferLength: 30,
            backBufferLength: 1 / 0,
            maxBufferSize: 6e7,
            maxBufferHole: .1,
            highBufferWatchdogPeriod: 2,
            nudgeOffset: .1,
            nudgeMaxRetry: 3,
            maxFragLookUpTolerance: .25,
            liveSyncDurationCount: 3,
            liveMaxLatencyDurationCount: 1 / 0,
            liveSyncDuration: void 0,
            liveMaxLatencyDuration: void 0,
            maxLiveSyncPlaybackRate: 1,
            liveDurationInfinity: !1,
            liveBackBufferLength: null,
            maxMaxBufferLength: 600,
            enableWorker: !0,
            enableSoftwareAES: !0,
            manifestLoadingTimeOut: 1e4,
            manifestLoadingMaxRetry: 1,
            manifestLoadingRetryDelay: 1e3,
            manifestLoadingMaxRetryTimeout: 64e3,
            startLevel: void 0,
            levelLoadingTimeOut: 1e4,
            levelLoadingMaxRetry: 4,
            levelLoadingRetryDelay: 1e3,
            levelLoadingMaxRetryTimeout: 64e3,
            fragLoadingTimeOut: 2e4,
            fragLoadingMaxRetry: 6,
            fragLoadingRetryDelay: 1e3,
            fragLoadingMaxRetryTimeout: 64e3,
            startFragPrefetch: !1,
            fpsDroppedMonitoringPeriod: 5e3,
            fpsDroppedMonitoringThreshold: .2,
            appendErrorMaxRetry: 3,
            loader: qi,
            fLoader: void 0,
            pLoader: void 0,
            xhrSetup: void 0,
            licenseXhrSetup: void 0,
            licenseResponseCallback: void 0,
            abrController: ve,
            bufferController: Fe,
            capLevelController: Ci,
            fpsController: wi,
            stretchShortVideoTrack: !1,
            maxAudioFramesDrift: 1,
            forceKeyFrameOnDiscontinuity: !0,
            abrEwmaFastLive: 3,
            abrEwmaSlowLive: 9,
            abrEwmaFastVoD: 3,
            abrEwmaSlowVoD: 9,
            abrEwmaDefaultEstimate: 5e5,
            abrBandWidthFactor: .95,
            abrBandWidthUpFactor: .7,
            abrMaxWithRealBitrate: !1,
            maxStarvationDelay: 4,
            maxLoadingDelay: 4,
            minAutoBitrate: 0,
            emeEnabled: !1,
            widevineLicenseUrl: void 0,
            drmSystemOptions: {},
            requestMediaKeySystemAccessFunc: xi,
            testBandwidth: !0,
            progressive: !1,
            lowLatencyMode: !0,
            cmcd: void 0,
            enableDateRangeMetadataCues: !0,
            enableEmsgMetadataCues: !0,
            enableID3MetadataCues: !0
        }, {
            cueHandler: {
                newCue: function(t, e, i, r) {
                    for (var n, a, s, o, l, u = [], h = self.VTTCue || self.TextTrackCue, d = 0; d < r.rows.length; d++)
                        if (s = !0, o = 0, l = "", !(n = r.rows[d]).isEmpty()) {
                            for (var c = 0; c < n.chars.length; c++) nr.test(n.chars[c].uchar) && s ? o++ : (l += n.chars[c].uchar, s = !1);
                            n.cueStartTime = e, e === i && (i += 1e-4), o >= 16 ? o-- : o++;
                            var f = li(l.trim()),
                                g = vi(e, i, f);
                            t && t.cues && t.cues.getCueById(g) || ((a = new h(e, i, f)).id = g, a.line = d + 1, a.align = "left", a.position = 10 + Math.min(80, 10 * Math.floor(8 * o / 32)), u.push(a))
                        } return t && u.length && (u.sort((function(t, e) {
                        return "auto" === t.line || "auto" === e.line ? 0 : t.line > 8 && e.line > 8 ? e.line - t.line : t.line - e.line
                    })), u.forEach((function(e) {
                        return N(t, e)
                    }))), u
                }
            },
            enableWebVTT: !0,
            enableIMSC1: !0,
            enableCEA708Captions: !0,
            captionsTextTrack1Label: "English",
            captionsTextTrack1LanguageCode: "en",
            captionsTextTrack2Label: "Spanish",
            captionsTextTrack2LanguageCode: "es",
            captionsTextTrack3Label: "Unknown CC",
            captionsTextTrack3LanguageCode: "",
            captionsTextTrack4Label: "Unknown CC",
            captionsTextTrack4LanguageCode: "",
            renderTextTracksNatively: !0
        }), {}, {
            subtitleStreamController: De,
            subtitleTrackController: Ce,
            timelineController: ki,
            audioStreamController: Te,
            audioTrackController: Se,
            emeController: Ui,
            cmcdController: Vi
        });

        function hr(t) {
            var e = t.loader;
            e !== rr && e !== qi ? (l.b.log("[config]: Custom loader detected, cannot enable progressive streaming"), t.progressive = !1) : function() {
                if (self.fetch && self.AbortController && self.ReadableStream && self.Request) try {
                    return new self.ReadableStream({}), !0
                } catch (t) {}
                return !1
            }() && (t.loader = rr, t.progressive = !0, t.enableSoftwareAES = !0, l.b.log("[config]: Progressive streaming enabled, using FetchLoader"))
        }

        function dr(t, e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
            }
        }
        var cr = function() {
            function t(e) {
                void 0 === e && (e = {}), this.config = void 0, this.userConfig = void 0, this.coreComponents = void 0, this.networkControllers = void 0, this._emitter = new ae.EventEmitter, this._autoLevelCapping = void 0, this.abrController = void 0, this.bufferController = void 0, this.capLevelController = void 0, this.latencyController = void 0, this.levelController = void 0, this.streamController = void 0, this.audioTrackController = void 0, this.subtitleTrackController = void 0, this.emeController = void 0, this.cmcdController = void 0, this._media = null, this.url = null;
                var i = this.config = function(t, e) {
                    if ((e.liveSyncDurationCount || e.liveMaxLatencyDurationCount) && (e.liveSyncDuration || e.liveMaxLatencyDuration)) throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");
                    if (void 0 !== e.liveMaxLatencyDurationCount && (void 0 === e.liveSyncDurationCount || e.liveMaxLatencyDurationCount <= e.liveSyncDurationCount)) throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');
                    if (void 0 !== e.liveMaxLatencyDuration && (void 0 === e.liveSyncDuration || e.liveMaxLatencyDuration <= e.liveSyncDuration)) throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');
                    return ar({}, t, e)
                }(t.DefaultConfig, e);
                this.userConfig = e, Object(l.a)(i.debug), this._autoLevelCapping = -1, i.progressive && hr(i);
                var r = i.abrController,
                    n = i.bufferController,
                    a = i.capLevelController,
                    s = i.fpsController,
                    o = this.abrController = new r(this),
                    u = this.bufferController = new n(this),
                    h = this.capLevelController = new a(this),
                    d = new s(this),
                    c = new P(this),
                    f = new F(this),
                    g = new V(this),
                    v = this.levelController = new dt(this),
                    p = new ct(this),
                    m = this.streamController = new de(this, p);
                h.setStreamController(m), d.setStreamController(m);
                var y = [c, f, v, m];
                this.networkControllers = y;
                var T = [o, u, h, d, g, p];
                this.audioTrackController = this.createController(i.audioTrackController, null, y), this.createController(i.audioStreamController, p, y), this.subtitleTrackController = this.createController(i.subtitleTrackController, null, y), this.createController(i.subtitleStreamController, p, y), this.createController(i.timelineController, null, T), this.emeController = this.createController(i.emeController, null, T), this.cmcdController = this.createController(i.cmcdController, null, T), this.latencyController = this.createController(q, null, T), this.coreComponents = T
            }
            t.isSupported = function() {
                return function() {
                    var t = ee();
                    if (!t) return !1;
                    var e = ie(),
                        i = t && "function" == typeof t.isTypeSupported && t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),
                        r = !e || e.prototype && "function" == typeof e.prototype.appendBuffer && "function" == typeof e.prototype.remove;
                    return !!i && !!r
                }()
            };
            var e, i, r, a = t.prototype;
            return a.createController = function(t, e, i) {
                if (t) {
                    var r = e ? new t(this, e) : new t(this);
                    return i && i.push(r), r
                }
                return null
            }, a.on = function(t, e, i) {
                void 0 === i && (i = this), this._emitter.on(t, e, i)
            }, a.once = function(t, e, i) {
                void 0 === i && (i = this), this._emitter.once(t, e, i)
            }, a.removeAllListeners = function(t) {
                this._emitter.removeAllListeners(t)
            }, a.off = function(t, e, i, r) {
                void 0 === i && (i = this), this._emitter.off(t, e, i, r)
            }, a.listeners = function(t) {
                return this._emitter.listeners(t)
            }, a.emit = function(t, e, i) {
                return this._emitter.emit(t, e, i)
            }, a.trigger = function(t, e) {
                if (this.config.debug) return this.emit(t, t, e);
                try {
                    return this.emit(t, t, e)
                } catch (e) {
                    l.b.error("An internal error happened while handling event " + t + '. Error message: "' + e.message + '". Here is a stacktrace:', e), this.trigger(s.a.ERROR, {
                        type: o.b.OTHER_ERROR,
                        details: o.a.INTERNAL_EXCEPTION,
                        fatal: !1,
                        event: t,
                        error: e
                    })
                }
                return !1
            }, a.listenerCount = function(t) {
                return this._emitter.listenerCount(t)
            }, a.destroy = function() {
                l.b.log("destroy"), this.trigger(s.a.DESTROYING, void 0), this.detachMedia(), this.removeAllListeners(), this._autoLevelCapping = -1, this.url = null, this.networkControllers.forEach((function(t) {
                    return t.destroy()
                })), this.networkControllers.length = 0, this.coreComponents.forEach((function(t) {
                    return t.destroy()
                })), this.coreComponents.length = 0
            }, a.attachMedia = function(t) {
                l.b.log("attachMedia"), this._media = t, this.trigger(s.a.MEDIA_ATTACHING, {
                    media: t
                })
            }, a.detachMedia = function() {
                l.b.log("detachMedia"), this.trigger(s.a.MEDIA_DETACHING, void 0), this._media = null
            }, a.loadSource = function(t) {
                this.stopLoad();
                var e = this.media,
                    i = this.url,
                    r = this.url = n.buildAbsoluteURL(self.location.href, t, {
                        alwaysNormalize: !0
                    });
                l.b.log("loadSource:" + r), e && i && i !== r && this.bufferController.hasSourceTypes() && (this.detachMedia(), this.attachMedia(e)), this.trigger(s.a.MANIFEST_LOADING, {
                    url: t
                })
            }, a.startLoad = function(t) {
                void 0 === t && (t = -1), l.b.log("startLoad(" + t + ")"), this.networkControllers.forEach((function(e) {
                    e.startLoad(t)
                }))
            }, a.stopLoad = function() {
                l.b.log("stopLoad"), this.networkControllers.forEach((function(t) {
                    t.stopLoad()
                }))
            }, a.swapAudioCodec = function() {
                l.b.log("swapAudioCodec"), this.streamController.swapAudioCodec()
            }, a.recoverMediaError = function() {
                l.b.log("recoverMediaError");
                var t = this._media;
                this.detachMedia(), t && this.attachMedia(t)
            }, a.removeLevel = function(t, e) {
                void 0 === e && (e = 0), this.levelController.removeLevel(t, e)
            }, e = t, r = [{
                key: "version",
                get: function() {
                    return "1.2.3"
                }
            }, {
                key: "Events",
                get: function() {
                    return s.a
                }
            }, {
                key: "ErrorTypes",
                get: function() {
                    return o.b
                }
            }, {
                key: "ErrorDetails",
                get: function() {
                    return o.a
                }
            }, {
                key: "DefaultConfig",
                get: function() {
                    return t.defaultConfig ? t.defaultConfig : ur
                },
                set: function(e) {
                    t.defaultConfig = e
                }
            }], (i = [{
                key: "levels",
                get: function() {
                    var t = this.levelController.levels;
                    return t || []
                }
            }, {
                key: "currentLevel",
                get: function() {
                    return this.streamController.currentLevel
                },
                set: function(t) {
                    l.b.log("set currentLevel:" + t), this.loadLevel = t, this.abrController.clearTimer(), this.streamController.immediateLevelSwitch()
                }
            }, {
                key: "nextLevel",
                get: function() {
                    return this.streamController.nextLevel
                },
                set: function(t) {
                    l.b.log("set nextLevel:" + t), this.levelController.manualLevel = t, this.streamController.nextLevelSwitch()
                }
            }, {
                key: "loadLevel",
                get: function() {
                    return this.levelController.level
                },
                set: function(t) {
                    l.b.log("set loadLevel:" + t), this.levelController.manualLevel = t
                }
            }, {
                key: "nextLoadLevel",
                get: function() {
                    return this.levelController.nextLoadLevel
                },
                set: function(t) {
                    this.levelController.nextLoadLevel = t
                }
            }, {
                key: "firstLevel",
                get: function() {
                    return Math.max(this.levelController.firstLevel, this.minAutoLevel)
                },
                set: function(t) {
                    l.b.log("set firstLevel:" + t), this.levelController.firstLevel = t
                }
            }, {
                key: "startLevel",
                get: function() {
                    return this.levelController.startLevel
                },
                set: function(t) {
                    l.b.log("set startLevel:" + t), -1 !== t && (t = Math.max(t, this.minAutoLevel)), this.levelController.startLevel = t
                }
            }, {
                key: "capLevelToPlayerSize",
                get: function() {
                    return this.config.capLevelToPlayerSize
                },
                set: function(t) {
                    var e = !!t;
                    e !== this.config.capLevelToPlayerSize && (e ? this.capLevelController.startCapping() : (this.capLevelController.stopCapping(), this.autoLevelCapping = -1, this.streamController.nextLevelSwitch()), this.config.capLevelToPlayerSize = e)
                }
            }, {
                key: "autoLevelCapping",
                get: function() {
                    return this._autoLevelCapping
                },
                set: function(t) {
                    this._autoLevelCapping !== t && (l.b.log("set autoLevelCapping:" + t), this._autoLevelCapping = t)
                }
            }, {
                key: "bandwidthEstimate",
                get: function() {
                    var t = this.abrController.bwEstimator;
                    return t ? t.getEstimate() : NaN
                }
            }, {
                key: "autoLevelEnabled",
                get: function() {
                    return -1 === this.levelController.manualLevel
                }
            }, {
                key: "manualLevel",
                get: function() {
                    return this.levelController.manualLevel
                }
            }, {
                key: "minAutoLevel",
                get: function() {
                    var t = this.levels,
                        e = this.config.minAutoBitrate;
                    if (!t) return 0;
                    for (var i = t.length, r = 0; r < i; r++)
                        if (t[r].maxBitrate >= e) return r;
                    return 0
                }
            }, {
                key: "maxAutoLevel",
                get: function() {
                    var t = this.levels,
                        e = this.autoLevelCapping;
                    return -1 === e && t && t.length ? t.length - 1 : e
                }
            }, {
                key: "nextAutoLevel",
                get: function() {
                    return Math.min(Math.max(this.abrController.nextAutoLevel, this.minAutoLevel), this.maxAutoLevel)
                },
                set: function(t) {
                    this.abrController.nextAutoLevel = Math.max(this.minAutoLevel, t)
                }
            }, {
                key: "playingDate",
                get: function() {
                    return this.streamController.currentProgramDateTime
                }
            }, {
                key: "audioTracks",
                get: function() {
                    var t = this.audioTrackController;
                    return t ? t.audioTracks : []
                }
            }, {
                key: "audioTrack",
                get: function() {
                    var t = this.audioTrackController;
                    return t ? t.audioTrack : -1
                },
                set: function(t) {
                    var e = this.audioTrackController;
                    e && (e.audioTrack = t)
                }
            }, {
                key: "subtitleTracks",
                get: function() {
                    var t = this.subtitleTrackController;
                    return t ? t.subtitleTracks : []
                }
            }, {
                key: "subtitleTrack",
                get: function() {
                    var t = this.subtitleTrackController;
                    return t ? t.subtitleTrack : -1
                },
                set: function(t) {
                    var e = this.subtitleTrackController;
                    e && (e.subtitleTrack = t)
                }
            }, {
                key: "media",
                get: function() {
                    return this._media
                }
            }, {
                key: "subtitleDisplay",
                get: function() {
                    var t = this.subtitleTrackController;
                    return !!t && t.subtitleDisplay
                },
                set: function(t) {
                    var e = this.subtitleTrackController;
                    e && (e.subtitleDisplay = t)
                }
            }, {
                key: "lowLatencyMode",
                get: function() {
                    return this.config.lowLatencyMode
                },
                set: function(t) {
                    this.config.lowLatencyMode = t
                }
            }, {
                key: "liveSyncPosition",
                get: function() {
                    return this.latencyController.liveSyncPosition
                }
            }, {
                key: "latency",
                get: function() {
                    return this.latencyController.latency
                }
            }, {
                key: "maxLatency",
                get: function() {
                    return this.latencyController.maxLatency
                }
            }, {
                key: "targetLatency",
                get: function() {
                    return this.latencyController.targetLatency
                }
            }, {
                key: "drift",
                get: function() {
                    return this.latencyController.drift
                }
            }, {
                key: "forceStartLoad",
                get: function() {
                    return this.streamController.forceStartLoad
                }
            }]) && dr(e.prototype, i), r && dr(e, r), Object.defineProperty(e, "prototype", {
                writable: !1
            }), t
        }();
        cr.defaultConfig = void 0
    }]).default
}));